var THREE={REVISION:"67"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestAnimationFrame;++c)self.requestAnimationFrame=self[b[c]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[c]+"CancelAnimationFrame"]||self[b[c]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var c=Date.now(),d=Math.max(0,16-(c-a)),e=self.setTimeout(function(){b(c+d)},d);return a=c+d,e}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})}(),THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(a)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){return a instanceof THREE.Color?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,b,c){return this.r=a,this.g=b,this.b=c,this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var d=function(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+6*(b-a)*(2/3-c):a},e=.5>=c?c*(1+b):c+b-c*b,f=2*c-e;this.r=d(f,e,a+1/3),this.g=d(f,e,a),this.b=d(f,e,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a)){var b=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a);return this.r=Math.min(255,parseInt(b[1],10))/255,this.g=Math.min(255,parseInt(b[2],10))/255,this.b=Math.min(255,parseInt(b[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a)){var b=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a);return this.r=Math.min(100,parseInt(b[1],10))/100,this.g=Math.min(100,parseInt(b[2],10))/100,this.b=Math.min(100,parseInt(b[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(a)){var b=/^\#([0-9a-f]{6})$/i.exec(a);return this.setHex(parseInt(b[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a)){var b=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a);return this.setHex(parseInt(b[1]+b[1]+b[2]+b[2]+b[3]+b[3],16)),this}return/^(\w+)$/i.test(a)?(this.setHex(THREE.ColorKeywords[a]),this):void 0},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a){return this.r=a.r*a.r,this.g=a.g*a.g,this.b=a.b*a.b,this},copyLinearToGamma:function(a){return this.r=Math.sqrt(a.r),this.g=Math.sqrt(a.g),this.b=Math.sqrt(a.b),this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;return this.r=a*a,this.g=b*b,this.b=c*c,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var b,c,d=a||{h:0,s:0,l:0},e=this.r,f=this.g,g=this.b,h=Math.max(e,f,g),i=Math.min(e,f,g),j=(i+h)/2;if(i===h)b=0,c=0;else{var k=h-i;switch(c=.5>=j?k/(h+i):k/(2-h-i),h){case e:b=(f-g)/k+(g>f?6:0);break;case f:b=(g-e)/k+2;break;case g:b=(e-f)/k+4}b/=6}return d.h=b,d.s=c,d.l=j,d},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();return d.h+=a,d.s+=b,d.l+=c,this.setHSL(d.h,d.s,d.l),this},add:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this},addColors:function(a,b){return this.r=a.r+b.r,this.g=a.g+b.g,this.b=a.b+b.b,this},addScalar:function(a){return this.r+=a,this.g+=a,this.b+=a,this},multiply:function(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this},multiplyScalar:function(a){return this.r*=a,this.g*=a,this.b*=a,this},lerp:function(a,b){return this.r+=(a.r-this.r)*b,this.g+=(a.g-this.g)*b,this.b+=(a.b-this.b)*b,this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){return this.r=a[0],this.g=a[1],this.b=a[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(a,b,c,d){this._x=a||0,this._y=b||0,this._z=c||0,this._w=void 0!==d?d:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a,this.onChangeCallback()},set:function(a,b,c,d){return this._x=a,this._y=b,this._z=c,this._w=d,this.onChangeCallback(),this},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._w=a._w,this.onChangeCallback(),this},setFromEuler:function(a,b){if(a instanceof THREE.Euler==!1)throw new Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),g=Math.sin(a._y/2),h=Math.sin(a._z/2);return"XYZ"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"YXZ"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"ZXY"===a.order?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"ZYX"===a.order?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"YZX"===a.order?(this._x=f*d*e+c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e-f*g*h):"XZY"===a.order&&(this._x=f*d*e-c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e+f*g*h),b!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);return this._x=a.x*d,this._y=a.y*d,this._z=a.z*d,this._w=Math.cos(c),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var b,c=a.elements,d=c[0],e=c[4],f=c[8],g=c[1],h=c[5],i=c[9],j=c[2],k=c[6],l=c[10],m=d+h+l;return m>0?(b=.5/Math.sqrt(m+1),this._w=.25/b,this._x=(k-i)*b,this._y=(f-j)*b,this._z=(g-e)*b):d>h&&d>l?(b=2*Math.sqrt(1+d-h-l),this._w=(k-i)/b,this._x=.25*b,this._y=(e+g)/b,this._z=(f+j)/b):h>l?(b=2*Math.sqrt(1+h-d-l),this._w=(f-j)/b,this._x=(e+g)/b,this._y=.25*b,this._z=(i+k)/b):(b=2*Math.sqrt(1+l-d-h),this._w=(g-e)/b,this._x=(f+j)/b,this._y=(i+k)/b,this._z=.25*b),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,b,c=1e-6;return function(d,e){return void 0===a&&(a=new THREE.Vector3),b=d.dot(e)+1,c>b?(b=0,Math.abs(d.x)>Math.abs(d.z)?a.set(-d.y,d.x,0):a.set(0,-d.z,d.y)):a.crossVectors(d,e),this._x=a.x,this._y=a.y,this._z=a.z,this._w=b,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this.onChangeCallback(),this},multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,i=b._z,j=b._w;return this._x=c*j+f*g+d*i-e*h,this._y=d*j+f*h+e*g-c*i,this._z=e*j+f*i+c*h-d*g,this._w=f*j-c*g-d*h-e*i,this.onChangeCallback(),this},multiplyVector3:function(a){return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;if(0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a),g>=1)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=Math.acos(g),i=Math.sqrt(1-g*g);if(Math.abs(i)<.001)return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var j=Math.sin((1-b)*h)/i,k=Math.sin(b*h)/i;return this._w=f*j+this._w*k,this._x=c*j+this._x*k,this._y=d*j+this._y*k,this._z=e*j+this._z*k,this.onChangeCallback(),this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],this._w=a[3],this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._w]},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)},THREE.Vector2=function(a,b){this.x=a||0,this.y=b||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){return this.x=a,this.y=b,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this)},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},addScalar:function(a){return this.x+=a,this.y+=a,this},sub:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this)},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return this.x*=a,this.y*=a,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},divideScalar:function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b}else this.x=0,this.y=0;return this},min:function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},max:function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},clamp:function(a,b){return this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x),this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y),this},clampScalar:function(){var a,b;return function(c,d){return void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2),a.set(c,c),b.set(d,d),this.clamp(a,b)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},setLength:function(a){var b=this.length();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){return this.x=a[0],this.y=a[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){return this.x=a,this.y=b,this.z=c,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},sub:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this},multiplyVectors:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this},applyEuler:function(){var a;return function(b){return b instanceof THREE.Euler==!1&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code."),void 0===a&&(a=new THREE.Quaternion),this.applyQuaternion(a.setFromEuler(b)),this}}(),applyAxisAngle:function(){var a;return function(b,c){return void 0===a&&(a=new THREE.Quaternion),this.applyQuaternion(a.setFromAxisAngle(b,c)),this}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[3]*c+e[6]*d,this.y=e[1]*b+e[4]*c+e[7]*d,this.z=e[2]*b+e[5]*c+e[8]*d,this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements,f=1/(e[3]*b+e[7]*c+e[11]*d+e[15]);return this.x=(e[0]*b+e[4]*c+e[8]*d+e[12])*f,this.y=(e[1]*b+e[5]*c+e[9]*d+e[13])*f,this.z=(e[2]*b+e[6]*c+e[10]*d+e[14])*f,this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;return this.x=i*h+l*-e+j*-g-k*-f,this.y=j*h+l*-f+k*-e-i*-g,this.z=k*h+l*-g+i*-f-j*-e,this},transformDirection:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d,this.y=e[1]*b+e[5]*c+e[9]*d,this.z=e[2]*b+e[6]*c+e[10]*d,this.normalize(),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},min:function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this.z>a.z&&(this.z=a.z),this},max:function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this.z<a.z&&(this.z=a.z),this},clamp:function(a,b){return this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x),this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y),this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z),this},clampScalar:function(){var a,b;return function(c,d){return void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3),a.set(c,c,c),b.set(d,d,d),this.clamp(a,b)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},cross:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;return this.x=d*a.z-e*a.y,this.y=e*a.x-c*a.z,this.z=c*a.y-d*a.x,this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=d*h-e*g,this.y=e*f-c*h,this.z=c*g-d*f,this},projectOnVector:function(){var a,b;return function(c){return void 0===a&&(a=new THREE.Vector3),a.copy(c).normalize(),b=this.dot(a),this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){return void 0===a&&(a=new THREE.Vector3),a.copy(this).projectOnVector(b),this.sub(a)}}(),reflect:function(){var a;return function(b){return void 0===a&&(a=new THREE.Vector3),this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){var b=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(b,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d},setEulerFromRotationMatrix:function(a,b){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},setEulerFromQuaternion:function(a,b){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(a){return console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){return console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code."),this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){return this.x=a.elements[12],this.y=a.elements[13],this.z=a.elements[14],this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),d=this.set(a.elements[8],a.elements[9],a.elements[10]).length();return this.x=b,this.y=c,this.z=d,this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;return this.x=d[c],this.y=d[c+1],this.z=d[c+2],this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){return this.x=a[0],this.y=a[1],this.z=a[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(a,b,c,d){this.x=a||0,this.y=b||0,this.z=c||0,this.w=void 0!==d?d:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){return this.x=a,this.y=b,this.z=c,this.w=d,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setW:function(a){return this.w=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},sub:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w,f=a.elements;return this.x=f[0]*b+f[4]*c+f[8]*d+f[12]*e,this.y=f[1]*b+f[5]*c+f[9]*d+f[13]*e,this.z=f[2]*b+f[6]*c+f[10]*d+f[14]*e,this.w=f[3]*b+f[7]*c+f[11]*d+f[15]*e,this},divideScalar:function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b,this.w*=b}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);return 1e-4>b?(this.x=1,this.y=0,this.z=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b),this},setAxisAngleFromRotationMatrix:function(a){var b,c,d,e,f=.01,g=.1,h=a.elements,i=h[0],j=h[4],k=h[8],l=h[1],m=h[5],n=h[9],o=h[2],p=h[6],q=h[10];if(Math.abs(j-l)<f&&Math.abs(k-o)<f&&Math.abs(n-p)<f){if(Math.abs(j+l)<g&&Math.abs(k+o)<g&&Math.abs(n+p)<g&&Math.abs(i+m+q-3)<g)return this.set(1,0,0,0),this;b=Math.PI;var r=(i+1)/2,s=(m+1)/2,t=(q+1)/2,u=(j+l)/4,v=(k+o)/4,w=(n+p)/4;return r>s&&r>t?f>r?(c=0,d=.707106781,e=.707106781):(c=Math.sqrt(r),d=u/c,e=v/c):s>t?f>s?(c=.707106781,d=0,e=.707106781):(d=Math.sqrt(s),c=u/d,e=w/d):f>t?(c=.707106781,d=.707106781,e=0):(e=Math.sqrt(t),c=v/e,d=w/e),this.set(c,d,e,b),this}var x=Math.sqrt((p-n)*(p-n)+(k-o)*(k-o)+(l-j)*(l-j));return Math.abs(x)<.001&&(x=1),this.x=(p-n)/x,this.y=(k-o)/x,this.z=(l-j)/x,this.w=Math.acos((i+m+q-1)/2),this},min:function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this.z>a.z&&(this.z=a.z),this.w>a.w&&(this.w=a.w),this},max:function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this.z<a.z&&(this.z=a.z),this.w<a.w&&(this.w=a.w),this},clamp:function(a,b){return this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x),this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y),this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z),this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w),this},clampScalar:function(){var a,b;return function(c,d){return void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4),a.set(c,c,c,c),b.set(d,d,d,d),this.clamp(a,b)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a){return this.x=a[0],this.y=a[1],this.z=a[2],this.w=a[3],this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(a,b,c,d){this._x=a||0,this._y=b||0,this._z=c||0,this._order=d||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a,this.onChangeCallback()},set:function(a,b,c,d){return this._x=a,this._y=b,this._z=c,this._order=d||this._order,this.onChangeCallback(),this},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this.onChangeCallback(),this},setFromRotationMatrix:function(a,b){var c=THREE.Math.clamp,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[1],i=d[5],j=d[9],k=d[2],l=d[6],m=d[10];return b=b||this._order,"XYZ"===b?(this._y=Math.asin(c(g,-1,1)),Math.abs(g)<.99999?(this._x=Math.atan2(-j,m),this._z=Math.atan2(-f,e)):(this._x=Math.atan2(l,i),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(j,-1,1)),Math.abs(j)<.99999?(this._y=Math.atan2(g,m),this._z=Math.atan2(h,i)):(this._y=Math.atan2(-k,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(-k,m),this._z=Math.atan2(-f,i)):(this._y=0,this._z=Math.atan2(h,e))):"ZYX"===b?(this._y=Math.asin(-c(k,-1,1)),Math.abs(k)<.99999?(this._x=Math.atan2(l,m),this._z=Math.atan2(h,e)):(this._x=0,this._z=Math.atan2(-f,i))):"YZX"===b?(this._z=Math.asin(c(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-j,i),this._y=Math.atan2(-k,e)):(this._x=0,this._y=Math.atan2(g,m))):"XZY"===b?(this._z=Math.asin(-c(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(l,i),this._y=Math.atan2(g,e)):(this._x=Math.atan2(-j,m),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+b),this._order=b,this.onChangeCallback(),this},setFromQuaternion:function(a,b,c){var d=THREE.Math.clamp,e=a.x*a.x,f=a.y*a.y,g=a.z*a.z,h=a.w*a.w;return b=b||this._order,"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),h-e-f+g),
this._y=Math.asin(d(2*(a.x*a.z+a.y*a.w),-1,1)),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),h+e-f-g)):"YXZ"===b?(this._x=Math.asin(d(2*(a.x*a.w-a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),h-e-f+g),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),h-e+f-g)):"ZXY"===b?(this._x=Math.asin(d(2*(a.x*a.w+a.y*a.z),-1,1)),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),h-e-f+g),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),h-e+f-g)):"ZYX"===b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),h-e-f+g),this._y=Math.asin(d(2*(a.y*a.w-a.x*a.z),-1,1)),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),h+e-f-g)):"YZX"===b?(this._x=Math.atan2(2*(a.x*a.w-a.z*a.y),h-e+f-g),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),h+e-f-g),this._z=Math.asin(d(2*(a.x*a.y+a.z*a.w),-1,1))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),h-e+f-g),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),h+e-f-g),this._z=Math.asin(d(2*(a.z*a.w-a.x*a.y),-1,1))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+b),this._order=b,c!==!1&&this.onChangeCallback(),this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this),this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3,this.end=void 0!==b?b:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){return this.start.copy(a),this.end.copy(b),this},copy:function(a){return this.start.copy(a.start),this.end.copy(a.end),this},center:function(a){var b=a||new THREE.Vector3;return b.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){var b=a||new THREE.Vector3;return b.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start),b.subVectors(this.end,this.start);var e=b.dot(b),f=b.dot(a),g=f/e;return d&&(g=THREE.Math.clamp(g,0,1)),g}}(),closestPointToPoint:function(a,b,c){var d=this.closestPointToPointParameter(a,b),e=c||new THREE.Vector3;return this.delta(e).multiplyScalar(d).add(this.start)},applyMatrix4:function(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(1/0,1/0),this.max=void 0!==b?b:new THREE.Vector2(-(1/0),-(1/0))},THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){return this.min.copy(a),this.max.copy(b),this},setFromPoints:function(a){if(a.length>0){var b=a[0];this.min.copy(b),this.max.copy(b);for(var c=1,d=a.length;d>c;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(.5);return this.min.copy(b).sub(d),this.max.copy(b).add(d),this}}(),copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){var b=a||new THREE.Vector2;return b.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){var b=a||new THREE.Vector2;return b.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){var c=b||new THREE.Vector2;return c.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){var c=b||new THREE.Vector2;return c.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==b?b:new THREE.Vector3(-(1/0),-(1/0),-(1/0))},THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){return this.min.copy(a),this.max.copy(b),this},addPoint:function(a){return a.x<this.min.x?this.min.x=a.x:a.x>this.max.x&&(this.max.x=a.x),a.y<this.min.y?this.min.y=a.y:a.y>this.max.y&&(this.max.y=a.y),a.z<this.min.z?this.min.z=a.z:a.z>this.max.z&&(this.max.z=a.z),this},setFromPoints:function(a){if(a.length>0){var b=a[0];this.min.copy(b),this.max.copy(b);for(var c=1,d=a.length;d>c;c++)this.addPoint(a[c])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);return this.min.copy(b).sub(d),this.max.copy(b).add(d),this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;return b.updateMatrixWorld(!0),this.makeEmpty(),b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var d=b.geometry.vertices,e=0,f=d.length;f>e;e++)a.copy(d[e]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)}),this}}(),copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){var b=a||new THREE.Vector3;return b.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){var b=a||new THREE.Vector3;return b.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){var c=b||new THREE.Vector3;return c.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){var c=b||new THREE.Vector3;return c.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){var c=b||new THREE.Sphere;return c.center=this.center(),c.radius=.5*this.size(a).length(),c}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){return a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b),this.makeEmpty(),this.setFromPoints(a),this}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(a,b,c,d,e,f,g,h,i){this.elements=new Float32Array(9);var j=this.elements;j[0]=void 0!==a?a:1,j[3]=b||0,j[6]=c||0,j[1]=d||0,j[4]=void 0!==e?e:1,j[7]=f||0,j[2]=g||0,j[5]=h||0,j[8]=void 0!==i?i:1},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,g,h,i){var j=this.elements;return j[0]=a,j[3]=b,j[6]=c,j[1]=d,j[4]=e,j[7]=f,j[2]=g,j[5]=h,j[8]=i,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(a){var b=a.elements;return this.set(b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8]),this},multiplyVector3:function(a){return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)},multiplyVector3Array:function(a){return console.warn("DEPRECATED: Matrix3's .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=b.length);for(var e=0,f=c;d>e;e+=3,f+=3)a.x=b[f],a.y=b[f+1],a.z=b[f+2],a.applyMatrix3(this),b[f]=a.x,b[f+1]=a.y,b[f+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*f*j-b*g*i-c*e*j+c*g*h+d*e*i-d*f*h},getInverse:function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4];var e=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===e){var f="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(b)throw new Error(f);return console.warn(f),this.identity(),this}return this.multiplyScalar(1/e),this},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},flattenToArrayOffset:function(a,b){var c=this.elements;return a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=c[3],a[b+4]=c[4],a[b+5]=c[5],a[b+6]=c[6],a[b+7]=c[7],a[b+8]=c[8],a},getNormalMatrix:function(a){return this.getInverse(a).transpose(),this},transposeIntoArray:function(a){var b=this.elements;return a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8],this},fromArray:function(a){return this.elements.set(a),this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}},THREE.Matrix4=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.elements=new Float32Array(16);var q=this.elements;q[0]=void 0!==a?a:1,q[4]=b||0,q[8]=c||0,q[12]=d||0,q[1]=e||0,q[5]=void 0!==f?f:1,q[9]=g||0,q[13]=h||0,q[2]=i||0,q[6]=j||0,q[10]=void 0!==k?k:1,q[14]=l||0,q[3]=m||0,q[7]=n||0,q[11]=o||0,q[15]=void 0!==p?p:1},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(a){return this.elements.set(a.elements),this},extractPosition:function(a){return console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)},copyPosition:function(a){var b=this.elements,c=a.elements;return b[12]=c[12],b[13]=c[13],b[14]=c[14],this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements,d=b.elements,e=1/a.set(d[0],d[1],d[2]).length(),f=1/a.set(d[4],d[5],d[6]).length(),g=1/a.set(d[8],d[9],d[10]).length();return c[0]=d[0]*e,c[1]=d[1]*e,c[2]=d[2]*e,c[4]=d[4]*f,c[5]=d[5]*f,c[6]=d[6]*f,c[8]=d[8]*g,c[9]=d[9]*g,c[10]=d[10]*g,this}}(),makeRotationFromEuler:function(a){a instanceof THREE.Euler==!1&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),g=Math.sin(c),h=Math.cos(d),i=Math.sin(d),j=Math.cos(e),k=Math.sin(e);if("XYZ"===a.order){var l=f*j,m=f*k,n=g*j,o=g*k;b[0]=h*j,b[4]=-h*k,b[8]=i,b[1]=m+n*i,b[5]=l-o*i,b[9]=-g*h,b[2]=o-l*i,b[6]=n+m*i,b[10]=f*h}else if("YXZ"===a.order){var p=h*j,q=h*k,r=i*j,s=i*k;b[0]=p+s*g,b[4]=r*g-q,b[8]=f*i,b[1]=f*k,b[5]=f*j,b[9]=-g,b[2]=q*g-r,b[6]=s+p*g,b[10]=f*h}else if("ZXY"===a.order){var p=h*j,q=h*k,r=i*j,s=i*k;b[0]=p-s*g,b[4]=-f*k,b[8]=r+q*g,b[1]=q+r*g,b[5]=f*j,b[9]=s-p*g,b[2]=-f*i,b[6]=g,b[10]=f*h}else if("ZYX"===a.order){var l=f*j,m=f*k,n=g*j,o=g*k;b[0]=h*j,b[4]=n*i-m,b[8]=l*i+o,b[1]=h*k,b[5]=o*i+l,b[9]=m*i-n,b[2]=-i,b[6]=g*h,b[10]=f*h}else if("YZX"===a.order){var t=f*h,u=f*i,v=g*h,w=g*i;b[0]=h*j,b[4]=w-t*k,b[8]=v*k+u,b[1]=k,b[5]=f*j,b[9]=-g*j,b[2]=-i*j,b[6]=u*k+v,b[10]=t-w*k}else if("XZY"===a.order){var t=f*h,u=f*i,v=g*h,w=g*i;b[0]=h*j,b[4]=-k,b[8]=i*j,b[1]=t*k+w,b[5]=f*j,b[9]=u*k-v,b[2]=v*k-u,b[6]=g*j,b[10]=w*k+t}return b[3]=0,b[7]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,this},setRotationFromQuaternion:function(a){return console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code."),this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,n=d*i,o=e*i,p=f*g,q=f*h,r=f*i;return b[0]=1-(m+o),b[4]=k-r,b[8]=l+q,b[1]=k+r,b[5]=1-(j+o),b[9]=n-p,b[2]=l-q,b[6]=n+p,b[10]=1-(j+m),b[3]=0,b[7]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f){var g=this.elements;return c.subVectors(d,e).normalize(),0===c.length()&&(c.z=1),a.crossVectors(f,c).normalize(),0===a.length()&&(c.x+=1e-4,a.crossVectors(f,c).normalize()),b.crossVectors(c,a),g[0]=a.x,g[4]=b.x,g[8]=c.x,g[1]=a.y,g[5]=b.y,g[9]=c.y,g[2]=a.z,g[6]=b.z,g[10]=c.z,this}}(),multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],i=c[12],j=c[1],k=c[5],l=c[9],m=c[13],n=c[2],o=c[6],p=c[10],q=c[14],r=c[3],s=c[7],t=c[11],u=c[15],v=d[0],w=d[4],x=d[8],y=d[12],z=d[1],A=d[5],B=d[9],C=d[13],D=d[2],E=d[6],F=d[10],G=d[14],H=d[3],I=d[7],J=d[11],K=d[15];return e[0]=f*v+g*z+h*D+i*H,e[4]=f*w+g*A+h*E+i*I,e[8]=f*x+g*B+h*F+i*J,e[12]=f*y+g*C+h*G+i*K,e[1]=j*v+k*z+l*D+m*H,e[5]=j*w+k*A+l*E+m*I,e[9]=j*x+k*B+l*F+m*J,e[13]=j*y+k*C+l*G+m*K,e[2]=n*v+o*z+p*D+q*H,e[6]=n*w+o*A+p*E+q*I,e[10]=n*x+o*B+p*F+q*J,e[14]=n*y+o*C+p*G+q*K,e[3]=r*v+s*z+t*D+u*H,e[7]=r*w+s*A+t*E+u*I,e[11]=r*x+s*B+t*F+u*J,e[15]=r*y+s*C+t*G+u*K,this},multiplyToArray:function(a,b,c){var d=this.elements;return this.multiplyMatrices(a,b),c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15],this},multiplyScalar:function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},multiplyVector3:function(a){return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),a.applyProjection(this)},multiplyVector4:function(a){return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector3Array:function(a){return console.warn("DEPRECATED: Matrix4's .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREE.Vector3;return function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=b.length);for(var e=0,f=c;d>e;e+=3,f+=3)a.x=b[f],a.y=b[f+1],a.z=b[f+2],a.applyMatrix4(this),b[f]=a.x,b[f+1]=a.y,b[f+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),a.transformDirection(this)},crossVector:function(a){return console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15];return n*(+e*h*k-d*i*k-e*g*l+c*i*l+d*g*m-c*h*m)+o*(+b*h*m-b*i*l+e*f*l-d*f*m+d*i*j-e*h*j)+p*(+b*i*k-b*g*m-e*f*k+c*f*m+e*g*j-c*i*j)+q*(-d*g*j-b*h*k+b*g*l+d*f*k-c*f*l+c*h*j)},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},flattenToArrayOffset:function(a,b){var c=this.elements;return a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=c[3],a[b+4]=c[4],a[b+5]=c[5],a[b+6]=c[6],a[b+7]=c[7],a[b+8]=c[8],a[b+9]=c[9],a[b+10]=c[10],a[b+11]=c[11],a[b+12]=c[12],a[b+13]=c[13],a[b+14]=c[14],a[b+15]=c[15],a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;return b[12]=a.x,b[13]=a.y,b[14]=a.z,this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[12],i=d[1],j=d[5],k=d[9],l=d[13],m=d[2],n=d[6],o=d[10],p=d[14],q=d[3],r=d[7],s=d[11],t=d[15];c[0]=k*p*r-l*o*r+l*n*s-j*p*s-k*n*t+j*o*t,c[4]=h*o*r-g*p*r-h*n*s+f*p*s+g*n*t-f*o*t,c[8]=g*l*r-h*k*r+h*j*s-f*l*s-g*j*t+f*k*t,c[12]=h*k*n-g*l*n-h*j*o+f*l*o+g*j*p-f*k*p,c[1]=l*o*q-k*p*q-l*m*s+i*p*s+k*m*t-i*o*t,c[5]=g*p*q-h*o*q+h*m*s-e*p*s-g*m*t+e*o*t,c[9]=h*k*q-g*l*q-h*i*s+e*l*s+g*i*t-e*k*t,c[13]=g*l*m-h*k*m+h*i*o-e*l*o-g*i*p+e*k*p,c[2]=j*p*q-l*n*q+l*m*r-i*p*r-j*m*t+i*n*t,c[6]=h*n*q-f*p*q-h*m*r+e*p*r+f*m*t-e*n*t,c[10]=f*l*q-h*j*q+h*i*r-e*l*r-f*i*t+e*j*t,c[14]=h*j*m-f*l*m-h*i*n+e*l*n+f*i*p-e*j*p,c[3]=k*n*q-j*o*q-k*m*r+i*o*r+j*m*s-i*n*s,c[7]=f*o*q-g*n*q+g*m*r-e*o*r-f*m*s+e*n*s,c[11]=g*j*q-f*k*q-g*i*r+e*k*r+f*i*s-e*j*s,c[15]=f*k*m-g*j*m+g*i*n-e*k*n-f*i*o+e*j*o;var u=e*c[0]+i*c[4]+m*c[8]+q*c[12];if(0==u){var v="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(b)throw new Error(v);return console.warn(v),this.identity(),this}return this.multiplyScalar(1/u),this},translate:function(a){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(a){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(a){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(a){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z;return b[0]*=c,b[4]*=d,b[8]*=e,b[1]*=c,b[5]*=d,b[9]*=e,b[2]*=c,b[6]*=d,b[10]*=e,b[3]*=c,b[7]*=d,b[11]*=e,this},getMaxScaleOnAxis:function(){var a=this.elements,b=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],c=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],d=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(b,Math.max(c,d)))},makeTranslation:function(a,b,c){return this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1),this},makeRotationX:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(1,0,0,0,0,b,-c,0,0,c,b,0,0,0,0,1),this},makeRotationY:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(b,0,c,0,0,1,0,0,-c,0,b,0,0,0,0,1),this},makeRotationZ:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(b,-c,0,0,c,b,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1),this},makeScale:function(a,b,c){return this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1),this},compose:function(a,b,c){return this.makeRotationFromQuaternion(b),this.scale(c),this.setPosition(a),this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),i=a.set(f[8],f[9],f[10]).length(),j=this.determinant();0>j&&(g=-g),c.x=f[12],c.y=f[13],c.z=f[14],b.elements.set(this.elements);var k=1/g,l=1/h,m=1/i;return b.elements[0]*=k,b.elements[1]*=k,b.elements[2]*=k,b.elements[4]*=l,b.elements[5]*=l,b.elements[6]*=l,b.elements[8]*=m,b.elements[9]*=m,b.elements[10]*=m,d.setFromRotationMatrix(b),e.x=g,e.y=h,e.z=i,this}}(),makeFrustum:function(a,b,c,d,e,f){var g=this.elements,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},makePerspective:function(a,b,c,d){var e=c*Math.tan(THREE.Math.degToRad(.5*a)),f=-e,g=f*b,h=e*b;return this.makeFrustum(g,h,f,e,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=b-a,i=c-d,j=f-e,k=(b+a)/h,l=(c+d)/i,m=(f+e)/j;return g[0]=2/h,g[4]=0,g[8]=0,g[12]=-k,g[1]=0,g[5]=2/i,g[9]=0,g[13]=-l,g[2]=0,g[6]=0,g[10]=-2/j,g[14]=-m,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this},fromArray:function(a){return this.elements.set(a),this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}},THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3,this.direction=void 0!==b?b:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){return this.origin.copy(a),this.direction.copy(b),this},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,b){var c=b||new THREE.Vector3;return c.copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){return this.origin.copy(this.at(b,a)),this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);return 0>c?this.origin.distanceTo(b):(a.copy(this.direction).multiplyScalar(c).add(this.origin),a.distanceTo(b))}}(),distanceSqToSegment:function(a,b,c,d){var e,f,g,h,i=a.clone().add(b).multiplyScalar(.5),j=b.clone().sub(a).normalize(),k=.5*a.distanceTo(b),l=this.origin.clone().sub(i),m=-this.direction.dot(j),n=l.dot(this.direction),o=-l.dot(j),p=l.lengthSq(),q=Math.abs(1-m*m);if(q>=0)if(e=m*o-n,f=m*n-o,h=k*q,e>=0)if(f>=-h)if(h>=f){var r=1/q;e*=r,f*=r,g=e*(e+m*f+2*n)+f*(m*e+f+2*o)+p}else f=k,e=Math.max(0,-(m*f+n)),g=-e*e+f*(f+2*o)+p;else f=-k,e=Math.max(0,-(m*f+n)),g=-e*e+f*(f+2*o)+p;else-h>=f?(e=Math.max(0,-(-m*k+n)),f=e>0?-k:Math.min(Math.max(-k,-o),k),g=-e*e+f*(f+2*o)+p):h>=f?(e=0,f=Math.min(Math.max(-k,-o),k),g=f*(f+2*o)+p):(e=Math.max(0,-(m*k+n)),f=e>0?k:Math.min(Math.max(-k,-o),k),g=-e*e+f*(f+2*o)+p);else f=m>0?-k:k,e=Math.max(0,-(m*f+n)),g=-e*e+f*(f+2*o)+p;return c&&c.copy(this.direction.clone().multiplyScalar(e).add(this.origin)),d&&d.copy(j.clone().multiplyScalar(f).add(i)),g},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);if(0===b)return!0;var c=a.normal.dot(this.direction);return 0>c*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?0:null;var c=-(this.origin.dot(a.normal)+a.constant)/b;return c>=0?c:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,f,g,h,i=1/this.direction.x,j=1/this.direction.y,k=1/this.direction.z,l=this.origin;return i>=0?(c=(a.min.x-l.x)*i,d=(a.max.x-l.x)*i):(c=(a.max.x-l.x)*i,d=(a.min.x-l.x)*i),j>=0?(e=(a.min.y-l.y)*j,f=(a.max.y-l.y)*j):(e=(a.max.y-l.y)*j,f=(a.min.y-l.y)*j),c>f||e>d?null:((e>c||c!==c)&&(c=e),(d>f||d!==d)&&(d=f),k>=0?(g=(a.min.z-l.z)*k,h=(a.max.z-l.z)*k):(g=(a.max.z-l.z)*k,h=(a.min.z-l.z)*k),c>h||g>d?null:((g>c||c!==c)&&(c=g),(d>h||d!==d)&&(d=h),0>d?null:this.at(c>=0?c:d,b)))},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g,h,i){b.subVectors(f,e),c.subVectors(g,e),d.crossVectors(b,c);var j,k=this.direction.dot(d);if(k>0){if(h)return null;j=1}else{if(!(0>k))return null;j=-1,k=-k}a.subVectors(this.origin,e);var l=j*this.direction.dot(c.crossVectors(a,c));if(0>l)return null;var m=j*this.direction.dot(b.cross(a));if(0>m)return null;if(l+m>k)return null;var n=-j*a.dot(d);return 0>n?null:this.at(n/k,i)}}(),applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),this.origin.applyMatrix4(a),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3,this.radius=void 0!==b?b:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){return this.center.copy(a),this.radius=b,this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,g=b.length;g>f;f++)e=Math.max(e,d.distanceToSquared(b[f]));return this.radius=Math.sqrt(e),this}}(),copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},empty:function(){return this.radius<=0},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;return d.copy(a),c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center)),d},getBoundingBox:function(a){var b=a||new THREE.Box3;return b.set(this.center,this.center),b.expandByScalar(this.radius),b},applyMatrix4:function(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var g=this.planes;return g[0].copy(a),g[1].copy(b),g[2].copy(c),g[3].copy(d),g[4].copy(e),g[5].copy(f),this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6],k=c[7],l=c[8],m=c[9],n=c[10],o=c[11],p=c[12],q=c[13],r=c[14],s=c[15];return b[0].setComponents(g-d,k-h,o-l,s-p).normalize(),b[1].setComponents(g+d,k+h,o+l,s+p).normalize(),b[2].setComponents(g+e,k+i,o+m,s+q).normalize(),b[3].setComponents(g-e,k-i,o-m,s-q).normalize(),b[4].setComponents(g-f,k-j,o-n,s-r).normalize(),b[5].setComponents(g+f,k+j,o+n,s+r).normalize(),this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;return null===c.boundingSphere&&c.computeBoundingSphere(),a.copy(c.boundingSphere),a.applyMatrix4(b.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var b=this.planes,c=a.center,d=-a.radius,e=0;6>e;e++){var f=b[e].distanceToPoint(c);if(d>f)return!1}return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=f.normal.x>0?c.min.x:c.max.x,b.x=f.normal.x>0?c.max.x:c.min.x,a.y=f.normal.y>0?c.min.y:c.max.y,b.y=f.normal.y>0?c.max.y:c.min.y,a.z=f.normal.z>0?c.min.z:c.max.z,b.z=f.normal.z>0?c.max.z:c.min.z;var g=f.distanceToPoint(a),h=f.distanceToPoint(b);if(0>g&&0>h)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(b[c].distanceToPoint(a)<0)return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0),this.constant=void 0!==b?b:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){return this.normal.copy(a),this.constant=b,this},setComponents:function(a,b,c,d){return this.normal.set(a,b,c),this.constant=d,this},setFromNormalAndCoplanarPoint:function(a,b){return this.normal.copy(a),this.constant=-b.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){var f=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();return this.setFromNormalAndCoplanarPoint(f,c),this}}(),copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var c=this.distanceToPoint(a),d=b||new THREE.Vector3;return d.copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start),c=this.distanceToPoint(a.end);
return 0>b&&c>0||0>c&&b>0},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0==f)return 0==this.distanceToPoint(b.start)?d.copy(b.start):void 0;var g=-(b.start.dot(this.normal)+this.constant)/f;return 0>g||g>1?void 0:d.copy(e).multiplyScalar(g).add(b.start)}}(),coplanarPoint:function(a){var b=a||new THREE.Vector3;return b.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var f=e||c.getNormalMatrix(d),g=a.copy(this.normal).applyMatrix3(f),h=this.coplanarPoint(b);return h.applyMatrix4(d),this.setFromNormalAndCoplanarPoint(g,h),this}}(),translate:function(a){return this.constant=this.constant-a.dot(this.normal),this},equals:function(a){return a.normal.equals(this.normal)&&a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var a,b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=new Array(36),d=0;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?c[e]="-":14==e?c[e]="4":(2>=d&&(d=33554432+16777216*Math.random()|0),a=15&d,d>>=4,c[e]=b[19==e?3&a|8:a]);return c.join("")}}(),clamp:function(a,b,c){return b>a?b:a>c?c:a},clampBottom:function(a,b){return b>a?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*(3-2*a))},smootherstep:function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*a*(a*(6*a-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},sign:function(a){return 0>a?-1:a>0?1:0},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a}},THREE.Spline=function(a){function b(a,b,c,d,e,f,g){var h=.5*(c-a),i=.5*(d-b);return(2*(b-c)+h+i)*g+(-3*(b-c)-2*h-i)*f+h*e+b}this.points=a;var c,d,e,f,g,h,i,j,k,l=[],m={x:0,y:0,z:0};this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}},this.getPoint=function(a){return c=(this.points.length-1)*a,d=Math.floor(c),e=c-d,l[0]=0===d?d:d-1,l[1]=d,l[2]=d>this.points.length-2?this.points.length-1:d+1,l[3]=d>this.points.length-3?this.points.length-1:d+2,h=this.points[l[0]],i=this.points[l[1]],j=this.points[l[2]],k=this.points[l[3]],f=e*e,g=e*f,m.x=b(h.x,i.x,j.x,k.x,e,f,g),m.y=b(h.y,i.y,j.y,k.y,e,f,g),m.z=b(h.z,i.z,j.z,k.z,e,f,g),m},this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;c>a;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d},this.getLength=function(a){var b,c,d,e,f=0,g=0,h=0,i=new THREE.Vector3,j=new THREE.Vector3,k=[],l=0;for(k[0]=0,a||(a=100),d=this.points.length*a,i.copy(this.points[0]),b=1;d>b;b++)c=b/d,e=this.getPoint(c),j.copy(e),l+=j.distanceTo(i),i.copy(e),f=(this.points.length-1)*c,g=Math.floor(f),g!=h&&(k[g]=l,h=g);return k[k.length]=l,{chunks:k,total:l}},this.reparametrizeByArcLength=function(a){var b,c,d,e,f,g,h,i,j=[],k=new THREE.Vector3,l=this.getLength();for(j.push(k.copy(this.points[0]).clone()),b=1;b<this.points.length;b++){for(g=l.chunks[b]-l.chunks[b-1],h=Math.ceil(a*g/l.total),e=(b-1)/(this.points.length-1),f=b/(this.points.length-1),c=1;h-1>c;c++)d=e+c*(1/h)*(f-e),i=this.getPoint(d),j.push(k.copy(i).clone());j.push(k.copy(this.points[b]).clone())}this.points=j}},THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3,this.b=void 0!==b?b:new THREE.Vector3,this.c=void 0!==c?c:new THREE.Vector3},THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){var f=e||new THREE.Vector3;f.subVectors(d,c),a.subVectors(b,c),f.cross(a);var g=f.lengthSq();return g>0?f.multiplyScalar(1/Math.sqrt(g)):f.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,g,h){a.subVectors(g,e),b.subVectors(f,e),c.subVectors(d,e);var i=a.dot(a),j=a.dot(b),k=a.dot(c),l=b.dot(b),m=b.dot(c),n=i*l-j*j,o=h||new THREE.Vector3;if(0==n)return o.set(-2,-1,-1);var p=1/n,q=(l*k-j*m)*p,r=(i*m-j*k)*p;return o.set(1-q-r,r,q)}}(),THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){var f=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return f.x>=0&&f.y>=0&&f.x+f.y<=1}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){return this.a.copy(a),this.b.copy(b),this.c.copy(c),this},setFromPointsAndIndices:function(a,b,c,d){return this.a.copy(a[b]),this.b.copy(a[c]),this.c.copy(a[d]),this},copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){return a.subVectors(this.c,this.b),b.subVectors(this.a,this.b),.5*a.cross(b).length()}}(),midpoint:function(a){var b=a||new THREE.Vector3;return b.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){var b=a||new THREE.Plane;return b.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Vertex=function(a){return console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead."),a},THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running&&this.start(),this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();a=.001*(b-this.oldTime),this.oldTime=b,this.elapsedTime+=a}return a}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener,a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]),-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners,d=c[a];if(void 0!==d){var e=d.indexOf(b);-1!==e&&d.splice(e,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners,c=b[a.type];if(void 0!==c){a.target=this;for(var d=[],e=c.length,f=0;e>f;f++)d[f]=c[f];for(var f=0;e>f;f++)d[f].call(this,a)}}}},function(a){a.Raycaster=function(b,c,d,e){this.ray=new a.Ray(b,c),this.near=d||0,this.far=e||1/0};var b=new a.Sphere,c=new a.Ray,d=(new a.Plane,new a.Vector3,new a.Vector3),e=new a.Matrix4,f=function(a,b){return a.distance-b.distance},g=new a.Vector3,h=new a.Vector3,i=new a.Vector3,j=function(f,k,l){if(f instanceof a.Sprite){d.setFromMatrixPosition(f.matrixWorld);var m=k.ray.distanceToPoint(d);if(m>f.scale.x)return l;l.push({distance:m,point:f.position,face:null,object:f})}else if(f instanceof a.LOD){d.setFromMatrixPosition(f.matrixWorld);var m=k.ray.origin.distanceTo(d);j(f.getObjectForDistance(m),k,l)}else if(f instanceof a.Mesh){var n=f.geometry;if(null===n.boundingSphere&&n.computeBoundingSphere(),b.copy(n.boundingSphere),b.applyMatrix4(f.matrixWorld),k.ray.isIntersectionSphere(b)===!1)return l;if(e.getInverse(f.matrixWorld),c.copy(k.ray).applyMatrix4(e),null!==n.boundingBox&&c.isIntersectionBox(n.boundingBox)===!1)return l;if(n instanceof a.BufferGeometry){var o=f.material;if(void 0===o)return l;var p,q,r,s=n.attributes,t=k.precision;if(void 0!==s.index){var u=s.index.array,v=s.position.array,w=n.offsets;0===w.length&&(w=[{start:0,count:v.length,index:0}]);for(var x=0,y=w.length;y>x;++x)for(var z=w[x].start,A=w[x].count,B=w[x].index,C=z,D=z+A;D>C;C+=3){if(p=B+u[C],q=B+u[C+1],r=B+u[C+2],g.set(v[3*p],v[3*p+1],v[3*p+2]),h.set(v[3*q],v[3*q+1],v[3*q+2]),i.set(v[3*r],v[3*r+1],v[3*r+2]),o.side===a.BackSide)var E=c.intersectTriangle(i,h,g,!0);else var E=c.intersectTriangle(g,h,i,o.side!==a.DoubleSide);if(null!==E){E.applyMatrix4(f.matrixWorld);var m=k.ray.origin.distanceTo(E);t>m||m<k.near||m>k.far||l.push({distance:m,point:E,indices:[p,q,r],face:null,faceIndex:null,object:f})}}}else for(var w=n.offsets,v=s.position.array,C=0,D=s.position.array.length;D>C;C+=3){if(p=C,q=C+1,r=C+2,g.set(v[3*p],v[3*p+1],v[3*p+2]),h.set(v[3*q],v[3*q+1],v[3*q+2]),i.set(v[3*r],v[3*r+1],v[3*r+2]),o.side===a.BackSide)var E=c.intersectTriangle(i,h,g,!0);else var E=c.intersectTriangle(g,h,i,o.side!==a.DoubleSide);if(null!==E){E.applyMatrix4(f.matrixWorld);var m=k.ray.origin.distanceTo(E);t>m||m<k.near||m>k.far||l.push({distance:m,point:E,indices:[p,q,r],face:null,faceIndex:null,object:f})}}}else if(n instanceof a.Geometry)for(var p,q,r,F=f.material instanceof a.MeshFaceMaterial,G=F===!0?f.material.materials:null,t=k.precision,H=n.vertices,I=0,J=n.faces.length;J>I;I++){var K=n.faces[I],o=F===!0?G[K.materialIndex]:f.material;if(void 0!==o){if(p=H[K.a],q=H[K.b],r=H[K.c],o.morphTargets===!0){var L=n.morphTargets,M=f.morphTargetInfluences;g.set(0,0,0),h.set(0,0,0),i.set(0,0,0);for(var N=0,O=L.length;O>N;N++){var P=M[N];if(0!==P){var Q=L[N].vertices;g.x+=(Q[K.a].x-p.x)*P,g.y+=(Q[K.a].y-p.y)*P,g.z+=(Q[K.a].z-p.z)*P,h.x+=(Q[K.b].x-q.x)*P,h.y+=(Q[K.b].y-q.y)*P,h.z+=(Q[K.b].z-q.z)*P,i.x+=(Q[K.c].x-r.x)*P,i.y+=(Q[K.c].y-r.y)*P,i.z+=(Q[K.c].z-r.z)*P}}g.add(p),h.add(q),i.add(r),p=g,q=h,r=i}if(o.side===a.BackSide)var E=c.intersectTriangle(r,q,p,!0);else var E=c.intersectTriangle(p,q,r,o.side!==a.DoubleSide);if(null!==E){E.applyMatrix4(f.matrixWorld);var m=k.ray.origin.distanceTo(E);t>m||m<k.near||m>k.far||l.push({distance:m,point:E,face:K,faceIndex:I,object:f})}}}}else if(f instanceof a.Line){var t=k.linePrecision,R=t*t,n=f.geometry;if(null===n.boundingSphere&&n.computeBoundingSphere(),b.copy(n.boundingSphere),b.applyMatrix4(f.matrixWorld),k.ray.isIntersectionSphere(b)===!1)return l;if(e.getInverse(f.matrixWorld),c.copy(k.ray).applyMatrix4(e),n instanceof a.Geometry)for(var H=n.vertices,S=H.length,T=new a.Vector3,U=new a.Vector3,V=f.type===a.LineStrip?1:2,C=0;S-1>C;C+=V){var W=c.distanceSqToSegment(H[C],H[C+1],U,T);if(!(W>R)){var m=c.origin.distanceTo(U);m<k.near||m>k.far||l.push({distance:m,point:T.clone().applyMatrix4(f.matrixWorld),face:null,faceIndex:null,object:f})}}}},k=function(a,b,c){for(var d=a.getDescendants(),e=0,f=d.length;f>e;e++)j(d[e],b,c)};a.Raycaster.prototype.precision=1e-4,a.Raycaster.prototype.linePrecision=1,a.Raycaster.prototype.set=function(a,b){this.ray.set(a,b)},a.Raycaster.prototype.intersectObject=function(a,b){var c=[];return b===!0&&k(a,this,c),j(a,this,c),c.sort(f),c},a.Raycaster.prototype.intersectObjects=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)j(a[d],this,c),b===!0&&k(a[d],this,c);return c.sort(f),c}}(THREE),THREE.Object3D=function(){this.id=THREE.Object3DIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3;var a=this;Object.defineProperties(this,{rotation:{enumerable:!0,value:(new THREE.Euler).onChange(function(){a.quaternion.setFromEuler(a.rotation,!1)})},quaternion:{enumerable:!0,value:(new THREE.Quaternion).onChange(function(){a.rotation.setFromQuaternion(a.quaternion,void 0,!1)})},scale:{enumerable:!0,value:new THREE.Vector3(1,1,1)}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order},set eulerOrder(a){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order=a},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){return a.setFromAxisAngle(b,c),this.quaternion.multiply(a),this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){return a.copy(b),a.applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(c)),this}}(),translate:function(a,b){return console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed."),this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up),this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(a===this)return void console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=void 0,a.dispatchEvent({type:"removed"}),this.children.splice(b,1);for(var c=this;void 0!==c.parent;)c=c.parent;void 0!==c&&c instanceof THREE.Scene&&c.__removeObject(a)}},traverse:function(a){a(this);for(var b=0,c=this.children.length;c>b;b++)this.children[b].traverse(a)},getObjectById:function(a,b){for(var c=0,d=this.children.length;d>c;c++){var e=this.children[c];if(e.id===a)return e;if(b===!0&&(e=e.getObjectById(a,b),void 0!==e))return e}return void 0},getObjectByName:function(a,b){for(var c=0,d=this.children.length;d>c;c++){var e=this.children[c];if(e.name===a)return e;if(b===!0&&(e=e.getObjectByName(a,b),void 0!==e))return e}return void 0},getChildByName:function(a,b){return console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a,b)},getDescendants:function(a){void 0===a&&(a=[]),Array.prototype.push.apply(a,this.children);for(var b=0,c=this.children.length;c>b;b++)this.children[b].getDescendants(a);return a},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||a===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var b=0,c=this.children.length;c>b;b++)this.children[b].updateMatrixWorld(a)},clone:function(a,b){if(void 0===a&&(a=new THREE.Object3D),void 0===b&&(b=!0),a.name=this.name,a.up.copy(this.up),a.position.copy(this.position),a.quaternion.copy(this.quaternion),a.scale.copy(this.scale),a.renderDepth=this.renderDepth,a.rotationAutoUpdate=this.rotationAutoUpdate,a.matrix.copy(this.matrix),a.matrixWorld.copy(this.matrixWorld),a.matrixAutoUpdate=this.matrixAutoUpdate,a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,a.visible=this.visible,a.castShadow=this.castShadow,a.receiveShadow=this.receiveShadow,a.frustumCulled=this.frustumCulled,a.userData=JSON.parse(JSON.stringify(this.userData)),b===!0)for(var c=0;c<this.children.length;c++){var d=this.children[c];a.add(d.clone())}return a}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){function a(){if(i===t){var a=new THREE.RenderableObject;return s.push(a),t++,i++,a}return s[i++]}function b(){if(k===v){var a=new THREE.RenderableVertex;return u.push(a),v++,k++,a}return u[k++]}function c(){if(m===x){var a=new THREE.RenderableFace;return w.push(a),x++,m++,a}return w[m++]}function d(){if(o===z){var a=new THREE.RenderableLine;return y.push(a),z++,o++,a}return y[o++]}function e(){if(q===B){var a=new THREE.RenderableSprite;return A.push(a),B++,q++,a}return A[q++]}function f(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function g(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,g=-a.z+a.w,h=-b.z+b.w;return e>=0&&f>=0&&g>=0&&h>=0?!0:0>e&&0>f||0>g&&0>h?!1:(0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f))),0>g?c=Math.max(c,g/(g-h)):0>h&&(d=Math.min(d,g/(g-h))),c>d?!1:(a.lerp(b,c),b.lerp(a,1-d),!0))}var h,i,j,k,l,m,n,o,p,q,r,s=[],t=0,u=[],v=0,w=[],x=0,y=[],z=0,A=[],B=0,C={objects:[],lights:[],elements:[]},D=new THREE.Vector3,E=new THREE.Vector3,F=new THREE.Vector3,G=new THREE.Vector3,H=new THREE.Vector4,I=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),J=new THREE.Box3,K=new Array(3),L=(new Array(4),new THREE.Matrix4),M=new THREE.Matrix4,N=new THREE.Matrix4,O=new THREE.Matrix3,P=new THREE.Frustum,Q=new THREE.Vector4,R=new THREE.Vector4;this.projectVector=function(a,b){return b.matrixWorldInverse.getInverse(b.matrixWorld),M.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),a.applyProjection(M)},this.unprojectVector=function(){var a=new THREE.Matrix4;return function(b,c){return a.getInverse(c.projectionMatrix),M.multiplyMatrices(c.matrixWorld,a),b.applyProjection(M)}}(),this.pickingRay=function(a,b){a.z=-1;var c=new THREE.Vector3(a.x,a.y,1);return this.unprojectVector(a,b),this.unprojectVector(c,b),c.sub(a).normalize(),new THREE.Raycaster(a,c)};var S=function(b){if(b.visible!==!1){b instanceof THREE.Light?C.lights.push(b):(b instanceof THREE.Mesh||b instanceof THREE.Line||b instanceof THREE.Sprite)&&(b.frustumCulled===!1||P.intersectsObject(b)===!0)&&(h=a(),h.id=b.id,h.object=b,null!==b.renderDepth?h.z=b.renderDepth:(G.setFromMatrixPosition(b.matrixWorld),G.applyProjection(M),h.z=G.z),C.objects.push(h));for(var c=0,d=b.children.length;d>c;c++)S(b.children[c])}},T=function(a,b){i=0,C.objects.length=0,C.lights.length=0,S(a),b===!0&&C.objects.sort(f)},U=function(){var a=[],e=[],f=null,g=null,h=new THREE.Matrix3,i=function(b){f=b,g=f.material,h.getNormalMatrix(f.matrixWorld),a.length=0,e.length=0},k=function(a){var b=a.position,c=a.positionWorld,d=a.positionScreen;c.copy(b).applyMatrix4(r),d.copy(c).applyMatrix4(M);var e=1/d.w;d.x*=e,d.y*=e,d.z*=e,a.visible=d.x>=-1&&d.x<=1&&d.y>=-1&&d.y<=1&&d.z>=-1&&d.z<=1},m=function(a,c,d){j=b(),j.position.set(a,c,d),k(j)},o=function(b,c,d){a.push(b,c,d)},p=function(a,b){e.push(a,b)},q=function(a,b,c){return a.visible===!0||b.visible===!0||c.visible===!0?!0:(K[0]=a.positionScreen,K[1]=b.positionScreen,K[2]=c.positionScreen,I.isIntersectionBox(J.setFromPoints(K)))},s=function(a,b,c){return(c.positionScreen.x-a.positionScreen.x)*(b.positionScreen.y-a.positionScreen.y)-(c.positionScreen.y-a.positionScreen.y)*(b.positionScreen.x-a.positionScreen.x)<0},t=function(a,b){var c=u[a],e=u[b];n=d(),n.id=f.id,n.v1.copy(c),n.v2.copy(e),n.z=(c.positionScreen.z+e.positionScreen.z)/2,n.material=f.material,C.elements.push(n)},v=function(b,d,i){var j=u[b],k=u[d],m=u[i];if(q(j,k,m)!==!1&&(g.side===THREE.DoubleSide||s(j,k,m)===!0)){l=c(),l.id=f.id,l.v1.copy(j),l.v2.copy(k),l.v3.copy(m),l.z=(j.positionScreen.z+k.positionScreen.z+m.positionScreen.z)/3;for(var n=0;3>n;n++){var o=3*arguments[n],p=l.vertexNormalsModel[n];p.set(a[o],a[o+1],a[o+2]),p.applyMatrix3(h).normalize();var r=2*arguments[n],t=l.uvs[n];t.set(e[r],e[r+1])}l.vertexNormalsLength=3,l.material=f.material,C.elements.push(l)}};return{setObject:i,projectVertex:k,checkTriangleVisibility:q,checkBackfaceCulling:s,pushVertex:m,pushNormal:o,pushUv:p,pushLine:t,pushTriangle:v}},V=new U;this.projectScene=function(a,h,i,j){var s,t,v,w,x,y,z,A,B;m=0,o=0,q=0,C.elements.length=0,a.autoUpdate===!0&&a.updateMatrixWorld(),void 0===h.parent&&h.updateMatrixWorld(),L.copy(h.matrixWorldInverse.getInverse(h.matrixWorld)),M.multiplyMatrices(h.projectionMatrix,L),P.setFromMatrix(M),T(a,i);for(var G=0,I=C.objects.length;I>G;G++)if(s=C.objects[G].object,t=s.geometry,V.setObject(s),r=s.matrixWorld,k=0,s instanceof THREE.Mesh){if(t instanceof THREE.BufferGeometry){var J=t.attributes,K=t.offsets;if(void 0===J.position)continue;for(var S=J.position.array,U=0,W=S.length;W>U;U+=3)V.pushVertex(S[U],S[U+1],S[U+2]);if(void 0!==J.normal)for(var X=J.normal.array,U=0,W=X.length;W>U;U+=3)V.pushNormal(X[U],X[U+1],X[U+2]);if(void 0!==J.uv)for(var Y=J.uv.array,U=0,W=Y.length;W>U;U+=2)V.pushUv(Y[U],Y[U+1]);if(void 0!==J.index){var Z=J.index.array;if(K.length>0)for(var G=0;G<K.length;G++)for(var $=K[G],_=$.index,U=$.start,W=$.start+$.count;W>U;U+=3)V.pushTriangle(Z[U]+_,Z[U+1]+_,Z[U+2]+_);else for(var U=0,W=Z.length;W>U;U+=3)V.pushTriangle(Z[U],Z[U+1],Z[U+2])}else for(var U=0,W=S.length/3;W>U;U+=3)V.pushTriangle(U,U+1,U+2)}else if(t instanceof THREE.Geometry){v=t.vertices,w=t.faces,z=t.faceVertexUvs[0],O.getNormalMatrix(r),A=s.material instanceof THREE.MeshFaceMaterial,B=A===!0?s.material:null;for(var aa=0,ba=v.length;ba>aa;aa++){var ca=v[aa];V.pushVertex(ca.x,ca.y,ca.z)}for(var da=0,ea=w.length;ea>da;da++){x=w[da];var fa=A===!0?B.materials[x.materialIndex]:s.material;if(void 0!==fa){var ga=fa.side,ha=u[x.a],ia=u[x.b],ja=u[x.c];if(fa.morphTargets===!0){var ka=t.morphTargets,la=s.morphTargetInfluences,ma=ha.position,na=ia.position,oa=ja.position;D.set(0,0,0),E.set(0,0,0),F.set(0,0,0);for(var pa=0,qa=ka.length;qa>pa;pa++){var ra=la[pa];if(0!==ra){var sa=ka[pa].vertices;D.x+=(sa[x.a].x-ma.x)*ra,D.y+=(sa[x.a].y-ma.y)*ra,D.z+=(sa[x.a].z-ma.z)*ra,E.x+=(sa[x.b].x-na.x)*ra,E.y+=(sa[x.b].y-na.y)*ra,E.z+=(sa[x.b].z-na.z)*ra,F.x+=(sa[x.c].x-oa.x)*ra,F.y+=(sa[x.c].y-oa.y)*ra,F.z+=(sa[x.c].z-oa.z)*ra}}ha.position.add(D),ia.position.add(E),ja.position.add(F),V.projectVertex(ha),V.projectVertex(ia),V.projectVertex(ja)}if(V.checkTriangleVisibility(ha,ia,ja)!==!1){var ta=V.checkBackfaceCulling(ha,ia,ja);if(ga!==THREE.DoubleSide){if(ga===THREE.FrontSide&&ta===!1)continue;if(ga===THREE.BackSide&&ta===!0)continue}l=c(),l.id=s.id,l.v1.copy(ha),l.v2.copy(ia),l.v3.copy(ja),l.normalModel.copy(x.normal),ta!==!1||ga!==THREE.BackSide&&ga!==THREE.DoubleSide||l.normalModel.negate(),l.normalModel.applyMatrix3(O).normalize(),y=x.vertexNormals;for(var ua=0,va=Math.min(y.length,3);va>ua;ua++){var wa=l.vertexNormalsModel[ua];wa.copy(y[ua]),ta!==!1||ga!==THREE.BackSide&&ga!==THREE.DoubleSide||wa.negate(),wa.applyMatrix3(O).normalize()}l.vertexNormalsLength=y.length;var xa=z[da];if(void 0!==xa)for(var ya=0;3>ya;ya++)l.uvs[ya].copy(xa[ya]);l.color=x.color,l.material=fa,l.z=(ha.positionScreen.z+ia.positionScreen.z+ja.positionScreen.z)/3,C.elements.push(l)}}}}}else if(s instanceof THREE.Line){if(t instanceof THREE.BufferGeometry){var J=t.attributes;if(void 0!==J.position){for(var S=J.position.array,U=0,W=S.length;W>U;U+=3)V.pushVertex(S[U],S[U+1],S[U+2]);if(void 0!==J.index)for(var Z=J.index.array,U=0,W=Z.length;W>U;U+=2)V.pushLine(Z[U],Z[U+1]);else for(var U=0,W=S.length/3-1;W>U;U++)V.pushLine(U,U+1)}}else if(t instanceof THREE.Geometry){if(N.multiplyMatrices(M,r),v=s.geometry.vertices,0===v.length)continue;ha=b(),ha.positionScreen.copy(v[0]).applyMatrix4(N);for(var za=s.type===THREE.LinePieces?2:1,aa=1,ba=v.length;ba>aa;aa++)ha=b(),ha.positionScreen.copy(v[aa]).applyMatrix4(N),(aa+1)%za>0||(ia=u[k-2],Q.copy(ha.positionScreen),R.copy(ia.positionScreen),g(Q,R)===!0&&(Q.multiplyScalar(1/Q.w),R.multiplyScalar(1/R.w),n=d(),n.id=s.id,n.v1.positionScreen.copy(Q),n.v2.positionScreen.copy(R),n.z=Math.max(Q.z,R.z),n.material=s.material,s.material.vertexColors===THREE.VertexColors&&(n.vertexColors[0].copy(s.geometry.colors[aa]),n.vertexColors[1].copy(s.geometry.colors[aa-1])),C.elements.push(n)))}}else if(s instanceof THREE.Sprite){H.set(r.elements[12],r.elements[13],r.elements[14],1),H.applyMatrix4(M);var Aa=1/H.w;H.z*=Aa,H.z>=-1&&H.z<=1&&(p=e(),p.id=s.id,p.x=H.x*Aa,p.y=H.y*Aa,p.z=H.z,p.object=s,p.rotation=s.rotation,p.scale.x=s.scale.x*Math.abs(p.x-(H.x+h.projectionMatrix.elements[0])/(H.w+h.projectionMatrix.elements[12])),p.scale.y=s.scale.y*Math.abs(p.y-(H.y+h.projectionMatrix.elements[5])/(H.w+h.projectionMatrix.elements[13])),p.material=s.material,C.elements.push(p))}return j===!0&&C.elements.sort(f),C}},THREE.Face3=function(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3,this.vertexNormals=d instanceof Array?d:[],this.color=e instanceof THREE.Color?e:new THREE.Color,this.vertexColors=e instanceof Array?e:[],this.vertexTangents=[],this.materialIndex=void 0!==f?f:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal),a.color.copy(this.color),a.materialIndex=this.materialIndex;var b,c;for(b=0,c=this.vertexNormals.length;c>b;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();for(b=0,c=this.vertexColors.length;c>b;b++)a.vertexColors[b]=this.vertexColors[b].clone();for(b=0,c=this.vertexTangents.length;c>b;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();return a}},THREE.Face4=function(a,b,c,d,e,f,g){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(a,b,c,e,f,g)},THREE.BufferAttribute=function(){},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},set:function(a){this.array.set(a)},setX:function(a,b){this.array[a*this.itemSize]=b},setY:function(a,b){this.array[a*this.itemSize+1]=b},setZ:function(a,b){this.array[a*this.itemSize+2]=b},setXY:function(a,b,c){a*=this.itemSize,this.array[a]=b,this.array[a+1]=c},setXYZ:function(a,b,c,d){a*=this.itemSize,this.array[a]=b,this.array[a+1]=c,this.array[a+2]=d},setXYZW:function(a,b,c,d,e){a*=this.itemSize,this.array[a]=b,this.array[a+1]=c,this.array[a+2]=d,this.array[a+3]=e}},THREE.Int8Attribute=function(a,b){this.array=new Int8Array(a*b),this.itemSize=b},THREE.Int8Attribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.Uint8Attribute=function(a,b){this.array=new Uint8Array(a*b),this.itemSize=b},THREE.Uint8Attribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.Uint8ClampedAttribute=function(a,b){this.array=new Uint8ClampedArray(a*b),this.itemSize=b},THREE.Uint8ClampedAttribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.Int16Attribute=function(a,b){this.array=new Int16Array(a*b),this.itemSize=b},THREE.Int16Attribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.Uint16Attribute=function(a,b){this.array=new Uint16Array(a*b),this.itemSize=b},THREE.Uint16Attribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.Int32Attribute=function(a,b){this.array=new Int32Array(a*b),this.itemSize=b},THREE.Int32Attribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.Uint32Attribute=function(a,b){this.array=new Uint32Array(a*b),this.itemSize=b},THREE.Uint32Attribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.Float32Attribute=function(a,b){this.array=new Float32Array(a*b),this.itemSize=b},THREE.Float32Attribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.Float64Attribute=function(a,b){this.array=new Float64Array(a*b),this.itemSize=b},THREE.Float64Attribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.attributes={},this.drawcalls=[],this.offsets=this.drawcalls,this.boundingBox=null,this.boundingSphere=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b){return b instanceof THREE.BufferAttribute==!1?(console.warn("DEPRECATED: BufferGeometry's addAttribute() now expects ( name, attribute )."),void(this.attributes[a]={array:arguments[1],itemSize:arguments[2]})):void(this.attributes[a]=b)},getAttribute:function(a){return this.attributes[a]},addDrawCall:function(a,b,c){this.drawcalls.push({start:a,count:b,index:void 0!==c?c:0})},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);var c=this.attributes.normal;if(void 0!==c){var d=(new THREE.Matrix3).getNormalMatrix(a);d.applyToVector3Array(c.array),c.needsUpdate=!0}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox;a.length>=3&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var c=3,d=a.length;d>c;c+=3){var e=a[c],f=a[c+1],g=a[c+2];e<b.min.x?b.min.x=e:e>b.max.x&&(b.max.x=e),f<b.min.y?b.min.y=f:f>b.max.y&&(b.max.y=f),g<b.min.z?b.min.z=g:g>b.max.z&&(b.max.z=g)}}(void 0===a||0===a.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0))},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var d=this.boundingSphere.center,e=0,f=c.length;f>e;e+=3)b.set(c[e],c[e+1],c[e+2]),a.addPoint(b);a.center(d);for(var g=0,e=0,f=c.length;f>e;e+=3)b.set(c[e],c[e+1],c[e+2]),g=Math.max(g,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(g)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){if(this.attributes.position){var a,b,c,d,e=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(e)};else for(a=0,b=this.attributes.normal.array.length;b>a;a++)this.attributes.normal.array[a]=0;var f,g,h,i,j,k,l=this.attributes.position.array,m=this.attributes.normal.array,n=new THREE.Vector3,o=new THREE.Vector3,p=new THREE.Vector3,q=new THREE.Vector3,r=new THREE.Vector3;if(this.attributes.index){
var s=this.attributes.index.array,t=this.offsets.length>0?this.offsets:[{start:0,count:s.length,index:0}];for(c=0,d=t.length;d>c;++c){var u=t[c].start,v=t[c].count,w=t[c].index;for(a=u,b=u+v;b>a;a+=3)f=w+s[a],g=w+s[a+1],h=w+s[a+2],i=l[3*f],j=l[3*f+1],k=l[3*f+2],n.set(i,j,k),i=l[3*g],j=l[3*g+1],k=l[3*g+2],o.set(i,j,k),i=l[3*h],j=l[3*h+1],k=l[3*h+2],p.set(i,j,k),q.subVectors(p,o),r.subVectors(n,o),q.cross(r),m[3*f]+=q.x,m[3*f+1]+=q.y,m[3*f+2]+=q.z,m[3*g]+=q.x,m[3*g+1]+=q.y,m[3*g+2]+=q.z,m[3*h]+=q.x,m[3*h+1]+=q.y,m[3*h+2]+=q.z}}else for(a=0,b=l.length;b>a;a+=9)i=l[a],j=l[a+1],k=l[a+2],n.set(i,j,k),i=l[a+3],j=l[a+4],k=l[a+5],o.set(i,j,k),i=l[a+6],j=l[a+7],k=l[a+8],p.set(i,j,k),q.subVectors(p,o),r.subVectors(n,o),q.cross(r),m[a]=q.x,m[a+1]=q.y,m[a+2]=q.z,m[a+3]=q.x,m[a+4]=q.y,m[a+5]=q.z,m[a+6]=q.x,m[a+7]=q.y,m[a+8]=q.z;this.normalizeNormals(),this.normalsNeedUpdate=!0}},computeTangents:function(){function a(a,b,c){m=d[3*a],n=d[3*a+1],o=d[3*a+2],p=d[3*b],q=d[3*b+1],r=d[3*b+2],s=d[3*c],t=d[3*c+1],u=d[3*c+2],v=f[2*a],w=f[2*a+1],x=f[2*b],y=f[2*b+1],z=f[2*c],A=f[2*c+1],B=p-m,C=s-m,D=q-n,E=t-n,F=r-o,G=u-o,H=x-v,I=z-v,J=y-w,K=A-w,L=1/(H*K-I*J),T.set((K*B-J*C)*L,(K*D-J*E)*L,(K*F-J*G)*L),U.set((H*C-I*B)*L,(H*E-I*D)*L,(H*G-I*F)*L),j[a].add(T),j[b].add(T),j[c].add(T),k[a].add(U),k[b].add(U),k[c].add(U)}function b(a){ca.x=e[3*a],ca.y=e[3*a+1],ca.z=e[3*a+2],da.copy(ca),$=j[a],aa.copy($),aa.sub(ca.multiplyScalar(ca.dot($))).normalize(),ba.crossVectors(da,$),_=ba.dot(k[a]),Z=0>_?-1:1,i[4*a]=aa.x,i[4*a+1]=aa.y,i[4*a+2]=aa.z,i[4*a+3]=Z}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");var c=this.attributes.index.array,d=this.attributes.position.array,e=this.attributes.normal.array,f=this.attributes.uv.array,g=d.length/3;if(void 0===this.attributes.tangent){var h=4*g;this.attributes.tangent={itemSize:4,array:new Float32Array(h)}}for(var i=this.attributes.tangent.array,j=[],k=[],l=0;g>l;l++)j[l]=new THREE.Vector3,k[l]=new THREE.Vector3;var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=new THREE.Vector3,U=new THREE.Vector3,V=this.offsets;for(O=0,P=V.length;P>O;++O){var W=V[O].start,X=V[O].count,Y=V[O].index;for(M=W,N=W+X;N>M;M+=3)Q=Y+c[M],R=Y+c[M+1],S=Y+c[M+2],a(Q,R,S)}var Z,$,_,aa=new THREE.Vector3,ba=new THREE.Vector3,ca=new THREE.Vector3,da=new THREE.Vector3;for(O=0,P=V.length;P>O;++O){var W=V[O].start,X=V[O].count,Y=V[O].index;for(M=W,N=W+X;N>M;M+=3)Q=Y+c[M],R=Y+c[M+1],S=Y+c[M+2],b(Q),b(R),b(S)}},computeOffsets:function(a){var b=a;void 0===a&&(b=65535);for(var c=(Date.now(),this.attributes.index.array),d=this.attributes.position.array,e=(d.length/3,c.length/3),f=new Uint16Array(c.length),g=0,h=0,i=[{start:0,count:0,index:0}],j=i[0],k=0,l=0,m=new Int32Array(6),n=new Int32Array(d.length),o=new Int32Array(d.length),p=0;p<d.length;p++)n[p]=-1,o[p]=-1;for(var q=0;e>q;q++){l=0;for(var r=0;3>r;r++){var s=c[3*q+r];-1==n[s]?(m[2*r]=s,m[2*r+1]=-1,l++):n[s]<j.index?(m[2*r]=s,m[2*r+1]=-1,k++):(m[2*r]=s,m[2*r+1]=n[s])}var t=h+l;if(t>j.index+b){var u={start:g,count:0,index:h};i.push(u),j=u;for(var v=0;6>v;v+=2){var w=m[v+1];w>-1&&w<j.index&&(m[v+1]=-1)}}for(var v=0;6>v;v+=2){var s=m[v],w=m[v+1];-1===w&&(w=h++),n[s]=w,o[w]=s,f[g++]=w-j.index,j.count++}}return this.reorderBuffers(f,o,h),this.offsets=i,i},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){for(var a,b,c,d,e=this.attributes.normal.array,f=0,g=e.length;g>f;f+=3)a=e[f],b=e[f+1],c=e[f+2],d=1/Math.sqrt(a*a+b*b+c*c),e[f]*=d,e[f+1]*=d,e[f+2]*=d},reorderBuffers:function(a,b,c){var d={},e=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var f in this.attributes)if("index"!=f)for(var g=this.attributes[f].array,h=0,i=e.length;i>h;h++){var j=e[h];if(g instanceof j){d[f]=new j(this.attributes[f].itemSize*c);break}}for(var k=0;c>k;k++){var l=b[k];for(var f in this.attributes)if("index"!=f)for(var m=this.attributes[f].array,n=this.attributes[f].itemSize,o=d[f],p=0;n>p;p++)o[k*n+p]=m[l*n+p]}this.attributes.index.array=a;for(var f in this.attributes)"index"!=f&&(this.attributes[f].array=d[f],this.attributes[f].numItems=this.attributes[f].itemSize*c)},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var c in this.attributes){for(var d=this.attributes[c],e=d.array,f={itemSize:d.itemSize,array:null},g=0,h=b.length;h>g;g++){var i=b[g];if(e instanceof i){f.array=new i(e);break}}a.attributes[c]=f}for(var g=0,h=this.offsets.length;h>g;g++){var j=this.offsets[g];a.offsets.push({start:j.start,index:j.index,count:j.count})}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.buffersNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;d>c;c++){var e=this.vertices[c];e.applyMatrix4(a)}for(var c=0,d=this.faces.length;d>c;c++){var f=this.faces[c];f.normal.applyMatrix3(b).normalize();for(var g=0,h=f.vertexNormals.length;h>g;g++)f.vertexNormals[g].applyMatrix3(b).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;d>c;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b],h=this.vertices[e.c];a.subVectors(h,g),b.subVectors(f,g),a.cross(b),a.normalize(),e.normal.copy(a)}},computeVertexNormals:function(a){var b,c,d,e,f,g;for(g=new Array(this.vertices.length),b=0,c=this.vertices.length;c>b;b++)g[b]=new THREE.Vector3;if(a){var h,i,j,k=new THREE.Vector3,l=new THREE.Vector3;new THREE.Vector3,new THREE.Vector3,new THREE.Vector3;for(d=0,e=this.faces.length;e>d;d++)f=this.faces[d],h=this.vertices[f.a],i=this.vertices[f.b],j=this.vertices[f.c],k.subVectors(j,i),l.subVectors(h,i),k.cross(l),g[f.a].add(k),g[f.b].add(k),g[f.c].add(k)}else for(d=0,e=this.faces.length;e>d;d++)f=this.faces[d],g[f.a].add(f.normal),g[f.b].add(f.normal),g[f.c].add(f.normal);for(b=0,c=this.vertices.length;c>b;b++)g[b].normalize();for(d=0,e=this.faces.length;e>d;d++)f=this.faces[d],f.vertexNormals[0]=g[f.a].clone(),f.vertexNormals[1]=g[f.b].clone(),f.vertexNormals[2]=g[f.c].clone()},computeMorphNormals:function(){var a,b,c,d,e;for(c=0,d=this.faces.length;d>c;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;b>a;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var f=new THREE.Geometry;for(f.faces=this.faces,a=0,b=this.morphTargets.length;b>a;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var g,h,i=this.morphNormals[a].faceNormals,j=this.morphNormals[a].vertexNormals;for(c=0,d=this.faces.length;d>c;c++)g=new THREE.Vector3,h={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},i.push(g),j.push(h)}var k=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices,f.computeFaceNormals(),f.computeVertexNormals();var g,h;for(c=0,d=this.faces.length;d>c;c++)e=this.faces[c],g=k.faceNormals[c],h=k.vertexNormals[c],g.copy(e.normal),h.a.copy(e.vertexNormals[0]),h.b.copy(e.vertexNormals[1]),h.c.copy(e.vertexNormals[2])}for(c=0,d=this.faces.length;d>c;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){function a(a,b,c,d,e,f,g){j=a.vertices[b],k=a.vertices[c],l=a.vertices[d],m=i[e],n=i[f],o=i[g],p=k.x-j.x,q=l.x-j.x,r=k.y-j.y,s=l.y-j.y,t=k.z-j.z,u=l.z-j.z,v=n.x-m.x,w=o.x-m.x,x=n.y-m.y,y=o.y-m.y,z=1/(v*y-w*x),F.set((y*p-x*q)*z,(y*r-x*s)*z,(y*t-x*u)*z),G.set((v*q-w*p)*z,(v*s-w*r)*z,(v*u-w*t)*z),D[b].add(F),D[c].add(F),D[d].add(F),E[b].add(G),E[c].add(G),E[d].add(G)}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=[],E=[],F=new THREE.Vector3,G=new THREE.Vector3,H=new THREE.Vector3,I=new THREE.Vector3,J=new THREE.Vector3;for(d=0,e=this.vertices.length;e>d;d++)D[d]=new THREE.Vector3,E[d]=new THREE.Vector3;for(b=0,c=this.faces.length;c>b;b++)h=this.faces[b],i=this.faceVertexUvs[0][b],a(this,h.a,h.b,h.c,0,1,2);var K=["a","b","c","d"];for(b=0,c=this.faces.length;c>b;b++)for(h=this.faces[b],f=0;f<Math.min(h.vertexNormals.length,3);f++)J.copy(h.vertexNormals[f]),g=h[K[f]],A=D[g],H.copy(A),H.sub(J.multiplyScalar(J.dot(A))).normalize(),I.crossVectors(h.vertexNormals[f],A),B=I.dot(E[g]),C=0>B?-1:1,h.vertexTangents[f]=new THREE.Vector4(H.x,H.y,H.z,C);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;d>c;c++)c>0&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(a instanceof THREE.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);var d,e=this.vertices.length,f=(this.faceVertexUvs[0].length,this.vertices),g=a.vertices,h=this.faces,i=a.faces,j=this.faceVertexUvs[0],k=a.faceVertexUvs[0];void 0===c&&(c=0),void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var l=0,m=g.length;m>l;l++){var n=g[l],o=n.clone();void 0!==b&&o.applyMatrix4(b),f.push(o)}for(l=0,m=i.length;m>l;l++){var p,q,r,s=i[l],t=s.vertexNormals,u=s.vertexColors;p=new THREE.Face3(s.a+e,s.b+e,s.c+e),p.normal.copy(s.normal),void 0!==d&&p.normal.applyMatrix3(d).normalize();for(var v=0,w=t.length;w>v;v++)q=t[v].clone(),void 0!==d&&q.applyMatrix3(d).normalize(),p.vertexNormals.push(q);p.color.copy(s.color);for(var v=0,w=u.length;w>v;v++)r=u[v],p.vertexColors.push(r.clone());p.materialIndex=s.materialIndex+c,h.push(p)}for(l=0,m=k.length;m>l;l++){var x=k[l],y=[];if(void 0!==x){for(var v=0,w=x.length;w>v;v++)y.push(new THREE.Vector2(x[v].x,x[v].y));j.push(y)}}},mergeVertices:function(){var a,b,c,d,e,f,g,h,i={},j=[],k=[],l=4,m=Math.pow(10,l);for(c=0,d=this.vertices.length;d>c;c++)a=this.vertices[c],b=Math.round(a.x*m)+"_"+Math.round(a.y*m)+"_"+Math.round(a.z*m),void 0===i[b]?(i[b]=c,j.push(this.vertices[c]),k[c]=j.length-1):k[c]=k[i[b]];var n=[];for(c=0,d=this.faces.length;d>c;c++){e=this.faces[c],e.a=k[e.a],e.b=k[e.b],e.c=k[e.c],f=[e.a,e.b,e.c];for(var o=-1,p=0;3>p;p++)if(f[p]==f[(p+1)%3]){o=p,n.push(c);break}}for(c=n.length-1;c>=0;c--){var q=n[c];for(this.faces.splice(q,1),g=0,h=this.faceVertexUvs.length;h>g;g++)this.faceVertexUvs[g].splice(q,1)}var r=this.vertices.length-j.length;return this.vertices=j,r},makeGroups:function(){var a=0;return function(b,c){var d,e,f,g,h,i={},j=this.morphTargets.length,k=this.morphNormals.length;for(this.geometryGroups={},d=0,e=this.faces.length;e>d;d++)f=this.faces[d],g=b?f.materialIndex:0,g in i||(i[g]={hash:g,counter:0}),h=i[g].hash+"_"+i[g].counter,h in this.geometryGroups||(this.geometryGroups[h]={faces3:[],materialIndex:g,vertices:0,numMorphTargets:j,numMorphNormals:k}),this.geometryGroups[h].vertices+3>c&&(i[g].counter+=1,h=i[g].hash+"_"+i[g].counter,h in this.geometryGroups||(this.geometryGroups[h]={faces3:[],materialIndex:g,vertices:0,numMorphTargets:j,numMorphNormals:k})),this.geometryGroups[h].faces3.push(d),this.geometryGroups[h].vertices+=3;this.geometryGroupsList=[];for(var l in this.geometryGroups)this.geometryGroups[l].id=a++,this.geometryGroupsList.push(this.geometryGroups[l])}}(),clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,d=b.length;d>c;c++)a.vertices.push(b[c].clone());for(var e=this.faces,c=0,d=e.length;d>c;c++)a.faces.push(e[c].clone());for(var f=this.faceVertexUvs[0],c=0,d=f.length;d>c;c++){for(var g=f[c],h=[],i=0,j=g.length;j>i;i++)h.push(new THREE.Vector2(g[i].x,g[i].y));a.faceVertexUvs[0].push(h)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up),this.quaternion.setFromRotationMatrix(a)}}(),THREE.Camera.prototype.clone=function(a){return void 0===a&&(a=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,a),a.matrixWorldInverse.copy(this.matrixWorldInverse),a.projectionMatrix.copy(this.projectionMatrix),a},THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this),this.left=a,this.right=b,this.top=c,this.bottom=d,this.near=void 0!==e?e:.1,this.far=void 0!==f?f:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,a),a.left=this.left,a.right=this.right,a.top=this.top,a.bottom=this.bottom,a.near=this.near,a.far=this.far,a},THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this),this.fov=void 0!==a?a:50,this.aspect=void 0!==b?b:1,this.near=void 0!==c?c:.1,this.far=void 0!==d?d:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24),this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a,this.fullHeight=b,this.x=c,this.y=d,this.width=e,this.height=f,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,c=-b,d=a*c,e=a*b,f=Math.abs(e-d),g=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*f/this.fullWidth,d+(this.x+this.width)*f/this.fullWidth,b-(this.y+this.height)*g/this.fullHeight,b-this.y*g/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,a),a.fov=this.fov,a.aspect=this.aspect,a.near=this.near,a.far=this.far,a},THREE.Light=function(a){THREE.Object3D.call(this),this.color=new THREE.Color(a)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(a){return void 0===a&&(a=new THREE.Light),THREE.Object3D.prototype.clone.call(this,a),a.color.copy(this.color),a},THREE.AmbientLight=function(a){THREE.Light.call(this,a)},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,a),a},THREE.AreaLight=function(a,b){THREE.Light.call(this,a),this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==b?b:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==b?b:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,a),a.target=this.target.clone(),a.intensity=this.intensity,a.castShadow=this.castShadow,a.onlyShadow=this.onlyShadow,a.shadowCameraNear=this.shadowCameraNear,a.shadowCameraFar=this.shadowCameraFar,a.shadowCameraLeft=this.shadowCameraLeft,a.shadowCameraRight=this.shadowCameraRight,a.shadowCameraTop=this.shadowCameraTop,a.shadowCameraBottom=this.shadowCameraBottom,a.shadowCameraVisible=this.shadowCameraVisible,a.shadowBias=this.shadowBias,a.shadowDarkness=this.shadowDarkness,a.shadowMapWidth=this.shadowMapWidth,a.shadowMapHeight=this.shadowMapHeight,a.shadowCascade=this.shadowCascade,a.shadowCascadeOffset.copy(this.shadowCascadeOffset),a.shadowCascadeCount=this.shadowCascadeCount,a.shadowCascadeBias=this.shadowCascadeBias.slice(0),a.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),a.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),a.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),a.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),a},THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a),this.position.set(0,100,0),this.groundColor=new THREE.Color(b),this.intensity=void 0!==c?c:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,a),a.groundColor.copy(this.groundColor),a.intensity=this.intensity,a},THREE.PointLight=function(a,b,c){THREE.Light.call(this,a),this.intensity=void 0!==b?b:1,this.distance=void 0!==c?c:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,a),a.intensity=this.intensity,a.distance=this.distance,a},THREE.SpotLight=function(a,b,c,d,e){THREE.Light.call(this,a),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==b?b:1,this.distance=void 0!==c?c:0,this.angle=void 0!==d?d:Math.PI/3,this.exponent=void 0!==e?e:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,a),a.target=this.target.clone(),a.intensity=this.intensity,a.distance=this.distance,a.angle=this.angle,a.exponent=this.exponent,a.castShadow=this.castShadow,a.onlyShadow=this.onlyShadow,a.shadowCameraNear=this.shadowCameraNear,a.shadowCameraFar=this.shadowCameraFar,a.shadowCameraFov=this.shadowCameraFov,a.shadowCameraVisible=this.shadowCameraVisible,a.shadowBias=this.shadowBias,a.shadowDarkness=this.shadowDarkness,a.shadowMapWidth=this.shadowMapWidth,a.shadowMapHeight=this.shadowMapHeight,a},THREE.Cache=function(){this.files={}},THREE.Cache.prototype={constructor:THREE.Cache,add:function(a,b){this.files[a]=b},get:function(a){return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},THREE.Loader=function(a){this.showStatus=a,this.statusDomElement=a?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var a=document.createElement("div");return a.style.position="absolute",a.style.right="0px",a.style.top="0px",a.style.fontSize="0.8em",a.style.textAlign="left",a.style.background="rgba(0,0,0,0.25)",a.style.color="#fff",a.style.width="120px",a.style.padding="0.5em 0.5em 0.5em 0.5em",a.style.zIndex=1e3,a.innerHTML="Loading ...",a},updateProgress:function(a){var b="Loaded ";b+=a.total?(100*a.loaded/a.total).toFixed(0)+"%":(a.loaded/1024).toFixed(2)+" KB",this.statusDomElement.innerHTML=b},extractUrlBase:function(a){var b=a.split("/");return 1===b.length?"./":(b.pop(),b.join("/")+"/")},initMaterials:function(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=this.createMaterial(a[d],b);return c},needsTangents:function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d instanceof THREE.ShaderMaterial)return!0}return!1},createMaterial:function(a,b){function c(a){var b=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(b))}function d(a,d,e,g,h,i,j){var k=/\.dds$/i.test(e),l=b+e;if(k){var m=THREE.ImageUtils.loadCompressedTexture(l);a[d]=m}else{var m=document.createElement("canvas");a[d]=new THREE.Texture(m)}if(a[d].sourceFile=e,g&&(a[d].repeat.set(g[0],g[1]),1!==g[0]&&(a[d].wrapS=THREE.RepeatWrapping),1!==g[1]&&(a[d].wrapT=THREE.RepeatWrapping)),h&&a[d].offset.set(h[0],h[1]),i){var n={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==n[i[0]]&&(a[d].wrapS=n[i[0]]),void 0!==n[i[1]]&&(a[d].wrapT=n[i[1]])}if(j&&(a[d].anisotropy=j),!k){var m=a[d];f.imageLoader.crossOrigin=f.crossOrigin,f.imageLoader.load(l,function(a){if(THREE.Math.isPowerOfTwo(a.width)===!1||THREE.Math.isPowerOfTwo(a.height)===!1){var b=c(a.width),d=c(a.height);m.image.width=b,m.image.height=d,m.image.getContext("2d").drawImage(a,0,0,b,d)}else m.image=a;m.needsUpdate=!0})}}function e(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var f=this,g="MeshLambertMaterial",h={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var i=a.shading.toLowerCase();"phong"===i?g="MeshPhongMaterial":"basic"===i&&(g="MeshBasicMaterial")}if(void 0!==a.blending&&void 0!==THREE[a.blending]&&(h.blending=THREE[a.blending]),(void 0!==a.transparent||a.opacity<1)&&(h.transparent=a.transparent),void 0!==a.depthTest&&(h.depthTest=a.depthTest),void 0!==a.depthWrite&&(h.depthWrite=a.depthWrite),void 0!==a.visible&&(h.visible=a.visible),void 0!==a.flipSided&&(h.side=THREE.BackSide),void 0!==a.doubleSided&&(h.side=THREE.DoubleSide),void 0!==a.wireframe&&(h.wireframe=a.wireframe),void 0!==a.vertexColors&&("face"===a.vertexColors?h.vertexColors=THREE.FaceColors:a.vertexColors&&(h.vertexColors=THREE.VertexColors)),a.colorDiffuse?h.color=e(a.colorDiffuse):a.DbgColor&&(h.color=a.DbgColor),a.colorSpecular&&(h.specular=e(a.colorSpecular)),a.colorAmbient&&(h.ambient=e(a.colorAmbient)),a.colorEmissive&&(h.emissive=e(a.colorEmissive)),a.transparency&&(h.opacity=a.transparency),a.specularCoef&&(h.shininess=a.specularCoef),a.mapDiffuse&&b&&d(h,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy),a.mapLight&&b&&d(h,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy),a.mapBump&&b&&d(h,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy),a.mapNormal&&b&&d(h,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy),a.mapSpecular&&b&&d(h,"specularMap",a.mapSpecular,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy),a.mapBumpScale&&(h.bumpScale=a.mapBumpScale),a.mapNormal){var j=THREE.ShaderLib.normalmap,k=THREE.UniformsUtils.clone(j.uniforms);k.tNormal.value=h.normalMap,a.mapNormalFactor&&k.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),h.map&&(k.tDiffuse.value=h.map,k.enableDiffuse.value=!0),h.specularMap&&(k.tSpecular.value=h.specularMap,k.enableSpecular.value=!0),h.lightMap&&(k.tAO.value=h.lightMap,k.enableAO.value=!0),k.diffuse.value.setHex(h.color),k.specular.value.setHex(h.specular),k.ambient.value.setHex(h.ambient),k.shininess.value=h.shininess,void 0!==h.opacity&&(k.opacity.value=h.opacity);var l={fragmentShader:j.fragmentShader,vertexShader:j.vertexShader,uniforms:k,lights:!0,fog:!0},m=new THREE.ShaderMaterial(l);h.transparent&&(m.transparent=!0)}else var m=new THREE[g](h);return void 0!==a.DbgName&&(m.name=a.DbgName),m}},THREE.XHRLoader=function(a){this.cache=new THREE.Cache,this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,f=e.cache.get(a);if(void 0!==f)return void b(f);var g=new XMLHttpRequest;void 0!==b&&g.addEventListener("load",function(c){e.cache.add(a,c.target.responseText),b(c.target.responseText),e.manager.itemEnd(a)},!1),void 0!==c&&g.addEventListener("progress",function(a){c(a)},!1),void 0!==d&&g.addEventListener("error",function(a){d(a)},!1),void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),g.open("GET",a,!0),g.send(null),e.manager.itemStart(a)},setCrossOrigin:function(a){this.crossOrigin=a}},THREE.ImageLoader=function(a){this.cache=new THREE.Cache,this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,f=e.cache.get(a);if(void 0!==f)return void b(f);var g=document.createElement("img");return void 0!==b&&g.addEventListener("load",function(c){e.cache.add(a,this),b(this),e.manager.itemEnd(a)},!1),void 0!==c&&g.addEventListener("progress",function(a){c(a)},!1),void 0!==d&&g.addEventListener("error",function(a){d(a)},!1),void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),g.src=a,e.manager.itemStart(a),g},setCrossOrigin:function(a){this.crossOrigin=a}},THREE.JSONLoader=function(a){THREE.Loader.call(this,a),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(a,b,c){c=c&&"string"==typeof c?c:this.extractUrlBase(a),this.onLoadStart(),this.loadAjaxJSON(this,a,b,c)},THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e){var f=new XMLHttpRequest,g=0;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status){if(f.responseText){var h=JSON.parse(f.responseText);if(void 0!==h.metadata&&"scene"===h.metadata.type)return void console.error('THREE.JSONLoader: "'+b+'" seems to be a Scene. Use THREE.SceneLoader instead.');var i=a.parse(h,d);c(i.geometry,i.materials)}else console.error('THREE.JSONLoader: "'+b+'" seems to be unreachable or the file is empty.');a.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+b+'" ('+f.status+")");else f.readyState===f.LOADING?e&&(0===g&&(g=f.getResponseHeader("Content-Length")),e({total:g,loaded:f.responseText.length})):f.readyState===f.HEADERS_RECEIVED&&void 0!==e&&(g=f.getResponseHeader("Content-Length"))},f.open("GET",b,!0),f.withCredentials=this.withCredentials,f.send(null)},THREE.JSONLoader.prototype.parse=function(a,b){function c(b){function c(a,b){return a&1<<b}var d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F=a.faces,G=a.vertices,H=a.normals,I=a.colors,J=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&J++;for(d=0;J>d;d++)f.faceVertexUvs[d]=[]}for(h=0,i=G.length;i>h;)v=new THREE.Vector3,v.x=G[h++]*b,v.y=G[h++]*b,v.z=G[h++]*b,f.vertices.push(v);for(h=0,i=F.length;i>h;)if(n=F[h++],o=c(n,0),p=c(n,1),q=c(n,3),r=c(n,4),s=c(n,5),t=c(n,6),u=c(n,7),o){if(x=new THREE.Face3,x.a=F[h],x.b=F[h+1],x.c=F[h+3],y=new THREE.Face3,y.a=F[h+1],y.b=F[h+2],y.c=F[h+3],h+=4,p&&(m=F[h++],x.materialIndex=m,y.materialIndex=m),g=f.faces.length,q)for(d=0;J>d;d++)for(B=a.uvs[d],f.faceVertexUvs[d][g]=[],f.faceVertexUvs[d][g+1]=[],e=0;4>e;e++)l=F[h++],D=B[2*l],E=B[2*l+1],C=new THREE.Vector2(D,E),2!==e&&f.faceVertexUvs[d][g].push(C),0!==e&&f.faceVertexUvs[d][g+1].push(C);if(r&&(k=3*F[h++],x.normal.set(H[k++],H[k++],H[k]),y.normal.copy(x.normal)),s)for(d=0;4>d;d++)k=3*F[h++],A=new THREE.Vector3(H[k++],H[k++],H[k]),2!==d&&x.vertexNormals.push(A),0!==d&&y.vertexNormals.push(A);if(t&&(j=F[h++],z=I[j],x.color.setHex(z),y.color.setHex(z)),u)for(d=0;4>d;d++)j=F[h++],z=I[j],2!==d&&x.vertexColors.push(new THREE.Color(z)),0!==d&&y.vertexColors.push(new THREE.Color(z));f.faces.push(x),f.faces.push(y)}else{if(w=new THREE.Face3,w.a=F[h++],w.b=F[h++],w.c=F[h++],p&&(m=F[h++],w.materialIndex=m),g=f.faces.length,q)for(d=0;J>d;d++)for(B=a.uvs[d],f.faceVertexUvs[d][g]=[],e=0;3>e;e++)l=F[h++],D=B[2*l],E=B[2*l+1],C=new THREE.Vector2(D,E),f.faceVertexUvs[d][g].push(C);if(r&&(k=3*F[h++],w.normal.set(H[k++],H[k++],H[k])),s)for(d=0;3>d;d++)k=3*F[h++],A=new THREE.Vector3(H[k++],H[k++],H[k]),w.vertexNormals.push(A);if(t&&(j=F[h++],w.color.setHex(I[j])),u)for(d=0;3>d;d++)j=F[h++],w.vertexColors.push(new THREE.Color(I[j]));f.faces.push(w)}}function d(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var c=0,d=a.skinWeights.length;d>c;c+=b){var e=a.skinWeights[c],g=b>1?a.skinWeights[c+1]:0,h=b>2?a.skinWeights[c+2]:0,i=b>3?a.skinWeights[c+3]:0;f.skinWeights.push(new THREE.Vector4(e,g,h,i))}if(a.skinIndices)for(var c=0,d=a.skinIndices.length;d>c;c+=b){var j=a.skinIndices[c],k=b>1?a.skinIndices[c+1]:0,l=b>2?a.skinIndices[c+2]:0,m=b>3?a.skinIndices[c+3]:0;f.skinIndices.push(new THREE.Vector4(j,k,l,m))}f.bones=a.bones,f.bones&&f.bones.length>0&&(f.skinWeights.length!==f.skinIndices.length||f.skinIndices.length!==f.vertices.length)&&console.warn("When skinning, number of vertices ("+f.vertices.length+"), skinIndices ("+f.skinIndices.length+"), and skinWeights ("+f.skinWeights.length+") should match."),f.animation=a.animation,f.animations=a.animations}function e(b){if(void 0!==a.morphTargets){var c,d,e,g,h,i;for(c=0,d=a.morphTargets.length;d>c;c++)for(f.morphTargets[c]={},f.morphTargets[c].name=a.morphTargets[c].name,f.morphTargets[c].vertices=[],h=f.morphTargets[c].vertices,i=a.morphTargets[c].vertices,e=0,g=i.length;g>e;e+=3){var j=new THREE.Vector3;j.x=i[e]*b,j.y=i[e+1]*b,j.z=i[e+2]*b,h.push(j)}}if(void 0!==a.morphColors){var c,d,k,l,m,n,o;for(c=0,d=a.morphColors.length;d>c;c++)for(f.morphColors[c]={},f.morphColors[c].name=a.morphColors[c].name,f.morphColors[c].colors=[],m=f.morphColors[c].colors,n=a.morphColors[c].colors,k=0,l=n.length;l>k;k+=3)o=new THREE.Color(16755200),o.setRGB(n[k],n[k+1],n[k+2]),m.push(o)}}var f=new THREE.Geometry,g=void 0!==a.scale?1/a.scale:1;if(c(g),d(),e(g),f.computeFaceNormals(),f.computeBoundingSphere(),void 0===a.materials||0===a.materials.length)return{geometry:f};var h=this.initMaterials(a.materials,b);return this.needsTangents(h)&&f.computeTangents(),{geometry:f,materials:h}},THREE.LoadingManager=function(a,b,c){var d=this,e=0,f=0;this.onLoad=a,this.onProgress=b,this.onError=c,this.itemStart=function(a){f++},this.itemEnd=function(a){
e++,void 0!==d.onProgress&&d.onProgress(a,e,f),e===f&&void 0!==d.onLoad&&d.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader;f.setCrossOrigin(this.crossOrigin),f.load(a,function(a){b(e.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.attributes,d=a.offsets,e=a.boundingSphere;for(var f in c){var g=c[f];b.attributes[f]={itemSize:g.itemSize,array:new self[g.type](g.array)}}return void 0!==d&&(b.offsets=JSON.parse(JSON.stringify(d))),void 0!==e&&(b.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==e.center?e.center:[0,0,0]),e.radius)),b}},THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader;f.setCrossOrigin(this.crossOrigin),f.load(a,function(a){b(e.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE[a.type];if(void 0!==a.color&&b.color.setHex(a.color),void 0!==a.ambient&&b.ambient.setHex(a.ambient),void 0!==a.emissive&&b.emissive.setHex(a.emissive),void 0!==a.specular&&b.specular.setHex(a.specular),void 0!==a.shininess&&(b.shininess=a.shininess),void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors),void 0!==a.blending&&(b.blending=a.blending),void 0!==a.side&&(b.side=a.side),void 0!==a.opacity&&(b.opacity=a.opacity),void 0!==a.transparent&&(b.transparent=a.transparent),void 0!==a.wireframe&&(b.wireframe=a.wireframe),void 0!==a.materials)for(var c=0,d=a.materials.length;d>c;c++)b.materials.push(this.parse(a.materials[c]));return b}},THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader(e.manager);f.setCrossOrigin(this.crossOrigin),f.load(a,function(a){b(e.parse(JSON.parse(a)))})},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=this.parseGeometries(a.geometries),c=this.parseMaterials(a.materials),d=this.parseObject(a.object,b,c);return d},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,e=0,f=a.length;f>e;e++){var g,h=a[e];switch(h.type){case"PlaneGeometry":g=new THREE.PlaneGeometry(h.width,h.height,h.widthSegments,h.heightSegments);break;case"BoxGeometry":case"CubeGeometry":g=new THREE.BoxGeometry(h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case"CircleGeometry":g=new THREE.CircleGeometry(h.radius,h.segments);break;case"CylinderGeometry":g=new THREE.CylinderGeometry(h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded);break;case"SphereGeometry":g=new THREE.SphereGeometry(h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case"IcosahedronGeometry":g=new THREE.IcosahedronGeometry(h.radius,h.detail);break;case"TorusGeometry":g=new THREE.TorusGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case"TorusKnotGeometry":g=new THREE.TorusKnotGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.p,h.q,h.heightScale);break;case"BufferGeometry":g=d.parse(h.data);break;case"Geometry":g=c.parse(h.data).geometry}g.uuid=h.uuid,void 0!==h.name&&(g.name=h.name),b[h.uuid]=g}return b},parseMaterials:function(a){var b={};if(void 0!==a)for(var c=new THREE.MaterialLoader,d=0,e=a.length;e>d;d++){var f=a[d],g=c.parse(f);g.uuid=f.uuid,void 0!==f.name&&(g.name=f.name),b[f.uuid]=g}return b},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){var e;switch(b.type){case"Scene":e=new THREE.Scene;break;case"PerspectiveCamera":e=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far);break;case"OrthographicCamera":e=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case"AmbientLight":e=new THREE.AmbientLight(b.color);break;case"DirectionalLight":e=new THREE.DirectionalLight(b.color,b.intensity);break;case"PointLight":e=new THREE.PointLight(b.color,b.intensity,b.distance);break;case"SpotLight":e=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent);break;case"HemisphereLight":e=new THREE.HemisphereLight(b.color,b.groundColor,b.intensity);break;case"Mesh":var f=c[b.geometry],g=d[b.material];void 0===f&&console.error("THREE.ObjectLoader: Undefined geometry "+b.geometry),void 0===g&&console.error("THREE.ObjectLoader: Undefined material "+b.material),e=new THREE.Mesh(f,g);break;case"Sprite":var g=d[b.material];void 0===g&&console.error("THREE.ObjectLoader: Undefined material "+b.material),e=new THREE.Sprite(g);break;default:e=new THREE.Object3D}if(e.uuid=b.uuid,void 0!==b.name&&(e.name=b.name),void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(e.position,e.quaternion,e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),void 0!==b.scale&&e.scale.fromArray(b.scale)),void 0!==b.visible&&(e.visible=b.visible),void 0!==b.userData&&(e.userData=b.userData),void 0!==b.children)for(var h in b.children)e.add(this.parseObject(b.children[h],c,d));return e}}()},THREE.SceneLoader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){},this.callbackSync=function(){},this.callbackProgress=function(){},this.geometryHandlers={},this.hierarchyHandlers={},this.addGeometryHandler("ascii",THREE.JSONLoader)},THREE.SceneLoader.prototype={constructor:THREE.SceneLoader,load:function(a,b,c,d){var e=this,f=new THREE.XHRLoader(e.manager);f.setCrossOrigin(this.crossOrigin),f.load(a,function(c){e.parse(JSON.parse(c),b,a)})},setCrossOrigin:function(a){this.crossOrigin=a},addGeometryHandler:function(a,b){this.geometryHandlers[a]={loaderClass:b}},addHierarchyHandler:function(a,b){this.hierarchyHandlers[a]={loaderClass:b}},parse:function(a,b,c){function d(a,b){return"relativeToHTML"==b?a:B+a}function e(){f(z.scene,D.objects)}function f(a,b){var c,e,g,h,i;for(var k in b){var l=z.objects[k],m=b[k];if(void 0===l){if(m.type&&m.type in A.hierarchyHandlers){if(void 0===m.loading){var n={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1},r={};for(var s in m)s in n||(r[s]=m[s]);p=z.materials[m.material],m.loading=!0;var t=A.hierarchyHandlers[m.type].loaderObject;t.options?t.load(d(m.url,D.urlBaseType),j(k,a,p,m)):t.load(d(m.url,D.urlBaseType),j(k,a,p,m),r)}}else if(void 0!==m.geometry){if(o=z.geometries[m.geometry]){var v=!1;if(p=z.materials[m.material],v=p instanceof THREE.ShaderMaterial,e=m.position,g=m.rotation,h=m.scale,c=m.matrix,i=m.quaternion,m.material||(p=new THREE.MeshFaceMaterial(z.face_materials[m.geometry])),p instanceof THREE.MeshFaceMaterial&&0===p.materials.length&&(p=new THREE.MeshFaceMaterial(z.face_materials[m.geometry])),p instanceof THREE.MeshFaceMaterial)for(var w=0;w<p.materials.length;w++)v=v||p.materials[w]instanceof THREE.ShaderMaterial;v&&o.computeTangents(),m.skin?l=new THREE.SkinnedMesh(o,p):m.morph?(l=new THREE.MorphAnimMesh(o,p),void 0!==m.duration&&(l.duration=m.duration),void 0!==m.time&&(l.time=m.time),void 0!==m.mirroredLoop&&(l.mirroredLoop=m.mirroredLoop),p.morphNormals&&o.computeMorphNormals()):l=new THREE.Mesh(o,p),l.name=k,c?(l.matrixAutoUpdate=!1,l.matrix.set(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])):(l.position.fromArray(e),i?l.quaternion.fromArray(i):l.rotation.fromArray(g),l.scale.fromArray(h)),l.visible=m.visible,l.castShadow=m.castShadow,l.receiveShadow=m.receiveShadow,a.add(l),z.objects[k]=l}}else if("AmbientLight"===m.type||"PointLight"===m.type||"DirectionalLight"===m.type||"SpotLight"===m.type||"HemisphereLight"===m.type||"AreaLight"===m.type){var x=m.color,y=m.intensity,B=m.distance,C=m.position,E=m.rotation;switch(m.type){case"AmbientLight":u=new THREE.AmbientLight(x);break;case"PointLight":u=new THREE.PointLight(x,y,B),u.position.fromArray(C);break;case"DirectionalLight":u=new THREE.DirectionalLight(x,y),u.position.fromArray(m.direction);break;case"SpotLight":u=new THREE.SpotLight(x,y,B,1),u.angle=m.angle,u.position.fromArray(C),u.target.set(C[0],C[1]-B,C[2]),u.target.applyEuler(new THREE.Euler(E[0],E[1],E[2],"XYZ"));break;case"HemisphereLight":u=new THREE.DirectionalLight(x,y,B),u.target.set(C[0],C[1]-B,C[2]),u.target.applyEuler(new THREE.Euler(E[0],E[1],E[2],"XYZ"));break;case"AreaLight":u=new THREE.AreaLight(x,y),u.position.fromArray(C),u.width=m.size,u.height=m.size_y}a.add(u),u.name=k,z.lights[k]=u,z.objects[k]=u}else"PerspectiveCamera"===m.type||"OrthographicCamera"===m.type?(e=m.position,g=m.rotation,i=m.quaternion,"PerspectiveCamera"===m.type?q=new THREE.PerspectiveCamera(m.fov,m.aspect,m.near,m.far):"OrthographicCamera"===m.type&&(q=new THREE.OrthographicCamera(m.left,m.right,m.top,m.bottom,m.near,m.far)),q.name=k,q.position.fromArray(e),void 0!==i?q.quaternion.fromArray(i):void 0!==g&&q.rotation.fromArray(g),a.add(q),z.cameras[k]=q,z.objects[k]=q):(e=m.position,g=m.rotation,h=m.scale,i=m.quaternion,l=new THREE.Object3D,l.name=k,l.position.fromArray(e),i?l.quaternion.fromArray(i):l.rotation.fromArray(g),l.scale.fromArray(h),l.visible=void 0!==m.visible?m.visible:!1,a.add(l),z.objects[k]=l,z.empties[k]=l);if(l){if(void 0!==m.userData)for(var F in m.userData){var G=m.userData[F];l.userData[F]=G}if(void 0!==m.groups)for(var w=0;w<m.groups.length;w++){var H=m.groups[w];void 0===z.groups[H]&&(z.groups[H]=[]),z.groups[H].push(k)}}}void 0!==l&&void 0!==m.children&&f(l,m.children)}}function g(a,b,c){z.geometries[c]=a,z.face_materials[c]=b,e()}function h(a,b,c,d,f){var g=f.position,h=f.rotation,i=f.quaternion,j=f.scale;a.position.fromArray(g),i?a.quaternion.fromArray(i):a.rotation.fromArray(h),a.scale.fromArray(j),d&&a.traverse(function(a){a.material=d});var k=void 0!==f.visible?f.visible:!0;a.traverse(function(a){a.visible=k}),c.add(a),a.name=b,z.objects[b]=a,e()}function i(a){return function(b,c){b.name=a,g(b,c,a),v-=1,A.onLoadComplete(),l()}}function j(a,b,c,d){return function(e){var f;f=e.content?e.content:e.dae?e.scene:e,h(f,a,b,c,d),v-=1,A.onLoadComplete(),l()}}function k(a){return function(b,c){b.name=a,z.geometries[a]=b,z.face_materials[a]=c}}function l(){var a={totalModels:x,totalTextures:y,loadedModels:x-v,loadedTextures:y-w};A.callbackProgress(a,z),A.onLoadProgress(),0===v&&0===w&&(m(),b(z))}function m(){for(var a=0;a<C.length;a++){var b=C[a],c=z.objects[b.targetName];c?b.object.target=c:(b.object.target=new THREE.Object3D,z.scene.add(b.object.target)),b.object.target.userData.targetInverse=b.object}}function n(a,b){if(b(a),void 0!==a.children)for(var c in a.children)n(a.children[c],b)}var o,p,q,r,s,t,u,v,w,x,y,z,A=this,B=THREE.Loader.prototype.extractUrlBase(c),C=[],D=a;for(var E in this.geometryHandlers){var F=this.geometryHandlers[E].loaderClass;this.geometryHandlers[E].loaderObject=new F}for(var E in this.hierarchyHandlers){var F=this.hierarchyHandlers[E].loaderClass;this.hierarchyHandlers[E].loaderObject=new F}if(v=0,w=0,z={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}},D.transform){var G=D.transform.position,H=D.transform.rotation,I=D.transform.scale;G&&z.scene.position.fromArray(G),H&&z.scene.rotation.fromArray(H),I&&z.scene.scale.fromArray(I),(G||H||I)&&(z.scene.updateMatrix(),z.scene.updateMatrixWorld())}var J,K,L=function(a){w-=a,l(),A.onLoadComplete()},M=function(a){return function(){L(a)}};for(J in D.fogs)K=D.fogs[J],"linear"===K.type?r=new THREE.Fog(0,K.near,K.far):"exp2"===K.type&&(r=new THREE.FogExp2(0,K.density)),t=K.color,r.color.setRGB(t[0],t[1],t[2]),z.fogs[J]=r;var N,O;for(N in D.geometries)O=D.geometries[N],O.type in this.geometryHandlers&&(v+=1,A.onLoadStart());for(var P in D.objects)n(D.objects[P],function(a){a.type&&a.type in A.hierarchyHandlers&&(v+=1,A.onLoadStart())});x=v;for(N in D.geometries)if(O=D.geometries[N],"cube"===O.type)o=new THREE.BoxGeometry(O.width,O.height,O.depth,O.widthSegments,O.heightSegments,O.depthSegments),o.name=N,z.geometries[N]=o;else if("plane"===O.type)o=new THREE.PlaneGeometry(O.width,O.height,O.widthSegments,O.heightSegments),o.name=N,z.geometries[N]=o;else if("sphere"===O.type)o=new THREE.SphereGeometry(O.radius,O.widthSegments,O.heightSegments),o.name=N,z.geometries[N]=o;else if("cylinder"===O.type)o=new THREE.CylinderGeometry(O.topRad,O.botRad,O.height,O.radSegs,O.heightSegs),o.name=N,z.geometries[N]=o;else if("torus"===O.type)o=new THREE.TorusGeometry(O.radius,O.tube,O.segmentsR,O.segmentsT),o.name=N,z.geometries[N]=o;else if("icosahedron"===O.type)o=new THREE.IcosahedronGeometry(O.radius,O.subdivisions),o.name=N,z.geometries[N]=o;else if(O.type in this.geometryHandlers){var Q={};for(var R in O)"type"!==R&&"url"!==R&&(Q[R]=O[R]);var S=this.geometryHandlers[O.type].loaderObject;S.load(d(O.url,D.urlBaseType),i(N),Q)}else if("embedded"===O.type){var T=D.embeds[O.id],U="";if(T.metadata=D.metadata,T){var V=this.geometryHandlers.ascii.loaderObject,W=V.parse(T,U);k(N)(W.geometry,W.materials)}}var X,Y;for(X in D.textures)if(Y=D.textures[X],Y.url instanceof Array){w+=Y.url.length;for(var Z=0;Z<Y.url.length;Z++)A.onLoadStart()}else w+=1,A.onLoadStart();y=w;for(X in D.textures){if(Y=D.textures[X],void 0!==Y.mapping&&void 0!==THREE[Y.mapping]&&(Y.mapping=new THREE[Y.mapping]),Y.url instanceof Array){for(var $=Y.url.length,_=[],aa=0;$>aa;aa++)_[aa]=d(Y.url[aa],D.urlBaseType);var ba=/\.dds$/i.test(_[0]);s=ba?THREE.ImageUtils.loadCompressedTextureCube(_,Y.mapping,M($)):THREE.ImageUtils.loadTextureCube(_,Y.mapping,M($))}else{var ba=/\.dds$/i.test(Y.url),ca=d(Y.url,D.urlBaseType),da=M(1);if(s=ba?THREE.ImageUtils.loadCompressedTexture(ca,Y.mapping,da):THREE.ImageUtils.loadTexture(ca,Y.mapping,da),void 0!==THREE[Y.minFilter]&&(s.minFilter=THREE[Y.minFilter]),void 0!==THREE[Y.magFilter]&&(s.magFilter=THREE[Y.magFilter]),Y.anisotropy&&(s.anisotropy=Y.anisotropy),Y.repeat&&(s.repeat.set(Y.repeat[0],Y.repeat[1]),1!==Y.repeat[0]&&(s.wrapS=THREE.RepeatWrapping),1!==Y.repeat[1]&&(s.wrapT=THREE.RepeatWrapping)),Y.offset&&s.offset.set(Y.offset[0],Y.offset[1]),Y.wrap){var ea={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==ea[Y.wrap[0]]&&(s.wrapS=ea[Y.wrap[0]]),void 0!==ea[Y.wrap[1]]&&(s.wrapT=ea[Y.wrap[1]])}}z.textures[X]=s}var fa,ga,ha;for(fa in D.materials){ga=D.materials[fa];for(ha in ga.parameters)if("envMap"===ha||"map"===ha||"lightMap"===ha||"bumpMap"===ha)ga.parameters[ha]=z.textures[ga.parameters[ha]];else if("shading"===ha)ga.parameters[ha]="flat"===ga.parameters[ha]?THREE.FlatShading:THREE.SmoothShading;else if("side"===ha)"double"==ga.parameters[ha]?ga.parameters[ha]=THREE.DoubleSide:"back"==ga.parameters[ha]?ga.parameters[ha]=THREE.BackSide:ga.parameters[ha]=THREE.FrontSide;else if("blending"===ha)ga.parameters[ha]=ga.parameters[ha]in THREE?THREE[ga.parameters[ha]]:THREE.NormalBlending;else if("combine"===ha)ga.parameters[ha]=ga.parameters[ha]in THREE?THREE[ga.parameters[ha]]:THREE.MultiplyOperation;else if("vertexColors"===ha)"face"==ga.parameters[ha]?ga.parameters[ha]=THREE.FaceColors:ga.parameters[ha]&&(ga.parameters[ha]=THREE.VertexColors);else if("wrapRGB"===ha){var ia=ga.parameters[ha];ga.parameters[ha]=new THREE.Vector3(ia[0],ia[1],ia[2])}if(void 0!==ga.parameters.opacity&&ga.parameters.opacity<1&&(ga.parameters.transparent=!0),ga.parameters.normalMap){var ja=THREE.ShaderLib.normalmap,ka=THREE.UniformsUtils.clone(ja.uniforms),la=ga.parameters.color,ma=ga.parameters.specular,na=ga.parameters.ambient,oa=ga.parameters.shininess;ka.tNormal.value=z.textures[ga.parameters.normalMap],ga.parameters.normalScale&&ka.uNormalScale.value.set(ga.parameters.normalScale[0],ga.parameters.normalScale[1]),ga.parameters.map&&(ka.tDiffuse.value=ga.parameters.map,ka.enableDiffuse.value=!0),ga.parameters.envMap&&(ka.tCube.value=ga.parameters.envMap,ka.enableReflection.value=!0,ka.reflectivity.value=ga.parameters.reflectivity),ga.parameters.lightMap&&(ka.tAO.value=ga.parameters.lightMap,ka.enableAO.value=!0),ga.parameters.specularMap&&(ka.tSpecular.value=z.textures[ga.parameters.specularMap],ka.enableSpecular.value=!0),ga.parameters.displacementMap&&(ka.tDisplacement.value=z.textures[ga.parameters.displacementMap],ka.enableDisplacement.value=!0,ka.uDisplacementBias.value=ga.parameters.displacementBias,ka.uDisplacementScale.value=ga.parameters.displacementScale),ka.diffuse.value.setHex(la),ka.specular.value.setHex(ma),ka.ambient.value.setHex(na),ka.shininess.value=oa,ga.parameters.opacity&&(ka.opacity.value=ga.parameters.opacity);var pa={fragmentShader:ja.fragmentShader,vertexShader:ja.vertexShader,uniforms:ka,lights:!0,fog:!0};p=new THREE.ShaderMaterial(pa)}else p=new THREE[ga.type](ga.parameters);p.name=fa,z.materials[fa]=p}for(fa in D.materials)if(ga=D.materials[fa],ga.parameters.materials){for(var qa=[],aa=0;aa<ga.parameters.materials.length;aa++){var ra=ga.parameters.materials[aa];qa.push(z.materials[ra])}z.materials[fa].materials=qa}e(),z.cameras&&D.defaults.camera&&(z.currentCamera=z.cameras[D.defaults.camera]),z.fogs&&D.defaults.fog&&(z.scene.fog=z.fogs[D.defaults.fog]),A.callbackSync(z),l()}},THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,d){var e=this,f=new THREE.ImageLoader(e.manager);f.setCrossOrigin(this.crossOrigin),f.load(a,function(a){var c=new THREE.Texture(a);c.needsUpdate=!0,void 0!==b&&b(c)})},setCrossOrigin:function(a){this.crossOrigin=a}},THREE.Material=function(){this.id=THREE.MaterialIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0!==c){if(b in this){var d=this[b];d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):"overdraw"==b?this[b]=Number(c):this[b]=c}}else console.warn("THREE.Material: '"+b+"' parameter is undefined.")}},clone:function(a){return void 0===a&&(a=new THREE.Material),a.name=this.name,a.side=this.side,a.opacity=this.opacity,a.transparent=this.transparent,a.blending=this.blending,a.blendSrc=this.blendSrc,a.blendDst=this.blendDst,a.blendEquation=this.blendEquation,a.depthTest=this.depthTest,a.depthWrite=this.depthWrite,a.polygonOffset=this.polygonOffset,a.polygonOffsetFactor=this.polygonOffsetFactor,a.polygonOffsetUnits=this.polygonOffsetUnits,a.alphaTest=this.alphaTest,a.overdraw=this.overdraw,a.visible=this.visible,a},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(a){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.setValues(a)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.linewidth=this.linewidth,a.linecap=this.linecap,a.linejoin=this.linejoin,a.vertexColors=this.vertexColors,a.fog=this.fog,a},THREE.LineDashedMaterial=function(a){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(a)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.linewidth=this.linewidth,a.scale=this.scale,a.dashSize=this.dashSize,a.gapSize=this.gapSize,a.vertexColors=this.vertexColors,a.fog=this.fog,a},THREE.MeshBasicMaterial=function(a){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(a)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.map=this.map,a.lightMap=this.lightMap,a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,a.fog=this.fog,a.shading=this.shading,a.wireframe=this.wireframe,a.wireframeLinewidth=this.wireframeLinewidth,a.wireframeLinecap=this.wireframeLinecap,a.wireframeLinejoin=this.wireframeLinejoin,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a},THREE.MeshLambertMaterial=function(a){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.ambient.copy(this.ambient),a.emissive.copy(this.emissive),a.wrapAround=this.wrapAround,a.wrapRGB.copy(this.wrapRGB),a.map=this.map,a.lightMap=this.lightMap,a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,a.fog=this.fog,a.shading=this.shading,a.wireframe=this.wireframe,a.wireframeLinewidth=this.wireframeLinewidth,a.wireframeLinecap=this.wireframeLinecap,a.wireframeLinejoin=this.wireframeLinejoin,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a},THREE.MeshPhongMaterial=function(a){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.ambient.copy(this.ambient),a.emissive.copy(this.emissive),a.specular.copy(this.specular),a.shininess=this.shininess,a.metal=this.metal,a.wrapAround=this.wrapAround,a.wrapRGB.copy(this.wrapRGB),a.map=this.map,a.lightMap=this.lightMap,a.bumpMap=this.bumpMap,a.bumpScale=this.bumpScale,a.normalMap=this.normalMap,a.normalScale.copy(this.normalScale),a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,a.fog=this.fog,a.shading=this.shading,a.wireframe=this.wireframe,a.wireframeLinewidth=this.wireframeLinewidth,a.wireframeLinecap=this.wireframeLinecap,a.wireframeLinejoin=this.wireframeLinejoin,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a},THREE.MeshDepthMaterial=function(a){THREE.Material.call(this),this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(a)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,a),a.wireframe=this.wireframe,a.wireframeLinewidth=this.wireframeLinewidth,a},THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a),this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(a)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,a),a.shading=this.shading,a.wireframe=this.wireframe,a.wireframeLinewidth=this.wireframeLinewidth,a},THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]},THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a},THREE.ParticleSystemMaterial=function(a){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=!1,this.fog=!0,this.setValues(a)},THREE.ParticleSystemMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleSystemMaterial.prototype.clone=function(){var a=new THREE.ParticleSystemMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.map=this.map,a.size=this.size,a.sizeAttenuation=this.sizeAttenuation,a.vertexColors=this.vertexColors,a.fog=this.fog,a},THREE.ParticleBasicMaterial=THREE.ParticleSystemMaterial,THREE.ShaderMaterial=function(a){THREE.Material.call(this),this.fragmentShader="void main() {}",this.vertexShader="void main() {}",this.uniforms={},this.defines={},this.attributes=null,this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(a)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,a),a.fragmentShader=this.fragmentShader,a.vertexShader=this.vertexShader,a.uniforms=THREE.UniformsUtils.clone(this.uniforms),a.attributes=this.attributes,a.defines=this.defines,a.shading=this.shading,a.wireframe=this.wireframe,a.wireframeLinewidth=this.wireframeLinewidth,a.fog=this.fog,a.lights=this.lights,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a},THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a)},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.clone=function(){var a=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,a),a},THREE.SpriteMaterial=function(a){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(a)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.map=this.map,a.rotation=this.rotation,a.fog=this.fog,a},THREE.SpriteCanvasMaterial=function(a){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.program=function(a,b){},this.setValues(a)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.clone=function(){var a=new THREE.SpriteCanvasMaterial;return THREE.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.program=this.program,a},THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial,THREE.Texture=function(a,b,c,d,e,f,g,h,i){this.id=THREE.TextureIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.image=a,this.mipmaps=[],this.mapping=void 0!==b?b:new THREE.UVMapping,this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==e?e:THREE.LinearFilter,this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==i?i:1,this.format=void 0!==g?g:THREE.RGBAFormat,this.type=void 0!==h?h:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){a===!0&&this.update(),this._needsUpdate=a},clone:function(a){return void 0===a&&(a=new THREE.Texture),a.image=this.image,a.mipmaps=this.mipmaps.slice(0),a.mapping=this.mapping,a.wrapS=this.wrapS,a.wrapT=this.wrapT,a.magFilter=this.magFilter,a.minFilter=this.minFilter,a.anisotropy=this.anisotropy,a.format=this.format,a.type=this.type,a.offset.copy(this.offset),a.repeat.copy(this.repeat),a.generateMipmaps=this.generateMipmaps,a.premultiplyAlpha=this.premultiplyAlpha,a.flipY=this.flipY,a.unpackAlignment=this.unpackAlignment,a},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CompressedTexture=function(a,b,c,d,e,f,g,h,i,j,k){THREE.Texture.call(this,null,f,g,h,i,j,d,e,k),this.image={width:b,height:c},this.mipmaps=a,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,a),a},THREE.DataTexture=function(a,b,c,d,e,f,g,h,i,j,k){THREE.Texture.call(this,null,f,g,h,i,j,d,e,k),this.image={data:a,width:b,height:c}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,a),a},THREE.ParticleSystem=function(a,b){THREE.Object3D.call(this),this.geometry=void 0!==a?a:new THREE.Geometry,this.material=void 0!==b?b:new THREE.ParticleSystemMaterial({color:16777215*Math.random()}),this.sortParticles=!1,this.frustumCulled=!1},THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype),THREE.ParticleSystem.prototype.clone=function(a){return void 0===a&&(a=new THREE.ParticleSystem(this.geometry,this.material)),
a.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,a),a},THREE.Line=function(a,b,c){THREE.Object3D.call(this),this.geometry=void 0!==a?a:new THREE.Geometry,this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==c?c:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.clone=function(a){return void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type)),THREE.Object3D.prototype.clone.call(this,a),a},THREE.Mesh=function(a,b){THREE.Object3D.call(this),this.geometry=void 0!==a?a:new THREE.Geometry,this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;b>a;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){return void 0!==this.morphTargetDictionary[a]?this.morphTargetDictionary[a]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.clone=function(a,b){return void 0===a&&(a=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,a,b),a},THREE.Bone=function(a){THREE.Object3D.call(this),this.skin=a,this.skinMatrix=new THREE.Matrix4,this.accumulatedRotWeight=0,this.accumulatedPosWeight=0,this.accumulatedSclWeight=0},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.update=function(a,b){this.matrixAutoUpdate&&(b|=this.updateMatrix()),(b||this.matrixWorldNeedsUpdate)&&(a?this.skinMatrix.multiplyMatrices(a,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0,this.accumulatedRotWeight=0,this.accumulatedPosWeight=0,this.accumulatedSclWeight=0);for(var c=0,d=this.children.length;d>c;c++)this.children[c].update(this.skinMatrix,b)},THREE.Skeleton=function(a,b){this.useVertexTexture=void 0!==b?b:!0,this.bones=[],this.boneMatrices=[];var c,d,e,f,g;if(void 0!==a){for(var h=0;h<a.length;++h)d=a[h],e=d.pos,f=d.rotq,g=d.scl,c=this.addBone(),c.name=d.name,c.position.set(e[0],e[1],e[2]),c.quaternion.set(f[0],f[1],f[2],f[3]),void 0!==g?c.scale.set(g[0],g[1],g[2]):c.scale.set(1,1,1);for(var h=0;h<a.length;++h)d=a[h],-1!==d.parent&&this.bones[d.parent].add(this.bones[h]);var i=this.bones.length;if(this.useVertexTexture){var j;j=i>256?64:i>64?32:i>16?16:8,this.boneTextureWidth=j,this.boneTextureHeight=j,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*i)}},THREE.Skeleton.prototype=Object.create(THREE.Mesh.prototype),THREE.Skeleton.prototype.addBone=function(a){return void 0===a&&(a=new THREE.Bone(this)),this.bones.push(a),a},THREE.Skeleton.prototype.calculateInverses=function(a){this.boneInverses=[];for(var b=0,c=this.bones.length;c>b;++b){var d=new THREE.Matrix4;d.getInverse(this.bones[b].skinMatrix),this.boneInverses.push(d)}},THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b),this.skeleton=new THREE.Skeleton(this.geometry&&this.geometry.bones,c);for(var d=0;d<this.skeleton.bones.length;++d){var e=this.skeleton.bones[d];void 0===e.parent&&this.add(e)}this.identityMatrix=new THREE.Matrix4,this.pose()},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){var a=new THREE.Matrix4;return function(b){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||b)&&(this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0);for(var c=0,d=this.children.length;d>c;c++){var e=this.children[c];e instanceof THREE.Bone?e.update(this.identityMatrix,!1):e.updateMatrixWorld(!0)}void 0===this.skeleton.boneInverses&&this.skeleton.calculateInverses();for(var f=0,g=this.skeleton.bones.length;g>f;f++)a.multiplyMatrices(this.skeleton.bones[f].skinMatrix,this.skeleton.boneInverses[f]),a.flattenToArrayOffset(this.skeleton.boneMatrices,16*f);this.skeleton.useVertexTexture&&(this.skeleton.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0),this.normalizeSkinWeights()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();c!==1/0?b.multiplyScalar(c):b.set(1)}},THREE.SkinnedMesh.prototype.clone=function(a){return void 0===a&&(a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,a),a},THREE.MorphAnimMesh=function(a,b){THREE.Mesh.call(this,a,b),this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(a,b){this.startKeyframe=a,this.endKeyframe=b,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var a=this.geometry;a.animations||(a.animations={});for(var b,c=a.animations,d=/([a-z]+)(\d+)/,e=0,f=a.morphTargets.length;f>e;e++){var g=a.morphTargets[e],h=g.name.match(d);if(h&&h.length>1){var i=h[1];h[2];c[i]||(c[i]={start:1/0,end:-(1/0)});var j=c[i];e<j.start&&(j.start=e),e>j.end&&(j.end=e),b||(b=i)}}a.firstAnimation=b},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(a,b,c){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[a]={start:b,end:c}},THREE.MorphAnimMesh.prototype.playAnimation=function(a,b){var c=this.geometry.animations[a];c?(this.setFrameRange(c.start,c.end),this.duration=1e3*((c.end-c.start)/b),this.time=0):console.warn("animation["+a+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(a){var b=this.duration/this.length;this.time+=this.direction*a,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var c=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/b),0,this.length-1);c!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[c]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=c);var d=this.time%b/b;this.directionBackwards&&(d=1-d),this.morphTargetInfluences[this.currentKeyframe]=d,this.morphTargetInfluences[this.lastKeyframe]=1-d},THREE.MorphAnimMesh.prototype.clone=function(a){return void 0===a&&(a=new THREE.MorphAnimMesh(this.geometry,this.material)),a.duration=this.duration,a.mirroredLoop=this.mirroredLoop,a.time=this.time,a.lastKeyframe=this.lastKeyframe,a.currentKeyframe=this.currentKeyframe,a.direction=this.direction,a.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,a),a},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0),b=Math.abs(b);for(var c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a}),this.add(a)},THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;c>b&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object},THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(this.objects.length>1){a.setFromMatrixPosition(c.matrixWorld),b.setFromMatrixPosition(this.matrixWorld);var d=a.distanceTo(b);this.objects[0].object.visible=!0;for(var e=1,f=this.objects.length;f>e&&d>=this.objects[e].distance;e++)this.objects[e-1].object.visible=!1,this.objects[e].object.visible=!0;for(;f>e;e++)this.objects[e].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(a){void 0===a&&(a=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,a);for(var b=0,c=this.objects.length;c>b;b++){var d=this.objects[b].object.clone();d.visible=0===b,a.addLevel(d,this.objects[b].distance)}return a},THREE.Sprite=function(){var a=new THREE.Float32Attribute(3,3);a.set([-.5,-.5,0,.5,-.5,0,.5,.5,0]);var b=new THREE.BufferGeometry;return b.addAttribute("position",a),function(a){THREE.Object3D.call(this),this.geometry=b,this.material=void 0!==a?a:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},THREE.Sprite.prototype.clone=function(a){return void 0===a&&(a=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,a),a},THREE.Particle=THREE.Sprite,THREE.Scene=function(){THREE.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,this.matrixAutoUpdate=!1,this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}this.dispatchEvent({type:"objectAdded",object:a}),a.dispatchEvent({type:"addedToScene",scene:this});for(var c=0;c<a.children.length;c++)this.__addObject(a.children[c])},THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);if(-1!==b&&this.__lights.splice(b,1),a.shadowCascadeArray)for(var c=0;c<a.shadowCascadeArray.length;c++)this.__removeObject(a.shadowCascadeArray[c])}else if(!(a instanceof THREE.Camera)){this.__objectsRemoved.push(a);var b=this.__objectsAdded.indexOf(a);-1!==b&&this.__objectsAdded.splice(b,1)}this.dispatchEvent({type:"objectRemoved",object:a}),a.dispatchEvent({type:"removedFromScene",scene:this});for(var d=0;d<a.children.length;d++)this.__removeObject(a.children[d])},THREE.Scene.prototype.clone=function(a){return void 0===a&&(a=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,a),null!==this.fog&&(a.fog=this.fog.clone()),null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone()),a.autoUpdate=this.autoUpdate,a.matrixAutoUpdate=this.matrixAutoUpdate,a},THREE.Fog=function(a,b,c){this.name="",this.color=new THREE.Color(a),this.near=void 0!==b?b:1,this.far=void 0!==c?c:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(a,b){this.name="",this.color=new THREE.Color(a),this.density=void 0!==b?b:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.CanvasRenderer=function(a){function b(){pa.setRGB(0,0,0),qa.setRGB(0,0,0),ra.setRGB(0,0,0);for(var a=0,b=y.length;b>a;a++){var c=y[a],d=c.color;c instanceof THREE.AmbientLight?pa.add(d):c instanceof THREE.DirectionalLight?qa.add(d):c instanceof THREE.PointLight&&ra.add(d)}}function c(a,b,c){for(var d=0,e=y.length;e>d;d++){var f=y[d];if(ka.copy(f.color),f instanceof THREE.DirectionalLight){var g=sa.setFromMatrixPosition(f.matrixWorld).normalize(),h=b.dot(g);if(0>=h)continue;h*=f.intensity,c.add(ka.multiplyScalar(h))}else if(f instanceof THREE.PointLight){var g=sa.setFromMatrixPosition(f.matrixWorld),h=b.dot(sa.subVectors(g,a).normalize());if(0>=h)continue;if(h*=0==f.distance?1:1-Math.min(a.distanceTo(g)/f.distance,1),0==h)continue;h*=f.intensity,c.add(ka.multiplyScalar(h))}}}function d(a,b,c){n(c.opacity),o(c.blending);var d=b.scale.x*V,e=b.scale.y*W,f=.5*Math.sqrt(d*d+e*e);if(oa.min.set(a.x-f,a.y-f),oa.max.set(a.x+f,a.y+f),c instanceof THREE.SpriteMaterial||c instanceof THREE.ParticleSystemMaterial){var g=c.map;if(null!==g){g.hasEventListener("update",j)===!1&&(void 0!==g.image&&g.image.width>0&&k(g),g.addEventListener("update",j));var h=la[g.id];t(void 0!==h?h:"rgba( 0, 0, 0, 1 )");var i=g.image,l=i.width*g.offset.x,m=i.height*g.offset.y,p=i.width*g.repeat.x,q=i.height*g.repeat.y,r=d/p,u=e/q;X.save(),X.translate(a.x,a.y),0!==c.rotation&&X.rotate(c.rotation),X.translate(-d/2,-e/2),X.scale(r,u),X.translate(-l,-m),X.fillRect(l,m,p,q),X.restore()}else t(c.color.getStyle()),X.save(),X.translate(a.x,a.y),0!==c.rotation&&X.rotate(c.rotation),X.scale(d,-e),X.fillRect(-.5,-.5,1,1),X.restore()}else c instanceof THREE.SpriteCanvasMaterial&&(s(c.color.getStyle()),t(c.color.getStyle()),X.save(),X.translate(a.x,a.y),0!==c.rotation&&X.rotate(c.rotation),X.scale(d,e),c.program(X),X.restore())}function e(a,b,c,d){if(n(d.opacity),o(d.blending),X.beginPath(),X.moveTo(a.positionScreen.x,a.positionScreen.y),X.lineTo(b.positionScreen.x,b.positionScreen.y),d instanceof THREE.LineBasicMaterial){if(p(d.linewidth),q(d.linecap),r(d.linejoin),d.vertexColors!==THREE.VertexColors)s(d.color.getStyle());else{var e=c.vertexColors[0].getStyle(),f=c.vertexColors[1].getStyle();if(e===f)s(e);else{try{var g=X.createLinearGradient(a.positionScreen.x,a.positionScreen.y,b.positionScreen.x,b.positionScreen.y);g.addColorStop(0,e),g.addColorStop(1,f)}catch(h){g=e}s(g)}}X.stroke(),oa.expandByScalar(2*d.linewidth)}else d instanceof THREE.LineDashedMaterial&&(p(d.linewidth),q(d.linecap),r(d.linejoin),s(d.color.getStyle()),u(d.dashSize,d.gapSize),X.stroke(),oa.expandByScalar(2*d.linewidth),u(null,null))}function f(a,b,d,e,f,j,k,m){Q.info.render.vertices+=3,Q.info.render.faces++,n(m.opacity),o(m.blending),D=a.positionScreen.x,E=a.positionScreen.y,F=b.positionScreen.x,G=b.positionScreen.y,H=d.positionScreen.x,I=d.positionScreen.y,g(D,E,F,G,H,I),(m instanceof THREE.MeshLambertMaterial||m instanceof THREE.MeshPhongMaterial)&&null===m.map?(ia.copy(m.color),ja.copy(m.emissive),m.vertexColors===THREE.FaceColors&&ia.multiply(k.color),ha.copy(pa),ta.copy(a.positionWorld).add(b.positionWorld).add(d.positionWorld).divideScalar(3),c(ta,k.normalModel,ha),ha.multiply(ia).add(ja),m.wireframe===!0?h(ha,m.wireframeLinewidth,m.wireframeLinecap,m.wireframeLinejoin):i(ha)):m instanceof THREE.MeshBasicMaterial||m instanceof THREE.MeshLambertMaterial||m instanceof THREE.MeshPhongMaterial?null!==m.map?m.map.mapping instanceof THREE.UVMapping&&(J=k.uvs,l(D,E,F,G,H,I,J[e].x,J[e].y,J[f].x,J[f].y,J[j].x,J[j].y,m.map)):null!==m.envMap?m.envMap.mapping instanceof THREE.SphericalReflectionMapping?(ua.copy(k.vertexNormalsModel[e]).applyMatrix3(va),K=.5*ua.x+.5,L=.5*ua.y+.5,ua.copy(k.vertexNormalsModel[f]).applyMatrix3(va),M=.5*ua.x+.5,N=.5*ua.y+.5,ua.copy(k.vertexNormalsModel[j]).applyMatrix3(va),O=.5*ua.x+.5,P=.5*ua.y+.5,l(D,E,F,G,H,I,K,L,M,N,O,P,m.envMap)):m.envMap.mapping instanceof THREE.SphericalRefractionMapping&&(ua.copy(k.vertexNormalsModel[e]).applyMatrix3(va),K=-.5*ua.x+.5,L=-.5*ua.y+.5,ua.copy(k.vertexNormalsModel[f]).applyMatrix3(va),M=-.5*ua.x+.5,N=-.5*ua.y+.5,ua.copy(k.vertexNormalsModel[j]).applyMatrix3(va),O=-.5*ua.x+.5,P=-.5*ua.y+.5,l(D,E,F,G,H,I,K,L,M,N,O,P,m.envMap)):(ha.copy(m.color),m.vertexColors===THREE.FaceColors&&ha.multiply(k.color),m.wireframe===!0?h(ha,m.wireframeLinewidth,m.wireframeLinecap,m.wireframeLinejoin):i(ha)):m instanceof THREE.MeshDepthMaterial?(ha.r=ha.g=ha.b=1-v(a.positionScreen.z*a.positionScreen.w,z.near,z.far),m.wireframe===!0?h(ha,m.wireframeLinewidth,m.wireframeLinecap,m.wireframeLinejoin):i(ha)):m instanceof THREE.MeshNormalMaterial?(ua.copy(k.normalModel).applyMatrix3(va),ha.setRGB(ua.x,ua.y,ua.z).multiplyScalar(.5).addScalar(.5),m.wireframe===!0?h(ha,m.wireframeLinewidth,m.wireframeLinecap,m.wireframeLinejoin):i(ha)):(ha.setRGB(1,1,1),m.wireframe===!0?h(ha,m.wireframeLinewidth,m.wireframeLinecap,m.wireframeLinejoin):i(ha))}function g(a,b,c,d,e,f){X.beginPath(),X.moveTo(a,b),X.lineTo(c,d),X.lineTo(e,f),X.closePath()}function h(a,b,c,d){p(b),q(c),r(d),s(a.getStyle()),X.stroke(),oa.expandByScalar(2*b)}function i(a){t(a.getStyle()),X.fill()}function j(a){k(a.target)}function k(a){var b=a.wrapS===THREE.RepeatWrapping,c=a.wrapT===THREE.RepeatWrapping,d=a.image,e=document.createElement("canvas");e.width=d.width,e.height=d.height;var f=e.getContext("2d");f.setTransform(1,0,0,-1,0,d.height),f.drawImage(d,0,0),la[a.id]=X.createPattern(e,b===!0&&c===!0?"repeat":b===!0&&c===!1?"repeat-x":b===!1&&c===!0?"repeat-y":"no-repeat")}function l(a,b,c,d,e,f,g,h,i,l,m,n,o){if(!(o instanceof THREE.DataTexture)){o.hasEventListener("update",j)===!1&&(void 0!==o.image&&o.image.width>0&&k(o),o.addEventListener("update",j));var p=la[o.id];if(void 0===p)return t("rgba(0,0,0,1)"),void X.fill();t(p);var q,r,s,u,v,w,x,y,z=o.offset.x/o.repeat.x,A=o.offset.y/o.repeat.y,B=o.image.width*o.repeat.x,C=o.image.height*o.repeat.y;g=(g+z)*B,h=(h+A)*C,i=(i+z)*B,l=(l+A)*C,m=(m+z)*B,n=(n+A)*C,c-=a,d-=b,e-=a,f-=b,i-=g,l-=h,m-=g,n-=h,x=i*n-m*l,0!==x&&(y=1/x,q=(n*c-l*e)*y,r=(n*d-l*f)*y,s=(i*e-m*c)*y,u=(i*f-m*d)*y,v=a-q*g-s*h,w=b-r*g-u*h,X.save(),X.transform(q,r,s,u,v,w),X.fill(),X.restore())}}function m(a,b,c){var d,e=b.x-a.x,f=b.y-a.y,g=e*e+f*f;0!==g&&(d=c/Math.sqrt(g),e*=d,f*=d,b.x+=e,b.y+=f,a.x-=e,a.y-=f)}function n(a){$!==a&&(X.globalAlpha=a,$=a)}function o(a){_!==a&&(a===THREE.NormalBlending?X.globalCompositeOperation="source-over":a===THREE.AdditiveBlending?X.globalCompositeOperation="lighter":a===THREE.SubtractiveBlending&&(X.globalCompositeOperation="darker"),_=a)}function p(a){ca!==a&&(X.lineWidth=a,ca=a)}function q(a){da!==a&&(X.lineCap=a,da=a)}function r(a){ea!==a&&(X.lineJoin=a,ea=a)}function s(a){aa!==a&&(X.strokeStyle=a,aa=a)}function t(a){ba!==a&&(X.fillStyle=a,ba=a)}function u(a,b){(fa!==a||ga!==b)&&(X.setLineDash([a,b]),fa=a,ga=b)}console.log("THREE.CanvasRenderer",THREE.REVISION);var v=THREE.Math.smoothstep;a=a||{};var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=this,R=new THREE.Projector,S=void 0!==a.canvas?a.canvas:document.createElement("canvas"),T=S.width,U=S.height,V=Math.floor(T/2),W=Math.floor(U/2),X=S.getContext("2d",{alpha:a.alpha===!0}),Y=new THREE.Color(0),Z=0,$=1,_=0,aa=null,ba=null,ca=null,da=null,ea=null,fa=null,ga=0,ha=(new THREE.RenderableVertex,new THREE.RenderableVertex,new THREE.Color),ia=(new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color,new THREE.Color),ja=new THREE.Color,ka=new THREE.Color,la={},ma=new THREE.Box2,na=new THREE.Box2,oa=new THREE.Box2,pa=new THREE.Color,qa=new THREE.Color,ra=new THREE.Color,sa=new THREE.Vector3,ta=new THREE.Vector3,ua=new THREE.Vector3,va=new THREE.Matrix3;void 0===X.setLineDash&&(X.setLineDash=function(){}),this.domElement=S,this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(a,b,c){T=a*this.devicePixelRatio,U=b*this.devicePixelRatio,S.width=T,S.height=U,V=Math.floor(T/2),W=Math.floor(U/2),c!==!1&&(S.style.width=a+"px",S.style.height=b+"px"),ma.min.set(-V,-W),ma.max.set(V,W),na.min.set(-V,-W),na.max.set(V,W),$=1,_=0,aa=null,ba=null,ca=null,da=null,ea=null,this.setViewport(0,0,a,b)},this.setViewport=function(a,b,c,d){var e=a*this.devicePixelRatio,f=b*this.devicePixelRatio,g=c*this.devicePixelRatio,h=d*this.devicePixelRatio;X.setTransform(g/T,0,0,-h/U,e,U-f),X.translate(V,W)},this.setScissor=function(){},this.enableScissorTest=function(){},this.setClearColor=function(a,b){Y.set(a),Z=void 0!==b?b:1,na.min.set(-V,-W),na.max.set(V,W)},this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(a,b)},this.getMaxAnisotropy=function(){return 0},this.clear=function(){na.empty()===!1&&(na.intersect(ma),na.expandByScalar(2),1>Z&&X.clearRect(0|na.min.x,0|na.min.y,na.max.x-na.min.x|0,na.max.y-na.min.y|0),Z>0&&(o(THREE.NormalBlending),n(1),t("rgba("+Math.floor(255*Y.r)+","+Math.floor(255*Y.g)+","+Math.floor(255*Y.b)+","+Z+")"),X.fillRect(0|na.min.x,0|na.min.y,na.max.x-na.min.x|0,na.max.y-na.min.y|0)),na.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(a,c){if(c instanceof THREE.Camera==!1)return void console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");this.autoClear===!0&&this.clear(),Q.info.render.vertices=0,Q.info.render.faces=0,w=R.projectScene(a,c,this.sortObjects,this.sortElements),x=w.elements,y=w.lights,z=c,va.getNormalMatrix(c.matrixWorldInverse),b();for(var g=0,h=x.length;h>g;g++){var i=x[g],j=i.material;if(void 0!==j&&0!==j.opacity){if(oa.makeEmpty(),i instanceof THREE.RenderableSprite)A=i,A.x*=V,A.y*=W,d(A,i,j);else if(i instanceof THREE.RenderableLine)A=i.v1,B=i.v2,A.positionScreen.x*=V,A.positionScreen.y*=W,B.positionScreen.x*=V,B.positionScreen.y*=W,oa.setFromPoints([A.positionScreen,B.positionScreen]),ma.isIntersectionBox(oa)===!0&&e(A,B,i,j);else if(i instanceof THREE.RenderableFace){if(A=i.v1,B=i.v2,C=i.v3,A.positionScreen.z<-1||A.positionScreen.z>1)continue;if(B.positionScreen.z<-1||B.positionScreen.z>1)continue;if(C.positionScreen.z<-1||C.positionScreen.z>1)continue;A.positionScreen.x*=V,A.positionScreen.y*=W,B.positionScreen.x*=V,B.positionScreen.y*=W,C.positionScreen.x*=V,C.positionScreen.y*=W,j.overdraw>0&&(m(A.positionScreen,B.positionScreen,j.overdraw),m(B.positionScreen,C.positionScreen,j.overdraw),m(C.positionScreen,A.positionScreen,j.overdraw)),oa.setFromPoints([A.positionScreen,B.positionScreen,C.positionScreen]),ma.isIntersectionBox(oa)===!0&&f(A,B,C,0,1,2,i,j)}na.union(oa)}}}},THREE.ShaderChunk={fog_pars_fragment:["#ifdef USE_FOG","	uniform vec3 fogColor;","	#ifdef FOG_EXP2","		uniform float fogDensity;","	#else","		uniform float fogNear;","		uniform float fogFar;","	#endif","#endif"].join("\n"),fog_fragment:["#ifdef USE_FOG","	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	#ifdef FOG_EXP2","		const float LOG2 = 1.442695;","		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","	#else","		float fogFactor = smoothstep( fogNear, fogFar, depth );","	#endif","	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","#endif"].join("\n"),envmap_pars_fragment:["#ifdef USE_ENVMAP","	uniform float reflectivity;","	uniform samplerCube envMap;","	uniform float flipEnvMap;","	uniform int combine;","	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","		uniform bool useRefract;","		uniform float refractionRatio;","	#else","		varying vec3 vReflect;","	#endif","#endif"].join("\n"),envmap_fragment:["#ifdef USE_ENVMAP","	vec3 reflectVec;","	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );","		if ( useRefract ) {","			reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );","		} else { ","			reflectVec = reflect( cameraToVertex, worldNormal );","		}","	#else","		reflectVec = vReflect;","	#endif","	#ifdef DOUBLE_SIDED","		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );","		vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","	#else","		vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","	#endif","	#ifdef GAMMA_INPUT","		cubeColor.xyz *= cubeColor.xyz;","	#endif","	if ( combine == 1 ) {","		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );","	} else if ( combine == 2 ) {","		gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;","	} else {","		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );","	}","#endif"].join("\n"),envmap_pars_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","	varying vec3 vReflect;","	uniform float refractionRatio;","	uniform bool useRefract;","#endif"].join("\n"),worldpos_vertex:["#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )","	#ifdef USE_SKINNING","		vec4 worldPosition = modelMatrix * skinned;","	#endif","	#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );","	#endif","	#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	#endif","#endif"].join("\n"),envmap_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;","	worldNormal = normalize( worldNormal );","	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );","	if ( useRefract ) {","		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );","	} else {","		vReflect = reflect( cameraToVertex, worldNormal );","	}","#endif"].join("\n"),map_particle_pars_fragment:["#ifdef USE_MAP","	uniform sampler2D map;","#endif"].join("\n"),map_particle_fragment:["#ifdef USE_MAP","	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );","#endif"].join("\n"),map_pars_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","	varying vec2 vUv;","	uniform vec4 offsetRepeat;","#endif"].join("\n"),map_pars_fragment:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","	varying vec2 vUv;","#endif","#ifdef USE_MAP","	uniform sampler2D map;","#endif"].join("\n"),map_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;","#endif"].join("\n"),map_fragment:["#ifdef USE_MAP","	vec4 texelColor = texture2D( map, vUv );","	#ifdef GAMMA_INPUT","		texelColor.xyz *= texelColor.xyz;","	#endif","	gl_FragColor = gl_FragColor * texelColor;","#endif"].join("\n"),lightmap_pars_fragment:["#ifdef USE_LIGHTMAP","	varying vec2 vUv2;","	uniform sampler2D lightMap;","#endif"].join("\n"),lightmap_pars_vertex:["#ifdef USE_LIGHTMAP","	varying vec2 vUv2;","#endif"].join("\n"),lightmap_fragment:["#ifdef USE_LIGHTMAP","	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );","#endif"].join("\n"),lightmap_vertex:["#ifdef USE_LIGHTMAP","	vUv2 = uv2;","#endif"].join("\n"),bumpmap_pars_fragment:["#ifdef USE_BUMPMAP","	uniform sampler2D bumpMap;","	uniform float bumpScale;","	vec2 dHdxy_fwd() {","		vec2 dSTdx = dFdx( vUv );","		vec2 dSTdy = dFdy( vUv );","		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;","		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","		return vec2( dBx, dBy );","	}","	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","		vec3 vSigmaX = dFdx( surf_pos );","		vec3 vSigmaY = dFdy( surf_pos );","		vec3 vN = surf_norm;","		vec3 R1 = cross( vSigmaY, vN );","		vec3 R2 = cross( vN, vSigmaX );","		float fDet = dot( vSigmaX, R1 );","		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","		return normalize( abs( fDet ) * surf_norm - vGrad );","	}","#endif"].join("\n"),normalmap_pars_fragment:["#ifdef USE_NORMALMAP","	uniform sampler2D normalMap;","	uniform vec2 normalScale;","	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {","		vec3 q0 = dFdx( eye_pos.xyz );","		vec3 q1 = dFdy( eye_pos.xyz );","		vec2 st0 = dFdx( vUv.st );","		vec2 st1 = dFdy( vUv.st );","		vec3 S = normalize(  q0 * st1.t - q1 * st0.t );","		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );","		vec3 N = normalize( surf_norm );","		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;","		mapN.xy = normalScale * mapN.xy;","		mat3 tsn = mat3( S, T, N );","		return normalize( tsn * mapN );","	}","#endif"].join("\n"),specularmap_pars_fragment:["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join("\n"),specularmap_fragment:["float specularStrength;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	specularStrength = texelSpecular.r;","#else","	specularStrength = 1.0;","#endif"].join("\n"),lights_lambert_pars_vertex:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","	uniform vec3 wrapRGB;","#endif"].join("\n"),lights_lambert_vertex:["vLightFront = vec3( 0.0 );","#ifdef DOUBLE_SIDED","	vLightBack = vec3( 0.0 );","#endif","transformedNormal = normalize( transformedNormal );","#if MAX_DIR_LIGHTS > 0","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","	vec3 dirVector = normalize( lDirection.xyz );","	float dotProduct = dot( transformedNormal, dirVector );","	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","	#ifdef DOUBLE_SIDED","		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","		#ifdef WRAP_AROUND","			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","		#endif","	#endif","	#ifdef WRAP_AROUND","		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );","		#ifdef DOUBLE_SIDED","			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );","		#endif","	#endif","	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;","	#ifdef DOUBLE_SIDED","		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;","	#endif","}","#endif","#if MAX_POINT_LIGHTS > 0","	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","		vec3 lVector = lPosition.xyz - mvPosition.xyz;","		float lDistance = 1.0;","		if ( pointLightDistance[ i ] > 0.0 )","			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","		lVector = normalize( lVector );","		float dotProduct = dot( transformedNormal, lVector );","		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );","		#ifdef DOUBLE_SIDED","			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","			#ifdef WRAP_AROUND","				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","			#endif","		#endif","		#ifdef WRAP_AROUND","			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );","			#ifdef DOUBLE_SIDED","				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );","			#endif","		#endif","		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;","		#ifdef DOUBLE_SIDED","			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;","		#endif","	}","#endif","#if MAX_SPOT_LIGHTS > 0","	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","		vec3 lVector = lPosition.xyz - mvPosition.xyz;","		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );","		if ( spotEffect > spotLightAngleCos[ i ] ) {","			spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","			float lDistance = 1.0;","			if ( spotLightDistance[ i ] > 0.0 )","				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","			lVector = normalize( lVector );","			float dotProduct = dot( transformedNormal, lVector );","			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );","			#ifdef DOUBLE_SIDED","				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","				#ifdef WRAP_AROUND","					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","				#endif","			#endif","			#ifdef WRAP_AROUND","				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );","				#ifdef DOUBLE_SIDED","					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );","				#endif","			#endif","			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;","			#ifdef DOUBLE_SIDED","				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;","			#endif","		}","	}","#endif","#if MAX_HEMI_LIGHTS > 0","	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","		vec3 lVector = normalize( lDirection.xyz );","		float dotProduct = dot( transformedNormal, lVector );","		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;","		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","		#ifdef DOUBLE_SIDED","			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );","		#endif","	}","#endif","vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;","#ifdef DOUBLE_SIDED","	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;","#endif"].join("\n"),
lights_phong_pars_vertex:["#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )","	varying vec3 vWorldPosition;","#endif"].join("\n"),lights_phong_vertex:["#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )","	vWorldPosition = worldPosition.xyz;","#endif"].join("\n"),lights_phong_pars_fragment:["uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )","	varying vec3 vWorldPosition;","#endif","#ifdef WRAP_AROUND","	uniform vec3 wrapRGB;","#endif","varying vec3 vViewPosition;","varying vec3 vNormal;"].join("\n"),lights_phong_fragment:["vec3 normal = normalize( vNormal );","vec3 viewPosition = normalize( vViewPosition );","#ifdef DOUBLE_SIDED","	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );","#endif","#ifdef USE_NORMALMAP","	normal = perturbNormal2Arb( -vViewPosition, normal );","#elif defined( USE_BUMPMAP )","	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );","#endif","#if MAX_POINT_LIGHTS > 0","	vec3 pointDiffuse  = vec3( 0.0 );","	vec3 pointSpecular = vec3( 0.0 );","	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","		vec3 lVector = lPosition.xyz + vViewPosition.xyz;","		float lDistance = 1.0;","		if ( pointLightDistance[ i ] > 0.0 )","			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","		lVector = normalize( lVector );","		float dotProduct = dot( normal, lVector );","		#ifdef WRAP_AROUND","			float pointDiffuseWeightFull = max( dotProduct, 0.0 );","			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","		#else","			float pointDiffuseWeight = max( dotProduct, 0.0 );","		#endif","		pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;","		vec3 pointHalfVector = normalize( lVector + viewPosition );","		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );","		float specularNormalization = ( shininess + 2.0001 ) / 8.0;","		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );","		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;","	}","#endif","#if MAX_SPOT_LIGHTS > 0","	vec3 spotDiffuse  = vec3( 0.0 );","	vec3 spotSpecular = vec3( 0.0 );","	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","		vec3 lVector = lPosition.xyz + vViewPosition.xyz;","		float lDistance = 1.0;","		if ( spotLightDistance[ i ] > 0.0 )","			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","		lVector = normalize( lVector );","		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","		if ( spotEffect > spotLightAngleCos[ i ] ) {","			spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","			float dotProduct = dot( normal, lVector );","			#ifdef WRAP_AROUND","				float spotDiffuseWeightFull = max( dotProduct, 0.0 );","				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","			#else","				float spotDiffuseWeight = max( dotProduct, 0.0 );","			#endif","			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;","			vec3 spotHalfVector = normalize( lVector + viewPosition );","			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0001 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );","			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;","		}","	}","#endif","#if MAX_DIR_LIGHTS > 0","	vec3 dirDiffuse  = vec3( 0.0 );","	vec3 dirSpecular = vec3( 0.0 );","	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","		vec3 dirVector = normalize( lDirection.xyz );","		float dotProduct = dot( normal, dirVector );","		#ifdef WRAP_AROUND","			float dirDiffuseWeightFull = max( dotProduct, 0.0 );","			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );","		#else","			float dirDiffuseWeight = max( dotProduct, 0.0 );","		#endif","		dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;","		vec3 dirHalfVector = normalize( dirVector + viewPosition );","		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );","		float specularNormalization = ( shininess + 2.0001 ) / 8.0;","		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );","		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","	}","#endif","#if MAX_HEMI_LIGHTS > 0","	vec3 hemiDiffuse  = vec3( 0.0 );","	vec3 hemiSpecular = vec3( 0.0 );","	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","		vec3 lVector = normalize( lDirection.xyz );","		float dotProduct = dot( normal, lVector );","		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","		hemiDiffuse += diffuse * hemiColor;","		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","		float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","		vec3 lVectorGround = -lVector;","		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","		float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","		float dotProductGround = dot( normal, lVectorGround );","		float specularNormalization = ( shininess + 2.0001 ) / 8.0;","		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );","		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );","		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","	}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","	totalDiffuse += dirDiffuse;","	totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","	totalDiffuse += hemiDiffuse;","	totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","	totalDiffuse += pointDiffuse;","	totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","	totalDiffuse += spotDiffuse;","	totalSpecular += spotSpecular;","#endif","#ifdef METAL","	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );","#else","	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","#endif"].join("\n"),color_pars_fragment:["#ifdef USE_COLOR","	varying vec3 vColor;","#endif"].join("\n"),color_fragment:["#ifdef USE_COLOR","	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );","#endif"].join("\n"),color_pars_vertex:["#ifdef USE_COLOR","	varying vec3 vColor;","#endif"].join("\n"),color_vertex:["#ifdef USE_COLOR","	#ifdef GAMMA_INPUT","		vColor = color * color;","	#else","		vColor = color;","	#endif","#endif"].join("\n"),skinning_pars_vertex:["#ifdef USE_SKINNING","	#ifdef BONE_TEXTURE","		uniform sampler2D boneTexture;","		uniform int boneTextureWidth;","		uniform int boneTextureHeight;","		mat4 getBoneMatrix( const in float i ) {","			float j = i * 4.0;","			float x = mod( j, float( boneTextureWidth ) );","			float y = floor( j / float( boneTextureWidth ) );","			float dx = 1.0 / float( boneTextureWidth );","			float dy = 1.0 / float( boneTextureHeight );","			y = dy * ( y + 0.5 );","			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );","			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );","			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );","			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );","			mat4 bone = mat4( v1, v2, v3, v4 );","			return bone;","		}","	#else","		uniform mat4 boneGlobalMatrices[ MAX_BONES ];","		mat4 getBoneMatrix( const in float i ) {","			mat4 bone = boneGlobalMatrices[ int(i) ];","			return bone;","		}","	#endif","#endif"].join("\n"),skinbase_vertex:["#ifdef USE_SKINNING","	mat4 boneMatX = getBoneMatrix( skinIndex.x );","	mat4 boneMatY = getBoneMatrix( skinIndex.y );","	mat4 boneMatZ = getBoneMatrix( skinIndex.z );","	mat4 boneMatW = getBoneMatrix( skinIndex.w );","#endif"].join("\n"),skinning_vertex:["#ifdef USE_SKINNING","	#ifdef USE_MORPHTARGETS","	vec4 skinVertex = vec4( morphed, 1.0 );","	#else","	vec4 skinVertex = vec4( position, 1.0 );","	#endif","	vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","	skinned      += boneMatY * skinVertex * skinWeight.y;","	skinned      += boneMatZ * skinVertex * skinWeight.z;","	skinned      += boneMatW * skinVertex * skinWeight.w;","#endif"].join("\n"),morphtarget_pars_vertex:["#ifdef USE_MORPHTARGETS","	#ifndef USE_MORPHNORMALS","	uniform float morphTargetInfluences[ 8 ];","	#else","	uniform float morphTargetInfluences[ 4 ];","	#endif","#endif"].join("\n"),morphtarget_vertex:["#ifdef USE_MORPHTARGETS","	vec3 morphed = vec3( 0.0 );","	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];","	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];","	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];","	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];","	#ifndef USE_MORPHNORMALS","	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];","	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];","	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];","	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];","	#endif","	morphed += position;","#endif"].join("\n"),default_vertex:["vec4 mvPosition;","#ifdef USE_SKINNING","	mvPosition = modelViewMatrix * skinned;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )","	mvPosition = modelViewMatrix * vec4( morphed, 1.0 );","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )","	mvPosition = modelViewMatrix * vec4( position, 1.0 );","#endif","gl_Position = projectionMatrix * mvPosition;"].join("\n"),morphnormal_vertex:["#ifdef USE_MORPHNORMALS","	vec3 morphedNormal = vec3( 0.0 );","	morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];","	morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];","	morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];","	morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];","	morphedNormal += normal;","#endif"].join("\n"),skinnormal_vertex:["#ifdef USE_SKINNING","	mat4 skinMatrix = skinWeight.x * boneMatX;","	skinMatrix 	+= skinWeight.y * boneMatY;","	skinMatrix 	+= skinWeight.z * boneMatZ;","	skinMatrix 	+= skinWeight.w * boneMatW;","	#ifdef USE_MORPHNORMALS","	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );","	#else","	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );","	#endif","#endif"].join("\n"),defaultnormal_vertex:["vec3 objectNormal;","#ifdef USE_SKINNING","	objectNormal = skinnedNormal.xyz;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )","	objectNormal = morphedNormal;","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )","	objectNormal = normal;","#endif","#ifdef FLIP_SIDED","	objectNormal = -objectNormal;","#endif","vec3 transformedNormal = normalMatrix * objectNormal;"].join("\n"),shadowmap_pars_fragment:["#ifdef USE_SHADOWMAP","	uniform sampler2D shadowMap[ MAX_SHADOWS ];","	uniform vec2 shadowMapSize[ MAX_SHADOWS ];","	uniform float shadowDarkness[ MAX_SHADOWS ];","	uniform float shadowBias[ MAX_SHADOWS ];","	varying vec4 vShadowCoord[ MAX_SHADOWS ];","	float unpackDepth( const in vec4 rgba_depth ) {","		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","		float depth = dot( rgba_depth, bit_shift );","		return depth;","	}","#endif"].join("\n"),shadowmap_fragment:["#ifdef USE_SHADOWMAP","	#ifdef SHADOWMAP_DEBUG","		vec3 frustumColors[3];","		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );","		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );","		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );","	#endif","	#ifdef SHADOWMAP_CASCADE","		int inFrustumCount = 0;","	#endif","	float fDepth;","	vec3 shadowColor = vec3( 1.0 );","	for( int i = 0; i < MAX_SHADOWS; i ++ ) {","		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;","		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );","		bool inFrustum = all( inFrustumVec );","		#ifdef SHADOWMAP_CASCADE","			inFrustumCount += int( inFrustum );","			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );","		#else","			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );","		#endif","		bool frustumTest = all( frustumTestVec );","		if ( frustumTest ) {","			shadowCoord.z += shadowBias[ i ];","			#if defined( SHADOWMAP_TYPE_PCF )","				float shadow = 0.0;","				const float shadowDelta = 1.0 / 9.0;","				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","				float dx0 = -1.25 * xPixelOffset;","				float dy0 = -1.25 * yPixelOffset;","				float dx1 = 1.25 * xPixelOffset;","				float dy1 = 1.25 * yPixelOffset;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )","				float shadow = 0.0;","				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","				float dx0 = -1.0 * xPixelOffset;","				float dy0 = -1.0 * yPixelOffset;","				float dx1 = 1.0 * xPixelOffset;","				float dy1 = 1.0 * yPixelOffset;","				mat3 shadowKernel;","				mat3 depthKernel;","				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","				vec3 shadowZ = vec3( shadowCoord.z );","				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));","				shadowKernel[0] *= vec3(0.25);","				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));","				shadowKernel[1] *= vec3(0.25);","				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));","				shadowKernel[2] *= vec3(0.25);","				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );","				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );","				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );","				vec4 shadowValues;","				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );","				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );","				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );","				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );","				shadow = dot( shadowValues, vec4( 1.0 ) );","				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","			#else","				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );","				float fDepth = unpackDepth( rgbaDepth );","				if ( fDepth < shadowCoord.z )","					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );","			#endif","		}","		#ifdef SHADOWMAP_DEBUG","			#ifdef SHADOWMAP_CASCADE","				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];","			#else","				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];","			#endif","		#endif","	}","	#ifdef GAMMA_OUTPUT","		shadowColor *= shadowColor;","	#endif","	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;","#endif"].join("\n"),shadowmap_pars_vertex:["#ifdef USE_SHADOWMAP","	varying vec4 vShadowCoord[ MAX_SHADOWS ];","	uniform mat4 shadowMatrix[ MAX_SHADOWS ];","#endif"].join("\n"),shadowmap_vertex:["#ifdef USE_SHADOWMAP","	for( int i = 0; i < MAX_SHADOWS; i ++ ) {","		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","	}","#endif"].join("\n"),alphatest_fragment:["#ifdef ALPHATEST","	if ( gl_FragColor.a < ALPHATEST ) discard;","#endif"].join("\n"),linear_to_gamma_fragment:["#ifdef GAMMA_OUTPUT","	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );","#endif"].join("\n"),logdepthbuf_pars_vertex:["#ifdef USE_LOGDEPTHBUF","	#ifdef USE_LOGDEPTHBUF_EXT","		varying float vFragDepth;","	#endif","	uniform float logDepthBufFC;","#endif"].join("\n"),logdepthbuf_vertex:["#ifdef USE_LOGDEPTHBUF","	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;","	#ifdef USE_LOGDEPTHBUF_EXT","		vFragDepth = 1.0 + gl_Position.w;","#else","		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;","	#endif","#endif"].join("\n"),logdepthbuf_pars_fragment:["#ifdef USE_LOGDEPTHBUF","	uniform float logDepthBufFC;","	#ifdef USE_LOGDEPTHBUF_EXT","		#extension GL_EXT_frag_depth : enable","		varying float vFragDepth;","	#endif","#endif"].join("\n"),logdepthbuf_fragment:["#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)","	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;","#endif"].join("\n")},THREE.UniformsUtils={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++){d=this.clone(a[b]);for(c in d)e[c]=d[c]}return e},clone:function(a){var b,c,d,e={};for(b in a){e[b]={};for(c in a[b])d=a[b][c],d instanceof THREE.Color||d instanceof THREE.Vector2||d instanceof THREE.Vector3||d instanceof THREE.Vector4||d instanceof THREE.Matrix4||d instanceof THREE.Texture?e[b][c]=d.clone():d instanceof Array?e[b][c]=d.slice():e[b][c]=d}return e}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			gl_FragColor.xyz *= vLightFront;","		else","			gl_FragColor.xyz *= vLightBack;","	#else","		gl_FragColor.xyz *= vLightFront;","	#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{
scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float refractionRatio;","uniform float reflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","	uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	gl_FragColor = vec4( vec3( 1.0 ), opacity );","	vec3 specularTex = vec3( 1.0 );","	vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","	normalTex.xy *= uNormalScale;","	normalTex = normalize( normalTex );","	if( enableDiffuse ) {","		#ifdef GAMMA_INPUT","			vec4 texelColor = texture2D( tDiffuse, vUv );","			texelColor.xyz *= texelColor.xyz;","			gl_FragColor = gl_FragColor * texelColor;","		#else","			gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","		#endif","	}","	if( enableAO ) {","		#ifdef GAMMA_INPUT","			vec4 aoColor = texture2D( tAO, vUv );","			aoColor.xyz *= aoColor.xyz;","			gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","		#else","			gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","		#endif","	}","	if( enableSpecular )","		specularTex = texture2D( tSpecular, vUv ).xyz;","	mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","	vec3 finalNormal = tsb * normalTex;","	#ifdef FLIP_SIDED","		finalNormal = -finalNormal;","	#endif","	vec3 normal = normalize( finalNormal );","	vec3 viewPosition = normalize( vViewPosition );","	#if MAX_POINT_LIGHTS > 0","		vec3 pointDiffuse = vec3( 0.0 );","		vec3 pointSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","			vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","			float pointDistance = 1.0;","			if ( pointLightDistance[ i ] > 0.0 )","				pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","			pointVector = normalize( pointVector );","			#ifdef WRAP_AROUND","				float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","				float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","				vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","			#else","				float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","			#endif","			pointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;","			vec3 pointHalfVector = normalize( pointVector + viewPosition );","			float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","			float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0001 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );","			pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","		}","	#endif","	#if MAX_SPOT_LIGHTS > 0","		vec3 spotDiffuse = vec3( 0.0 );","		vec3 spotSpecular = vec3( 0.0 );","		for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","			vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","			vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","			float spotDistance = 1.0;","			if ( spotLightDistance[ i ] > 0.0 )","				spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","			spotVector = normalize( spotVector );","			float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","			if ( spotEffect > spotLightAngleCos[ i ] ) {","				spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","				#ifdef WRAP_AROUND","					float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","					float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","					vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","				#else","					float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","				#endif","				spotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;","				vec3 spotHalfVector = normalize( spotVector + viewPosition );","				float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","				float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );","				float specularNormalization = ( shininess + 2.0001 ) / 8.0;","				vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );","				spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","			}","		}","	#endif","	#if MAX_DIR_LIGHTS > 0","		vec3 dirDiffuse = vec3( 0.0 );","		vec3 dirSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","			vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","			vec3 dirVector = normalize( lDirection.xyz );","			#ifdef WRAP_AROUND","				float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","				float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","				vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","			#else","				float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","			#endif","			dirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;","			vec3 dirHalfVector = normalize( dirVector + viewPosition );","			float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","			float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","			float specularNormalization = ( shininess + 2.0001 ) / 8.0;","			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","			dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","		}","	#endif","	#if MAX_HEMI_LIGHTS > 0","		vec3 hemiDiffuse  = vec3( 0.0 );","		vec3 hemiSpecular = vec3( 0.0 );","		for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","			vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","			vec3 lVector = normalize( lDirection.xyz );","			float dotProduct = dot( normal, lVector );","			float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","			vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","			hemiDiffuse += diffuse * hemiColor;","			vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","			float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","			float hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","			vec3 lVectorGround = -lVector;","			vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","			float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","			float hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","			float dotProductGround = dot( normal, lVectorGround );","			float specularNormalization = ( shininess + 2.0001 ) / 8.0;","			vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","			vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","			hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","		}","	#endif","	vec3 totalDiffuse = vec3( 0.0 );","	vec3 totalSpecular = vec3( 0.0 );","	#if MAX_DIR_LIGHTS > 0","		totalDiffuse += dirDiffuse;","		totalSpecular += dirSpecular;","	#endif","	#if MAX_HEMI_LIGHTS > 0","		totalDiffuse += hemiDiffuse;","		totalSpecular += hemiSpecular;","	#endif","	#if MAX_POINT_LIGHTS > 0","		totalDiffuse += pointDiffuse;","		totalSpecular += pointSpecular;","	#endif","	#if MAX_SPOT_LIGHTS > 0","		totalDiffuse += spotDiffuse;","		totalSpecular += spotSpecular;","	#endif","	#ifdef METAL","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );","	#else","		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","	#endif","	if ( enableReflection ) {","		vec3 vReflect;","		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","		if ( useRefract ) {","			vReflect = refract( cameraToVertex, normal, refractionRatio );","		} else {","			vReflect = reflect( cameraToVertex, normal );","		}","		vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","		#ifdef GAMMA_INPUT","			cubeColor.xyz *= cubeColor.xyz;","		#endif","		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );","	}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","	uniform sampler2D tDisplacement;","	uniform float uDisplacementScale;","	uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"	#ifdef USE_SKINNING","		vNormal = normalize( normalMatrix * skinnedNormal.xyz );","		vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","		vTangent = normalize( normalMatrix * skinnedTangent.xyz );","	#else","		vNormal = normalize( normalMatrix * normal );","		vTangent = normalize( normalMatrix * tangent.xyz );","	#endif","	vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","	vUv = uv * uRepeat + uOffset;","	vec3 displacedPosition;","	#ifdef VERTEX_TEXTURES","		if ( enableDisplacement ) {","			vec3 dv = texture2D( tDisplacement, uv ).xyz;","			float df = uDisplacementScale * dv.x + uDisplacementBias;","			displacedPosition = position + normalize( normal ) * df;","		} else {","			#ifdef USE_SKINNING","				vec4 skinVertex = vec4( position, 1.0 );","				vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","				skinned 	  += boneMatY * skinVertex * skinWeight.y;","				skinned 	  += boneMatZ * skinVertex * skinWeight.z;","				skinned 	  += boneMatW * skinVertex * skinWeight.w;","				displacedPosition  = skinned.xyz;","			#else","				displacedPosition = position;","			#endif","		}","	#else","		#ifdef USE_SKINNING","			vec4 skinVertex = vec4( position, 1.0 );","			vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","			skinned 	  += boneMatY * skinVertex * skinWeight.y;","			skinned 	  += boneMatZ * skinVertex * skinWeight.z;","			skinned 	  += boneMatW * skinVertex * skinWeight.w;","			displacedPosition  = skinned.xyz;","		#else","			displacedPosition = position;","		#endif","	#endif","	vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","	vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"	vWorldPosition = worldPosition.xyz;","	vViewPosition = -mvPosition.xyz;","	#ifdef USE_SHADOWMAP","		for( int i = 0; i < MAX_SHADOWS; i ++ ) {","			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","		}","	#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")}},THREE.WebGLRenderer=function(a){function b(a){a.__webglVertexBuffer=Fa.createBuffer(),a.__webglColorBuffer=Fa.createBuffer(),Na.info.memory.geometries++}function c(a){a.__webglVertexBuffer=Fa.createBuffer(),a.__webglColorBuffer=Fa.createBuffer(),a.__webglLineDistanceBuffer=Fa.createBuffer(),Na.info.memory.geometries++}function d(a){a.__webglVertexBuffer=Fa.createBuffer(),a.__webglNormalBuffer=Fa.createBuffer(),a.__webglTangentBuffer=Fa.createBuffer(),a.__webglColorBuffer=Fa.createBuffer(),a.__webglUVBuffer=Fa.createBuffer(),a.__webglUV2Buffer=Fa.createBuffer(),a.__webglSkinIndicesBuffer=Fa.createBuffer(),a.__webglSkinWeightsBuffer=Fa.createBuffer(),a.__webglFaceBuffer=Fa.createBuffer(),a.__webglLineBuffer=Fa.createBuffer();var b,c;if(a.numMorphTargets)for(a.__webglMorphTargetsBuffers=[],b=0,c=a.numMorphTargets;c>b;b++)a.__webglMorphTargetsBuffers.push(Fa.createBuffer());if(a.numMorphNormals)for(a.__webglMorphNormalsBuffers=[],b=0,c=a.numMorphNormals;c>b;b++)a.__webglMorphNormalsBuffers.push(Fa.createBuffer());Na.info.memory.geometries++}function e(a,b){var c=a.vertices.length,d=b.material;if(d.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var g=1;"v2"===f.type?g=2:"v3"===f.type?g=3:"v4"===f.type?g=4:"c"===f.type&&(g=3),f.size=g,f.array=new Float32Array(c*g),f.buffer=Fa.createBuffer(),f.buffer.belongsToAttribute=e,f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}function f(a,b){var c=a.vertices.length;a.__vertexArray=new Float32Array(3*c),a.__colorArray=new Float32Array(3*c),a.__sortArray=[],a.__webglParticleCount=c,e(a,b)}function g(a,b){var c=a.vertices.length;a.__vertexArray=new Float32Array(3*c),a.__colorArray=new Float32Array(3*c),a.__lineDistanceArray=new Float32Array(1*c),a.__webglLineCount=c,e(a,b)}function h(a,b){var c=b.geometry,d=a.faces3,e=3*d.length,f=1*d.length,g=3*d.length,h=i(b,a),j=m(h),n=k(h),o=l(h);a.__vertexArray=new Float32Array(3*e),n&&(a.__normalArray=new Float32Array(3*e)),c.hasTangents&&(a.__tangentArray=new Float32Array(4*e)),o&&(a.__colorArray=new Float32Array(3*e)),j&&(c.faceVertexUvs.length>0&&(a.__uvArray=new Float32Array(2*e)),c.faceVertexUvs.length>1&&(a.__uv2Array=new Float32Array(2*e))),b.geometry.skinWeights.length&&b.geometry.skinIndices.length&&(a.__skinIndexArray=new Float32Array(4*e),a.__skinWeightArray=new Float32Array(4*e));var p=null!==La&&f>21845?Uint32Array:Uint16Array;a.__typeArray=p,a.__faceArray=new p(3*f),a.__lineArray=new p(2*g);var q,r;if(a.numMorphTargets)for(a.__morphTargetsArrays=[],q=0,r=a.numMorphTargets;r>q;q++)a.__morphTargetsArrays.push(new Float32Array(3*e));if(a.numMorphNormals)for(a.__morphNormalsArrays=[],q=0,r=a.numMorphNormals;r>q;q++)a.__morphNormalsArrays.push(new Float32Array(3*e));if(a.__webglFaceCount=3*f,a.__webglLineCount=2*g,h.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var s in h.attributes){var t=h.attributes[s],u={};for(var v in t)u[v]=t[v];if(!u.__webglInitialized||u.createUniqueBuffers){u.__webglInitialized=!0;var w=1;"v2"===u.type?w=2:"v3"===u.type?w=3:"v4"===u.type?w=4:"c"===u.type&&(w=3),u.size=w,u.array=new Float32Array(e*w),u.buffer=Fa.createBuffer(),u.buffer.belongsToAttribute=s,t.needsUpdate=!0,u.__original=t}a.__webglCustomAttributesList.push(u)}}a.__inittedArrays=!0}function i(a,b){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[b.materialIndex]:a.material}function j(a){return a&&void 0!==a.shading&&a.shading===THREE.SmoothShading}function k(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:j(a)?THREE.SmoothShading:THREE.FlatShading}function l(a){return a.vertexColors?a.vertexColors:!1}function m(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a instanceof THREE.ShaderMaterial?!0:!1}function n(a){for(var b in a.attributes){var c="index"===b?Fa.ELEMENT_ARRAY_BUFFER:Fa.ARRAY_BUFFER,d=a.attributes[b];d.buffer=Fa.createBuffer(),Fa.bindBuffer(c,d.buffer),Fa.bufferData(c,d.array,Fa.STATIC_DRAW)}}function o(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=a.vertices,q=p.length,r=a.colors,s=r.length,t=a.__vertexArray,u=a.__colorArray,v=a.__sortArray,w=a.verticesNeedUpdate,x=(a.elementsNeedUpdate,a.colorsNeedUpdate),z=a.__webglCustomAttributesList;if(c.sortParticles){for(pb.copy(ob),pb.multiply(c.matrixWorld),d=0;q>d;d++)f=p[d],qb.copy(f),qb.applyProjection(pb),v[d]=[qb.z,d];for(v.sort(y),d=0;q>d;d++)f=p[v[d][1]],g=3*d,t[g]=f.x,t[g+1]=f.y,t[g+2]=f.z;for(e=0;s>e;e++)g=3*e,i=r[v[e][1]],u[g]=i.r,u[g+1]=i.g,u[g+2]=i.b;if(z)for(j=0,k=z.length;k>j;j++)if(o=z[j],void 0===o.boundTo||"vertices"===o.boundTo)if(g=0,m=o.value.length,1===o.size)for(l=0;m>l;l++)h=v[l][1],o.array[l]=o.value[h];else if(2===o.size)for(l=0;m>l;l++)h=v[l][1],n=o.value[h],o.array[g]=n.x,o.array[g+1]=n.y,g+=2;else if(3===o.size)if("c"===o.type)for(l=0;m>l;l++)h=v[l][1],n=o.value[h],o.array[g]=n.r,o.array[g+1]=n.g,o.array[g+2]=n.b,g+=3;else for(l=0;m>l;l++)h=v[l][1],n=o.value[h],o.array[g]=n.x,o.array[g+1]=n.y,o.array[g+2]=n.z,g+=3;else if(4===o.size)for(l=0;m>l;l++)h=v[l][1],n=o.value[h],o.array[g]=n.x,o.array[g+1]=n.y,o.array[g+2]=n.z,o.array[g+3]=n.w,g+=4}else{if(w)for(d=0;q>d;d++)f=p[d],g=3*d,t[g]=f.x,t[g+1]=f.y,t[g+2]=f.z;if(x)for(e=0;s>e;e++)i=r[e],g=3*e,u[g]=i.r,u[g+1]=i.g,u[g+2]=i.b;if(z)for(j=0,k=z.length;k>j;j++)if(o=z[j],o.needsUpdate&&(void 0===o.boundTo||"vertices"===o.boundTo))if(m=o.value.length,g=0,1===o.size)for(l=0;m>l;l++)o.array[l]=o.value[l];else if(2===o.size)for(l=0;m>l;l++)n=o.value[l],o.array[g]=n.x,o.array[g+1]=n.y,g+=2;else if(3===o.size)if("c"===o.type)for(l=0;m>l;l++)n=o.value[l],o.array[g]=n.r,o.array[g+1]=n.g,o.array[g+2]=n.b,g+=3;else for(l=0;m>l;l++)n=o.value[l],o.array[g]=n.x,o.array[g+1]=n.y,o.array[g+2]=n.z,g+=3;else if(4===o.size)for(l=0;m>l;l++)n=o.value[l],o.array[g]=n.x,o.array[g+1]=n.y,o.array[g+2]=n.z,o.array[g+3]=n.w,g+=4}if((w||c.sortParticles)&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglVertexBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,t,b)),(x||c.sortParticles)&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglColorBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,u,b)),z)for(j=0,k=z.length;k>j;j++)o=z[j],(o.needsUpdate||c.sortParticles)&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,o.buffer),Fa.bufferData(Fa.ARRAY_BUFFER,o.array,b))}function p(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=a.vertices,p=a.colors,q=a.lineDistances,r=o.length,s=p.length,t=q.length,u=a.__vertexArray,v=a.__colorArray,w=a.__lineDistanceArray,x=a.verticesNeedUpdate,y=a.colorsNeedUpdate,z=a.lineDistancesNeedUpdate,A=a.__webglCustomAttributesList;if(x){for(c=0;r>c;c++)f=o[c],g=3*c,u[g]=f.x,u[g+1]=f.y,u[g+2]=f.z;Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglVertexBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,u,b)}if(y){for(d=0;s>d;d++)h=p[d],g=3*d,v[g]=h.r,v[g+1]=h.g,v[g+2]=h.b;Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglColorBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,v,b)}if(z){for(e=0;t>e;e++)w[e]=q[e];Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglLineDistanceBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,w,b)}if(A)for(i=0,j=A.length;j>i;i++)if(n=A[i],n.needsUpdate&&(void 0===n.boundTo||"vertices"===n.boundTo)){if(g=0,l=n.value.length,1===n.size)for(k=0;l>k;k++)n.array[k]=n.value[k];else if(2===n.size)for(k=0;l>k;k++)m=n.value[k],n.array[g]=m.x,n.array[g+1]=m.y,g+=2;else if(3===n.size)if("c"===n.type)for(k=0;l>k;k++)m=n.value[k],n.array[g]=m.r,n.array[g+1]=m.g,n.array[g+2]=m.b,g+=3;else for(k=0;l>k;k++)m=n.value[k],n.array[g]=m.x,n.array[g+1]=m.y,n.array[g+2]=m.z,g+=3;else if(4===n.size)for(k=0;l>k;k++)m=n.value[k],n.array[g]=m.x,n.array[g+1]=m.y,n.array[g+2]=m.z,n.array[g+3]=m.w,g+=4;Fa.bindBuffer(Fa.ARRAY_BUFFER,n.buffer),Fa.bufferData(Fa.ARRAY_BUFFER,n.array,b)}}function q(a,b,c,d,e){if(a.__inittedArrays){var f,g,h,i,j,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y=k(e),Z=l(e),$=m(e),_=Y===THREE.SmoothShading,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=a.__vertexArray,oa=a.__uvArray,pa=a.__uv2Array,qa=a.__normalArray,ra=a.__tangentArray,sa=a.__colorArray,ta=a.__skinIndexArray,ua=a.__skinWeightArray,va=a.__morphTargetsArrays,wa=a.__morphNormalsArrays,xa=a.__webglCustomAttributesList,ya=a.__faceArray,za=a.__lineArray,Aa=b.geometry,Ba=Aa.verticesNeedUpdate,Ca=Aa.elementsNeedUpdate,Da=Aa.uvsNeedUpdate,Ea=Aa.normalsNeedUpdate,Ga=Aa.tangentsNeedUpdate,Ha=Aa.colorsNeedUpdate,Ia=Aa.morphTargetsNeedUpdate,Ja=Aa.vertices,Ka=a.faces3,La=Aa.faces,Ma=Aa.faceVertexUvs[0],Na=Aa.faceVertexUvs[1],Oa=(Aa.colors,Aa.skinIndices),Pa=Aa.skinWeights,Qa=Aa.morphTargets,Ra=Aa.morphNormals;if(Ba){for(f=0,g=Ka.length;g>f;f++)i=La[Ka[f]],t=Ja[i.a],u=Ja[i.b],v=Ja[i.c],na[ba]=t.x,na[ba+1]=t.y,na[ba+2]=t.z,na[ba+3]=u.x,na[ba+4]=u.y,na[ba+5]=u.z,na[ba+6]=v.x,na[ba+7]=v.y,na[ba+8]=v.z,ba+=9;Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglVertexBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,na,c)}if(Ia)for(Q=0,R=Qa.length;R>Q;Q++){for(ka=0,f=0,g=Ka.length;g>f;f++)U=Ka[f],i=La[U],t=Qa[Q].vertices[i.a],u=Qa[Q].vertices[i.b],v=Qa[Q].vertices[i.c],S=va[Q],S[ka]=t.x,S[ka+1]=t.y,S[ka+2]=t.z,S[ka+3]=u.x,S[ka+4]=u.y,S[ka+5]=u.z,S[ka+6]=v.x,S[ka+7]=v.y,S[ka+8]=v.z,e.morphNormals&&(_?(V=Ra[Q].vertexNormals[U],z=V.a,A=V.b,B=V.c):(z=Ra[Q].faceNormals[U],A=z,B=z),T=wa[Q],T[ka]=z.x,T[ka+1]=z.y,T[ka+2]=z.z,T[ka+3]=A.x,T[ka+4]=A.y,T[ka+5]=A.z,T[ka+6]=B.x,T[ka+7]=B.y,T[ka+8]=B.z),ka+=9;Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglMorphTargetsBuffers[Q]),Fa.bufferData(Fa.ARRAY_BUFFER,va[Q],c),e.morphNormals&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglMorphNormalsBuffers[Q]),Fa.bufferData(Fa.ARRAY_BUFFER,wa[Q],c))}if(Pa.length){for(f=0,g=Ka.length;g>f;f++)i=La[Ka[f]],F=Pa[i.a],G=Pa[i.b],H=Pa[i.c],ua[ja]=F.x,ua[ja+1]=F.y,ua[ja+2]=F.z,ua[ja+3]=F.w,ua[ja+4]=G.x,ua[ja+5]=G.y,ua[ja+6]=G.z,ua[ja+7]=G.w,ua[ja+8]=H.x,ua[ja+9]=H.y,ua[ja+10]=H.z,ua[ja+11]=H.w,I=Oa[i.a],J=Oa[i.b],K=Oa[i.c],ta[ja]=I.x,ta[ja+1]=I.y,ta[ja+2]=I.z,ta[ja+3]=I.w,ta[ja+4]=J.x,ta[ja+5]=J.y,ta[ja+6]=J.z,ta[ja+7]=J.w,ta[ja+8]=K.x,ta[ja+9]=K.y,ta[ja+10]=K.z,ta[ja+11]=K.w,ja+=12;ja>0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglSkinIndicesBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,ta,c),Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglSkinWeightsBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,ua,c))}if(Ha&&Z){for(f=0,g=Ka.length;g>f;f++)i=La[Ka[f]],o=i.vertexColors,p=i.color,3===o.length&&Z===THREE.VertexColors?(C=o[0],D=o[1],E=o[2]):(C=p,D=p,E=p),sa[ia]=C.r,sa[ia+1]=C.g,sa[ia+2]=C.b,sa[ia+3]=D.r,sa[ia+4]=D.g,sa[ia+5]=D.b,sa[ia+6]=E.r,sa[ia+7]=E.g,sa[ia+8]=E.b,ia+=9;ia>0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglColorBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,sa,c))}if(Ga&&Aa.hasTangents){for(f=0,g=Ka.length;g>f;f++)i=La[Ka[f]],q=i.vertexTangents,w=q[0],x=q[1],y=q[2],ra[ga]=w.x,ra[ga+1]=w.y,ra[ga+2]=w.z,ra[ga+3]=w.w,ra[ga+4]=x.x,ra[ga+5]=x.y,ra[ga+6]=x.z,ra[ga+7]=x.w,ra[ga+8]=y.x,ra[ga+9]=y.y,ra[ga+10]=y.z,ra[ga+11]=y.w,ga+=12;Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglTangentBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,ra,c)}if(Ea&&Y){for(f=0,g=Ka.length;g>f;f++)if(i=La[Ka[f]],j=i.vertexNormals,n=i.normal,3===j.length&&_)for(L=0;3>L;L++)N=j[L],qa[fa]=N.x,qa[fa+1]=N.y,qa[fa+2]=N.z,fa+=3;else for(L=0;3>L;L++)qa[fa]=n.x,qa[fa+1]=n.y,qa[fa+2]=n.z,fa+=3;Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglNormalBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,qa,c)}if(Da&&Ma&&$){for(f=0,g=Ka.length;g>f;f++)if(h=Ka[f],r=Ma[h],void 0!==r)for(L=0;3>L;L++)O=r[L],oa[ca]=O.x,oa[ca+1]=O.y,ca+=2;ca>0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglUVBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,oa,c))}if(Da&&Na&&$){for(f=0,g=Ka.length;g>f;f++)if(h=Ka[f],s=Na[h],void 0!==s)for(L=0;3>L;L++)P=s[L],pa[da]=P.x,pa[da+1]=P.y,da+=2;da>0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglUV2Buffer),Fa.bufferData(Fa.ARRAY_BUFFER,pa,c))}if(Ca){for(f=0,g=Ka.length;g>f;f++)ya[ea]=aa,ya[ea+1]=aa+1,ya[ea+2]=aa+2,ea+=3,za[ha]=aa,za[ha+1]=aa+1,za[ha+2]=aa,za[ha+3]=aa+2,za[ha+4]=aa+1,za[ha+5]=aa+2,ha+=6,aa+=3;Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,a.__webglFaceBuffer),Fa.bufferData(Fa.ELEMENT_ARRAY_BUFFER,ya,c),Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,a.__webglLineBuffer),Fa.bufferData(Fa.ELEMENT_ARRAY_BUFFER,za,c)}if(xa)for(L=0,M=xa.length;M>L;L++)if(X=xa[L],X.__original.needsUpdate){if(la=0,ma=0,1===X.size){if(void 0===X.boundTo||"vertices"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)i=La[Ka[f]],X.array[la]=X.value[i.a],X.array[la+1]=X.value[i.b],X.array[la+2]=X.value[i.c],la+=3;else if("faces"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)W=X.value[Ka[f]],X.array[la]=W,X.array[la+1]=W,X.array[la+2]=W,la+=3}else if(2===X.size){if(void 0===X.boundTo||"vertices"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)i=La[Ka[f]],t=X.value[i.a],u=X.value[i.b],v=X.value[i.c],X.array[la]=t.x,X.array[la+1]=t.y,X.array[la+2]=u.x,X.array[la+3]=u.y,X.array[la+4]=v.x,X.array[la+5]=v.y,la+=6;else if("faces"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)W=X.value[Ka[f]],t=W,u=W,v=W,X.array[la]=t.x,X.array[la+1]=t.y,X.array[la+2]=u.x,X.array[la+3]=u.y,X.array[la+4]=v.x,X.array[la+5]=v.y,la+=6}else if(3===X.size){var Sa;if(Sa="c"===X.type?["r","g","b"]:["x","y","z"],void 0===X.boundTo||"vertices"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)i=La[Ka[f]],t=X.value[i.a],u=X.value[i.b],v=X.value[i.c],X.array[la]=t[Sa[0]],X.array[la+1]=t[Sa[1]],X.array[la+2]=t[Sa[2]],X.array[la+3]=u[Sa[0]],X.array[la+4]=u[Sa[1]],X.array[la+5]=u[Sa[2]],X.array[la+6]=v[Sa[0]],X.array[la+7]=v[Sa[1]],X.array[la+8]=v[Sa[2]],la+=9;else if("faces"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)W=X.value[Ka[f]],
t=W,u=W,v=W,X.array[la]=t[Sa[0]],X.array[la+1]=t[Sa[1]],X.array[la+2]=t[Sa[2]],X.array[la+3]=u[Sa[0]],X.array[la+4]=u[Sa[1]],X.array[la+5]=u[Sa[2]],X.array[la+6]=v[Sa[0]],X.array[la+7]=v[Sa[1]],X.array[la+8]=v[Sa[2]],la+=9;else if("faceVertices"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)W=X.value[Ka[f]],t=W[0],u=W[1],v=W[2],X.array[la]=t[Sa[0]],X.array[la+1]=t[Sa[1]],X.array[la+2]=t[Sa[2]],X.array[la+3]=u[Sa[0]],X.array[la+4]=u[Sa[1]],X.array[la+5]=u[Sa[2]],X.array[la+6]=v[Sa[0]],X.array[la+7]=v[Sa[1]],X.array[la+8]=v[Sa[2]],la+=9}else if(4===X.size)if(void 0===X.boundTo||"vertices"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)i=La[Ka[f]],t=X.value[i.a],u=X.value[i.b],v=X.value[i.c],X.array[la]=t.x,X.array[la+1]=t.y,X.array[la+2]=t.z,X.array[la+3]=t.w,X.array[la+4]=u.x,X.array[la+5]=u.y,X.array[la+6]=u.z,X.array[la+7]=u.w,X.array[la+8]=v.x,X.array[la+9]=v.y,X.array[la+10]=v.z,X.array[la+11]=v.w,la+=12;else if("faces"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)W=X.value[Ka[f]],t=W,u=W,v=W,X.array[la]=t.x,X.array[la+1]=t.y,X.array[la+2]=t.z,X.array[la+3]=t.w,X.array[la+4]=u.x,X.array[la+5]=u.y,X.array[la+6]=u.z,X.array[la+7]=u.w,X.array[la+8]=v.x,X.array[la+9]=v.y,X.array[la+10]=v.z,X.array[la+11]=v.w,la+=12;else if("faceVertices"===X.boundTo)for(f=0,g=Ka.length;g>f;f++)W=X.value[Ka[f]],t=W[0],u=W[1],v=W[2],X.array[la]=t.x,X.array[la+1]=t.y,X.array[la+2]=t.z,X.array[la+3]=t.w,X.array[la+4]=u.x,X.array[la+5]=u.y,X.array[la+6]=u.z,X.array[la+7]=u.w,X.array[la+8]=v.x,X.array[la+9]=v.y,X.array[la+10]=v.z,X.array[la+11]=v.w,la+=12;Fa.bindBuffer(Fa.ARRAY_BUFFER,X.buffer),Fa.bufferData(Fa.ARRAY_BUFFER,X.array,c)}d&&(delete a.__inittedArrays,delete a.__colorArray,delete a.__normalArray,delete a.__tangentArray,delete a.__uvArray,delete a.__uv2Array,delete a.__faceArray,delete a.__vertexArray,delete a.__lineArray,delete a.__skinIndexArray,delete a.__skinWeightArray)}}function r(a,b){var c,d,e=a.attributes;for(c in e)d=e[c],d.needsUpdate&&("index"===c?(Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,d.buffer),Fa.bufferData(Fa.ELEMENT_ARRAY_BUFFER,d.array,b)):(Fa.bindBuffer(Fa.ARRAY_BUFFER,d.buffer),Fa.bufferData(Fa.ARRAY_BUFFER,d.array,b)),d.needsUpdate=!1)}function s(a,b,c,d){for(var e in b){var f=b[e],g=c[e];if(f>=0)if(g){var h=g.itemSize;Fa.bindBuffer(Fa.ARRAY_BUFFER,g.buffer),u(f),Fa.vertexAttribPointer(f,h,Fa.FLOAT,!1,0,d*h*4)}else a.defaultAttributeValues&&(2===a.defaultAttributeValues[e].length?Fa.vertexAttrib2fv(f,a.defaultAttributeValues[e]):3===a.defaultAttributeValues[e].length&&Fa.vertexAttrib3fv(f,a.defaultAttributeValues[e]))}v()}function t(){for(var a=0,b=lb.length;b>a;a++)lb[a]=0}function u(a){lb[a]=1,0===mb[a]&&(Fa.enableVertexAttribArray(a),mb[a]=1)}function v(){for(var a=0,b=mb.length;b>a;a++)mb[a]!==lb[a]&&(Fa.disableVertexAttribArray(a),mb[a]=0)}function w(a,b,c){var d=a.program.attributes;if(-1!==c.morphTargetBase&&d.position>=0?(Fa.bindBuffer(Fa.ARRAY_BUFFER,b.__webglMorphTargetsBuffers[c.morphTargetBase]),u(d.position),Fa.vertexAttribPointer(d.position,3,Fa.FLOAT,!1,0,0)):d.position>=0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,b.__webglVertexBuffer),u(d.position),Fa.vertexAttribPointer(d.position,3,Fa.FLOAT,!1,0,0)),c.morphTargetForcedOrder.length)for(var e=0,f=c.morphTargetForcedOrder,g=c.morphTargetInfluences;e<a.numSupportedMorphTargets&&e<f.length;)d["morphTarget"+e]>=0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,b.__webglMorphTargetsBuffers[f[e]]),u(d["morphTarget"+e]),Fa.vertexAttribPointer(d["morphTarget"+e],3,Fa.FLOAT,!1,0,0)),d["morphNormal"+e]>=0&&a.morphNormals&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,b.__webglMorphNormalsBuffers[f[e]]),u(d["morphNormal"+e]),Fa.vertexAttribPointer(d["morphNormal"+e],3,Fa.FLOAT,!1,0,0)),c.__webglMorphTargetInfluences[e]=g[f[e]],e++;else{var h,i,j=[],g=c.morphTargetInfluences,k=g.length;for(i=0;k>i;i++)h=g[i],h>0&&j.push([h,i]);j.length>a.numSupportedMorphTargets?(j.sort(y),j.length=a.numSupportedMorphTargets):j.length>a.numSupportedMorphNormals?j.sort(y):0===j.length&&j.push([0,0]);for(var l,e=0;e<a.numSupportedMorphTargets;)j[e]?(l=j[e][1],d["morphTarget"+e]>=0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,b.__webglMorphTargetsBuffers[l]),u(d["morphTarget"+e]),Fa.vertexAttribPointer(d["morphTarget"+e],3,Fa.FLOAT,!1,0,0)),d["morphNormal"+e]>=0&&a.morphNormals&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,b.__webglMorphNormalsBuffers[l]),u(d["morphNormal"+e]),Fa.vertexAttribPointer(d["morphNormal"+e],3,Fa.FLOAT,!1,0,0)),c.__webglMorphTargetInfluences[e]=g[l]):c.__webglMorphTargetInfluences[e]=0,e++}null!==a.program.uniforms.morphTargetInfluences&&Fa.uniform1fv(a.program.uniforms.morphTargetInfluences,c.__webglMorphTargetInfluences)}function x(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function y(a,b){return b[0]-a[0]}function z(a,b,c){if(a.length)for(var d=0,e=a.length;e>d;d++)Pa=null,Ta=null,Xa=-1,_a=-1,ab=-1,Va=-1,Wa=-1,Sa=-1,Ra=-1,sb=!0,a[d].render(b,c,jb,kb),Pa=null,Ta=null,Xa=-1,_a=-1,ab=-1,Va=-1,Wa=-1,Sa=-1,Ra=-1,sb=!0}function A(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o;b?(m=a.length-1,n=-1,o=-1):(m=0,n=a.length,o=1);for(var p=m;p!==n;p+=o)if(i=a[p],i.render){if(j=i.object,k=i.buffer,h)l=h;else{if(l=i[c],!l)continue;g&&Na.setBlending(l.blending,l.blendEquation,l.blendSrc,l.blendDst),Na.setDepthTest(l.depthTest),Na.setDepthWrite(l.depthWrite),ea(l.polygonOffset,l.polygonOffsetFactor,l.polygonOffsetUnits)}Na.setMaterialFaces(l),k instanceof THREE.BufferGeometry?Na.renderBufferDirect(d,e,f,l,k,j):Na.renderBuffer(d,e,f,l,k,j)}}function B(a,b,c,d,e,f,g){for(var h,i,j,k=0,l=a.length;l>k;k++)if(h=a[k],i=h.object,i.visible){if(g)j=g;else{if(j=h[b],!j)continue;f&&Na.setBlending(j.blending,j.blendEquation,j.blendSrc,j.blendDst),Na.setDepthTest(j.depthTest),Na.setDepthWrite(j.depthWrite),ea(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits)}Na.renderImmediateObject(c,d,e,j,i)}}function C(a){var b=a.object,c=b.material;c.transparent?(a.transparent=c,a.opaque=null):(a.opaque=c,a.transparent=null)}function D(a){var b=a.object,c=a.buffer,d=b.geometry,e=b.material;if(e instanceof THREE.MeshFaceMaterial){var f=d instanceof THREE.BufferGeometry?0:c.materialIndex;e=e.materials[f],e.transparent?(a.transparent=e,a.opaque=null):(a.opaque=e,a.transparent=null)}else e&&(e.transparent?(a.transparent=e,a.opaque=null):(a.opaque=e,a.transparent=null))}function E(a,e){var i,j,k,l;if(void 0===a.__webglInit)if(a.__webglInit=!0,a._modelViewMatrix=new THREE.Matrix4,a._normalMatrix=new THREE.Matrix3,j=a.geometry,void 0===j);else if(void 0===j.__webglInit)if(j.__webglInit=!0,j.addEventListener("dispose",Gb),j instanceof THREE.BufferGeometry)n(j);else if(a instanceof THREE.Mesh){k=a.material,void 0===j.geometryGroups&&j.makeGroups(k instanceof THREE.MeshFaceMaterial,La?4294967296:65535);for(i in j.geometryGroups)l=j.geometryGroups[i],l.__webglVertexBuffer||(d(l),h(l,a),j.verticesNeedUpdate=!0,j.morphTargetsNeedUpdate=!0,j.elementsNeedUpdate=!0,j.uvsNeedUpdate=!0,j.normalsNeedUpdate=!0,j.tangentsNeedUpdate=!0,j.colorsNeedUpdate=!0)}else a instanceof THREE.Line?j.__webglVertexBuffer||(c(j),g(j,a),j.verticesNeedUpdate=!0,j.colorsNeedUpdate=!0,j.lineDistancesNeedUpdate=!0):a instanceof THREE.ParticleSystem&&(j.__webglVertexBuffer||(b(j),f(j,a),j.verticesNeedUpdate=!0,j.colorsNeedUpdate=!0));if(void 0===a.__webglActive){if(a instanceof THREE.Mesh){if(j=a.geometry,j instanceof THREE.BufferGeometry)F(e.__webglObjects,j,a);else if(j instanceof THREE.Geometry)for(i in j.geometryGroups)l=j.geometryGroups[i],F(e.__webglObjects,l,a)}else a instanceof THREE.Line||a instanceof THREE.ParticleSystem?(j=a.geometry,F(e.__webglObjects,j,a)):a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback?G(e.__webglObjectsImmediate,a):a instanceof THREE.Sprite?e.__webglSprites.push(a):a instanceof THREE.LensFlare&&e.__webglFlares.push(a);a.__webglActive=!0}}function F(a,b,c){a.push({id:null,buffer:b,object:c,opaque:null,transparent:null,z:0})}function G(a,b){a.push({id:null,object:b,opaque:null,transparent:null,z:0})}function H(a){var b,c,d,e=a.geometry;if(e instanceof THREE.BufferGeometry)r(e,Fa.DYNAMIC_DRAW);else if(a instanceof THREE.Mesh){for(var f=0,g=e.geometryGroupsList.length;g>f;f++)b=e.geometryGroupsList[f],d=i(a,b),e.buffersNeedUpdate&&h(b,a),c=d.attributes&&I(d),(e.verticesNeedUpdate||e.morphTargetsNeedUpdate||e.elementsNeedUpdate||e.uvsNeedUpdate||e.normalsNeedUpdate||e.colorsNeedUpdate||e.tangentsNeedUpdate||c)&&q(b,a,Fa.DYNAMIC_DRAW,!e.dynamic,d);e.verticesNeedUpdate=!1,e.morphTargetsNeedUpdate=!1,e.elementsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.tangentsNeedUpdate=!1,e.buffersNeedUpdate=!1,d.attributes&&J(d)}else a instanceof THREE.Line?(d=i(a,e),c=d.attributes&&I(d),(e.verticesNeedUpdate||e.colorsNeedUpdate||e.lineDistancesNeedUpdate||c)&&p(e,Fa.DYNAMIC_DRAW),e.verticesNeedUpdate=!1,e.colorsNeedUpdate=!1,e.lineDistancesNeedUpdate=!1,d.attributes&&J(d)):a instanceof THREE.ParticleSystem&&(d=i(a,e),c=d.attributes&&I(d),(e.verticesNeedUpdate||e.colorsNeedUpdate||a.sortParticles||c)&&o(e,Fa.DYNAMIC_DRAW,a),e.verticesNeedUpdate=!1,e.colorsNeedUpdate=!1,d.attributes&&J(d))}function I(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;return!1}function J(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function K(a,b){a instanceof THREE.Mesh||a instanceof THREE.ParticleSystem||a instanceof THREE.Line?L(b.__webglObjects,a):a instanceof THREE.Sprite?M(b.__webglSprites,a):a instanceof THREE.LensFlare?M(b.__webglFlares,a):(a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback)&&L(b.__webglObjectsImmediate,a),delete a.__webglActive}function L(a,b){for(var c=a.length-1;c>=0;c--)a[c].object===b&&a.splice(c,1)}function M(a,b){for(var c=a.length-1;c>=0;c--)a[c]===b&&a.splice(c,1)}function N(a,b){a.uniforms=THREE.UniformsUtils.clone(b.uniforms),a.vertexShader=b.vertexShader,a.fragmentShader=b.fragmentShader}function O(a,b,c,d,e){Ua=0,d.needsUpdate&&(d.program&&Ob(d),Na.initMaterial(d,b,c,e),d.needsUpdate=!1),d.morphTargets&&(e.__webglMorphTargetInfluences||(e.__webglMorphTargetInfluences=new Float32Array(Na.maxMorphTargets)));var f=!1,g=d.program,h=g.uniforms,i=d.uniforms;if(g.id!==Pa&&(Fa.useProgram(g.program),Pa=g.id,f=!0),d.id!==Ra&&(Ra=d.id,f=!0),(f||a!==Ta)&&(Fa.uniformMatrix4fv(h.projectionMatrix,!1,a.projectionMatrix.elements),Ca&&Fa.uniform1f(h.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==Ta&&(Ta=a)),d.skinning)if(zb&&e.skeleton.useVertexTexture){if(null!==h.boneTexture){var j=Z();Fa.uniform1i(h.boneTexture,j),Na.setTexture(e.skeleton.boneTexture,j)}null!==h.boneTextureWidth&&Fa.uniform1i(h.boneTextureWidth,e.skeleton.boneTextureWidth),null!==h.boneTextureHeight&&Fa.uniform1i(h.boneTextureHeight,e.skeleton.boneTextureHeight)}else null!==h.boneGlobalMatrices&&Fa.uniformMatrix4fv(h.boneGlobalMatrices,!1,e.skeleton.boneMatrices);return f&&(c&&d.fog&&T(i,c),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights)&&(sb&&(ca(g,b),sb=!1),W(i,tb)),(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial)&&P(i,d),d instanceof THREE.LineBasicMaterial?Q(i,d):d instanceof THREE.LineDashedMaterial?(Q(i,d),R(i,d)):d instanceof THREE.ParticleSystemMaterial?S(i,d):d instanceof THREE.MeshPhongMaterial?U(i,d):d instanceof THREE.MeshLambertMaterial?V(i,d):d instanceof THREE.MeshDepthMaterial?(i.mNear.value=a.near,i.mFar.value=a.far,i.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(i.opacity.value=d.opacity),e.receiveShadow&&!d._shadowPass&&X(i,b),$(g,d.uniformsList),(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&null!==h.cameraPosition&&(qb.setFromMatrixPosition(a.matrixWorld),Fa.uniform3f(h.cameraPosition,qb.x,qb.y,qb.z)),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&null!==h.viewMatrix&&Fa.uniformMatrix4fv(h.viewMatrix,!1,a.matrixWorldInverse.elements)),Y(h,e),null!==h.modelMatrix&&Fa.uniformMatrix4fv(h.modelMatrix,!1,e.matrixWorld.elements),g}function P(a,b){a.opacity.value=b.opacity,Na.gammaInput?a.diffuse.value.copyGammaToLinear(b.color):a.diffuse.value=b.color,a.map.value=b.map,a.lightMap.value=b.lightMap,a.specularMap.value=b.specularMap,b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale),b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));var c;if(b.map?c=b.map:b.specularMap?c=b.specularMap:b.normalMap?c=b.normalMap:b.bumpMap&&(c=b.bumpMap),void 0!==c){var d=c.offset,e=c.repeat;a.offsetRepeat.value.set(d.x,d.y,e.x,e.y)}a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,Na.gammaInput?a.reflectivity.value=b.reflectivity:a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio,a.combine.value=b.combine,a.useRefract.value=b.envMap&&b.envMap.mapping instanceof THREE.CubeRefractionMapping}function Q(a,b){a.diffuse.value=b.color,a.opacity.value=b.opacity}function R(a,b){a.dashSize.value=b.dashSize,a.totalSize.value=b.dashSize+b.gapSize,a.scale.value=b.scale}function S(a,b){a.psColor.value=b.color,a.opacity.value=b.opacity,a.size.value=b.size,a.scale.value=ta.height/2,a.map.value=b.map}function T(a,b){a.fogColor.value=b.color,b instanceof THREE.Fog?(a.fogNear.value=b.near,a.fogFar.value=b.far):b instanceof THREE.FogExp2&&(a.fogDensity.value=b.density)}function U(a,b){a.shininess.value=b.shininess,Na.gammaInput?(a.ambient.value.copyGammaToLinear(b.ambient),a.emissive.value.copyGammaToLinear(b.emissive),a.specular.value.copyGammaToLinear(b.specular)):(a.ambient.value=b.ambient,a.emissive.value=b.emissive,a.specular.value=b.specular),b.wrapAround&&a.wrapRGB.value.copy(b.wrapRGB)}function V(a,b){Na.gammaInput?(a.ambient.value.copyGammaToLinear(b.ambient),a.emissive.value.copyGammaToLinear(b.emissive)):(a.ambient.value=b.ambient,a.emissive.value=b.emissive),b.wrapAround&&a.wrapRGB.value.copy(b.wrapRGB)}function W(a,b){a.ambientLightColor.value=b.ambient,a.directionalLightColor.value=b.directional.colors,a.directionalLightDirection.value=b.directional.positions,a.pointLightColor.value=b.point.colors,a.pointLightPosition.value=b.point.positions,a.pointLightDistance.value=b.point.distances,a.spotLightColor.value=b.spot.colors,a.spotLightPosition.value=b.spot.positions,a.spotLightDistance.value=b.spot.distances,a.spotLightDirection.value=b.spot.directions,a.spotLightAngleCos.value=b.spot.anglesCos,a.spotLightExponent.value=b.spot.exponents,a.hemisphereLightSkyColor.value=b.hemi.skyColors,a.hemisphereLightGroundColor.value=b.hemi.groundColors,a.hemisphereLightDirection.value=b.hemi.positions}function X(a,b){if(a.shadowMatrix)for(var c=0,d=0,e=b.length;e>d;d++){var f=b[d];f.castShadow&&(f instanceof THREE.SpotLight||f instanceof THREE.DirectionalLight&&!f.shadowCascade)&&(a.shadowMap.value[c]=f.shadowMap,a.shadowMapSize.value[c]=f.shadowMapSize,a.shadowMatrix.value[c]=f.shadowMatrix,a.shadowDarkness.value[c]=f.shadowDarkness,a.shadowBias.value[c]=f.shadowBias,c++)}}function Y(a,b){Fa.uniformMatrix4fv(a.modelViewMatrix,!1,b._modelViewMatrix.elements),a.normalMatrix&&Fa.uniformMatrix3fv(a.normalMatrix,!1,b._normalMatrix.elements)}function Z(){var a=Ua;return a>=ub&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+ub),Ua+=1,a}function $(a,b){var c,d,e,f,g,h,i,j,k,l,m;for(k=0,l=b.length;l>k;k++)if(f=a.uniforms[b[k][1]])if(c=b[k][0],e=c.type,d=c.value,"i"===e)Fa.uniform1i(f,d);else if("f"===e)Fa.uniform1f(f,d);else if("v2"===e)Fa.uniform2f(f,d.x,d.y);else if("v3"===e)Fa.uniform3f(f,d.x,d.y,d.z);else if("v4"===e)Fa.uniform4f(f,d.x,d.y,d.z,d.w);else if("c"===e)Fa.uniform3f(f,d.r,d.g,d.b);else if("iv1"===e)Fa.uniform1iv(f,d);else if("iv"===e)Fa.uniform3iv(f,d);else if("fv1"===e)Fa.uniform1fv(f,d);else if("fv"===e)Fa.uniform3fv(f,d);else if("v2v"===e){for(void 0===c._array&&(c._array=new Float32Array(2*d.length)),i=0,j=d.length;j>i;i++)m=2*i,c._array[m]=d[i].x,c._array[m+1]=d[i].y;Fa.uniform2fv(f,c._array)}else if("v3v"===e){for(void 0===c._array&&(c._array=new Float32Array(3*d.length)),i=0,j=d.length;j>i;i++)m=3*i,c._array[m]=d[i].x,c._array[m+1]=d[i].y,c._array[m+2]=d[i].z;Fa.uniform3fv(f,c._array)}else if("v4v"===e){for(void 0===c._array&&(c._array=new Float32Array(4*d.length)),i=0,j=d.length;j>i;i++)m=4*i,c._array[m]=d[i].x,c._array[m+1]=d[i].y,c._array[m+2]=d[i].z,c._array[m+3]=d[i].w;Fa.uniform4fv(f,c._array)}else if("m3"===e)Fa.uniformMatrix3fv(f,!1,d.elements);else if("m3v"===e){for(void 0===c._array&&(c._array=new Float32Array(9*d.length)),i=0,j=d.length;j>i;i++)d[i].flattenToArrayOffset(c._array,9*i);Fa.uniformMatrix3fv(f,!1,c._array)}else if("m4"===e)Fa.uniformMatrix4fv(f,!1,d.elements);else if("m4v"===e){for(void 0===c._array&&(c._array=new Float32Array(16*d.length)),i=0,j=d.length;j>i;i++)d[i].flattenToArrayOffset(c._array,16*i);Fa.uniformMatrix4fv(f,!1,c._array)}else if("t"===e){if(g=d,h=Z(),Fa.uniform1i(f,h),!g)continue;g.image instanceof Array&&6===g.image.length?ha(g,h):g instanceof THREE.WebGLRenderTargetCube?ia(g,h):Na.setTexture(g,h)}else if("tv"===e){for(void 0===c._array&&(c._array=[]),i=0,j=c.value.length;j>i;i++)c._array[i]=Z();for(Fa.uniform1iv(f,c._array),i=0,j=c.value.length;j>i;i++)g=c.value[i],h=c._array[i],g&&Na.setTexture(g,h)}else console.warn("THREE.WebGLRenderer: Unknown uniform type: "+e)}function _(a,b){a._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,a.matrixWorld),a._normalMatrix.getNormalMatrix(a._modelViewMatrix)}function aa(a,b,c,d){a[b]=c.r*c.r*d,a[b+1]=c.g*c.g*d,a[b+2]=c.b*c.b*d}function ba(a,b,c,d){a[b]=c.r*d,a[b+1]=c.g*d,a[b+2]=c.b*d}function ca(a,b){var c,d,e,f,g,h,i,j,k,l=0,m=0,n=0,o=tb,p=o.directional.colors,q=o.directional.positions,r=o.point.colors,s=o.point.positions,t=o.point.distances,u=o.spot.colors,v=o.spot.positions,w=o.spot.distances,x=o.spot.directions,y=o.spot.anglesCos,z=o.spot.exponents,A=o.hemi.skyColors,B=o.hemi.groundColors,C=o.hemi.positions,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0;for(c=0,d=b.length;d>c;c++)if(e=b[c],!e.onlyShadow)if(f=e.color,i=e.intensity,k=e.distance,e instanceof THREE.AmbientLight){if(!e.visible)continue;Na.gammaInput?(l+=f.r*f.r,m+=f.g*f.g,n+=f.b*f.b):(l+=f.r,m+=f.g,n+=f.b)}else if(e instanceof THREE.DirectionalLight){if(H+=1,!e.visible)continue;if(rb.setFromMatrixPosition(e.matrixWorld),qb.setFromMatrixPosition(e.target.matrixWorld),rb.sub(qb),rb.normalize(),0===rb.x&&0===rb.y&&0===rb.z)continue;L=3*D,q[L]=rb.x,q[L+1]=rb.y,q[L+2]=rb.z,Na.gammaInput?aa(p,L,f,i*i):ba(p,L,f,i),D+=1}else if(e instanceof THREE.PointLight){if(I+=1,!e.visible)continue;M=3*E,Na.gammaInput?aa(r,M,f,i*i):ba(r,M,f,i),qb.setFromMatrixPosition(e.matrixWorld),s[M]=qb.x,s[M+1]=qb.y,s[M+2]=qb.z,t[E]=k,E+=1}else if(e instanceof THREE.SpotLight){if(J+=1,!e.visible)continue;N=3*F,Na.gammaInput?aa(u,N,f,i*i):ba(u,N,f,i),qb.setFromMatrixPosition(e.matrixWorld),v[N]=qb.x,v[N+1]=qb.y,v[N+2]=qb.z,w[F]=k,rb.copy(qb),qb.setFromMatrixPosition(e.target.matrixWorld),rb.sub(qb),rb.normalize(),x[N]=rb.x,x[N+1]=rb.y,x[N+2]=rb.z,y[F]=Math.cos(e.angle),z[F]=e.exponent,F+=1}else if(e instanceof THREE.HemisphereLight){if(K+=1,!e.visible)continue;if(rb.setFromMatrixPosition(e.matrixWorld),rb.normalize(),0===rb.x&&0===rb.y&&0===rb.z)continue;O=3*G,C[O]=rb.x,C[O+1]=rb.y,C[O+2]=rb.z,g=e.color,h=e.groundColor,Na.gammaInput?(j=i*i,aa(A,O,g,j),aa(B,O,h,j)):(ba(A,O,g,i),ba(B,O,h,i)),G+=1}for(c=3*D,d=Math.max(p.length,3*H);d>c;c++)p[c]=0;for(c=3*E,d=Math.max(r.length,3*I);d>c;c++)r[c]=0;for(c=3*F,d=Math.max(u.length,3*J);d>c;c++)u[c]=0;for(c=3*G,d=Math.max(A.length,3*K);d>c;c++)A[c]=0;for(c=3*G,d=Math.max(B.length,3*K);d>c;c++)B[c]=0;o.directional.length=D,o.point.length=E,o.spot.length=F,o.hemi.length=G,o.ambient[0]=l,o.ambient[1]=m,o.ambient[2]=n}function da(a){a!==eb&&(Fa.lineWidth(a),eb=a)}function ea(a,b,c){bb!==a&&(a?Fa.enable(Fa.POLYGON_OFFSET_FILL):Fa.disable(Fa.POLYGON_OFFSET_FILL),bb=a),!a||cb===b&&db===c||(Fa.polygonOffset(b,c),cb=b,db=c)}function fa(a,b,c){c?(Fa.texParameteri(a,Fa.TEXTURE_WRAP_S,na(b.wrapS)),Fa.texParameteri(a,Fa.TEXTURE_WRAP_T,na(b.wrapT)),Fa.texParameteri(a,Fa.TEXTURE_MAG_FILTER,na(b.magFilter)),Fa.texParameteri(a,Fa.TEXTURE_MIN_FILTER,na(b.minFilter))):(Fa.texParameteri(a,Fa.TEXTURE_WRAP_S,Fa.CLAMP_TO_EDGE),Fa.texParameteri(a,Fa.TEXTURE_WRAP_T,Fa.CLAMP_TO_EDGE),Fa.texParameteri(a,Fa.TEXTURE_MAG_FILTER,ma(b.magFilter)),Fa.texParameteri(a,Fa.TEXTURE_MIN_FILTER,ma(b.minFilter))),Ja&&b.type!==THREE.FloatType&&(b.anisotropy>1||b.__oldAnisotropy)&&(Fa.texParameterf(a,Ja.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,xb)),b.__oldAnisotropy=b.anisotropy)}function ga(a,b){if(a.width<=b&&a.height<=b)return a;var c=Math.max(a.width,a.height),d=Math.floor(a.width*b/c),e=Math.floor(a.height*b/c),f=document.createElement("canvas");f.width=d,f.height=e;var g=f.getContext("2d");return g.drawImage(a,0,0,a.width,a.height,0,0,d,e),f}function ha(a,b){if(6===a.image.length)if(a.needsUpdate){a.image.__webglTextureCube||(a.addEventListener("dispose",Hb),a.image.__webglTextureCube=Fa.createTexture(),Na.info.memory.textures++),Fa.activeTexture(Fa.TEXTURE0+b),Fa.bindTexture(Fa.TEXTURE_CUBE_MAP,a.image.__webglTextureCube),Fa.pixelStorei(Fa.UNPACK_FLIP_Y_WEBGL,a.flipY);for(var c=a instanceof THREE.CompressedTexture,d=[],e=0;6>e;e++)Na.autoScaleCubemaps&&!c?d[e]=ga(a.image[e],wb):d[e]=a.image[e];var f=d[0],g=THREE.Math.isPowerOfTwo(f.width)&&THREE.Math.isPowerOfTwo(f.height),h=na(a.format),i=na(a.type);fa(Fa.TEXTURE_CUBE_MAP,a,g);for(var e=0;6>e;e++)if(c)for(var j,k=d[e].mipmaps,l=0,m=k.length;m>l;l++)j=k[l],a.format!==THREE.RGBAFormat?Fa.compressedTexImage2D(Fa.TEXTURE_CUBE_MAP_POSITIVE_X+e,l,h,j.width,j.height,0,j.data):Fa.texImage2D(Fa.TEXTURE_CUBE_MAP_POSITIVE_X+e,l,h,j.width,j.height,0,h,i,j.data);else Fa.texImage2D(Fa.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,h,h,i,d[e]);a.generateMipmaps&&g&&Fa.generateMipmap(Fa.TEXTURE_CUBE_MAP),a.needsUpdate=!1,a.onUpdate&&a.onUpdate()}else Fa.activeTexture(Fa.TEXTURE0+b),Fa.bindTexture(Fa.TEXTURE_CUBE_MAP,a.image.__webglTextureCube)}function ia(a,b){Fa.activeTexture(Fa.TEXTURE0+b),Fa.bindTexture(Fa.TEXTURE_CUBE_MAP,a.__webglTexture)}function ja(a,b,c){Fa.bindFramebuffer(Fa.FRAMEBUFFER,a),Fa.framebufferTexture2D(Fa.FRAMEBUFFER,Fa.COLOR_ATTACHMENT0,c,b.__webglTexture,0)}function ka(a,b){Fa.bindRenderbuffer(Fa.RENDERBUFFER,a),b.depthBuffer&&!b.stencilBuffer?(Fa.renderbufferStorage(Fa.RENDERBUFFER,Fa.DEPTH_COMPONENT16,b.width,b.height),Fa.framebufferRenderbuffer(Fa.FRAMEBUFFER,Fa.DEPTH_ATTACHMENT,Fa.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(Fa.renderbufferStorage(Fa.RENDERBUFFER,Fa.DEPTH_STENCIL,b.width,b.height),Fa.framebufferRenderbuffer(Fa.FRAMEBUFFER,Fa.DEPTH_STENCIL_ATTACHMENT,Fa.RENDERBUFFER,a)):Fa.renderbufferStorage(Fa.RENDERBUFFER,Fa.RGBA4,b.width,b.height)}function la(a){a instanceof THREE.WebGLRenderTargetCube?(Fa.bindTexture(Fa.TEXTURE_CUBE_MAP,a.__webglTexture),Fa.generateMipmap(Fa.TEXTURE_CUBE_MAP),Fa.bindTexture(Fa.TEXTURE_CUBE_MAP,null)):(Fa.bindTexture(Fa.TEXTURE_2D,a.__webglTexture),Fa.generateMipmap(Fa.TEXTURE_2D),Fa.bindTexture(Fa.TEXTURE_2D,null))}function ma(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?Fa.NEAREST:Fa.LINEAR}function na(a){if(a===THREE.RepeatWrapping)return Fa.REPEAT;if(a===THREE.ClampToEdgeWrapping)return Fa.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return Fa.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return Fa.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return Fa.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return Fa.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return Fa.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return Fa.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return Fa.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return Fa.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return Fa.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return Fa.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return Fa.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return Fa.BYTE;if(a===THREE.ShortType)return Fa.SHORT;if(a===THREE.UnsignedShortType)return Fa.UNSIGNED_SHORT;if(a===THREE.IntType)return Fa.INT;if(a===THREE.UnsignedIntType)return Fa.UNSIGNED_INT;if(a===THREE.FloatType)return Fa.FLOAT;if(a===THREE.AlphaFormat)return Fa.ALPHA;if(a===THREE.RGBFormat)return Fa.RGB;if(a===THREE.RGBAFormat)return Fa.RGBA;if(a===THREE.LuminanceFormat)return Fa.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return Fa.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return Fa.FUNC_ADD;if(a===THREE.SubtractEquation)return Fa.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return Fa.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return Fa.ZERO;if(a===THREE.OneFactor)return Fa.ONE;if(a===THREE.SrcColorFactor)return Fa.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return Fa.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return Fa.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return Fa.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return Fa.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return Fa.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return Fa.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return Fa.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return Fa.SRC_ALPHA_SATURATE;if(void 0!==Ka){if(a===THREE.RGB_S3TC_DXT1_Format)return Ka.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return Ka.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return Ka.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return Ka.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}function oa(a){if(zb&&a&&a.skeleton&&a.skeleton.useVertexTexture)return 1024;var b=Fa.getParameter(Fa.MAX_VERTEX_UNIFORM_VECTORS),c=Math.floor((b-20)/4),d=c;return void 0!==a&&a instanceof THREE.SkinnedMesh&&(d=Math.min(a.skeleton.bones.length,d),d<a.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+a.skeleton.bones.length+", this GPU supports just "+d+" (try OpenGL instead of ANGLE)")),d}function pa(a){for(var b=0,c=0,d=0,e=0,f=0,g=a.length;g>f;f++){var h=a[f];h.onlyShadow||h.visible===!1||(h instanceof THREE.DirectionalLight&&b++,h instanceof THREE.PointLight&&c++,h instanceof THREE.SpotLight&&d++,h instanceof THREE.HemisphereLight&&e++)}return{directional:b,point:c,spot:d,hemi:e}}function qa(a){for(var b=0,c=0,d=a.length;d>c;c++){var e=a[c];e.castShadow&&(e instanceof THREE.SpotLight&&b++,e instanceof THREE.DirectionalLight&&!e.shadowCascade&&b++)}return b}function ra(){try{var a={alpha:wa,depth:xa,stencil:ya,antialias:za,premultipliedAlpha:Aa,preserveDrawingBuffer:Ba};if(Fa=ua||ta.getContext("webgl",a)||ta.getContext("experimental-webgl",a),null===Fa)throw"Error creating WebGL context."}catch(b){console.error(b)}Ga=Fa.getExtension("OES_texture_float"),Ha=Fa.getExtension("OES_texture_float_linear"),Ia=Fa.getExtension("OES_standard_derivatives"),Ja=Fa.getExtension("EXT_texture_filter_anisotropic")||Fa.getExtension("MOZ_EXT_texture_filter_anisotropic")||Fa.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),Ka=Fa.getExtension("WEBGL_compressed_texture_s3tc")||Fa.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||Fa.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),La=Fa.getExtension("OES_element_index_uint"),null===Ga&&console.log("THREE.WebGLRenderer: Float textures not supported."),null===Ia&&console.log("THREE.WebGLRenderer: Standard derivatives not supported."),null===Ja&&console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported."),null===Ka&&console.log("THREE.WebGLRenderer: S3TC compressed textures not supported."),null===La&&console.log("THREE.WebGLRenderer: elementindex as unsigned integer not supported."),void 0===Fa.getShaderPrecisionFormat&&(Fa.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),Ca&&(Ma=Fa.getExtension("EXT_frag_depth"))}function sa(){Fa.clearColor(0,0,0,1),Fa.clearDepth(1),Fa.clearStencil(0),Fa.enable(Fa.DEPTH_TEST),Fa.depthFunc(Fa.LEQUAL),Fa.frontFace(Fa.CCW),Fa.cullFace(Fa.BACK),Fa.enable(Fa.CULL_FACE),Fa.enable(Fa.BLEND),Fa.blendEquation(Fa.FUNC_ADD),Fa.blendFunc(Fa.SRC_ALPHA,Fa.ONE_MINUS_SRC_ALPHA),Fa.viewport(fb,gb,hb,ib),Fa.clearColor(Da.r,Da.g,Da.b,Ea)}console.log("THREE.WebGLRenderer",THREE.REVISION),a=a||{};var ta=void 0!==a.canvas?a.canvas:document.createElement("canvas"),ua=void 0!==a.context?a.context:null,va=void 0!==a.precision?a.precision:"highp",wa=void 0!==a.alpha?a.alpha:!1,xa=void 0!==a.depth?a.depth:!0,ya=void 0!==a.stencil?a.stencil:!0,za=void 0!==a.antialias?a.antialias:!1,Aa=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,Ba=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,Ca=void 0!==a.logarithmicDepthBuffer?a.logarithmicDepthBuffer:!1,Da=new THREE.Color(0),Ea=0;this.domElement=ta,this.context=null,this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapAutoUpdate=!0,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na=this,Oa=[],Pa=null,Qa=null,Ra=-1,Sa=null,Ta=null,Ua=0,Va=-1,Wa=-1,Xa=-1,Ya=-1,Za=-1,$a=-1,_a=-1,ab=-1,bb=null,cb=null,db=null,eb=null,fb=0,gb=0,hb=ta.width,ib=ta.height,jb=0,kb=0,lb=new Uint8Array(16),mb=new Uint8Array(16),nb=new THREE.Frustum,ob=new THREE.Matrix4,pb=new THREE.Matrix4,qb=new THREE.Vector3,rb=new THREE.Vector3,sb=!0,tb={ambient:[0,0,0],directional:{length:0,colors:new Array,positions:new Array},point:{length:0,colors:new Array,positions:new Array,distances:new Array},spot:{length:0,colors:new Array,positions:new Array,distances:new Array,directions:new Array,anglesCos:new Array,exponents:new Array},hemi:{length:0,skyColors:new Array,groundColors:new Array,positions:new Array}};ra(),sa(),this.context=Fa;var ub=Fa.getParameter(Fa.MAX_TEXTURE_IMAGE_UNITS),vb=Fa.getParameter(Fa.MAX_VERTEX_TEXTURE_IMAGE_UNITS),wb=(Fa.getParameter(Fa.MAX_TEXTURE_SIZE),Fa.getParameter(Fa.MAX_CUBE_MAP_TEXTURE_SIZE)),xb=Ja?Fa.getParameter(Ja.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,yb=vb>0,zb=yb&&Ga,Ab=(Ka?Fa.getParameter(Fa.COMPRESSED_TEXTURE_FORMATS):[],Fa.getShaderPrecisionFormat(Fa.VERTEX_SHADER,Fa.HIGH_FLOAT)),Bb=Fa.getShaderPrecisionFormat(Fa.VERTEX_SHADER,Fa.MEDIUM_FLOAT),Cb=(Fa.getShaderPrecisionFormat(Fa.VERTEX_SHADER,Fa.LOW_FLOAT),Fa.getShaderPrecisionFormat(Fa.FRAGMENT_SHADER,Fa.HIGH_FLOAT)),Db=Fa.getShaderPrecisionFormat(Fa.FRAGMENT_SHADER,Fa.MEDIUM_FLOAT),Eb=(Fa.getShaderPrecisionFormat(Fa.FRAGMENT_SHADER,Fa.LOW_FLOAT),Ab.precision>0&&Cb.precision>0),Fb=Bb.precision>0&&Db.precision>0;"highp"!==va||Eb||(Fb?(va="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(va="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp"))),"mediump"!==va||Fb||(va="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp")),this.getContext=function(){return Fa},this.supportsVertexTextures=function(){return yb},this.supportsFloatTextures=function(){return Ga},this.supportsStandardDerivatives=function(){return Ia},this.supportsCompressedTextureS3TC=function(){return Ka},this.getMaxAnisotropy=function(){return xb},this.getPrecision=function(){return va},this.setSize=function(a,b,c){ta.width=a*this.devicePixelRatio,ta.height=b*this.devicePixelRatio,c!==!1&&(ta.style.width=a+"px",ta.style.height=b+"px"),this.setViewport(0,0,a,b)},this.setViewport=function(a,b,c,d){fb=a*this.devicePixelRatio,gb=b*this.devicePixelRatio,hb=c*this.devicePixelRatio,ib=d*this.devicePixelRatio,Fa.viewport(fb,gb,hb,ib)},this.setScissor=function(a,b,c,d){
Fa.scissor(a*this.devicePixelRatio,b*this.devicePixelRatio,c*this.devicePixelRatio,d*this.devicePixelRatio)},this.enableScissorTest=function(a){a?Fa.enable(Fa.SCISSOR_TEST):Fa.disable(Fa.SCISSOR_TEST)},this.setClearColor=function(a,b){Da.set(a),Ea=void 0!==b?b:1,Fa.clearColor(Da.r,Da.g,Da.b,Ea)},this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(a,b)},this.getClearColor=function(){return Da},this.getClearAlpha=function(){return Ea},this.clear=function(a,b,c){var d=0;(void 0===a||a)&&(d|=Fa.COLOR_BUFFER_BIT),(void 0===b||b)&&(d|=Fa.DEPTH_BUFFER_BIT),(void 0===c||c)&&(d|=Fa.STENCIL_BUFFER_BIT),Fa.clear(d)},this.clearColor=function(){Fa.clear(Fa.COLOR_BUFFER_BIT)},this.clearDepth=function(){Fa.clear(Fa.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Fa.clear(Fa.STENCIL_BUFFER_BIT)},this.clearTarget=function(a,b,c,d){this.setRenderTarget(a),this.clear(b,c,d)},this.addPostPlugin=function(a){a.init(this),this.renderPluginsPost.push(a)},this.addPrePlugin=function(a){a.init(this),this.renderPluginsPre.push(a)},this.updateShadowMap=function(a,b){Pa=null,Xa=-1,_a=-1,ab=-1,Sa=-1,Ra=-1,sb=!0,Va=-1,Wa=-1,this.shadowMapPlugin.update(a,b)};var Gb=function(a){var b=a.target;b.removeEventListener("dispose",Gb),Lb(b)},Hb=function(a){var b=a.target;b.removeEventListener("dispose",Hb),Mb(b),Na.info.memory.textures--},Ib=function(a){var b=a.target;b.removeEventListener("dispose",Ib),Nb(b),Na.info.memory.textures--},Jb=function(a){var b=a.target;b.removeEventListener("dispose",Jb),Ob(b)},Kb=function(a){if(void 0!==a.__webglVertexBuffer&&Fa.deleteBuffer(a.__webglVertexBuffer),void 0!==a.__webglNormalBuffer&&Fa.deleteBuffer(a.__webglNormalBuffer),void 0!==a.__webglTangentBuffer&&Fa.deleteBuffer(a.__webglTangentBuffer),void 0!==a.__webglColorBuffer&&Fa.deleteBuffer(a.__webglColorBuffer),void 0!==a.__webglUVBuffer&&Fa.deleteBuffer(a.__webglUVBuffer),void 0!==a.__webglUV2Buffer&&Fa.deleteBuffer(a.__webglUV2Buffer),void 0!==a.__webglSkinIndicesBuffer&&Fa.deleteBuffer(a.__webglSkinIndicesBuffer),void 0!==a.__webglSkinWeightsBuffer&&Fa.deleteBuffer(a.__webglSkinWeightsBuffer),void 0!==a.__webglFaceBuffer&&Fa.deleteBuffer(a.__webglFaceBuffer),void 0!==a.__webglLineBuffer&&Fa.deleteBuffer(a.__webglLineBuffer),void 0!==a.__webglLineDistanceBuffer&&Fa.deleteBuffer(a.__webglLineDistanceBuffer),void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)Fa.deleteBuffer(a.__webglCustomAttributesList[b].buffer);Na.info.memory.geometries--},Lb=function(a){if(a.__webglInit=void 0,a instanceof THREE.BufferGeometry){var b=a.attributes;for(var c in b)void 0!==b[c].buffer&&Fa.deleteBuffer(b[c].buffer);Na.info.memory.geometries--}else if(void 0!==a.geometryGroups)for(var d in a.geometryGroups){var e=a.geometryGroups[d];if(void 0!==e.numMorphTargets)for(var f=0,g=e.numMorphTargets;g>f;f++)Fa.deleteBuffer(e.__webglMorphTargetsBuffers[f]);if(void 0!==e.numMorphNormals)for(var f=0,g=e.numMorphNormals;g>f;f++)Fa.deleteBuffer(e.__webglMorphNormalsBuffers[f]);Kb(e)}else Kb(a)},Mb=function(a){if(a.image&&a.image.__webglTextureCube)Fa.deleteTexture(a.image.__webglTextureCube);else{if(!a.__webglInit)return;a.__webglInit=!1,Fa.deleteTexture(a.__webglTexture)}},Nb=function(a){if(a&&a.__webglTexture)if(Fa.deleteTexture(a.__webglTexture),a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)Fa.deleteFramebuffer(a.__webglFramebuffer[b]),Fa.deleteRenderbuffer(a.__webglRenderbuffer[b]);else Fa.deleteFramebuffer(a.__webglFramebuffer),Fa.deleteRenderbuffer(a.__webglRenderbuffer)},Ob=function(a){var b=a.program;if(void 0!==b){a.program=void 0;var c,d,e,f=!1;for(c=0,d=Oa.length;d>c;c++)if(e=Oa[c],e.program===b){e.usedTimes--,0===e.usedTimes&&(f=!0);break}if(f===!0){var g=[];for(c=0,d=Oa.length;d>c;c++)e=Oa[c],e.program!==b&&g.push(e);Oa=g,Fa.deleteProgram(b),Na.info.memory.programs--}}};this.renderBufferImmediate=function(a,b,c){if(t(),a.hasPositions&&!a.__webglVertexBuffer&&(a.__webglVertexBuffer=Fa.createBuffer()),a.hasNormals&&!a.__webglNormalBuffer&&(a.__webglNormalBuffer=Fa.createBuffer()),a.hasUvs&&!a.__webglUvBuffer&&(a.__webglUvBuffer=Fa.createBuffer()),a.hasColors&&!a.__webglColorBuffer&&(a.__webglColorBuffer=Fa.createBuffer()),a.hasPositions&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglVertexBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,a.positionArray,Fa.DYNAMIC_DRAW),u(b.attributes.position),Fa.vertexAttribPointer(b.attributes.position,3,Fa.FLOAT,!1,0,0)),a.hasNormals){if(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglNormalBuffer),c.shading===THREE.FlatShading){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=3*a.count;for(q=0;r>q;q+=9)p=a.normalArray,g=p[q],j=p[q+1],m=p[q+2],h=p[q+3],k=p[q+4],n=p[q+5],i=p[q+6],l=p[q+7],o=p[q+8],d=(g+h+i)/3,e=(j+k+l)/3,f=(m+n+o)/3,p[q]=d,p[q+1]=e,p[q+2]=f,p[q+3]=d,p[q+4]=e,p[q+5]=f,p[q+6]=d,p[q+7]=e,p[q+8]=f}Fa.bufferData(Fa.ARRAY_BUFFER,a.normalArray,Fa.DYNAMIC_DRAW),u(b.attributes.normal),Fa.vertexAttribPointer(b.attributes.normal,3,Fa.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglUvBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,a.uvArray,Fa.DYNAMIC_DRAW),u(b.attributes.uv),Fa.vertexAttribPointer(b.attributes.uv,2,Fa.FLOAT,!1,0,0)),a.hasColors&&c.vertexColors!==THREE.NoColors&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,a.__webglColorBuffer),Fa.bufferData(Fa.ARRAY_BUFFER,a.colorArray,Fa.DYNAMIC_DRAW),u(b.attributes.color),Fa.vertexAttribPointer(b.attributes.color,3,Fa.FLOAT,!1,0,0)),v(),Fa.drawArrays(Fa.TRIANGLES,0,a.count),a.count=0},this.renderBufferDirect=function(a,b,c,d,e,f){if(d.visible!==!1){var g=O(a,b,c,d,f),h=g.attributes,i=e.attributes,j=!1,k=d.wireframe?1:0,l=16777215*e.id+2*g.id+k;if(l!==Sa&&(Sa=l,j=!0),j&&t(),f instanceof THREE.Mesh){var m=i.index;if(m){var n,o;m.array instanceof Uint32Array?(n=Fa.UNSIGNED_INT,o=4):(n=Fa.UNSIGNED_SHORT,o=2);var p=e.offsets;if(0===p.length)j&&(s(d,h,i,0),Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,m.buffer)),Fa.drawElements(Fa.TRIANGLES,m.array.length,n,0),Na.info.render.calls++,Na.info.render.vertices+=m.array.length,Na.info.render.faces+=m.array.length/3;else{j=!0;for(var q=0,r=p.length;r>q;q++){var u=p[q].index;j&&(s(d,h,i,u),Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,m.buffer)),Fa.drawElements(Fa.TRIANGLES,p[q].count,n,p[q].start*o),Na.info.render.calls++,Na.info.render.vertices+=p[q].count,Na.info.render.faces+=p[q].count/3}}}else{j&&s(d,h,i,0);var v=e.attributes.position;Fa.drawArrays(Fa.TRIANGLES,0,v.array.length/3),Na.info.render.calls++,Na.info.render.vertices+=v.array.length/3,Na.info.render.faces+=v.array.length/9}}else if(f instanceof THREE.ParticleSystem){j&&s(d,h,i,0);var v=i.position;Fa.drawArrays(Fa.POINTS,0,v.array.length/3),Na.info.render.calls++,Na.info.render.points+=v.array.length/3}else if(f instanceof THREE.Line){var w=f.type===THREE.LineStrip?Fa.LINE_STRIP:Fa.LINES;da(d.linewidth);var m=i.index;if(m){var n,o;m.array instanceof Uint32Array?(n=Fa.UNSIGNED_INT,o=4):(n=Fa.UNSIGNED_SHORT,o=2);var p=e.offsets;if(0===p.length)j&&(s(d,h,i,0),Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,m.buffer)),Fa.drawElements(Fa.LINES,m.array.length,n,0),Na.info.render.calls++,Na.info.render.vertices+=m.array.length;else{p.length>1&&(j=!0);for(var q=0,r=p.length;r>q;q++){var u=p[q].index;j&&(s(d,h,i,u),Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,m.buffer)),Fa.drawElements(Fa.LINES,p[q].count,n,p[q].start*o),Na.info.render.calls++,Na.info.render.vertices+=p[q].count}}}else{j&&s(d,h,i,0);var v=i.position;Fa.drawArrays(w,0,v.array.length/3),Na.info.render.calls++,Na.info.render.points+=v.array.length/3}}}},this.renderBuffer=function(a,b,c,d,e,f){if(d.visible!==!1){var g,h,i,j=O(a,b,c,d,f),k=j.attributes,l=!1,m=d.wireframe?1:0,n=16777215*e.id+2*j.id+m;if(n!==Sa&&(Sa=n,l=!0),l&&t(),!d.morphTargets&&k.position>=0?l&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglVertexBuffer),u(k.position),Fa.vertexAttribPointer(k.position,3,Fa.FLOAT,!1,0,0)):f.morphTargetBase&&w(d,e,f),l){if(e.__webglCustomAttributesList)for(h=0,i=e.__webglCustomAttributesList.length;i>h;h++)g=e.__webglCustomAttributesList[h],k[g.buffer.belongsToAttribute]>=0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,g.buffer),u(k[g.buffer.belongsToAttribute]),Fa.vertexAttribPointer(k[g.buffer.belongsToAttribute],g.size,Fa.FLOAT,!1,0,0));k.color>=0&&(f.geometry.colors.length>0||f.geometry.faces.length>0?(Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglColorBuffer),u(k.color),Fa.vertexAttribPointer(k.color,3,Fa.FLOAT,!1,0,0)):d.defaultAttributeValues&&Fa.vertexAttrib3fv(k.color,d.defaultAttributeValues.color)),k.normal>=0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglNormalBuffer),u(k.normal),Fa.vertexAttribPointer(k.normal,3,Fa.FLOAT,!1,0,0)),k.tangent>=0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglTangentBuffer),u(k.tangent),Fa.vertexAttribPointer(k.tangent,4,Fa.FLOAT,!1,0,0)),k.uv>=0&&(f.geometry.faceVertexUvs[0]?(Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglUVBuffer),u(k.uv),Fa.vertexAttribPointer(k.uv,2,Fa.FLOAT,!1,0,0)):d.defaultAttributeValues&&Fa.vertexAttrib2fv(k.uv,d.defaultAttributeValues.uv)),k.uv2>=0&&(f.geometry.faceVertexUvs[1]?(Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglUV2Buffer),u(k.uv2),Fa.vertexAttribPointer(k.uv2,2,Fa.FLOAT,!1,0,0)):d.defaultAttributeValues&&Fa.vertexAttrib2fv(k.uv2,d.defaultAttributeValues.uv2)),d.skinning&&k.skinIndex>=0&&k.skinWeight>=0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),u(k.skinIndex),Fa.vertexAttribPointer(k.skinIndex,4,Fa.FLOAT,!1,0,0),Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),u(k.skinWeight),Fa.vertexAttribPointer(k.skinWeight,4,Fa.FLOAT,!1,0,0)),k.lineDistance>=0&&(Fa.bindBuffer(Fa.ARRAY_BUFFER,e.__webglLineDistanceBuffer),u(k.lineDistance),Fa.vertexAttribPointer(k.lineDistance,1,Fa.FLOAT,!1,0,0))}if(v(),f instanceof THREE.Mesh){var o=e.__typeArray===Uint32Array?Fa.UNSIGNED_INT:Fa.UNSIGNED_SHORT;d.wireframe?(da(d.wireframeLinewidth),l&&Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Fa.drawElements(Fa.LINES,e.__webglLineCount,o,0)):(l&&Fa.bindBuffer(Fa.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Fa.drawElements(Fa.TRIANGLES,e.__webglFaceCount,o,0)),Na.info.render.calls++,Na.info.render.vertices+=e.__webglFaceCount,Na.info.render.faces+=e.__webglFaceCount/3}else if(f instanceof THREE.Line){var p=f.type===THREE.LineStrip?Fa.LINE_STRIP:Fa.LINES;da(d.linewidth),Fa.drawArrays(p,0,e.__webglLineCount),Na.info.render.calls++}else f instanceof THREE.ParticleSystem&&(Fa.drawArrays(Fa.POINTS,0,e.__webglParticleCount),Na.info.render.calls++,Na.info.render.points+=e.__webglParticleCount)}},this.render=function(a,b,c,d){if(b instanceof THREE.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var e,f,g,h,i,j=a.__lights,k=a.fog;for(Ra=-1,sb=!0,a.autoUpdate===!0&&a.updateMatrixWorld(),void 0===b.parent&&b.updateMatrixWorld(),b.matrixWorldInverse.getInverse(b.matrixWorld),ob.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),nb.setFromMatrix(ob),this.autoUpdateObjects&&this.initWebGLObjects(a),z(this.renderPluginsPre,a,b),Na.info.render.calls=0,Na.info.render.vertices=0,Na.info.render.faces=0,Na.info.render.points=0,this.setRenderTarget(c),(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),i=a.__webglObjects,e=0,f=i.length;f>e;e++)g=i[e],h=g.object,g.id=e,g.render=!1,h.visible&&((h instanceof THREE.Mesh||h instanceof THREE.ParticleSystem)&&h.frustumCulled&&!nb.intersectsObject(h)||(_(h,b),D(g),g.render=!0,this.sortObjects===!0&&(null!==h.renderDepth?g.z=h.renderDepth:(qb.setFromMatrixPosition(h.matrixWorld),qb.applyProjection(ob),g.z=qb.z))));for(this.sortObjects&&i.sort(x),i=a.__webglObjectsImmediate,e=0,f=i.length;f>e;e++)g=i[e],h=g.object,h.visible&&(_(h,b),C(g));if(a.overrideMaterial){var l=a.overrideMaterial;this.setBlending(l.blending,l.blendEquation,l.blendSrc,l.blendDst),this.setDepthTest(l.depthTest),this.setDepthWrite(l.depthWrite),ea(l.polygonOffset,l.polygonOffsetFactor,l.polygonOffsetUnits),A(a.__webglObjects,!1,"",b,j,k,!0,l),B(a.__webglObjectsImmediate,"",b,j,k,!1,l)}else{var l=null;this.setBlending(THREE.NoBlending),A(a.__webglObjects,!0,"opaque",b,j,k,!1,l),B(a.__webglObjectsImmediate,"opaque",b,j,k,!1,l),A(a.__webglObjects,!1,"transparent",b,j,k,!0,l),B(a.__webglObjectsImmediate,"transparent",b,j,k,!0,l)}z(this.renderPluginsPost,a,b),c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&la(c),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(a,b,c,d,e){var f=O(a,b,c,d,e);Sa=-1,Na.setMaterialFaces(d),e.immediateRenderCallback?e.immediateRenderCallback(f,Fa,nb):e.render(function(a){Na.renderBufferImmediate(a,f,d)})},this.initWebGLObjects=function(a){for(a.__webglObjects||(a.__webglObjects=[],a.__webglObjectsImmediate=[],a.__webglSprites=[],a.__webglFlares=[]);a.__objectsAdded.length;)E(a.__objectsAdded[0],a),a.__objectsAdded.splice(0,1);for(;a.__objectsRemoved.length;)K(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1);for(var b=0,c=a.__webglObjects.length;c>b;b++){var d=a.__webglObjects[b].object;void 0===d.__webglInit&&(void 0!==d.__webglActive&&K(d,a),E(d,a)),H(d)}},this.initMaterial=function(a,b,c,d){a.addEventListener("dispose",Jb);var e,f,g,h,i,j,k;a instanceof THREE.MeshDepthMaterial?k="depth":a instanceof THREE.MeshNormalMaterial?k="normal":a instanceof THREE.MeshBasicMaterial?k="basic":a instanceof THREE.MeshLambertMaterial?k="lambert":a instanceof THREE.MeshPhongMaterial?k="phong":a instanceof THREE.LineBasicMaterial?k="basic":a instanceof THREE.LineDashedMaterial?k="dashed":a instanceof THREE.ParticleSystemMaterial&&(k="particle_basic"),k&&N(a,THREE.ShaderLib[k]),h=pa(b),j=qa(b),i=oa(d),g={precision:va,supportsVertexTextures:yb,map:!!a.map,envMap:!!a.envMap,lightMap:!!a.lightMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,specularMap:!!a.specularMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:Ca,skinning:a.skinning,maxBones:i,useVertexTexture:zb&&d&&d.skeleton&&d.skeleton.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:h.directional,maxPointLights:h.point,maxSpotLights:h.spot,maxHemiLights:h.hemi,maxShadows:j,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow&&j>0,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,wrapAround:a.wrapAround,doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide};var l=[];k?l.push(k):(l.push(a.fragmentShader),l.push(a.vertexShader));for(var m in a.defines)l.push(m),l.push(a.defines[m]);for(var n in g)l.push(n),l.push(g[n]);for(var o,p=l.join(),n=0,q=Oa.length;q>n;n++){var r=Oa[n];if(r.code===p){o=r,o.usedTimes++;break}}void 0===o&&(o=new THREE.WebGLProgram(this,p,a,g),Oa.push(o),Na.info.memory.programs=Oa.length),a.program=o;var s=a.program.attributes;if(a.morphTargets){a.numSupportedMorphTargets=0;var t,u="morphTarget";for(f=0;f<this.maxMorphTargets;f++)t=u+f,s[t]>=0&&a.numSupportedMorphTargets++}if(a.morphNormals){a.numSupportedMorphNormals=0;var t,u="morphNormal";for(f=0;f<this.maxMorphNormals;f++)t=u+f,s[t]>=0&&a.numSupportedMorphNormals++}a.uniformsList=[];for(e in a.uniforms)a.uniformsList.push([a.uniforms[e],e])},this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?Fa.disable(Fa.CULL_FACE):(b===THREE.FrontFaceDirectionCW?Fa.frontFace(Fa.CW):Fa.frontFace(Fa.CCW),a===THREE.CullFaceBack?Fa.cullFace(Fa.BACK):a===THREE.CullFaceFront?Fa.cullFace(Fa.FRONT):Fa.cullFace(Fa.FRONT_AND_BACK),Fa.enable(Fa.CULL_FACE))},this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide,c=a.side===THREE.BackSide;Va!==b&&(b?Fa.disable(Fa.CULL_FACE):Fa.enable(Fa.CULL_FACE),Va=b),Wa!==c&&(c?Fa.frontFace(Fa.CW):Fa.frontFace(Fa.CCW),Wa=c)},this.setDepthTest=function(a){_a!==a&&(a?Fa.enable(Fa.DEPTH_TEST):Fa.disable(Fa.DEPTH_TEST),_a=a)},this.setDepthWrite=function(a){ab!==a&&(Fa.depthMask(a),ab=a)},this.setBlending=function(a,b,c,d){a!==Xa&&(a===THREE.NoBlending?Fa.disable(Fa.BLEND):a===THREE.AdditiveBlending?(Fa.enable(Fa.BLEND),Fa.blendEquation(Fa.FUNC_ADD),Fa.blendFunc(Fa.SRC_ALPHA,Fa.ONE)):a===THREE.SubtractiveBlending?(Fa.enable(Fa.BLEND),Fa.blendEquation(Fa.FUNC_ADD),Fa.blendFunc(Fa.ZERO,Fa.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(Fa.enable(Fa.BLEND),Fa.blendEquation(Fa.FUNC_ADD),Fa.blendFunc(Fa.ZERO,Fa.SRC_COLOR)):a===THREE.CustomBlending?Fa.enable(Fa.BLEND):(Fa.enable(Fa.BLEND),Fa.blendEquationSeparate(Fa.FUNC_ADD,Fa.FUNC_ADD),Fa.blendFuncSeparate(Fa.SRC_ALPHA,Fa.ONE_MINUS_SRC_ALPHA,Fa.ONE,Fa.ONE_MINUS_SRC_ALPHA)),Xa=a),a===THREE.CustomBlending?(b!==Ya&&(Fa.blendEquation(na(b)),Ya=b),(c!==Za||d!==$a)&&(Fa.blendFunc(na(c),na(d)),Za=c,$a=d)):(Ya=null,Za=null,$a=null)},this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",Hb),a.__webglTexture=Fa.createTexture(),Na.info.memory.textures++),Fa.activeTexture(Fa.TEXTURE0+b),Fa.bindTexture(Fa.TEXTURE_2D,a.__webglTexture),Fa.pixelStorei(Fa.UNPACK_FLIP_Y_WEBGL,a.flipY),Fa.pixelStorei(Fa.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),Fa.pixelStorei(Fa.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=THREE.Math.isPowerOfTwo(c.width)&&THREE.Math.isPowerOfTwo(c.height),e=na(a.format),f=na(a.type);fa(Fa.TEXTURE_2D,a,d);var g,h=a.mipmaps;if(a instanceof THREE.DataTexture)if(h.length>0&&d){for(var i=0,j=h.length;j>i;i++)g=h[i],Fa.texImage2D(Fa.TEXTURE_2D,i,e,g.width,g.height,0,e,f,g.data);a.generateMipmaps=!1}else Fa.texImage2D(Fa.TEXTURE_2D,0,e,c.width,c.height,0,e,f,c.data);else if(a instanceof THREE.CompressedTexture)for(var i=0,j=h.length;j>i;i++)g=h[i],a.format!==THREE.RGBAFormat?Fa.compressedTexImage2D(Fa.TEXTURE_2D,i,e,g.width,g.height,0,g.data):Fa.texImage2D(Fa.TEXTURE_2D,i,e,g.width,g.height,0,e,f,g.data);else if(h.length>0&&d){for(var i=0,j=h.length;j>i;i++)g=h[i],Fa.texImage2D(Fa.TEXTURE_2D,i,e,e,f,g);a.generateMipmaps=!1}else Fa.texImage2D(Fa.TEXTURE_2D,0,e,e,f,a.image);a.generateMipmaps&&d&&Fa.generateMipmap(Fa.TEXTURE_2D),a.needsUpdate=!1,a.onUpdate&&a.onUpdate()}else Fa.activeTexture(Fa.TEXTURE0+b),Fa.bindTexture(Fa.TEXTURE_2D,a.__webglTexture)},this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&(a.depthBuffer=!0),void 0===a.stencilBuffer&&(a.stencilBuffer=!0),a.addEventListener("dispose",Ib),a.__webglTexture=Fa.createTexture(),Na.info.memory.textures++;var c=THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height),d=na(a.format),e=na(a.type);if(b){a.__webglFramebuffer=[],a.__webglRenderbuffer=[],Fa.bindTexture(Fa.TEXTURE_CUBE_MAP,a.__webglTexture),fa(Fa.TEXTURE_CUBE_MAP,a,c);for(var f=0;6>f;f++)a.__webglFramebuffer[f]=Fa.createFramebuffer(),a.__webglRenderbuffer[f]=Fa.createRenderbuffer(),Fa.texImage2D(Fa.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,null),ja(a.__webglFramebuffer[f],a,Fa.TEXTURE_CUBE_MAP_POSITIVE_X+f),ka(a.__webglRenderbuffer[f],a);c&&Fa.generateMipmap(Fa.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=Fa.createFramebuffer(),a.shareDepthFrom?a.__webglRenderbuffer=a.shareDepthFrom.__webglRenderbuffer:a.__webglRenderbuffer=Fa.createRenderbuffer(),Fa.bindTexture(Fa.TEXTURE_2D,a.__webglTexture),fa(Fa.TEXTURE_2D,a,c),Fa.texImage2D(Fa.TEXTURE_2D,0,d,a.width,a.height,0,d,e,null),ja(a.__webglFramebuffer,a,Fa.TEXTURE_2D),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?Fa.framebufferRenderbuffer(Fa.FRAMEBUFFER,Fa.DEPTH_ATTACHMENT,Fa.RENDERBUFFER,a.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&Fa.framebufferRenderbuffer(Fa.FRAMEBUFFER,Fa.DEPTH_STENCIL_ATTACHMENT,Fa.RENDERBUFFER,a.__webglRenderbuffer):ka(a.__webglRenderbuffer,a),c&&Fa.generateMipmap(Fa.TEXTURE_2D);b?Fa.bindTexture(Fa.TEXTURE_CUBE_MAP,null):Fa.bindTexture(Fa.TEXTURE_2D,null),Fa.bindRenderbuffer(Fa.RENDERBUFFER,null),Fa.bindFramebuffer(Fa.FRAMEBUFFER,null)}var g,h,i,j,k;a?(g=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,h=a.width,i=a.height,j=0,k=0):(g=null,h=hb,i=ib,j=fb,k=gb),g!==Qa&&(Fa.bindFramebuffer(Fa.FRAMEBUFFER,g),Fa.viewport(j,k,h,i),Qa=g),jb=h,kb=i},this.shadowMapPlugin=new THREE.ShadowMapPlugin,this.addPrePlugin(this.shadowMapPlugin),this.addPostPlugin(new THREE.SpritePlugin),this.addPostPlugin(new THREE.LensFlarePlugin)},THREE.WebGLRenderTarget=function(a,b,c){this.width=a,this.height=b,c=c||{},this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter,this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==c.format?c.format:THREE.RGBAFormat,this.type=void 0!==c.type?c.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0,this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(a,b){this.width=a,this.height=b},clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);return a.wrapS=this.wrapS,a.wrapT=this.wrapT,a.magFilter=this.magFilter,a.minFilter=this.minFilter,a.anisotropy=this.anisotropy,a.offset.copy(this.offset),a.repeat.copy(this.repeat),a.format=this.format,a.type=this.type,a.depthBuffer=this.depthBuffer,a.stencilBuffer=this.stencilBuffer,a.generateMipmaps=this.generateMipmaps,a.shareDepthFrom=this.shareDepthFrom,a},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLProgram=function(){var a=0,b=function(a){var b,c,d=[];for(var e in a)b=a[e],b!==!1&&(c="#define "+e+" "+b,d.push(c));return d.join("\n")},c=function(a,b,c){for(var d={},e=0,f=c.length;f>e;e++){var g=c[e];d[g]=a.getUniformLocation(b,g)}return d},d=function(a,b,c){for(var d={},e=0,f=c.length;f>e;e++){var g=c[e];d[g]=a.getAttribLocation(b,g)}return d};return function(e,f,g,h){var i=e,j=i.context,k=g.fragmentShader,l=g.vertexShader,m=g.uniforms,n=g.attributes,o=g.defines,p=g.index0AttributeName;void 0===p&&h.morphTargets===!0&&(p="position");var q="SHADOWMAP_TYPE_BASIC";h.shadowMapType===THREE.PCFShadowMap?q="SHADOWMAP_TYPE_PCF":h.shadowMapType===THREE.PCFSoftShadowMap&&(q="SHADOWMAP_TYPE_PCF_SOFT");var r,s,t=b(o),u=j.createProgram();g instanceof THREE.RawShaderMaterial?(r="",s=""):(r=["precision "+h.precision+" float;","precision "+h.precision+" int;",t,h.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.gammaInput?"#define GAMMA_INPUT":"",i.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+h.maxDirLights,"#define MAX_POINT_LIGHTS "+h.maxPointLights,"#define MAX_SPOT_LIGHTS "+h.maxSpotLights,"#define MAX_HEMI_LIGHTS "+h.maxHemiLights,"#define MAX_SHADOWS "+h.maxShadows,"#define MAX_BONES "+h.maxBones,h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.lightMap?"#define USE_LIGHTMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.vertexColors?"#define USE_COLOR":"",h.skinning?"#define USE_SKINNING":"",h.useVertexTexture?"#define BONE_TEXTURE":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals?"#define USE_MORPHNORMALS":"",h.wrapAround?"#define WRAP_AROUND":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+q:"",h.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",h.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",""].join("\n"),s=["precision "+h.precision+" float;","precision "+h.precision+" int;",h.bumpMap||h.normalMap?"#extension GL_OES_standard_derivatives : enable":"",t,"#define MAX_DIR_LIGHTS "+h.maxDirLights,"#define MAX_POINT_LIGHTS "+h.maxPointLights,"#define MAX_SPOT_LIGHTS "+h.maxSpotLights,"#define MAX_HEMI_LIGHTS "+h.maxHemiLights,"#define MAX_SHADOWS "+h.maxShadows,h.alphaTest?"#define ALPHATEST "+h.alphaTest:"",i.gammaInput?"#define GAMMA_INPUT":"",i.gammaOutput?"#define GAMMA_OUTPUT":"",h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.lightMap?"#define USE_LIGHTMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.vertexColors?"#define USE_COLOR":"",h.metal?"#define METAL":"",h.wrapAround?"#define WRAP_AROUND":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+q:"",h.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",h.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"));var v=new THREE.WebGLShader(j,j.VERTEX_SHADER,r+l),w=new THREE.WebGLShader(j,j.FRAGMENT_SHADER,s+k);j.attachShader(u,v),j.attachShader(u,w),void 0!==p&&j.bindAttribLocation(u,0,p),j.linkProgram(u),j.getProgramParameter(u,j.LINK_STATUS)===!1&&(console.error("Could not initialise shader"),console.error("gl.VALIDATE_STATUS",j.getProgramParameter(u,j.VALIDATE_STATUS)),console.error("gl.getError()",j.getError())),""!==j.getProgramInfoLog(u)&&console.error("gl.getProgramInfoLog()",j.getProgramInfoLog(u)),j.deleteShader(v),j.deleteShader(w);var x=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences"];h.useVertexTexture?(x.push("boneTexture"),x.push("boneTextureWidth"),x.push("boneTextureHeight")):x.push("boneGlobalMatrices"),h.logarithmicDepthBuffer&&x.push("logDepthBufFC");for(var y in m)x.push(y);this.uniforms=c(j,u,x),x=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var z=0;z<h.maxMorphTargets;z++)x.push("morphTarget"+z);for(var z=0;z<h.maxMorphNormals;z++)x.push("morphNormal"+z);for(var A in n)x.push(A);return this.attributes=d(j,u,x),this.id=a++,this.code=f,this.usedTimes=1,this.program=u,this.vertexShader=v,this.fragmentShader=w,this}}(),THREE.WebGLShader=function(){var a=function(a){for(var b=a.split("\n"),c=0;c<b.length;c++)b[c]=c+1+": "+b[c];return b.join("\n")};return function(b,c,d){var e=b.createShader(c);return b.shaderSource(e,d),b.compileShader(e),b.getShaderParameter(e,b.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==b.getShaderInfoLog(e)&&(console.error("THREE.WebGLShader:","gl.getShaderInfoLog()",b.getShaderInfoLog(e)),console.error(a(d))),e}}(),THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld),this.positionScreen.copy(a.positionScreen)},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=null,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0},THREE.GeometryUtils={merge:function(a,b,c){console.warn("DEPRECATED: GeometryUtils's .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry),a.merge(b,d,c)},randomPointInTriangle:function(){var a=new THREE.Vector3;return function(b,c,d){var e=new THREE.Vector3,f=THREE.Math.random16(),g=THREE.Math.random16();f+g>1&&(f=1-f,g=1-g);var h=1-f-g;return e.copy(b),e.multiplyScalar(f),a.copy(c),a.multiplyScalar(g),e.add(a),a.copy(d),a.multiplyScalar(h),e.add(a),e}}(),randomPointInFace:function(a,b,c){var d,e,f;return d=b.vertices[a.a],e=b.vertices[a.b],f=b.vertices[a.c],THREE.GeometryUtils.randomPointInTriangle(d,e,f)},randomPointsInGeometry:function(a,b){function c(a){function b(c,d){if(c>d)return c;var e=c+Math.floor((d-c)/2);return m[e]>a?b(c,e-1):m[e]<a?b(e+1,d):e}var c=b(0,m.length-1);return c}var d,e,f,g,h,i=a.faces,j=a.vertices,k=i.length,l=0,m=[];for(e=0;k>e;e++)d=i[e],f=j[d.a],g=j[d.b],h=j[d.c],d._area=THREE.GeometryUtils.triangleArea(f,g,h),l+=d._area,m[e]=l;var n,o,p=[],q={};for(e=0;b>e;e++)n=THREE.Math.random16()*l,o=c(n),p[e]=THREE.GeometryUtils.randomPointInFace(i[o],a,!0),q[o]?q[o]+=1:q[o]=1;return p},triangleArea:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){return a.subVectors(d,c),b.subVectors(e,c),a.cross(b),.5*a.length()}}(),center:function(a){a.computeBoundingBox();var b=a.boundingBox,c=new THREE.Vector3;return c.addVectors(b.min,b.max),c.multiplyScalar(-.5),a.applyMatrix((new THREE.Matrix4).makeTranslation(c.x,c.y,c.z)),a.computeBoundingBox(),c}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var f=new THREE.Texture(void 0,b),g=e.load(a,function(){f.needsUpdate=!0,c&&c(f)},void 0,function(a){d&&d(a)});return f.image=g,f.sourceFile=a,f},loadCompressedTexture:function(a,b,c,d){var e=new THREE.CompressedTexture;e.mapping=b;var f=new XMLHttpRequest;return f.onload=function(){var a=f.response,b=THREE.ImageUtils.parseDDS(a,!0);e.format=b.format,e.mipmaps=b.mipmaps,e.image.width=b.width,e.image.height=b.height,e.generateMipmaps=!1,e.needsUpdate=!0,c&&c(e)},f.onerror=d,f.open("GET",a,!0),f.responseType="arraybuffer",f.send(null),e},loadTextureCube:function(a,b,c,d){var e=[];e.loadCount=0;var f=new THREE.ImageLoader;f.crossOrigin=this.crossOrigin;var g=new THREE.Texture;g.image=e,void 0!==b&&(g.mapping=b),g.flipY=!1;for(var h=0,i=a.length;i>h;++h){var j=f.load(a[h],function(){e.loadCount+=1,6===e.loadCount&&(g.needsUpdate=!0,c&&c(g))});e[h]=j}return g},loadCompressedTextureCube:function(a,b,c,d){var e=[];e.loadCount=0;var f=new THREE.CompressedTexture;f.image=e,void 0!==b&&(f.mapping=b),f.flipY=!1,f.generateMipmaps=!1;var g=function(a,b){return function(){var d=a.response,g=THREE.ImageUtils.parseDDS(d,!0);b.format=g.format,
b.mipmaps=g.mipmaps,b.width=g.width,b.height=g.height,e.loadCount+=1,6===e.loadCount&&(f.format=g.format,f.needsUpdate=!0,c&&c(f))}};if(a instanceof Array)for(var h=0,i=a.length;i>h;++h){var j={};e[h]=j;var k=new XMLHttpRequest;k.onload=g(k,j),k.onerror=d;var l=a[h];k.open("GET",l,!0),k.responseType="arraybuffer",k.send(null)}else{var l=a,k=new XMLHttpRequest;k.onload=function(){var a=k.response,b=THREE.ImageUtils.parseDDS(a,!0);if(b.isCubemap){for(var d=b.mipmaps.length/b.mipmapCount,g=0;d>g;g++){e[g]={mipmaps:[]};for(var h=0;h<b.mipmapCount;h++)e[g].mipmaps.push(b.mipmaps[g*b.mipmapCount+h]),e[g].format=b.format,e[g].width=b.width,e[g].height=b.height}f.format=b.format,f.needsUpdate=!0,c&&c(f)}},k.onerror=d,k.open("GET",l,!0),k.responseType="arraybuffer",k.send(null)}return f},loadDDSTexture:function(a,b,c,d){var e=[];e.loadCount=0;var f=new THREE.CompressedTexture;f.image=e,void 0!==b&&(f.mapping=b),f.flipY=!1,f.generateMipmaps=!1;var g=new XMLHttpRequest;return g.onload=function(){var a=g.response,b=THREE.ImageUtils.parseDDS(a,!0);if(b.isCubemap)for(var d=b.mipmaps.length/b.mipmapCount,h=0;d>h;h++){e[h]={mipmaps:[]};for(var i=0;i<b.mipmapCount;i++)e[h].mipmaps.push(b.mipmaps[h*b.mipmapCount+i]),e[h].format=b.format,e[h].width=b.width,e[h].height=b.height}else f.image.width=b.width,f.image.height=b.height,f.mipmaps=b.mipmaps;f.format=b.format,f.needsUpdate=!0,c&&c(f)},g.onerror=d,g.open("GET",a,!0),g.responseType="arraybuffer",g.send(null),f},parseDDS:function(a,b){function c(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}function d(a){return String.fromCharCode(255&a,a>>8&255,a>>16&255,a>>24&255)}function e(a,b,c,d){for(var e=c*d*4,f=new Uint8Array(a,b,e),g=new Uint8Array(e),h=0,i=0,j=0;d>j;j++)for(var k=0;c>k;k++){var l=f[i];i++;var m=f[i];i++;var n=f[i];i++;var o=f[i];i++,g[h]=n,h++,g[h]=m,h++,g[h]=l,h++,g[h]=o,h++}return g}var f={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},g=542327876,h=131072,i=512,j=4,k=c("DXT1"),l=c("DXT3"),m=c("DXT5"),n=31,o=0,p=1,q=2,r=3,s=4,t=7,u=20,v=21,w=22,x=23,y=24,z=25,A=26,B=28,C=new Int32Array(a,0,n);if(C[o]!==g)return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),f;if(!C[u]&j)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),f;var D,E=C[v],F=!1;switch(E){case k:D=8,f.format=THREE.RGB_S3TC_DXT1_Format;break;case l:D=16,f.format=THREE.RGBA_S3TC_DXT3_Format;break;case m:D=16,f.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(!(32==C[w]&&16711680&C[x]&&65280&C[y]&&255&C[z]&&4278190080&C[A]))return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",d(E)),f;F=!0,D=64,f.format=THREE.RGBAFormat}f.mipmapCount=1,C[q]&h&&b!==!1&&(f.mipmapCount=Math.max(1,C[t])),f.isCubemap=C[B]&i?!0:!1,f.width=C[s],f.height=C[r];for(var G=C[p]+4,H=f.width,I=f.height,J=f.isCubemap?6:1,K=0;J>K;K++){for(var L=0;L<f.mipmapCount;L++){if(F)var M=e(a,G,H,I),N=M.length;else var N=Math.max(4,H)/4*Math.max(4,I)/4*D,M=new Uint8Array(a,G,N);var O={data:M,width:H,height:I};f.mipmaps.push(O),G+=N,H=Math.max(.5*H,1),I=Math.max(.5*I,1)}H=f.width,I=f.height}return f},getNormalMap:function(a,b){var c=function(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]},d=function(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2]]},e=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]};b=1|b;var f=a.width,g=a.height,h=document.createElement("canvas");h.width=f,h.height=g;var i=h.getContext("2d");i.drawImage(a,0,0);for(var j=i.getImageData(0,0,f,g).data,k=i.createImageData(f,g),l=k.data,m=0;f>m;m++)for(var n=0;g>n;n++){var o=0>n-1?0:n-1,p=n+1>g-1?g-1:n+1,q=0>m-1?0:m-1,r=m+1>f-1?f-1:m+1,s=[],t=[0,0,j[4*(n*f+m)]/255*b];s.push([-1,0,j[4*(n*f+q)]/255*b]),s.push([-1,-1,j[4*(o*f+q)]/255*b]),s.push([0,-1,j[4*(o*f+m)]/255*b]),s.push([1,-1,j[4*(o*f+r)]/255*b]),s.push([1,0,j[4*(n*f+r)]/255*b]),s.push([1,1,j[4*(p*f+r)]/255*b]),s.push([0,1,j[4*(p*f+m)]/255*b]),s.push([-1,1,j[4*(p*f+q)]/255*b]);for(var u=[],v=s.length,w=0;v>w;w++){var x=s[w],y=s[(w+1)%v];x=d(x,t),y=d(y,t),u.push(e(c(x,y)))}for(var z=[0,0,0],w=0;w<u.length;w++)z[0]+=u[w][0],z[1]+=u[w][1],z[2]+=u[w][2];z[0]/=u.length,z[1]/=u.length,z[2]/=u.length;var A=4*(n*f+m);l[A]=(z[0]+1)/2*255|0,l[A+1]=(z[1]+1)/2*255|0,l[A+2]=255*z[2]|0,l[A+3]=255}return i.putImageData(k,0,0),h},generateDataTexture:function(a,b,c){for(var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.r),g=Math.floor(255*c.g),h=Math.floor(255*c.b),i=0;d>i;i++)e[3*i]=f,e[3*i+1]=g,e[3*i+2]=h;var j=new THREE.DataTexture(e,a,b,THREE.RGBFormat);return j.needsUpdate=!0,j}},THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,d=0,e=b.length;e>d;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld),b.remove(a),c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld),a.applyMatrix(d),b.remove(a),c.add(a)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(a){var b=a.familyName.toLowerCase(),c=this;c.faces[b]=c.faces[b]||{},c.faces[b][a.cssFontWeight]=c.faces[b][a.cssFontWeight]||{},c.faces[b][a.cssFontWeight][a.cssFontStyle]=a;c.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return a},drawText:function(a){var b,c=this.getFace(),d=this.size/c.resolution,e=0,f=String(a).split(""),g=f.length,h=[];for(b=0;g>b;b++){var i=new THREE.Path,j=this.extractGlyphPoints(f[b],c,d,e,i);e+=j.offset,h.push(j.path)}var k=e/2;return{paths:h,offset:k}},extractGlyphPoints:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=[],z=b.glyphs[a]||b.glyphs["?"];if(z){if(z.o)for(i=z._cachedOutline||(z._cachedOutline=z.o.split(" ")),k=i.length,l=c,m=c,f=0;k>f;)switch(j=i[f++]){case"m":n=i[f++]*l+d,o=i[f++]*m,e.moveTo(n,o);break;case"l":n=i[f++]*l+d,o=i[f++]*m,e.lineTo(n,o);break;case"q":if(p=i[f++]*l+d,q=i[f++]*m,t=i[f++]*l+d,u=i[f++]*m,e.quadraticCurveTo(t,u,p,q),x=y[y.length-1])for(r=x.x,s=x.y,g=1,h=this.divisions;h>=g;g++){var A=g/h;THREE.Shape.Utils.b2(A,r,t,p),THREE.Shape.Utils.b2(A,s,u,q)}break;case"b":if(p=i[f++]*l+d,q=i[f++]*m,t=i[f++]*l+d,u=i[f++]*-m,v=i[f++]*l+d,w=i[f++]*-m,e.bezierCurveTo(p,q,t,u,v,w),x=y[y.length-1])for(r=x.x,s=x.y,g=1,h=this.divisions;h>=g;g++){var A=g/h;THREE.Shape.Utils.b3(A,r,t,v,p),THREE.Shape.Utils.b3(A,s,u,w,q)}}return{offset:z.ha*c,path:e}}}},THREE.FontUtils.generateShapes=function(a,b){b=b||{};var c=void 0!==b.size?b.size:100,d=void 0!==b.curveSegments?b.curveSegments:4,e=void 0!==b.font?b.font:"helvetiker",f=void 0!==b.weight?b.weight:"normal",g=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=c,THREE.FontUtils.divisions=d,THREE.FontUtils.face=e,THREE.FontUtils.weight=f,THREE.FontUtils.style=g;for(var h=THREE.FontUtils.drawText(a),i=h.paths,j=[],k=0,l=i.length;l>k;k++)Array.prototype.push.apply(j,i[k].toShapes());return j},function(a){var b=1e-10,c=function(a,b){var c=a.length;if(3>c)return null;var f,g,h,i=[],j=[],k=[];if(d(a)>0)for(g=0;c>g;g++)j[g]=g;else for(g=0;c>g;g++)j[g]=c-1-g;var l=c,m=2*l;for(g=l-1;l>2;){if(m--<=0)return console.log("Warning, unable to triangulate polygon!"),b?k:i;if(f=g,f>=l&&(f=0),g=f+1,g>=l&&(g=0),h=g+1,h>=l&&(h=0),e(a,f,g,h,l,j)){var n,o,p,q,r;for(n=j[f],o=j[g],p=j[h],i.push([a[n],a[o],a[p]]),k.push([j[f],j[g],j[h]]),q=g,r=g+1;l>r;q++,r++)j[q]=j[r];l--,m=2*l}}return b?k:i},d=function(a){for(var b=a.length,c=0,d=b-1,e=0;b>e;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},e=function(a,c,d,e,f,g){var h,i,j,k,l,m,n,o,p;if(i=a[g[c]].x,j=a[g[c]].y,k=a[g[d]].x,l=a[g[d]].y,m=a[g[e]].x,n=a[g[e]].y,b>(k-i)*(n-j)-(l-j)*(m-i))return!1;var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;for(q=m-k,r=n-l,s=i-m,t=j-n,u=k-i,v=l-j,h=0;f>h;h++)if(o=a[g[h]].x,p=a[g[h]].y,!(o===i&&p===j||o===k&&p===l||o===m&&p===n)&&(w=o-i,x=p-j,y=o-k,z=p-l,A=o-m,B=p-n,E=q*z-r*y,C=u*x-v*w,D=s*B-t*A,E>=-b&&D>=-b&&C>=-b))return!1;return!0};return a.Triangulate=c,a.Triangulate.area=d,a}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(a){return console.log("Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(a){var b=this.getUtoTmapping(a);return this.getPoint(b)},THREE.Curve.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPoint(b/a));return c},THREE.Curve.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPointAt(b/a));return c},THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]},THREE.Curve.prototype.getLengths=function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b,c,d=[],e=this.getPoint(0),f=0;for(d.push(0),c=1;a>=c;c++)b=this.getPoint(c/a),f+=b.distanceTo(e),d.push(f),e=b;return this.cacheArcLengths=d,d},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(a,b){var c,d=this.getLengths(),e=0,f=d.length;c=b?b:a*d[f-1];for(var g,h=0,i=f-1;i>=h;)if(e=Math.floor(h+(i-h)/2),g=d[e]-c,0>g)h=e+1;else{if(!(g>0)){i=e;break}i=e-1}if(e=i,d[e]==c){var j=e/(f-1);return j}var k=d[e],l=d[e+1],m=l-k,n=(c-k)/m,j=(e+n)/(f-1);return j},THREE.Curve.prototype.getTangent=function(a){var b=1e-4,c=a-b,d=a+b;0>c&&(c=0),d>1&&(d=1);var e=this.getPoint(c),f=this.getPoint(d),g=f.clone().sub(e);return g.normalize()},THREE.Curve.prototype.getTangentAt=function(a){var b=this.getUtoTmapping(a);return this.getTangent(b)},THREE.Curve.Utils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){var f=6*a*a-6*a,g=3*a*a-4*a+1,h=-6*a*a+6*a,i=3*a*a-2*a;return f+g+h+i},interpolate:function(a,b,c,d,e){var f=.5*(c-a),g=.5*(d-b),h=e*e,i=e*h;return(2*b-2*c+f+g)*i+(-3*b+3*c-2*f-g)*h+f*e+b}},THREE.Curve.create=function(a,b){return a.prototype=Object.create(THREE.Curve.prototype),a.prototype.getPoint=b,a},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(a){this.curves.push(a)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))},THREE.CurvePath.prototype.getPoint=function(a){for(var b,c,d=a*this.getLength(),e=this.getCurveLengths(),f=0;f<e.length;){if(e[f]>=d){b=e[f]-d,c=this.curves[f];var g=1-b/c.getLength();return c.getPointAt(g)}f++}return null},THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var a,b=[],c=0,d=this.curves.length;for(a=0;d>a;a++)c+=this.curves[a].getLength(),b.push(c);return this.cacheLengths=b,b},THREE.CurvePath.prototype.getBoundingBox=function(){var a,b,c,d,e,f,g=this.getPoints();a=b=Number.NEGATIVE_INFINITY,d=e=Number.POSITIVE_INFINITY;var h,i,j,k,l=g[0]instanceof THREE.Vector3;for(k=l?new THREE.Vector3:new THREE.Vector2,i=0,j=g.length;j>i;i++)h=g[i],h.x>a?a=h.x:h.x<d&&(d=h.x),h.y>b?b=h.y:h.y<e&&(e=h.y),l&&(h.z>c?c=h.z:h.z<f&&(f=h.z)),k.add(h);var m={minX:d,minY:e,maxX:a,maxY:b};return l&&(m.maxZ=c,m.minZ=f),m},THREE.CurvePath.prototype.createPointsGeometry=function(a){var b=this.getPoints(a,!0);return this.createGeometry(b)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){var b=this.getSpacedPoints(a,!0);return this.createGeometry(b)},THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(new THREE.Vector3(a[c].x,a[c].y,a[c].z||0));return b},THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)},THREE.CurvePath.prototype.getTransformedPoints=function(a,b){var c,d,e=this.getPoints(a);for(b||(b=this.bends),c=0,d=b.length;d>c;c++)e=this.getWrapPoints(e,b[c]);return e},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(a,b){var c,d,e=this.getSpacedPoints(a);for(b||(b=this.bends),c=0,d=b.length;d>c;c++)e=this.getWrapPoints(e,b[c]);return e},THREE.CurvePath.prototype.getWrapPoints=function(a,b){var c,d,e,f,g,h,i=this.getBoundingBox();for(c=0,d=a.length;d>c;c++){e=a[c],f=e.x,g=e.y,h=f/i.maxX,h=b.getUtoTmapping(h,f);var j=b.getPoint(h),k=b.getTangent(h);k.set(-k.y,k.x).multiplyScalar(g),e.x=j.x+k.x,e.y=j.y+k.y}return a},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var b=0,c=this.children.length;c>b;b++)this.children[b].updateMatrixWorld(a)},THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3,THREE.Gyroscope.prototype.translationObject=new THREE.Vector3,THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion,THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion,THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3,THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3,THREE.Path=function(a){THREE.CurvePath.call(this),this.actions=[],a&&this.fromPoints(a)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;c>b;b++)this.lineTo(a[b].x,a[b].y)},THREE.Path.prototype.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:c})},THREE.Path.prototype.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,e=d[d.length-2],f=d[d.length-1],g=new THREE.LineCurve(new THREE.Vector2(e,f),new THREE.Vector2(a,b));this.curves.push(g),this.actions.push({action:THREE.PathActions.LINE_TO,args:c})},THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),f=this.actions[this.actions.length-1].args,g=f[f.length-2],h=f[f.length-1],i=new THREE.QuadraticBezierCurve(new THREE.Vector2(g,h),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(i),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:e})},THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,f){var g=Array.prototype.slice.call(arguments),h=this.actions[this.actions.length-1].args,i=h[h.length-2],j=h[h.length-1],k=new THREE.CubicBezierCurve(new THREE.Vector2(i,j),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(k),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:g})},THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,d=c[c.length-2],e=c[c.length-1],f=[new THREE.Vector2(d,e)];Array.prototype.push.apply(f,a);var g=new THREE.SplineCurve(f);this.curves.push(g),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:b})},THREE.Path.prototype.arc=function(a,b,c,d,e,f){var g=this.actions[this.actions.length-1].args,h=g[g.length-2],i=g[g.length-1];this.absarc(a+h,b+i,c,d,e,f)},THREE.Path.prototype.absarc=function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},THREE.Path.prototype.ellipse=function(a,b,c,d,e,f,g){var h=this.actions[this.actions.length-1].args,i=h[h.length-2],j=h[h.length-1];this.absellipse(a+i,b+j,c,d,e,f,g)},THREE.Path.prototype.absellipse=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments),i=new THREE.EllipseCurve(a,b,c,d,e,f,g);this.curves.push(i);var j=i.getPoint(1);h.push(j.x),h.push(j.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:h})},THREE.Path.prototype.getSpacedPoints=function(a,b){a||(a=40);for(var c=[],d=0;a>d;d++)c.push(this.getPoint(d/a));return c},THREE.Path.prototype.getPoints=function(a,b){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(a,b);a=a||12;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[];for(c=0,d=this.actions.length;d>c;c++)switch(e=this.actions[c],f=e.action,g=e.args,f){case THREE.PathActions.MOVE_TO:u.push(new THREE.Vector2(g[0],g[1]));break;case THREE.PathActions.LINE_TO:u.push(new THREE.Vector2(g[0],g[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(h=g[2],i=g[3],l=g[0],m=g[1],u.length>0?(p=u[u.length-1],n=p.x,o=p.y):(p=this.actions[c-1].args,n=p[p.length-2],o=p[p.length-1]),q=1;a>=q;q++)r=q/a,s=THREE.Shape.Utils.b2(r,n,l,h),t=THREE.Shape.Utils.b2(r,o,m,i),u.push(new THREE.Vector2(s,t));break;case THREE.PathActions.BEZIER_CURVE_TO:for(h=g[4],i=g[5],l=g[0],m=g[1],j=g[2],k=g[3],u.length>0?(p=u[u.length-1],n=p.x,o=p.y):(p=this.actions[c-1].args,n=p[p.length-2],o=p[p.length-1]),q=1;a>=q;q++)r=q/a,s=THREE.Shape.Utils.b3(r,n,l,j,h),t=THREE.Shape.Utils.b3(r,o,m,k,i),u.push(new THREE.Vector2(s,t));break;case THREE.PathActions.CSPLINE_THRU:p=this.actions[c-1].args;var v=new THREE.Vector2(p[p.length-2],p[p.length-1]),w=[v],x=a*g[0].length;w=w.concat(g[0]);var y=new THREE.SplineCurve(w);for(q=1;x>=q;q++)u.push(y.getPointAt(q/x));break;case THREE.PathActions.ARC:var z,A=g[0],B=g[1],C=g[2],D=g[3],E=g[4],F=!!g[5],G=E-D,H=2*a;for(q=1;H>=q;q++)r=q/H,F||(r=1-r),z=D+r*G,s=A+C*Math.cos(z),t=B+C*Math.sin(z),u.push(new THREE.Vector2(s,t));break;case THREE.PathActions.ELLIPSE:var z,A=g[0],B=g[1],I=g[2],J=g[3],D=g[4],E=g[5],F=!!g[6],G=E-D,H=2*a;for(q=1;H>=q;q++)r=q/H,F||(r=1-r),z=D+r*G,s=A+I*Math.cos(z),t=B+J*Math.sin(z),u.push(new THREE.Vector2(s,t))}var K=u[u.length-1],L=1e-10;return Math.abs(K.x-u[0].x)<L&&Math.abs(K.y-u[0].y)<L&&u.splice(u.length-1,1),b&&u.push(u[0]),u},THREE.Path.prototype.toShapes=function(a,b){function c(a){var b,c,d,e,f,g=[],h=new THREE.Path;for(b=0,c=a.length;c>b;b++)d=a[b],f=d.args,e=d.action,e==THREE.PathActions.MOVE_TO&&0!=h.actions.length&&(g.push(h),h=new THREE.Path),h[e].apply(h,f);return 0!=h.actions.length&&g.push(h),g}function d(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=new THREE.Shape;f.actions=e.actions,f.curves=e.curves,b.push(f)}return b}function e(a,b){for(var c=1e-10,d=b.length,e=!1,f=d-1,g=0;d>g;f=g++){var h=b[f],i=b[g],j=i.x-h.x,k=i.y-h.y;if(Math.abs(k)>c){if(0>k&&(h=b[g],j=-j,i=b[f],k=-k),a.y<h.y||a.y>i.y)continue;if(a.y==h.y){if(a.x==h.x)return!0}else{var l=k*(a.x-h.x)-j*(a.y-h.y);if(0==l)return!0;if(0>l)continue;e=!e}}else{if(a.y!=h.y)continue;if(i.x<=a.x&&a.x<=h.x||h.x<=a.x&&a.x<=i.x)return!0}}return e}var f=c(this.actions);if(0==f.length)return[];if(b===!0)return d(f);var g,h,i,j=[];if(1==f.length)return h=f[0],i=new THREE.Shape,i.actions=h.actions,i.curves=h.curves,j.push(i),j;var k=!THREE.Shape.Utils.isClockWise(f[0].getPoints());k=a?!k:k;var l,m=[],n=[],o=[],p=0;n[p]=void 0,o[p]=[];var q,r;for(q=0,r=f.length;r>q;q++)h=f[q],l=h.getPoints(),g=THREE.Shape.Utils.isClockWise(l),g=a?!g:g,g?(!k&&n[p]&&p++,n[p]={s:new THREE.Shape,p:l},n[p].s.actions=h.actions,n[p].s.curves=h.curves,k&&p++,o[p]=[]):o[p].push({h:h,p:l[0]});if(!n[0])return d(f);if(n.length>1){for(var s=!1,t=[],u=0,v=n.length;v>u;u++)m[u]=[];for(var u=0,v=n.length;v>u;u++)for(var w=(n[u],o[u]),x=0;x<w.length;x++){for(var y=w[x],z=!0,A=0;A<n.length;A++)e(y.p,n[A].p)&&(u!=A&&t.push({froms:u,tos:A,hole:x}),z?(z=!1,m[A].push(y)):s=!0);z&&m[u].push(y)}t.length>0&&(s||(o=m))}var B,C,D;for(q=0,r=n.length;r>q;q++)for(i=n[q].s,j.push(i),B=o[q],C=0,D=B.length;D>C;C++)i.holes.push(B[C].h);return j},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(a){var b=new THREE.ExtrudeGeometry(this,a);return b},THREE.Shape.prototype.makeGeometry=function(a){var b=new THREE.ShapeGeometry(this,a);return b},THREE.Shape.prototype.getPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;c>b;b++)d[b]=this.holes[b].getTransformedPoints(a,this.bends);return d},THREE.Shape.prototype.getSpacedPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;c>b;b++)d[b]=this.holes[b].getTransformedSpacedPoints(a,this.bends);return d},THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}},THREE.Shape.prototype.extractPoints=function(a){return this.useSpacedPoints?this.extractAllSpacedPoints(a):this.extractAllPoints(a)},THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}},THREE.Shape.Utils={triangulateShape:function(a,b){function c(a,b,c){return a.x!=b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function d(a,b,d,e,f){var g=1e-10,h=b.x-a.x,i=b.y-a.y,j=e.x-d.x,k=e.y-d.y,l=a.x-d.x,m=a.y-d.y,n=i*j-h*k,o=i*l-h*m;if(Math.abs(n)>g){var p;if(n>0){if(0>o||o>n)return[];if(p=k*l-j*m,0>p||p>n)return[]}else{if(o>0||n>o)return[];if(p=k*l-j*m,p>0||n>p)return[]}if(0==p)return!f||0!=o&&o!=n?[a]:[];if(p==n)return!f||0!=o&&o!=n?[b]:[];if(0==o)return[d];if(o==n)return[e];var q=p/n;return[{x:a.x+q*h,y:a.y+q*i}]}if(0!=o||k*l!=j*m)return[];var r=0==h&&0==i,s=0==j&&0==k;if(r&&s)return a.x!=d.x||a.y!=d.y?[]:[a];if(r)return c(d,e,a)?[a]:[];if(s)return c(a,b,d)?[d]:[];var t,u,v,w,x,y,z,A;return 0!=h?(a.x<b.x?(t=a,v=a.x,u=b,w=b.x):(t=b,v=b.x,u=a,w=a.x),d.x<e.x?(x=d,z=d.x,y=e,A=e.x):(x=e,z=e.x,y=d,A=d.x)):(a.y<b.y?(t=a,v=a.y,u=b,w=b.y):(t=b,v=b.y,u=a,w=a.y),d.y<e.y?(x=d,z=d.y,y=e,A=e.y):(x=e,z=e.y,y=d,A=d.y)),z>=v?z>w?[]:w==z?f?[]:[x]:A>=w?[x,u]:[x,y]:v>A?[]:v==A?f?[]:[t]:A>=w?[t,u]:[t,y]}function e(a,b,c,d){var e=1e-10,f=b.x-a.x,g=b.y-a.y,h=c.x-a.x,i=c.y-a.y,j=d.x-a.x,k=d.y-a.y,l=f*i-g*h,m=f*k-g*j;if(Math.abs(l)>e){var n=j*i-k*h;return l>0?m>=0&&n>=0:m>=0||n>=0}return m>0}function f(a,b){function c(a,b){var c=s.length-1,d=a-1;0>d&&(d=c);var f=a+1;f>c&&(f=0);var g=e(s[a],s[d],s[f],h[b]);if(!g)return!1;var i=h.length-1,j=b-1;0>j&&(j=i);var k=b+1;return k>i&&(k=0),g=e(h[b],h[j],h[k],s[a]),g?!0:!1}function f(a,b){var c,e,f;for(c=0;c<s.length;c++)if(e=c+1,e%=s.length,f=d(a,b,s[c],s[e],!0),f.length>0)return!0;return!1}function g(a,c){var e,f,g,h,i;for(e=0;e<t.length;e++)for(f=b[t[e]],g=0;g<f.length;g++)if(h=g+1,h%=f.length,i=d(a,c,f[g],f[h],!0),i.length>0)return!0;return!1}for(var h,i,j,k,l,m,n,o,p,q,r,s=a.concat(),t=[],u=[],v=0,w=b.length;w>v;v++)t.push(v);for(var x=0,y=2*t.length;t.length>0;){if(y--,0>y){console.log("Infinite Loop! Holes left:"+t.length+", Probably Hole outside Shape!");break}for(j=x;j<s.length;j++){k=s[j],i=-1;for(var v=0;v<t.length;v++)if(m=t[v],n=k.x+":"+k.y+":"+m,void 0===u[n]){h=b[m];for(var z=0;z<h.length;z++)if(l=h[z],c(j,z)&&!f(k,l)&&!g(k,l)){i=z,t.splice(v,1),o=s.slice(0,j+1),p=s.slice(j),q=h.slice(i),r=h.slice(0,i+1),s=o.concat(q).concat(r).concat(p),x=j;break}if(i>=0)break;u[n]=!0}if(i>=0)break}}return s}for(var g,h,i,j,k,l,m={},n=a.concat(),o=0,p=b.length;p>o;o++)Array.prototype.push.apply(n,b[o]);for(g=0,h=n.length;h>g;g++)k=n[g].x+":"+n[g].y,void 0!==m[k]&&console.log("Duplicate point",k),m[k]=g;var q=f(a,b),r=THREE.FontUtils.Triangulate(q,!1);for(g=0,h=r.length;h>g;g++)for(j=r[g],i=0;3>i;i++)k=j[i].x+":"+j[i].y,l=m[k],void 0!==l&&(j[i]=l);return r.concat()},isClockWise:function(a){return THREE.FontUtils.Triangulate.area(a)<0},b2p0:function(a,b){var c=1-a;return c*c*b},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,b,c,d){return this.b2p0(a,b)+this.b2p1(a,c)+this.b2p2(a,d)},b3p0:function(a,b){var c=1-a;return c*c*c*b},b3p1:function(a,b){var c=1-a;return 3*c*c*a*b},b3p2:function(a,b){var c=1-a;return 3*c*a*a*b},b3p3:function(a,b){return a*a*a*b},b3:function(a,b,c,d,e){return this.b3p0(a,b)+this.b3p1(a,c)+this.b3p2(a,d)+this.b3p3(a,e)}},THREE.LineCurve=function(a,b){this.v1=a,this.v2=b},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);return b.multiplyScalar(a).add(this.v1),b},THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)},THREE.LineCurve.prototype.getTangent=function(a){var b=this.v2.clone().sub(this.v1);return b.normalize()},THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a,this.v1=b,this.v2=c},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b,c;return b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x),c=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y),new THREE.Vector2(b,c)},THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b,c;b=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.x,this.v1.x,this.v2.x),c=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.y,this.v1.y,this.v2.y);var d=new THREE.Vector2(b,c);return d.normalize(),d},THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a,this.v1=b,this.v2=c,this.v3=d},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(a){var b,c;return b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),c=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(b,c)},THREE.CubicBezierCurve.prototype.getTangent=function(a){var b,c;b=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),c=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var d=new THREE.Vector2(b,c);return d.normalize(),d},THREE.SplineCurve=function(a){this.points=void 0==a?[]:a},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(a){var b,c,d,e=new THREE.Vector2,f=[],g=this.points;return b=(g.length-1)*a,c=Math.floor(b),d=b-c,f[0]=0==c?c:c-1,f[1]=c,f[2]=c>g.length-2?g.length-1:c+1,f[3]=c>g.length-3?g.length-1:c+2,e.x=THREE.Curve.Utils.interpolate(g[f[0]].x,g[f[1]].x,g[f[2]].x,g[f[3]].x,d),e.y=THREE.Curve.Utils.interpolate(g[f[0]].y,g[f[1]].y,g[f[2]].y,g[f[3]].y,d),e},THREE.EllipseCurve=function(a,b,c,d,e,f,g){this.aX=a,this.aY=b,this.xRadius=c,this.yRadius=d,this.aStartAngle=e,this.aEndAngle=f,this.aClockwise=g},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(a){var b,c=this.aEndAngle-this.aStartAngle;0>c&&(c+=2*Math.PI),c>2*Math.PI&&(c-=2*Math.PI),b=this.aClockwise===!0?this.aEndAngle+(1-a)*(2*Math.PI-c):this.aStartAngle+a*c;var d=this.aX+this.xRadius*Math.cos(b),e=this.aY+this.yRadius*Math.sin(b);return new THREE.Vector2(d,e)},THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a,this.v2=b},function(a){var b=new THREE.Vector3;return b.subVectors(this.v2,this.v1),b.multiplyScalar(a),b.add(this.v1),b}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a,this.v1=b,this.v2=c},function(a){var b,c,d;return b=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x),c=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y),d=THREE.Shape.Utils.b2(a,this.v0.z,this.v1.z,this.v2.z),new THREE.Vector3(b,c,d)}),THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a,this.v1=b,this.v2=c,this.v3=d},function(a){var b,c,d;return b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),c=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),d=THREE.Shape.Utils.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new THREE.Vector3(b,c,d)}),THREE.SplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b,c,d,e=new THREE.Vector3,f=[],g=this.points;b=(g.length-1)*a,c=Math.floor(b),d=b-c,f[0]=0==c?c:c-1,f[1]=c,f[2]=c>g.length-2?g.length-1:c+1,f[3]=c>g.length-3?g.length-1:c+2;var h=g[f[0]],i=g[f[1]],j=g[f[2]],k=g[f[3]];return e.x=THREE.Curve.Utils.interpolate(h.x,i.x,j.x,k.x,d),e.y=THREE.Curve.Utils.interpolate(h.y,i.y,j.y,k.y,d),e.z=THREE.Curve.Utils.interpolate(h.z,i.z,j.z,k.z,d),e}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b,c,d,e=new THREE.Vector3,f=[],g=this.points;return b=(g.length-0)*a,c=Math.floor(b),d=b-c,c+=c>0?0:(Math.floor(Math.abs(c)/g.length)+1)*g.length,f[0]=(c-1)%g.length,f[1]=c%g.length,f[2]=(c+1)%g.length,f[3]=(c+2)%g.length,e.x=THREE.Curve.Utils.interpolate(g[f[0]].x,g[f[1]].x,g[f[2]].x,g[f[3]].x,d),e.y=THREE.Curve.Utils.interpolate(g[f[0]].y,g[f[1]].y,g[f[2]].y,g[f[3]].y,d),e.z=THREE.Curve.Utils.interpolate(g[f[0]].z,g[f[1]].z,g[f[2]].z,g[f[3]].z,d),e}),THREE.AnimationHandler=function(){var a=[],b={},c={};c.update=function(b){for(var c=0;c<a.length;c++)a[c].update(b)},c.addToUpdate=function(b){-1===a.indexOf(b)&&a.push(b)},c.removeFromUpdate=function(b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)},c.add=function(a){void 0!==b[a.name]&&console.log("THREE.AnimationHandler.add: Warning! "+a.name+" already exists in library. Overwriting."),b[a.name]=a,e(a)},c.remove=function(a){void 0===b[a]&&console.log("THREE.AnimationHandler.add: Warning! "+a+" doesn't exists in library. Doing nothing."),b[a]=void 0},c.get=function(a){return"string"==typeof a?b[a]?b[a]:null:void 0},c.parse=function(a){var b=[];if(a instanceof THREE.SkinnedMesh)for(var c=0;c<a.skeleton.bones.length;c++)b.push(a.skeleton.bones[c]);else d(a,b);return b};var d=function(a,b){b.push(a);for(var c=0;c<a.children.length;c++)d(a.children[c],b)},e=function(a){if(a.initialized!==!0){for(var b=0;b<a.hierarchy.length;b++){for(var c=0;c<a.hierarchy[b].keys.length;c++)if(a.hierarchy[b].keys[c].time<0&&(a.hierarchy[b].keys[c].time=0),void 0!==a.hierarchy[b].keys[c].rot&&!(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)){var d=a.hierarchy[b].keys[c].rot;a.hierarchy[b].keys[c].rot=(new THREE.Quaternion).fromArray(d)}if(a.hierarchy[b].keys.length&&void 0!==a.hierarchy[b].keys[0].morphTargets){for(var e={},c=0;c<a.hierarchy[b].keys.length;c++)for(var f=0;f<a.hierarchy[b].keys[c].morphTargets.length;f++){var g=a.hierarchy[b].keys[c].morphTargets[f];e[g]=-1}a.hierarchy[b].usedMorphTargets=e;for(var c=0;c<a.hierarchy[b].keys.length;c++){var h={};for(var g in e){for(var f=0;f<a.hierarchy[b].keys[c].morphTargets.length;f++)if(a.hierarchy[b].keys[c].morphTargets[f]===g){h[g]=a.hierarchy[b].keys[c].morphTargetsInfluences[f];break}f===a.hierarchy[b].keys[c].morphTargets.length&&(h[g]=0)}a.hierarchy[b].keys[c].morphTargetsInfluences=h}}for(var c=1;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].time===a.hierarchy[b].keys[c-1].time&&(a.hierarchy[b].keys.splice(c,1),c--);for(var c=0;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].index=c}a.initialized=!0}};return c.LINEAR=0,c.CATMULLROM=1,c.CATMULLROM_FORWARD=2,c}(),THREE.Animation=function(a,b){this.root=a,this.data=THREE.AnimationHandler.get(b),this.hierarchy=THREE.AnimationHandler.parse(a),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype.keyTypes=["pos","rot","scl"],THREE.Animation.prototype.play=function(a,b){
this.currentTime=void 0!==a?a:0,this.weight=void 0!==b?b:1,this.isPlaying=!0,this.isPaused=!1,this.reset(),THREE.AnimationHandler.addToUpdate(this)},THREE.Animation.prototype.pause=function(){this.isPaused===!0?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this)},THREE.Animation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;b>a;a++){var c=this.hierarchy[a];c.matrixAutoUpdate=!0,void 0===c.animationCache&&(c.animationCache={}),void 0===c.animationCache[this.data.name]&&(c.animationCache[this.data.name]={},c.animationCache[this.data.name].prevKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].nextKey={pos:0,rot:0,scl:0},c.animationCache[this.data.name].originalMatrix=c instanceof THREE.Bone?c.skinMatrix:c.matrix);for(var d=c.animationCache[this.data.name],e=0;3>e;e++){for(var f=this.keyTypes[e],g=this.data.hierarchy[a].keys[0],h=this.getNextKeyWith(f,a,1);h.time<this.currentTime&&h.index>g.index;)g=h,h=this.getNextKeyWith(f,a,h.index+1);d.prevKey[f]=g,d.nextKey[f]=h}}},THREE.Animation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Quaternion,e=function(a,b){var c,d,e,g,h,i,j,k,l,m=[],n=[];return c=(a.length-1)*b,d=Math.floor(c),e=c-d,m[0]=0===d?d:d-1,m[1]=d,m[2]=d>a.length-2?d:d+1,m[3]=d>a.length-3?d:d+2,i=a[m[0]],j=a[m[1]],k=a[m[2]],l=a[m[3]],g=e*e,h=e*g,n[0]=f(i[0],j[0],k[0],l[0],e,g,h),n[1]=f(i[1],j[1],k[1],l[1],e,g,h),n[2]=f(i[2],j[2],k[2],l[2],e,g,h),n},f=function(a,b,c,d,e,f,g){var h=.5*(c-a),i=.5*(d-b);return(2*(b-c)+h+i)*g+(-3*(b-c)-2*h-i)*f+h*e+b};return function(f){if(this.isPlaying!==!1&&(this.currentTime+=f*this.timeScale,0!==this.weight)){var g,h=this.data.length;if(this.loop===!0&&this.currentTime>h)this.currentTime%=h,this.reset();else if(this.loop===!1&&this.currentTime>h)return void this.stop();for(var i=0,j=this.hierarchy.length;j>i;i++)for(var k=this.hierarchy[i],l=k.animationCache[this.data.name],m=0;3>m;m++){var n=this.keyTypes[m],o=l.prevKey[n],p=l.nextKey[n];if(p.time<=this.currentTime){for(o=this.data.hierarchy[i].keys[0],p=this.getNextKeyWith(n,i,1);p.time<this.currentTime&&p.index>o.index;)o=p,p=this.getNextKeyWith(n,i,p.index+1);l.prevKey[n]=o,l.nextKey[n]=p}k.matrixAutoUpdate=!0,k.matrixWorldNeedsUpdate=!0;var q=(this.currentTime-o.time)/(p.time-o.time),r=o[n],s=p[n];if(0>q&&(q=0),q>1&&(q=1),"pos"===n){if(g=k.position,this.interpolationType===THREE.AnimationHandler.LINEAR)if(c.x=r[0]+(s[0]-r[0])*q,c.y=r[1]+(s[1]-r[1])*q,c.z=r[2]+(s[2]-r[2])*q,k instanceof THREE.Bone){var t=this.weight/(this.weight+k.accumulatedPosWeight);g.lerp(c,t),k.accumulatedPosWeight+=this.weight}else g=c;else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){a[0]=this.getPrevKeyWith("pos",i,o.index-1).pos,a[1]=r,a[2]=s,a[3]=this.getNextKeyWith("pos",i,p.index+1).pos,q=.33*q+.33;var u=e(a,q);if(k instanceof THREE.Bone){var t=this.weight/(this.weight+k.accumulatedPosWeight);k.accumulatedPosWeight+=this.weight}else var t=1;if(g.x=g.x+(u[0]-g.x)*t,g.y=g.y+(u[1]-g.y)*t,g.z=g.z+(u[2]-g.z)*t,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){var v=e(a,1.01*q);b.set(v[0],v[1],v[2]),b.sub(g),b.y=0,b.normalize();var w=Math.atan2(b.x,b.z);k.rotation.set(0,w,0)}}}else if("rot"===n)if(THREE.Quaternion.slerp(r,s,d,q),k instanceof THREE.Bone)if(0===k.accumulatedRotWeight)k.quaternion.copy(d),k.accumulatedRotWeight=this.weight;else{var t=this.weight/(this.weight+k.accumulatedRotWeight);THREE.Quaternion.slerp(k.quaternion,d,k.quaternion,t),k.accumulatedRotWeight+=this.weight}else k.quaternion.copy(d);else if("scl"===n)if(g=k.scale,c.x=r[0]+(s[0]-r[0])*q,c.y=r[1]+(s[1]-r[1])*q,c.z=r[2]+(s[2]-r[2])*q,k instanceof THREE.Bone){var t=this.weight/(this.weight+k.accumulatedSclWeight);g.lerp(c,t),k.accumulatedSclWeight+=this.weight}else g=c}return!0}}}(),THREE.Animation.prototype.getNextKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c=c<d.length-1?c:d.length-1:c%=d.length;c<d.length;c++)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c>0?c:0:c>=0?c:c+d.length;c>=0;c--)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[d.length-1]},THREE.KeyFrameAnimation=function(a,b){this.root=a,this.data=THREE.AnimationHandler.get(b),this.hierarchy=THREE.AnimationHandler.parse(a),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var c=0,d=this.hierarchy.length;d>c;c++){var e=this.data.hierarchy[c].keys,f=this.data.hierarchy[c].sids,g=this.hierarchy[c];if(e.length&&f){for(var h=0;h<f.length;h++){var i=f[h],j=this.getNextKeyWith(i,c,0);j&&j.apply(i)}g.matrixAutoUpdate=!1,this.data.hierarchy[c].node.updateMatrix(),g.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(a){if(this.currentTime=void 0!==a?a:0,this.isPlaying===!1){this.isPlaying=!0;var b,c,d,e=this.hierarchy.length;for(b=0;e>b;b++){c=this.hierarchy[b],d=this.data.hierarchy[b],void 0===d.animationCache&&(d.animationCache={},d.animationCache.prevKey=null,d.animationCache.nextKey=null,d.animationCache.originalMatrix=c instanceof THREE.Bone?c.skinMatrix:c.matrix);var f=this.data.hierarchy[b].keys;f.length&&(d.animationCache.prevKey=f[0],d.animationCache.nextKey=f[1],this.startTime=Math.min(f[0].time,this.startTime),this.endTime=Math.max(f[f.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var d=c.animationCache.originalMatrix;b instanceof THREE.Bone?(d.copy(b.skinMatrix),b.skinMatrix=d):(d.copy(b.matrix),b.matrix=d),delete c.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(a){if(this.isPlaying!==!1){this.currentTime+=a*this.timeScale;var b=this.data.length;this.loop===!0&&this.currentTime>b&&(this.currentTime%=b),this.currentTime=Math.min(this.currentTime,b);for(var c=0,d=this.hierarchy.length;d>c;c++){var e=this.hierarchy[c],f=this.data.hierarchy[c],g=f.keys,h=f.animationCache;if(g.length){var i=h.prevKey,j=h.nextKey;if(j.time<=this.currentTime){for(;j.time<this.currentTime&&j.index>i.index;)i=j,j=g[i.index+1];h.prevKey=i,h.nextKey=j}j.time>=this.currentTime?i.interpolate(j,this.currentTime):i.interpolate(j,j.time),this.data.hierarchy[c].node.updateMatrix(),e.matrixWorldNeedsUpdate=!0}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c%=d.length;c<d.length;c++)if(d[c].hasTarget(a))return d[c];return d[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=c>=0?c:c+d.length;c>=0;c--)if(d[c].hasTarget(a))return d[c];return d[d.length-1]},THREE.MorphAnimation=function(a){this.mesh=a,this.frames=a.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var a=0,b=0;return function(c){if(this.isPlaying!==!1){this.currentTime+=c,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var d=this.duration/this.frames,e=Math.floor(this.currentTime/d);e!=b&&(this.mesh.morphTargetInfluences[a]=0,this.mesh.morphTargetInfluences[b]=1,this.mesh.morphTargetInfluences[e]=0,a=b,b=e),this.mesh.morphTargetInfluences[e]=this.currentTime%d/d,this.mesh.morphTargetInfluences[a]=1-this.mesh.morphTargetInfluences[e]}}}()},THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var d=90,e=1,f=new THREE.PerspectiveCamera(d,e,a,b);f.up.set(0,-1,0),f.lookAt(new THREE.Vector3(1,0,0)),this.add(f);var g=new THREE.PerspectiveCamera(d,e,a,b);g.up.set(0,-1,0),g.lookAt(new THREE.Vector3(-1,0,0)),this.add(g);var h=new THREE.PerspectiveCamera(d,e,a,b);h.up.set(0,0,1),h.lookAt(new THREE.Vector3(0,1,0)),this.add(h);var i=new THREE.PerspectiveCamera(d,e,a,b);i.up.set(0,0,-1),i.lookAt(new THREE.Vector3(0,-1,0)),this.add(i);var j=new THREE.PerspectiveCamera(d,e,a,b);j.up.set(0,-1,0),j.lookAt(new THREE.Vector3(0,0,1)),this.add(j);var k=new THREE.PerspectiveCamera(d,e,a,b);k.up.set(0,-1,0),k.lookAt(new THREE.Vector3(0,0,-1)),this.add(k),this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(a,b){var c=this.renderTarget,d=c.generateMipmaps;c.generateMipmaps=!1,c.activeCubeFace=0,a.render(b,f,c),c.activeCubeFace=1,a.render(b,g,c),c.activeCubeFace=2,a.render(b,h,c),c.activeCubeFace=3,a.render(b,i,c),c.activeCubeFace=4,a.render(b,j,c),c.generateMipmaps=d,c.activeCubeFace=5,a.render(b,k,c)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CombinedCamera=function(a,b,c,d,e,f,g){THREE.Camera.call(this),this.fov=c,this.left=-a/2,this.right=a/2,this.top=b/2,this.bottom=-b/2,this.cameraO=new THREE.OrthographicCamera(a/-2,a/2,b/2,b/-2,f,g),this.cameraP=new THREE.PerspectiveCamera(c,a/b,d,e),this.zoom=1,this.toPerspective()},THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype),THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near,this.far=this.cameraP.far,this.cameraP.fov=this.fov/this.zoom,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},THREE.CombinedCamera.prototype.toOrthographic=function(){var a=this.fov,b=this.cameraP.aspect,c=this.cameraP.near,d=this.cameraP.far,e=(c+d)/2,f=Math.tan(a/2)*e,g=2*f,h=g*b,i=h/2;f/=this.zoom,i/=this.zoom,this.cameraO.left=-i,this.cameraO.right=i,this.cameraO.top=f,this.cameraO.bottom=-f,this.cameraO.updateProjectionMatrix(),this.near=this.cameraO.near,this.far=this.cameraO.far,this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},THREE.CombinedCamera.prototype.setSize=function(a,b){this.cameraP.aspect=a/b,this.left=-a/2,this.right=a/2,this.top=b/2,this.bottom=-b/2},THREE.CombinedCamera.prototype.setFov=function(a){this.fov=a,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},THREE.CombinedCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);var c=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));return this.setFov(c),c},THREE.CombinedCamera.prototype.setZoom=function(a){this.zoom=a,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.BoxGeometry=function(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,i){var j,k,l,m=h.widthSegments,n=h.heightSegments,o=e/2,p=f/2,q=h.vertices.length;"x"===a&&"y"===b||"y"===a&&"x"===b?j="z":"x"===a&&"z"===b||"z"===a&&"x"===b?(j="y",n=h.depthSegments):("z"===a&&"y"===b||"y"===a&&"z"===b)&&(j="x",m=h.depthSegments);var r=m+1,s=n+1,t=e/m,u=f/n,v=new THREE.Vector3;for(v[j]=g>0?1:-1,l=0;s>l;l++)for(k=0;r>k;k++){var w=new THREE.Vector3;w[a]=(k*t-o)*c,w[b]=(l*u-p)*d,w[j]=g,h.vertices.push(w)}for(l=0;n>l;l++)for(k=0;m>k;k++){var x=k+r*l,y=k+r*(l+1),z=k+1+r*(l+1),A=k+1+r*l,B=new THREE.Vector2(k/m,1-l/n),C=new THREE.Vector2(k/m,1-(l+1)/n),D=new THREE.Vector2((k+1)/m,1-(l+1)/n),E=new THREE.Vector2((k+1)/m,1-l/n),F=new THREE.Face3(x+q,y+q,A+q);F.normal.copy(v),F.vertexNormals.push(v.clone(),v.clone(),v.clone()),F.materialIndex=i,h.faces.push(F),h.faceVertexUvs[0].push([B,C,E]),F=new THREE.Face3(y+q,z+q,A+q),F.normal.copy(v),F.vertexNormals.push(v.clone(),v.clone(),v.clone()),F.materialIndex=i,h.faces.push(F),h.faceVertexUvs[0].push([C.clone(),D,E.clone()])}}THREE.Geometry.call(this),this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f},this.widthSegments=d||1,this.heightSegments=e||1,this.depthSegments=f||1;var h=this,i=a/2,j=b/2,k=c/2;g("z","y",-1,-1,c,b,i,0),g("z","y",1,-1,c,b,-i,1),g("x","z",1,1,a,c,j,2),g("x","z",1,-1,a,c,-j,3),g("x","y",1,-1,a,b,k,4),g("x","y",-1,-1,a,b,-k,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this),this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d},a=a||50,b=void 0!==b?Math.max(3,b):8,c=void 0!==c?c:0,d=void 0!==d?d:2*Math.PI;var e,f=[],g=new THREE.Vector3,h=new THREE.Vector2(.5,.5);for(this.vertices.push(g),f.push(h),e=0;b>=e;e++){var i=new THREE.Vector3,j=c+e/b*d;i.x=a*Math.cos(j),i.y=a*Math.sin(j),this.vertices.push(i),f.push(new THREE.Vector2((i.x/a+1)/2,(i.y/a+1)/2))}var k=new THREE.Vector3(0,0,1);for(e=1;b>=e;e++)this.faces.push(new THREE.Face3(e,e+1,0,[k.clone(),k.clone(),k.clone()])),this.faceVertexUvs[0].push([f[e].clone(),f[e+1].clone(),h.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=function(a,b,c,d,e,f){return console.warn("DEPRECATED: THREE.CubeGeometry is deprecated. Use THREE.BoxGeometry instead."),new THREE.BoxGeometry(a,b,c,d,e,f)},THREE.CylinderGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this),this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f},a=void 0!==a?a:20,b=void 0!==b?b:20,c=void 0!==c?c:100,d=d||8,e=e||1,f=void 0!==f?f:!1;var g,h,i=c/2,j=[],k=[];for(h=0;e>=h;h++){var l=[],m=[],n=h/e,o=n*(b-a)+a;for(g=0;d>=g;g++){var p=g/d,q=new THREE.Vector3;q.x=o*Math.sin(p*Math.PI*2),q.y=-n*c+i,q.z=o*Math.cos(p*Math.PI*2),this.vertices.push(q),l.push(this.vertices.length-1),m.push(new THREE.Vector2(p,1-n))}j.push(l),k.push(m)}var r,s,t=(b-a)/c;for(g=0;d>g;g++)for(0!==a?(r=this.vertices[j[0][g]].clone(),s=this.vertices[j[0][g+1]].clone()):(r=this.vertices[j[1][g]].clone(),s=this.vertices[j[1][g+1]].clone()),r.setY(Math.sqrt(r.x*r.x+r.z*r.z)*t).normalize(),s.setY(Math.sqrt(s.x*s.x+s.z*s.z)*t).normalize(),h=0;e>h;h++){var u=j[h][g],v=j[h+1][g],w=j[h+1][g+1],x=j[h][g+1],y=r.clone(),z=r.clone(),A=s.clone(),B=s.clone(),C=k[h][g].clone(),D=k[h+1][g].clone(),E=k[h+1][g+1].clone(),F=k[h][g+1].clone();this.faces.push(new THREE.Face3(u,v,x,[y,z,B])),this.faceVertexUvs[0].push([C,D,F]),this.faces.push(new THREE.Face3(v,w,x,[z.clone(),A,B.clone()])),this.faceVertexUvs[0].push([D.clone(),E,F.clone()])}if(f===!1&&a>0)for(this.vertices.push(new THREE.Vector3(0,i,0)),g=0;d>g;g++){var u=j[0][g],v=j[0][g+1],w=this.vertices.length-1,y=new THREE.Vector3(0,1,0),z=new THREE.Vector3(0,1,0),A=new THREE.Vector3(0,1,0),C=k[0][g].clone(),D=k[0][g+1].clone(),E=new THREE.Vector2(D.x,0);this.faces.push(new THREE.Face3(u,v,w,[y,z,A])),this.faceVertexUvs[0].push([C,D,E])}if(f===!1&&b>0)for(this.vertices.push(new THREE.Vector3(0,-i,0)),g=0;d>g;g++){var u=j[h][g+1],v=j[h][g],w=this.vertices.length-1,y=new THREE.Vector3(0,-1,0),z=new THREE.Vector3(0,-1,0),A=new THREE.Vector3(0,-1,0),C=k[h][g+1].clone(),D=k[h][g].clone(),E=new THREE.Vector2(D.x,1);this.faces.push(new THREE.Face3(u,v,w,[y,z,A])),this.faceVertexUvs[0].push([C,D,E])}this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(a,b){return"undefined"==typeof a?void(a=[]):(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.shapebb=a[a.length-1].getBoundingBox(),this.addShapeList(a,b),void this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;c>d;d++){var e=a[d];this.addShape(e,b)}},THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){return b||console.log("die"),b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d,e,f=1e-10,g=THREE.Math.sign,h=1,i=a.x-b.x,j=a.y-b.y,k=c.x-a.x,l=c.y-a.y,m=i*i+j*j,n=i*l-j*k;if(Math.abs(n)>f){var o=Math.sqrt(m),p=Math.sqrt(k*k+l*l),q=b.x-j/o,r=b.y+i/o,s=c.x-l/p,t=c.y+k/p,u=((s-q)*l-(t-r)*k)/(i*l-j*k);d=q+i*u-a.x,e=r+j*u-a.y;var v=d*d+e*e;if(2>=v)return new THREE.Vector2(d,e);h=Math.sqrt(v/2)}else{var w=!1;i>f?k>f&&(w=!0):-f>i?-f>k&&(w=!0):g(j)==g(l)&&(w=!0),w?(d=-j,e=i,h=Math.sqrt(m)):(d=i,e=j,h=Math.sqrt(m/2))}return new THREE.Vector2(d/h,e/h)}function e(){if(t){var a=0,b=S*a;for(V=0;T>V;V++)R=K[V],i(R[2]+b,R[1]+b,R[0]+b,!0);for(a=v+2*s,b=S*a,V=0;T>V;V++)R=K[V],i(R[0]+b,R[1]+b,R[2]+b,!1)}else{for(V=0;T>V;V++)R=K[V],i(R[2],R[1],R[0],!0);for(V=0;T>V;V++)R=K[V],i(R[0]+S*v,R[1]+S*v,R[2]+S*v,!1)}}function f(){var a=0;for(g(L,a),a+=L.length,C=0,D=I.length;D>C;C++)B=I[C],g(B,a),a+=B.length}function g(a,b){var c,d;for(V=a.length;--V>=0;){c=V,d=V-1,0>d&&(d=a.length-1);var e=0,f=v+2*s;for(e=0;f>e;e++){var g=S*e,h=S*(e+1),i=b+c+g,k=b+d+g,l=b+d+h,m=b+c+h;j(i,k,l,m,a,e,f,c,d)}}}function h(a,b,c){E.vertices.push(new THREE.Vector3(a,b,c))}function i(c,d,e,f){c+=F,d+=F,e+=F,E.faces.push(new THREE.Face3(c,d,e,null,null,y));var g=f?A.generateBottomUV(E,a,b,c,d,e):A.generateTopUV(E,a,b,c,d,e);E.faceVertexUvs[0].push(g)}function j(c,d,e,f,g,h,i,j,k){c+=F,d+=F,e+=F,f+=F,E.faces.push(new THREE.Face3(c,d,f,null,null,z)),E.faces.push(new THREE.Face3(d,e,f,null,null,z));var l=A.generateSideWallUV(E,a,g,b,c,d,e,f,h,i,j,k);E.faceVertexUvs[0].push([l[0],l[1],l[3]]),E.faceVertexUvs[0].push([l[1],l[2],l[3]])}var k,l,m,n,o,p=void 0!==b.amount?b.amount:100,q=void 0!==b.bevelThickness?b.bevelThickness:6,r=void 0!==b.bevelSize?b.bevelSize:q-2,s=void 0!==b.bevelSegments?b.bevelSegments:3,t=void 0!==b.bevelEnabled?b.bevelEnabled:!0,u=void 0!==b.curveSegments?b.curveSegments:12,v=void 0!==b.steps?b.steps:1,w=b.extrudePath,x=!1,y=b.material,z=b.extrudeMaterial,A=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;this.shapebb;w&&(k=w.getSpacedPoints(v),x=!0,t=!1,l=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(w,v,!1),m=new THREE.Vector3,n=new THREE.Vector3,o=new THREE.Vector3),t||(s=0,q=0,r=0);var B,C,D,E=this,F=this.vertices.length,G=a.extractPoints(u),H=G.shape,I=G.holes,J=!THREE.Shape.Utils.isClockWise(H);if(J){for(H=H.reverse(),C=0,D=I.length;D>C;C++)B=I[C],THREE.Shape.Utils.isClockWise(B)&&(I[C]=B.reverse());J=!1}var K=THREE.Shape.Utils.triangulateShape(H,I),L=H;for(C=0,D=I.length;D>C;C++)B=I[C],H=H.concat(B);for(var M,N,O,P,Q,R,S=H.length,T=K.length,U=(L.length,180/Math.PI,[]),V=0,W=L.length,X=W-1,Y=V+1;W>V;V++,X++,Y++){X===W&&(X=0),Y===W&&(Y=0);L[V],L[X],L[Y];U[V]=d(L[V],L[X],L[Y])}var Z,$=[],_=U.concat();for(C=0,D=I.length;D>C;C++){for(B=I[C],Z=[],V=0,W=B.length,X=W-1,Y=V+1;W>V;V++,X++,Y++)X===W&&(X=0),Y===W&&(Y=0),Z[V]=d(B[V],B[X],B[Y]);$.push(Z),_=_.concat(Z)}for(M=0;s>M;M++){for(O=M/s,P=q*(1-O),N=r*Math.sin(O*Math.PI/2),V=0,W=L.length;W>V;V++)Q=c(L[V],U[V],N),h(Q.x,Q.y,-P);for(C=0,D=I.length;D>C;C++)for(B=I[C],Z=$[C],V=0,W=B.length;W>V;V++)Q=c(B[V],Z[V],N),h(Q.x,Q.y,-P)}for(N=r,V=0;S>V;V++)Q=t?c(H[V],_[V],N):H[V],x?(n.copy(l.normals[0]).multiplyScalar(Q.x),m.copy(l.binormals[0]).multiplyScalar(Q.y),o.copy(k[0]).add(n).add(m),h(o.x,o.y,o.z)):h(Q.x,Q.y,0);var aa;for(aa=1;v>=aa;aa++)for(V=0;S>V;V++)Q=t?c(H[V],_[V],N):H[V],x?(n.copy(l.normals[aa]).multiplyScalar(Q.x),m.copy(l.binormals[aa]).multiplyScalar(Q.y),o.copy(k[aa]).add(n).add(m),h(o.x,o.y,o.z)):h(Q.x,Q.y,p/v*aa);for(M=s-1;M>=0;M--){for(O=M/s,P=q*(1-O),N=r*Math.sin(O*Math.PI/2),V=0,W=L.length;W>V;V++)Q=c(L[V],U[V],N),h(Q.x,Q.y,p+P);for(C=0,D=I.length;D>C;C++)for(B=I[C],Z=$[C],V=0,W=B.length;W>V;V++)Q=c(B[V],Z[V],N),x?h(Q.x,Q.y+k[v-1].y,k[v-1].x+P):h(Q.x,Q.y,p+P)}e(),f()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d,e,f){var g=a.vertices[d].x,h=a.vertices[d].y,i=a.vertices[e].x,j=a.vertices[e].y,k=a.vertices[f].x,l=a.vertices[f].y;return[new THREE.Vector2(g,h),new THREE.Vector2(i,j),new THREE.Vector2(k,l)]},generateBottomUV:function(a,b,c,d,e,f){return this.generateTopUV(a,b,c,d,e,f)},generateSideWallUV:function(a,b,c,d,e,f,g,h,i,j,k,l){var m=a.vertices[e].x,n=a.vertices[e].y,o=a.vertices[e].z,p=a.vertices[f].x,q=a.vertices[f].y,r=a.vertices[f].z,s=a.vertices[g].x,t=a.vertices[g].y,u=a.vertices[g].z,v=a.vertices[h].x,w=a.vertices[h].y,x=a.vertices[h].z;return Math.abs(n-q)<.01?[new THREE.Vector2(m,1-o),new THREE.Vector2(p,1-r),new THREE.Vector2(s,1-u),new THREE.Vector2(v,1-x)]:[new THREE.Vector2(n,1-o),new THREE.Vector2(q,1-r),new THREE.Vector2(t,1-u),new THREE.Vector2(w,1-x)]}},THREE.ExtrudeGeometry.__v1=new THREE.Vector2,THREE.ExtrudeGeometry.__v2=new THREE.Vector2,THREE.ExtrudeGeometry.__v3=new THREE.Vector2,THREE.ExtrudeGeometry.__v4=new THREE.Vector2,THREE.ExtrudeGeometry.__v5=new THREE.Vector2,THREE.ExtrudeGeometry.__v6=new THREE.Vector2,THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this),a instanceof Array==!1&&(a=[a]),this.shapebb=a[a.length-1].getBoundingBox(),this.addShapeList(a,b),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;d>c;c++)this.addShape(a[c],b);return this},THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c,d,e,f=void 0!==b.curveSegments?b.curveSegments:12,g=b.material,h=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,i=(this.shapebb,this.vertices.length),j=a.extractPoints(f),k=j.shape,l=j.holes,m=!THREE.Shape.Utils.isClockWise(k);if(m){for(k=k.reverse(),c=0,d=l.length;d>c;c++)e=l[c],THREE.Shape.Utils.isClockWise(e)&&(l[c]=e.reverse());m=!1}var n=THREE.Shape.Utils.triangulateShape(k,l),o=k;for(c=0,d=l.length;d>c;c++)e=l[c],k=k.concat(e);var p,q,r=k.length,s=n.length;o.length;for(c=0;r>c;c++)p=k[c],this.vertices.push(new THREE.Vector3(p.x,p.y,0));for(c=0;s>c;c++){q=n[c];var t=q[0]+i,u=q[1]+i,v=q[2]+i;this.faces.push(new THREE.Face3(t,u,v,null,null,g)),this.faceVertexUvs[0].push(h.generateBottomUV(this,a,b,t,u,v))}},THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this),b=b||12,c=c||0,d=d||2*Math.PI;for(var e=1/(a.length-1),f=1/b,g=0,h=b;h>=g;g++)for(var i=c+g*f*d,j=Math.cos(i),k=Math.sin(i),l=0,m=a.length;m>l;l++){var n=a[l],o=new THREE.Vector3;o.x=j*n.x-k*n.y,o.y=k*n.x+j*n.y,o.z=n.z,this.vertices.push(o)}for(var p=a.length,g=0,h=b;h>g;g++)for(var l=0,m=a.length-1;m>l;l++){var q=l+p*g,r=q,s=q+p,j=q+1+p,t=q+1,u=g*f,v=l*e,w=u+f,x=v+e;this.faces.push(new THREE.Face3(r,s,t)),this.faceVertexUvs[0].push([new THREE.Vector2(u,v),new THREE.Vector2(w,v),new THREE.Vector2(u,x)]),this.faces.push(new THREE.Face3(s,j,t)),this.faceVertexUvs[0].push([new THREE.Vector2(w,v),new THREE.Vector2(w,x),new THREE.Vector2(u,x)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this),this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e,f,g=a/2,h=b/2,i=c||1,j=d||1,k=i+1,l=j+1,m=a/i,n=b/j,o=new THREE.Vector3(0,0,1);for(f=0;l>f;f++){var p=f*n-h;for(e=0;k>e;e++){var q=e*m-g;this.vertices.push(new THREE.Vector3(q,-p,0))}}for(f=0;j>f;f++)for(e=0;i>e;e++){var r=e+k*f,s=e+k*(f+1),t=e+1+k*(f+1),u=e+1+k*f,v=new THREE.Vector2(e/i,1-f/j),w=new THREE.Vector2(e/i,1-(f+1)/j),x=new THREE.Vector2((e+1)/i,1-(f+1)/j),y=new THREE.Vector2((e+1)/i,1-f/j),z=new THREE.Face3(r,s,u);z.normal.copy(o),z.vertexNormals.push(o.clone(),o.clone(),o.clone()),this.faces.push(z),this.faceVertexUvs[0].push([v,w,y]),z=new THREE.Face3(s,t,u),z.normal.copy(o),z.vertexNormals.push(o.clone(),o.clone(),o.clone()),this.faces.push(z),this.faceVertexUvs[0].push([w.clone(),x,y.clone()])}},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this),a=a||0,b=b||50,e=void 0!==e?e:0,f=void 0!==f?f:2*Math.PI,c=void 0!==c?Math.max(3,c):8,d=void 0!==d?Math.max(3,d):8;var g,h,i=[],j=a,k=(b-a)/d;for(g=0;d>=g;g++){for(h=0;c>=h;h++){var l=new THREE.Vector3,m=e+h/c*f;l.x=j*Math.cos(m),l.y=j*Math.sin(m),this.vertices.push(l),i.push(new THREE.Vector2((l.x/b+1)/2,(l.y/b+1)/2))}j+=k}var n=new THREE.Vector3(0,0,1);for(g=0;d>g;g++){var o=g*c;for(h=0;c>=h;h++){var m=h+o,p=m+g,q=m+c+g,r=m+c+1+g;this.faces.push(new THREE.Face3(p,q,r,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([i[p].clone(),i[q].clone(),i[r].clone()]),p=m+g,q=m+c+1+g,r=m+1+g,this.faces.push(new THREE.Face3(p,q,r,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([i[p].clone(),i[q].clone(),i[r].clone()])}}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,j)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this),this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g},a=a||50,b=Math.max(3,Math.floor(b)||8),c=Math.max(2,Math.floor(c)||6),d=void 0!==d?d:0,e=void 0!==e?e:2*Math.PI,f=void 0!==f?f:0,g=void 0!==g?g:Math.PI;var h,i,j=[],k=[];for(i=0;c>=i;i++){var l=[],m=[];for(h=0;b>=h;h++){var n=h/b,o=i/c,p=new THREE.Vector3;p.x=-a*Math.cos(d+n*e)*Math.sin(f+o*g),p.y=a*Math.cos(f+o*g),p.z=a*Math.sin(d+n*e)*Math.sin(f+o*g),this.vertices.push(p),l.push(this.vertices.length-1),m.push(new THREE.Vector2(n,1-o))}j.push(l),k.push(m)}for(i=0;c>i;i++)for(h=0;b>h;h++){var q=j[i][h+1],r=j[i][h],s=j[i+1][h],t=j[i+1][h+1],u=this.vertices[q].clone().normalize(),v=this.vertices[r].clone().normalize(),w=this.vertices[s].clone().normalize(),x=this.vertices[t].clone().normalize(),y=k[i][h+1].clone(),z=k[i][h].clone(),A=k[i+1][h].clone(),B=k[i+1][h+1].clone();Math.abs(this.vertices[q].y)===a?(y.x=(y.x+z.x)/2,this.faces.push(new THREE.Face3(q,s,t,[u,w,x])),this.faceVertexUvs[0].push([y,A,B])):Math.abs(this.vertices[s].y)===a?(A.x=(A.x+B.x)/2,this.faces.push(new THREE.Face3(q,r,s,[u,v,w])),this.faceVertexUvs[0].push([y,z,A])):(this.faces.push(new THREE.Face3(q,r,t,[u,v,x])),this.faceVertexUvs[0].push([y,z,B]),this.faces.push(new THREE.Face3(r,s,t,[v.clone(),w,x.clone()])),this.faceVertexUvs[0].push([z.clone(),A,B.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(a,b){b=b||{};var c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50,void 0===b.bevelThickness&&(b.bevelThickness=10),void 0===b.bevelSize&&(b.bevelSize=8),void 0===b.bevelEnabled&&(b.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,c,b)},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this),this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e},a=a||100,b=b||40,c=c||8,d=d||6,e=e||2*Math.PI;for(var f=new THREE.Vector3,g=[],h=[],i=0;c>=i;i++)for(var j=0;d>=j;j++){var k=j/d*e,l=i/c*Math.PI*2;f.x=a*Math.cos(k),f.y=a*Math.sin(k);var m=new THREE.Vector3;m.x=(a+b*Math.cos(l))*Math.cos(k),m.y=(a+b*Math.cos(l))*Math.sin(k),m.z=b*Math.sin(l),this.vertices.push(m),g.push(new THREE.Vector2(j/d,i/c)),h.push(m.clone().sub(f).normalize())}for(var i=1;c>=i;i++)for(var j=1;d>=j;j++){var n=(d+1)*i+j-1,o=(d+1)*(i-1)+j-1,p=(d+1)*(i-1)+j,q=(d+1)*i+j,r=new THREE.Face3(n,o,q,[h[n].clone(),h[o].clone(),h[q].clone()]);this.faces.push(r),this.faceVertexUvs[0].push([g[n].clone(),g[o].clone(),g[q].clone()]),r=new THREE.Face3(o,p,q,[h[o].clone(),h[p].clone(),h[q].clone()]),this.faces.push(r),this.faceVertexUvs[0].push([g[o].clone(),g[p].clone(),g[q].clone()])}this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(a,b,c,d,e,f,g){function h(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a),h=b/c*a,i=Math.cos(h),j=d*(2+i)*.5*f,k=d*(2+i)*g*.5,l=e*d*Math.sin(h)*.5;return new THREE.Vector3(j,k,l)}THREE.Geometry.call(this),this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,p:e,q:f,heightScale:g},a=a||100,b=b||40,c=c||64,d=d||8,e=e||2,f=f||3,g=g||1;for(var i=new Array(c),j=new THREE.Vector3,k=new THREE.Vector3,l=new THREE.Vector3,m=0;c>m;++m){i[m]=new Array(d);var n=m/c*2*e*Math.PI,o=h(n,f,e,a,g),p=h(n+.01,f,e,a,g);j.subVectors(p,o),k.addVectors(p,o),l.crossVectors(j,k),k.crossVectors(l,j),l.normalize(),k.normalize();for(var q=0;d>q;++q){var r=q/d*2*Math.PI,s=-b*Math.cos(r),t=b*Math.sin(r),u=new THREE.Vector3;u.x=o.x+s*k.x+t*l.x,u.y=o.y+s*k.y+t*l.y,u.z=o.z+s*k.z+t*l.z,i[m][q]=this.vertices.push(u)-1}}for(var m=0;c>m;++m)for(var q=0;d>q;++q){var v=(m+1)%c,w=(q+1)%d,x=i[m][q],y=i[v][q],z=i[v][w],A=i[m][w],B=new THREE.Vector2(m/c,q/d),C=new THREE.Vector2((m+1)/c,q/d),D=new THREE.Vector2((m+1)/c,(q+1)/d),E=new THREE.Vector2(m/c,(q+1)/d);this.faces.push(new THREE.Face3(x,y,A)),this.faceVertexUvs[0].push([B,C,E]),this.faces.push(new THREE.Face3(y,z,A)),this.faceVertexUvs[0].push([C.clone(),D,E.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(a,b,c,d,e){function f(a,b,c){return B.vertices.push(new THREE.Vector3(a,b,c))-1}THREE.Geometry.call(this),this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e},b=b||64,c=c||1,d=d||8,e=e||!1;var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=[],B=this,C=b+1,D=new THREE.Vector3,E=new THREE.TubeGeometry.FrenetFrames(a,b,e),F=E.tangents,G=E.normals,H=E.binormals;for(this.tangents=F,this.normals=G,this.binormals=H,o=0;C>o;o++)for(A[o]=[],j=o/(C-1),n=a.getPointAt(j),g=F[o],h=G[o],i=H[o],p=0;d>p;p++)k=p/d*2*Math.PI,l=-c*Math.cos(k),m=c*Math.sin(k),D.copy(n),D.x+=l*h.x+m*i.x,D.y+=l*h.y+m*i.y,D.z+=l*h.z+m*i.z,A[o][p]=f(D.x,D.y,D.z);for(o=0;b>o;o++)for(p=0;d>p;p++)q=e?(o+1)%b:o+1,r=(p+1)%d,s=A[o][p],t=A[q][p],u=A[q][r],v=A[o][r],w=new THREE.Vector2(o/b,p/d),x=new THREE.Vector2((o+1)/b,p/d),y=new THREE.Vector2((o+1)/b,(p+1)/d),z=new THREE.Vector2(o/b,(p+1)/d),this.faces.push(new THREE.Face3(s,t,v)),this.faceVertexUvs[0].push([w,x,z]),this.faces.push(new THREE.Face3(t,u,v)),this.faceVertexUvs[0].push([x.clone(),y,z.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(a,b,c){function d(){n[0]=new THREE.Vector3,o[0]=new THREE.Vector3,f=Number.MAX_VALUE,g=Math.abs(m[0].x),
h=Math.abs(m[0].y),i=Math.abs(m[0].z),f>=g&&(f=g,l.set(1,0,0)),f>=h&&(f=h,l.set(0,1,0)),f>=i&&l.set(0,0,1),p.crossVectors(m[0],l).normalize(),n[0].crossVectors(m[0],p),o[0].crossVectors(m[0],n[0])}var e,f,g,h,i,j,k,l=(new THREE.Vector3,new THREE.Vector3),m=(new THREE.Vector3,[]),n=[],o=[],p=new THREE.Vector3,q=new THREE.Matrix4,r=b+1,s=1e-4;for(this.tangents=m,this.normals=n,this.binormals=o,j=0;r>j;j++)k=j/(r-1),m[j]=a.getTangentAt(k),m[j].normalize();for(d(),j=1;r>j;j++)n[j]=n[j-1].clone(),o[j]=o[j-1].clone(),p.crossVectors(m[j-1],m[j]),p.length()>s&&(p.normalize(),e=Math.acos(THREE.Math.clamp(m[j-1].dot(m[j]),-1,1)),n[j].applyMatrix4(q.makeRotationAxis(p,e))),o[j].crossVectors(m[j],n[j]);if(c)for(e=Math.acos(THREE.Math.clamp(n[0].dot(n[r-1]),-1,1)),e/=r-1,m[0].dot(p.crossVectors(n[0],n[r-1]))>0&&(e=-e),j=1;r>j;j++)n[j].applyMatrix4(q.makeRotationAxis(m[j],e*j)),o[j].crossVectors(m[j],n[j])},THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=k.vertices.push(b)-1;var c=h(a)/2/Math.PI+.5,d=i(a)/Math.PI+.5;return b.uv=new THREE.Vector2(c,1-d),b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);k.faces.push(d),t.copy(a).add(b).add(c).divideScalar(3);var e=h(t);k.faceVertexUvs[0].push([j(a.uv,a,e),j(b.uv,b,e),j(c.uv,c,e)])}function g(a,b){for(var c=Math.pow(2,b),d=(Math.pow(4,b),e(k.vertices[a.a])),g=e(k.vertices[a.b]),h=e(k.vertices[a.c]),i=[],j=0;c>=j;j++){i[j]=[];for(var l=e(d.clone().lerp(h,j/c)),m=e(g.clone().lerp(h,j/c)),n=c-j,o=0;n>=o;o++)0==o&&j==c?i[j][o]=l:i[j][o]=e(l.clone().lerp(m,o/n))}for(var j=0;c>j;j++)for(var o=0;2*(c-j)-1>o;o++){var p=Math.floor(o/2);o%2==0?f(i[j][p+1],i[j+1][p],i[j][p]):f(i[j][p+1],i[j+1][p+1],i[j+1][p])}}function h(a){return Math.atan2(a.z,-a.x)}function i(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}function j(a,b,c){return 0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y)),0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+.5,a.y)),a.clone()}THREE.Geometry.call(this),c=c||1,d=d||0;for(var k=this,l=0,m=a.length;m>l;l+=3)e(new THREE.Vector3(a[l],a[l+1],a[l+2]));for(var n=this.vertices,o=[],l=0,p=0,m=b.length;m>l;l+=3,p++){var q=n[b[l]],r=n[b[l+1]],s=n[b[l+2]];o[p]=new THREE.Face3(q.index,r.index,s.index,[q.clone(),r.clone(),s.clone()])}for(var t=new THREE.Vector3,l=0,m=o.length;m>l;l++)g(o[l],d);for(var l=0,m=this.faceVertexUvs[0].length;m>l;l++){var u=this.faceVertexUvs[0][l],v=u[0].x,w=u[1].x,x=u[2].x,y=Math.max(v,Math.max(w,x)),z=Math.min(v,Math.min(w,x));y>.9&&.1>z&&(.2>v&&(u[0].x+=1),.2>w&&(u[1].x+=1),.2>x&&(u[2].x+=1))}for(var l=0,m=this.vertices.length;m>l;l++)this.vertices[l].multiplyScalar(c);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(a,b){this.parameters={radius:a,detail:b};var c=(1+Math.sqrt(5))/2,d=[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],e=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.PolyhedronGeometry.call(this,d,e,a,b)},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(a,b){this.parameters={radius:a,detail:b};var c=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],d=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.PolyhedronGeometry.call(this,c,d,a,b)},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(a,b){var c=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],d=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.PolyhedronGeometry.call(this,c,d,a,b)},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);var d,e,f,g,h,i=this.vertices,j=this.faces,k=this.faceVertexUvs[0],l=b+1;for(d=0;c>=d;d++)for(h=d/c,e=0;b>=e;e++)g=e/b,f=a(g,h),i.push(f);var m,n,o,p,q,r,s,t;for(d=0;c>d;d++)for(e=0;b>e;e++)m=d*l+e,n=d*l+e+1,o=(d+1)*l+e+1,p=(d+1)*l+e,q=new THREE.Vector2(e/b,d/c),r=new THREE.Vector2((e+1)/b,d/c),s=new THREE.Vector2((e+1)/b,(d+1)/c),t=new THREE.Vector2(e/b,(d+1)/c),j.push(new THREE.Face3(m,n,p)),k.push([q,r,t]),j.push(new THREE.Face3(n,o,p)),k.push([r.clone(),s,t.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(a){a=a||1;var b=new THREE.Geometry;b.vertices.push(new THREE.Vector3,new THREE.Vector3(a,0,0),new THREE.Vector3,new THREE.Vector3(0,a,0),new THREE.Vector3,new THREE.Vector3(0,0,a)),b.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));var c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,b,c,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(a,b,c,d,e,f){THREE.Object3D.call(this),void 0===d&&(d=16776960),void 0===c&&(c=1),void 0===e&&(e=.2*c),void 0===f&&(f=.2*e),this.position=b;var g=new THREE.Geometry;g.vertices.push(new THREE.Vector3(0,0,0)),g.vertices.push(new THREE.Vector3(0,1,0)),this.line=new THREE.Line(g,new THREE.LineBasicMaterial({color:d})),this.line.matrixAutoUpdate=!1,this.add(this.line);var h=new THREE.CylinderGeometry(0,.5,1,5,1);h.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),this.cone=new THREE.Mesh(h,new THREE.MeshBasicMaterial({color:d})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(c,e,f)},THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var a,b=new THREE.Vector3;return function(c){c.y>.99999?this.quaternion.set(0,0,0,1):c.y<-.99999?this.quaternion.set(1,0,0,0):(b.set(c.z,0,-c.x).normalize(),a=Math.acos(c.y),this.quaternion.setFromAxisAngle(b,a))}}(),THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a),void 0===c&&(c=.2*b),this.line.scale.set(1,a,1),this.line.updateMatrix(),this.cone.scale.set(c,b,c),this.cone.position.y=a,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.set(a),this.cone.material.color.set(a)},THREE.BoxHelper=function(a){var b=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=b;var c=new THREE.Geometry;c.vertices.push(b[0],b[1],b[1],b[2],b[2],b[3],b[3],b[0],b[4],b[5],b[5],b[6],b[6],b[7],b[7],b[4],b[0],b[4],b[1],b[5],b[2],b[6],b[3],b[7]),THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==a&&this.update(a)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,d=b.boundingBox.max,e=this.vertices;e[0].set(d.x,d.y,d.z),e[1].set(c.x,d.y,d.z),e[2].set(c.x,c.y,d.z),e[3].set(d.x,c.y,d.z),e[4].set(d.x,d.y,c.z),e[5].set(c.x,d.y,c.z),e[6].set(c.x,c.y,c.z),e[7].set(d.x,c.y,c.z),this.geometry.computeBoundingSphere(),this.geometry.verticesNeedUpdate=!0,this.matrixAutoUpdate=!1,this.matrixWorld=a.matrixWorld},THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(a){function b(a,b,d){c(a,d),c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3),d.colors.push(new THREE.Color(b)),void 0===f[a]&&(f[a]=[]),f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={},g=16755200,h=16711680,i=43775,j=16777215,k=3355443;b("n1","n2",g),b("n2","n4",g),b("n4","n3",g),b("n3","n1",g),b("f1","f2",g),b("f2","f4",g),b("f4","f3",g),b("f3","f1",g),b("n1","f1",g),b("n2","f2",g),b("n3","f3",g),b("n4","f4",g),b("p","n1",h),b("p","n2",h),b("p","n3",h),b("p","n4",h),b("u1","u2",i),b("u2","u3",i),b("u3","u1",i),b("c","t",j),b("p","c",k),b("cn1","cn2",k),b("cn3","cn4",k),b("cf1","cf2",k),b("cf3","cf4",k),THREE.Line.call(this,d,e,THREE.LinePieces),this.camera=a,this.matrixWorld=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=f,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function d(d,f,g,h){a.set(f,g,h),c.unprojectVector(a,b);var i=e.pointMap[d];if(void 0!==i)for(var j=0,k=i.length;k>j;j++)e.geometry.vertices[i[j]].copy(a)}var e=this,f=1,g=1;b.projectionMatrix.copy(this.camera.projectionMatrix),d("c",0,0,-1),d("t",0,0,1),d("n1",-f,-g,-1),d("n2",f,-g,-1),d("n3",-f,g,-1),d("n4",f,g,-1),d("f1",-f,-g,1),d("f2",f,-g,1),d("f3",-f,g,1),d("f4",f,g,1),d("u1",.7*f,1.1*g,-1),d("u2",.7*-f,1.1*g,-1),d("u3",0,2*g,-1),d("cf1",-f,0,1),d("cf2",f,0,1),d("cf3",0,-g,1),d("cf4",0,g,1),d("cn1",-f,0,-1),d("cn2",f,0,-1),d("cn3",0,-g,-1),d("cn4",0,g,-1),this.geometry.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrixWorld=a.matrixWorld,this.matrixAutoUpdate=!1,b=b||1;var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-b,b,0),new THREE.Vector3(b,b,0),new THREE.Vector3(b,-b,0),new THREE.Vector3(-b,-b,0),new THREE.Vector3(-b,b,0));var d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(c,d),this.add(this.lightPlane),c=new THREE.Geometry,c.vertices.push(new THREE.Vector3,new THREE.Vector3),d=new THREE.LineBasicMaterial({fog:!1}),d.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(c,d),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld),b.setFromMatrixPosition(this.light.target.matrixWorld),c.subVectors(b,a),this.lightPlane.lookAt(c),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(c),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(a,b){var c=void 0!==b?b:16777215,d=[0,0],e={},f=function(a,b){return a-b},g=["a","b","c"],h=new THREE.BufferGeometry,i=a.geometry.clone();i.mergeVertices(),i.computeFaceNormals();for(var j=i.vertices,k=i.faces,l=0,m=0,n=k.length;n>m;m++)for(var o=k[m],p=0;3>p;p++){d[0]=o[g[p]],d[1]=o[g[(p+1)%3]],d.sort(f);var q=d.toString();void 0===e[q]?(e[q]={vert1:d[0],vert2:d[1],face1:m,face2:void 0},l++):e[q].face2=m}h.addAttribute("position",new THREE.Float32Attribute(2*l,3));var r=h.attributes.position.array,s=0;for(var q in e){var t=e[q];if(void 0===t.face2||k[t.face1].normal.dot(k[t.face2].normal)<.9999){var u=j[t.vert1];r[s++]=u.x,r[s++]=u.y,r[s++]=u.z,u=j[t.vert2],r[s++]=u.x,r[s++]=u.y,r[s++]=u.z}}THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:c}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=a.matrixWorld},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a,this.size=void 0!==b?b:1;for(var e=void 0!==c?c:16776960,f=void 0!==d?d:1,g=new THREE.Geometry,h=this.object.geometry.faces,i=0,j=h.length;j>i;i++)g.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,g,new THREE.LineBasicMaterial({color:e,linewidth:f}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(){var a=this.geometry.vertices,b=this.object,c=b.geometry.vertices,d=b.geometry.faces,e=b.matrixWorld;b.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(e);for(var f=0,g=0,h=d.length;h>f;f++,g+=2){var i=d[f];a[g].copy(c[i.a]).add(c[i.b]).add(c[i.c]).divideScalar(3).applyMatrix4(e),a[g+1].copy(i.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a[g])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var e=-a;a>=e;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var f=0===e?this.color1:this.color2;c.colors.push(f,f,f,f)}THREE.Line.call(this,c,d,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a),this.color2.set(b),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(a,b,c,d){THREE.Object3D.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrixWorld=a.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var e=new THREE.SphereGeometry(b,4,2);e.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var f=0,g=8;g>f;f++)e.faces[f].color=this.colors[4>f?0:1];var h=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(e,h),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(a,b){this.light=a,this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,c,d),this.matrixWorld=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(a){for(var b=a.skeleton,c=new THREE.Geometry,d=0;d<b.bones.length;d++){var e=b.bones[d];e.parent instanceof THREE.Bone&&(c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3),c.colors.push(new THREE.Color(0,0,1)),c.colors.push(new THREE.Color(0,1,0)))}var f=new THREE.LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,transparent:!0});THREE.Line.call(this,c,f,THREE.LinePieces),this.skeleton=b,this.matrixWorld=a.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=0,c=0;c<this.skeleton.bones.length;c++){var d=this.skeleton.bones[c];d.parent instanceof THREE.Bone&&(a.vertices[b].setFromMatrixPosition(d.skinMatrix),a.vertices[b+1].setFromMatrixPosition(d.parent.skinMatrix),b+=2)}a.verticesNeedUpdate=!0,a.computeBoundingSphere()},THREE.SpotLightHelper=function(a){THREE.Object3D.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrixWorld=a.matrixWorld,this.matrixAutoUpdate=!1;var b=new THREE.CylinderGeometry(0,1,1,8,1,!0);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),b.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var c=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(b,c),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1e4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c),a.setFromMatrixPosition(this.light.matrixWorld),b.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(b.sub(a)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a,this.size=void 0!==b?b:1;for(var e=void 0!==c?c:16711680,f=void 0!==d?d:1,g=new THREE.Geometry,h=(a.geometry.vertices,a.geometry.faces),i=0,j=h.length;j>i;i++)for(var k=h[i],l=0,m=k.vertexNormals.length;m>l;l++)g.vertices.push(new THREE.Vector3),g.vertices.push(new THREE.Vector3);THREE.Line.call(this,g,new THREE.LineBasicMaterial({color:e,linewidth:f}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){var c=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var d=this.geometry.vertices,e=this.object.geometry.vertices,f=this.object.geometry.faces,g=this.object.matrixWorld,h=0,i=0,j=f.length;j>i;i++)for(var k=f[i],l=0,m=k.vertexNormals.length;m>l;l++){var n=k[c[l]],o=e[n],p=k.vertexNormals[l];d[h].copy(o).applyMatrix4(g),b.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),b.add(d[h]),h+=1,d[h].copy(b),h+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(a,b,c,d){this.object=a,this.size=void 0!==b?b:1;for(var e=void 0!==c?c:255,f=void 0!==d?d:1,g=new THREE.Geometry,h=(a.geometry.vertices,a.geometry.faces),i=0,j=h.length;j>i;i++)for(var k=h[i],l=0,m=k.vertexTangents.length;m>l;l++)g.vertices.push(new THREE.Vector3),g.vertices.push(new THREE.Vector3);THREE.Line.call(this,g,new THREE.LineBasicMaterial({color:e,linewidth:f}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){var c=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var d=this.geometry.vertices,e=this.object.geometry.vertices,f=this.object.geometry.faces,g=this.object.matrixWorld,h=0,i=0,j=f.length;j>i;i++)for(var k=f[i],l=0,m=k.vertexTangents.length;m>l;l++){var n=k[c[l]],o=e[n],p=k.vertexTangents[l];d[h].copy(o).applyMatrix4(g),b.copy(p).transformDirection(g).multiplyScalar(this.size),b.add(d[h]),h+=1,d[h].copy(b),h+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215,d=[0,0],e={},f=function(a,b){return a-b},g=["a","b","c"],h=new THREE.BufferGeometry;if(a.geometry instanceof THREE.Geometry){for(var i=a.geometry.vertices,j=a.geometry.faces,k=0,l=new Uint32Array(6*j.length),m=0,n=j.length;n>m;m++)for(var o=j[m],p=0;3>p;p++){d[0]=o[g[p]],d[1]=o[g[(p+1)%3]],d.sort(f);var q=d.toString();void 0===e[q]&&(l[2*k]=d[0],l[2*k+1]=d[1],e[q]=!0,k++)}h.addAttribute("position",new THREE.Float32Attribute(2*k,3));for(var r=h.attributes.position.array,m=0,n=k;n>m;m++)for(var p=0;2>p;p++){var s=i[l[2*m+p]],t=6*m+3*p;r[t+0]=s.x,r[t+1]=s.y,r[t+2]=s.z}}else if(a.geometry instanceof THREE.BufferGeometry&&void 0!==a.geometry.attributes.index){for(var i=a.geometry.attributes.position.array,u=a.geometry.attributes.index.array,v=a.geometry.offsets,k=0,l=new Uint32Array(2*u.length),w=0,x=v.length;x>w;++w)for(var y=v[w].start,z=v[w].count,t=v[w].index,m=y,A=y+z;A>m;m+=3)for(var p=0;3>p;p++){d[0]=t+u[m+p],d[1]=t+u[m+(p+1)%3],d.sort(f);var q=d.toString();void 0===e[q]&&(l[2*k]=d[0],l[2*k+1]=d[1],e[q]=!0,k++)}h.addAttribute("position",new THREE.Float32Attribute(2*k,3));for(var r=h.attributes.position.array,m=0,n=k;n>m;m++)for(var p=0;2>p;p++){var t=6*m+3*p,B=3*l[2*m+p];r[t+0]=i[B],r[t+1]=i[B+1],r[t+2]=i[B+2]}}else if(a.geometry instanceof THREE.BufferGeometry){var i=a.geometry.attributes.position.array,k=i.length/3,C=k/3;h.addAttribute("position",new THREE.Float32Attribute(2*k,3));for(var r=h.attributes.position.array,m=0,n=C;n>m;m++)for(var p=0;3>p;p++){var t=18*m+6*p,D=9*m+3*p;r[t+0]=i[D],r[t+1]=i[D+1],r[t+2]=i[D+2];var B=9*m+3*((p+1)%3);r[t+3]=i[B],r[t+4]=i[B+1],r[t+5]=i[B+2]}}THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:c}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=a.matrixWorld},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(a){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==a&&this.add(a,b,c,d,e)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(a,b,c,d,e,f){void 0===b&&(b=-1),void 0===c&&(c=0),void 0===f&&(f=1),void 0===e&&(e=new THREE.Color(16777215)),void 0===d&&(d=THREE.NormalBlending),c=Math.min(c,Math.max(0,c)),this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:1,opacity:f,color:e,blending:d})},THREE.LensFlare.prototype.updateLensFlares=function(){var a,b,c=this.lensFlares.length,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;c>a;a++)b=this.lensFlares[a],b.x=this.positionScreen.x+d*b.distance,b.y=this.positionScreen.y+e*b.distance,b.wantedRotation=b.x*Math.PI*.25,b.rotation+=.25*(b.wantedRotation-b.rotation)},THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b),this.animationsMap={},this.animationsList=[];var c=this.geometry.morphTargets.length,d="__default",e=0,f=c-1,g=c/1;this.createAnimation(d,e,f,g),this.setAnimationWeight(d,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){var e={startFrame:b,endFrame:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=e,this.animationsList.push(e)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b,c=/([a-z]+)(\d+)/,d={},e=this.geometry,f=0,g=e.morphTargets.length;g>f;f++){var h=e.morphTargets[f],i=h.name.match(c);if(i&&i.length>1){var j=i[1];i[2];d[j]||(d[j]={start:1/0,end:-(1/0)});var k=d[j];f<k.start&&(k.start=f),f>k.end&&(k.end=f),b||(b=j)}}for(var j in d){var k=d[j];this.createAnimation(j,k.start,k.end,a)}this.firstAnimation=b},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){var b=this.animationsMap[a];b&&(b.direction=1,b.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){var b=this.animationsMap[a];b&&(b.direction=-1,b.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0,c=this.animationsMap[a];return c&&(b=c.time),b},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1,c=this.animationsMap[a];return c&&(b=c.duration),b},THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("animation["+a+"] undefined")},THREE.MorphBlendMesh.prototype.stopAnimation=function(a){var b=this.animationsMap[a];b&&(b.active=!1)},THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;c>b;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a,d.mirroredLoop?(d.time>d.duration||d.time<0)&&(d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),d.time<0&&(d.time=0,d.directionBackwards=!1)):(d.time=d.time%d.duration,d.time<0&&(d.time+=d.duration));var f=d.startFrame+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),g=d.weight;f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*g,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);var h=d.time%e/e;d.directionBackwards&&(h=1-h),this.morphTargetInfluences[d.currentFrame]=h*g,this.morphTargetInfluences[d.lastFrame]=(1-h)*g}}},THREE.LensFlarePlugin=function(){function a(a,c){var d=b.createProgram(),e=b.createShader(b.FRAGMENT_SHADER),f=b.createShader(b.VERTEX_SHADER),g="precision "+c+" float;\n";return b.shaderSource(e,g+a.fragmentShader),b.shaderSource(f,g+a.vertexShader),b.compileShader(e),b.compileShader(f),b.attachShader(d,e),b.attachShader(d,f),b.linkProgram(d),d}var b,c,d,e={};this.init=function(f){b=f.context,c=f,d=f.getPrecision(),e.vertices=new Float32Array(16),e.faces=new Uint16Array(6);var g=0;e.vertices[g++]=-1,e.vertices[g++]=-1,e.vertices[g++]=0,e.vertices[g++]=0,e.vertices[g++]=1,e.vertices[g++]=-1,e.vertices[g++]=1,e.vertices[g++]=0,e.vertices[g++]=1,e.vertices[g++]=1,e.vertices[g++]=1,e.vertices[g++]=1,e.vertices[g++]=-1,e.vertices[g++]=1,e.vertices[g++]=0,e.vertices[g++]=1,g=0,e.faces[g++]=0,e.faces[g++]=1,e.faces[g++]=2,e.faces[g++]=0,e.faces[g++]=2,e.faces[g++]=3,e.vertexBuffer=b.createBuffer(),e.elementBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,e.vertexBuffer),b.bufferData(b.ARRAY_BUFFER,e.vertices,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,e.elementBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,e.faces,b.STATIC_DRAW),e.tempTexture=b.createTexture(),e.occlusionTexture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,e.tempTexture),b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.bindTexture(b.TEXTURE_2D,e.occlusionTexture),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS)<=0?(e.hasVertexTexture=!1,e.program=a(THREE.ShaderFlares.lensFlare,d)):(e.hasVertexTexture=!0,e.program=a(THREE.ShaderFlares.lensFlareVertexTexture,d)),e.attributes={},e.uniforms={},e.attributes.vertex=b.getAttribLocation(e.program,"position"),e.attributes.uv=b.getAttribLocation(e.program,"uv"),e.uniforms.renderType=b.getUniformLocation(e.program,"renderType"),e.uniforms.map=b.getUniformLocation(e.program,"map"),e.uniforms.occlusionMap=b.getUniformLocation(e.program,"occlusionMap"),e.uniforms.opacity=b.getUniformLocation(e.program,"opacity"),e.uniforms.color=b.getUniformLocation(e.program,"color"),e.uniforms.scale=b.getUniformLocation(e.program,"scale"),e.uniforms.rotation=b.getUniformLocation(e.program,"rotation"),e.uniforms.screenPosition=b.getUniformLocation(e.program,"screenPosition")},this.render=function(a,d,f,g){var h=a.__webglFlares,i=h.length;if(i){var j=new THREE.Vector3,k=g/f,l=.5*f,m=.5*g,n=16/g,o=new THREE.Vector2(n*k,n),p=new THREE.Vector3(1,1,0),q=new THREE.Vector2(1,1),r=e.uniforms,s=e.attributes;b.useProgram(e.program),b.enableVertexAttribArray(e.attributes.vertex),b.enableVertexAttribArray(e.attributes.uv),b.uniform1i(r.occlusionMap,0),b.uniform1i(r.map,1),b.bindBuffer(b.ARRAY_BUFFER,e.vertexBuffer),b.vertexAttribPointer(s.vertex,2,b.FLOAT,!1,16,0),b.vertexAttribPointer(s.uv,2,b.FLOAT,!1,16,8),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,e.elementBuffer),b.disable(b.CULL_FACE),b.depthMask(!1);var t,u,v,w,x;for(t=0;i>t;t++)if(n=16/g,o.set(n*k,n),w=h[t],j.set(w.matrixWorld.elements[12],w.matrixWorld.elements[13],w.matrixWorld.elements[14]),j.applyMatrix4(d.matrixWorldInverse),j.applyProjection(d.projectionMatrix),p.copy(j),q.x=p.x*l+l,q.y=p.y*m+m,e.hasVertexTexture||q.x>0&&q.x<f&&q.y>0&&q.y<g)for(b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,e.tempTexture),b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,q.x-8,q.y-8,16,16,0),b.uniform1i(r.renderType,0),b.uniform2f(r.scale,o.x,o.y),b.uniform3f(r.screenPosition,p.x,p.y,p.z),b.disable(b.BLEND),b.enable(b.DEPTH_TEST),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,e.occlusionTexture),b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,q.x-8,q.y-8,16,16,0),b.uniform1i(r.renderType,1),b.disable(b.DEPTH_TEST),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,e.tempTexture),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0),w.positionScreen.copy(p),w.customUpdateCallback?w.customUpdateCallback(w):w.updateLensFlares(),b.uniform1i(r.renderType,2),b.enable(b.BLEND),u=0,v=w.lensFlares.length;v>u;u++)x=w.lensFlares[u],x.opacity>.001&&x.scale>.001&&(p.x=x.x,p.y=x.y,p.z=x.z,n=x.size*x.scale/g,o.x=n*k,o.y=n,b.uniform3f(r.screenPosition,p.x,p.y,p.z),b.uniform2f(r.scale,o.x,o.y),b.uniform1f(r.rotation,x.rotation),b.uniform1f(r.opacity,x.opacity),b.uniform3f(r.color,x.color.r,x.color.g,x.color.b),c.setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst),c.setTexture(x.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0));b.enable(b.CULL_FACE),b.enable(b.DEPTH_TEST),b.depthMask(!0)}}},THREE.ShadowMapPlugin=function(){function a(a,b){var c=new THREE.DirectionalLight;c.isVirtual=!0,c.onlyShadow=!0,c.castShadow=!0,c.shadowCameraNear=a.shadowCameraNear,c.shadowCameraFar=a.shadowCameraFar,c.shadowCameraLeft=a.shadowCameraLeft,c.shadowCameraRight=a.shadowCameraRight,c.shadowCameraBottom=a.shadowCameraBottom,c.shadowCameraTop=a.shadowCameraTop,c.shadowCameraVisible=a.shadowCameraVisible,c.shadowDarkness=a.shadowDarkness,c.shadowBias=a.shadowCascadeBias[b],c.shadowMapWidth=a.shadowCascadeWidth[b],c.shadowMapHeight=a.shadowCascadeHeight[b],c.pointsWorld=[],c.pointsFrustum=[];for(var d=c.pointsWorld,e=c.pointsFrustum,f=0;8>f;f++)d[f]=new THREE.Vector3,e[f]=new THREE.Vector3;var g=a.shadowCascadeNearZ[b],h=a.shadowCascadeFarZ[b];return e[0].set(-1,-1,g),e[1].set(1,-1,g),e[2].set(-1,1,g),e[3].set(1,1,g),e[4].set(-1,-1,h),e[5].set(1,-1,h),e[6].set(-1,1,h),e[7].set(1,1,h),c}function b(a,b){var c=a.shadowCascadeArray[b];c.position.copy(a.position),c.target.position.copy(a.target.position),c.lookAt(c.target),c.shadowCameraVisible=a.shadowCameraVisible,
c.shadowDarkness=a.shadowDarkness,c.shadowBias=a.shadowCascadeBias[b];var d=a.shadowCascadeNearZ[b],e=a.shadowCascadeFarZ[b],f=c.pointsFrustum;f[0].z=d,f[1].z=d,f[2].z=d,f[3].z=d,f[4].z=e,f[5].z=e,f[6].z=e,f[7].z=e}function c(a,b){var c=b.shadowCamera,d=b.pointsFrustum,e=b.pointsWorld;m.set(1/0,1/0,1/0),n.set(-(1/0),-(1/0),-(1/0));for(var f=0;8>f;f++){var g=e[f];g.copy(d[f]),THREE.ShadowMapPlugin.__projector.unprojectVector(g,a),g.applyMatrix4(c.matrixWorldInverse),g.x<m.x&&(m.x=g.x),g.x>n.x&&(n.x=g.x),g.y<m.y&&(m.y=g.y),g.y>n.y&&(n.y=g.y),g.z<m.z&&(m.z=g.z),g.z>n.z&&(n.z=g.z)}c.left=m.x,c.right=n.x,c.top=n.y,c.bottom=m.y,c.updateProjectionMatrix()}function d(a){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[0]:a.material}var e,f,g,h,i,j,k=new THREE.Frustum,l=new THREE.Matrix4,m=new THREE.Vector3,n=new THREE.Vector3,o=new THREE.Vector3;this.init=function(a){e=a.context,f=a;var b=THREE.ShaderLib.depthRGBA,c=THREE.UniformsUtils.clone(b.uniforms);g=new THREE.ShaderMaterial({fragmentShader:b.fragmentShader,vertexShader:b.vertexShader,uniforms:c}),h=new THREE.ShaderMaterial({fragmentShader:b.fragmentShader,vertexShader:b.vertexShader,uniforms:c,morphTargets:!0}),i=new THREE.ShaderMaterial({fragmentShader:b.fragmentShader,vertexShader:b.vertexShader,uniforms:c,skinning:!0}),j=new THREE.ShaderMaterial({fragmentShader:b.fragmentShader,vertexShader:b.vertexShader,uniforms:c,morphTargets:!0,skinning:!0}),g._shadowPass=!0,h._shadowPass=!0,i._shadowPass=!0,j._shadowPass=!0},this.render=function(a,b){f.shadowMapEnabled&&f.shadowMapAutoUpdate&&this.update(a,b)},this.update=function(m,n){var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=[],E=0,F=null;for(e.clearColor(1,1,1,1),e.disable(e.BLEND),e.enable(e.CULL_FACE),e.frontFace(e.CCW),f.shadowMapCullFace===THREE.CullFaceFront?e.cullFace(e.FRONT):e.cullFace(e.BACK),f.setDepthTest(!0),p=0,q=m.__lights.length;q>p;p++)if(B=m.__lights[p],B.castShadow)if(B instanceof THREE.DirectionalLight&&B.shadowCascade)for(t=0;t<B.shadowCascadeCount;t++){var G;if(B.shadowCascadeArray[t])G=B.shadowCascadeArray[t];else{G=a(B,t),G.originalCamera=n;var H=new THREE.Gyroscope;H.position.copy(B.shadowCascadeOffset),H.add(G),H.add(G.target),n.add(H),B.shadowCascadeArray[t]=G,console.log("Created virtualLight",G)}b(B,t),D[E]=G,E++}else D[E]=B,E++;for(p=0,q=D.length;q>p;p++){if(B=D[p],!B.shadowMap){var I=THREE.LinearFilter;f.shadowMapType===THREE.PCFSoftShadowMap&&(I=THREE.NearestFilter);var J={minFilter:I,magFilter:I,format:THREE.RGBAFormat};B.shadowMap=new THREE.WebGLRenderTarget(B.shadowMapWidth,B.shadowMapHeight,J),B.shadowMapSize=new THREE.Vector2(B.shadowMapWidth,B.shadowMapHeight),B.shadowMatrix=new THREE.Matrix4}if(!B.shadowCamera){if(B instanceof THREE.SpotLight)B.shadowCamera=new THREE.PerspectiveCamera(B.shadowCameraFov,B.shadowMapWidth/B.shadowMapHeight,B.shadowCameraNear,B.shadowCameraFar);else{if(!(B instanceof THREE.DirectionalLight)){console.error("Unsupported light type for shadow");continue}B.shadowCamera=new THREE.OrthographicCamera(B.shadowCameraLeft,B.shadowCameraRight,B.shadowCameraTop,B.shadowCameraBottom,B.shadowCameraNear,B.shadowCameraFar)}m.add(B.shadowCamera),m.autoUpdate===!0&&m.updateMatrixWorld()}for(B.shadowCameraVisible&&!B.cameraHelper&&(B.cameraHelper=new THREE.CameraHelper(B.shadowCamera),B.shadowCamera.add(B.cameraHelper)),B.isVirtual&&G.originalCamera==n&&c(n,B),u=B.shadowMap,v=B.shadowMatrix,w=B.shadowCamera,w.position.setFromMatrixPosition(B.matrixWorld),o.setFromMatrixPosition(B.target.matrixWorld),w.lookAt(o),w.updateMatrixWorld(),w.matrixWorldInverse.getInverse(w.matrixWorld),B.cameraHelper&&(B.cameraHelper.visible=B.shadowCameraVisible),B.shadowCameraVisible&&B.cameraHelper.update(),v.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),v.multiply(w.projectionMatrix),v.multiply(w.matrixWorldInverse),l.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),k.setFromMatrix(l),f.setRenderTarget(u),f.clear(),C=m.__webglObjects,r=0,s=C.length;s>r;r++)z=C[r],A=z.object,z.render=!1,A.visible&&A.castShadow&&((A instanceof THREE.Mesh||A instanceof THREE.ParticleSystem)&&A.frustumCulled&&!k.intersectsObject(A)||(A._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,A.matrixWorld),z.render=!0));var K,L,M;for(r=0,s=C.length;s>r;r++)z=C[r],z.render&&(A=z.object,x=z.buffer,K=d(A),L=void 0!==A.geometry.morphTargets&&A.geometry.morphTargets.length>0&&K.morphTargets,M=A instanceof THREE.SkinnedMesh&&K.skinning,y=A.customDepthMaterial?A.customDepthMaterial:M?L?j:i:L?h:g,f.setMaterialFaces(K),x instanceof THREE.BufferGeometry?f.renderBufferDirect(w,m.__lights,F,y,x,A):f.renderBuffer(w,m.__lights,F,y,x,A));for(C=m.__webglObjectsImmediate,r=0,s=C.length;s>r;r++)z=C[r],A=z.object,A.visible&&A.castShadow&&(A._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,A.matrixWorld),f.renderImmediateObject(w,m.__lights,F,g,A))}var N=f.getClearColor(),O=f.getClearAlpha();e.clearColor(N.r,N.g,N.b,O),e.enable(e.BLEND),f.shadowMapCullFace===THREE.CullFaceFront&&e.cullFace(e.BACK)}},THREE.ShadowMapPlugin.__projector=new THREE.Projector,THREE.SpritePlugin=function(){function a(){var a=c.createProgram(),b=c.createShader(c.VERTEX_SHADER),e=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(b,["precision "+d.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),c.shaderSource(e,["precision "+d.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),c.compileShader(b),c.compileShader(e),c.attachShader(a,b),c.attachShader(a,e),c.linkProgram(a),a}function b(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var c,d,e,f,g,h,i,j,k,l;this.init=function(b){c=b.context,d=b,f=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),g=new Uint16Array([0,1,2,0,2,3]),h=c.createBuffer(),i=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,h),c.bufferData(c.ARRAY_BUFFER,f,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,c.STATIC_DRAW),j=a(),k={position:c.getAttribLocation(j,"position"),uv:c.getAttribLocation(j,"uv")},l={uvOffset:c.getUniformLocation(j,"uvOffset"),uvScale:c.getUniformLocation(j,"uvScale"),rotation:c.getUniformLocation(j,"rotation"),scale:c.getUniformLocation(j,"scale"),color:c.getUniformLocation(j,"color"),map:c.getUniformLocation(j,"map"),opacity:c.getUniformLocation(j,"opacity"),modelViewMatrix:c.getUniformLocation(j,"modelViewMatrix"),projectionMatrix:c.getUniformLocation(j,"projectionMatrix"),fogType:c.getUniformLocation(j,"fogType"),fogDensity:c.getUniformLocation(j,"fogDensity"),fogNear:c.getUniformLocation(j,"fogNear"),fogFar:c.getUniformLocation(j,"fogFar"),fogColor:c.getUniformLocation(j,"fogColor"),alphaTest:c.getUniformLocation(j,"alphaTest")};var m=document.createElement("canvas");m.width=8,m.height=8;var n=m.getContext("2d");n.fillStyle="#ffffff",n.fillRect(0,0,m.width,m.height),e=new THREE.Texture(m),e.needsUpdate=!0},this.render=function(a,f,g,m){var n=a.__webglSprites,o=n.length;if(o){c.useProgram(j),c.enableVertexAttribArray(k.position),c.enableVertexAttribArray(k.uv),c.disable(c.CULL_FACE),c.enable(c.BLEND),c.bindBuffer(c.ARRAY_BUFFER,h),c.vertexAttribPointer(k.position,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(k.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),c.uniformMatrix4fv(l.projectionMatrix,!1,f.projectionMatrix.elements),c.activeTexture(c.TEXTURE0),c.uniform1i(l.map,0);var p=0,q=0,r=a.fog;r?(c.uniform3f(l.fogColor,r.color.r,r.color.g,r.color.b),r instanceof THREE.Fog?(c.uniform1f(l.fogNear,r.near),c.uniform1f(l.fogFar,r.far),c.uniform1i(l.fogType,1),p=1,q=1):r instanceof THREE.FogExp2&&(c.uniform1f(l.fogDensity,r.density),c.uniform1i(l.fogType,2),p=2,q=2)):(c.uniform1i(l.fogType,0),p=0,q=0);var s,t,u,v,w=[];for(s=0;o>s;s++)t=n[s],u=t.material,t.visible!==!1&&(t._modelViewMatrix.multiplyMatrices(f.matrixWorldInverse,t.matrixWorld),t.z=-t._modelViewMatrix.elements[14]);for(n.sort(b),s=0;o>s;s++)t=n[s],t.visible!==!1&&(u=t.material,c.uniform1f(l.alphaTest,u.alphaTest),c.uniformMatrix4fv(l.modelViewMatrix,!1,t._modelViewMatrix.elements),w[0]=t.scale.x,w[1]=t.scale.y,v=a.fog&&u.fog?q:0,p!==v&&(c.uniform1i(l.fogType,v),p=v),null!==u.map?(c.uniform2f(l.uvOffset,u.map.offset.x,u.map.offset.y),c.uniform2f(l.uvScale,u.map.repeat.x,u.map.repeat.y)):(c.uniform2f(l.uvOffset,0,0),c.uniform2f(l.uvScale,1,1)),c.uniform1f(l.opacity,u.opacity),c.uniform3f(l.color,u.color.r,u.color.g,u.color.b),c.uniform1f(l.rotation,u.rotation),c.uniform2fv(l.scale,w),d.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst),d.setDepthTest(u.depthTest),d.setDepthWrite(u.depthWrite),u.map&&u.map.image&&u.map.image.width?d.setTexture(u.map,0):d.setTexture(e,0),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0));c.enable(c.CULL_FACE)}}},THREE.DepthPassPlugin=function(){function a(a){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[0]:a.material}this.enabled=!1,this.renderTarget=null;var b,c,d,e,f,g,h=new THREE.Frustum,i=new THREE.Matrix4;this.init=function(a){b=a.context,c=a;var h=THREE.ShaderLib.depthRGBA,i=THREE.UniformsUtils.clone(h.uniforms);d=new THREE.ShaderMaterial({fragmentShader:h.fragmentShader,vertexShader:h.vertexShader,uniforms:i}),e=new THREE.ShaderMaterial({fragmentShader:h.fragmentShader,vertexShader:h.vertexShader,uniforms:i,morphTargets:!0}),f=new THREE.ShaderMaterial({fragmentShader:h.fragmentShader,vertexShader:h.vertexShader,uniforms:i,skinning:!0}),g=new THREE.ShaderMaterial({fragmentShader:h.fragmentShader,vertexShader:h.vertexShader,uniforms:i,morphTargets:!0,skinning:!0}),d._shadowPass=!0,e._shadowPass=!0,f._shadowPass=!0,g._shadowPass=!0},this.render=function(a,b){this.enabled&&this.update(a,b)},this.update=function(j,k){var l,m,n,o,p,q,r,s=null;for(b.clearColor(1,1,1,1),b.disable(b.BLEND),c.setDepthTest(!0),j.autoUpdate===!0&&j.updateMatrixWorld(),k.matrixWorldInverse.getInverse(k.matrixWorld),i.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),h.setFromMatrix(i),c.setRenderTarget(this.renderTarget),c.clear(),r=j.__webglObjects,l=0,m=r.length;m>l;l++)p=r[l],q=p.object,p.render=!1,q.visible&&((q instanceof THREE.Mesh||q instanceof THREE.ParticleSystem)&&q.frustumCulled&&!h.intersectsObject(q)||(q._modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,q.matrixWorld),p.render=!0));var t,u,v;for(l=0,m=r.length;m>l;l++)if(p=r[l],p.render){if(q=p.object,n=p.buffer,q instanceof THREE.ParticleSystem&&!q.customDepthMaterial)continue;t=a(q),t&&c.setMaterialFaces(q.material),u=void 0!==q.geometry.morphTargets&&q.geometry.morphTargets.length>0&&t.morphTargets,v=q instanceof THREE.SkinnedMesh&&t.skinning,o=q.customDepthMaterial?q.customDepthMaterial:v?u?g:f:u?e:d,n instanceof THREE.BufferGeometry?c.renderBufferDirect(k,j.__lights,s,o,n,q):c.renderBuffer(k,j.__lights,s,o,n,q)}for(r=j.__webglObjectsImmediate,l=0,m=r.length;m>l;l++)p=r[l],q=p.object,q.visible&&(q._modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,q.matrixWorld),c.renderImmediateObject(k,j.__lights,s,d,q));var w=c.getClearColor(),x=c.getClearAlpha();b.clearColor(w.r,w.g,w.b,x),b.enable(b.BLEND)}},THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},lensFlare:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}},tracking.ViolaJones.classifiers.face=new Float64Array([20,20,.822689414024353,3,0,2,3,7,14,4,-1,3,9,14,2,2,.004014195874333382,.0337941907346249,.8378106951713562,0,2,1,2,18,4,-1,7,2,6,4,3,.0151513395830989,.1514132022857666,.7488812208175659,0,2,1,7,15,9,-1,1,10,15,3,3,.004210993181914091,.0900492817163467,.6374819874763489,6.956608772277832,16,0,2,5,6,2,6,-1,5,9,2,3,2,.0016227109590545297,.0693085864186287,.7110946178436279,0,2,7,5,6,3,-1,9,5,2,3,3,.002290664939209819,.1795803010463715,.6668692231178284,0,2,4,0,12,9,-1,4,3,12,3,3,.005002570804208517,.1693672984838486,.6554006934165955,0,2,6,9,10,8,-1,6,13,10,4,2,.007965989410877228,.5866332054138184,.0914145186543465,0,2,3,6,14,8,-1,3,10,14,4,2,-.003522701095789671,.1413166970014572,.6031895875930786,0,2,14,1,6,10,-1,14,1,3,10,2,.0366676896810532,.3675672113895416,.7920318245887756,0,2,7,8,5,12,-1,7,12,5,4,3,.009336147457361221,.6161385774612427,.2088509947061539,0,2,1,1,18,3,-1,7,1,6,3,3,.008696131408214569,.2836230993270874,.6360273957252502,0,2,1,8,17,2,-1,1,9,17,1,2,.0011488880263641477,.2223580926656723,.5800700783729553,0,2,16,6,4,2,-1,16,7,4,1,2,-.002148468978703022,.2406464070081711,.5787054896354675,0,2,5,17,2,2,-1,5,18,2,1,2,.002121906029060483,.5559654831886292,.136223703622818,0,2,14,2,6,12,-1,14,2,3,12,2,-.0939491465687752,.8502737283706665,.4717740118503571,0,3,4,0,4,12,-1,4,0,2,6,2,6,6,2,6,2,.0013777789426967502,.5993673801422119,.2834529876708984,0,2,2,11,18,8,-1,8,11,6,8,3,.0730631574988365,.4341886043548584,.7060034275054932,0,2,5,7,10,2,-1,5,8,10,1,2,.00036767389974556863,.3027887940406799,.6051574945449829,0,2,15,11,5,3,-1,15,12,5,1,3,-.0060479710809886456,.17984339594841,.5675256848335266,9.498542785644531,21,0,2,5,3,10,9,-1,5,6,10,3,3,-.0165106896311045,.6644225120544434,.1424857974052429,0,2,9,4,2,14,-1,9,11,2,7,2,.002705249935388565,.6325352191925049,.1288477033376694,0,2,3,5,4,12,-1,3,9,4,4,3,.002806986914947629,.1240288019180298,.6193193197250366,0,2,4,5,12,5,-1,8,5,4,5,3,-.0015402400167658925,.1432143002748489,.5670015811920166,0,2,5,6,10,8,-1,5,10,10,4,2,-.0005638627917505801,.1657433062791824,.5905207991600037,0,2,8,0,6,9,-1,8,3,6,3,3,.0019253729842603207,.2695507109165192,.5738824009895325,0,2,9,12,1,8,-1,9,16,1,4,2,-.005021484103053808,.1893538981676102,.5782774090766907,0,2,0,7,20,6,-1,0,9,20,2,3,.0026365420781075954,.2309329062700272,.5695425868034363,0,2,7,0,6,17,-1,9,0,2,17,3,-.0015127769438549876,.2759602069854736,.5956642031669617,0,2,9,0,6,4,-1,11,0,2,4,3,-.0101574398577213,.1732538044452667,.5522047281265259,0,2,5,1,6,4,-1,7,1,2,4,3,-.011953660286963,.1339409947395325,.5559014081954956,0,2,12,1,6,16,-1,14,1,2,16,3,.004885949194431305,.3628703951835632,.6188849210739136,0,3,0,5,18,8,-1,0,5,9,4,2,9,9,9,4,2,-.0801329165697098,.0912110507488251,.5475944876670837,0,3,8,15,10,4,-1,13,15,5,2,2,8,17,5,2,2,.0010643280111253262,.3715142905712128,.5711399912834167,0,3,3,1,4,8,-1,3,1,2,4,2,5,5,2,4,2,-.0013419450260698795,.5953313708305359,.331809788942337,0,3,3,6,14,10,-1,10,6,7,5,2,3,11,7,5,2,-.0546011403203011,.1844065934419632,.5602846145629883,0,2,2,1,6,16,-1,4,1,2,16,3,.0029071690514683723,.3594244122505188,.6131715178489685,0,2,0,18,20,2,-1,0,19,20,1,2,.0007471871795132756,.5994353294372559,.3459562957286835,0,2,8,13,4,3,-1,8,14,4,1,3,.004301380831748247,.4172652065753937,.6990845203399658,0,2,9,14,2,3,-1,9,15,2,1,3,.004501757211983204,.4509715139865875,.7801457047462463,0,2,0,12,9,6,-1,0,14,9,2,3,.0241385009139776,.5438212752342224,.1319826990365982,18.4129695892334,39,0,2,5,7,3,4,-1,5,9,3,2,2,.001921223010867834,.1415266990661621,.6199870705604553,0,2,9,3,2,16,-1,9,11,2,8,2,-.00012748669541906565,.6191074252128601,.1884928941726685,0,2,3,6,13,8,-1,3,10,13,4,2,.0005140993162058294,.1487396955490112,.5857927799224854,0,2,12,3,8,2,-1,12,3,4,2,2,.004187860991805792,.2746909856796265,.6359239816665649,0,2,8,8,4,12,-1,8,12,4,4,3,.005101571790874004,.5870851278305054,.2175628989934921,0,3,11,3,8,6,-1,15,3,4,3,2,11,6,4,3,2,-.002144844038411975,.5880944728851318,.2979590892791748,0,2,7,1,6,19,-1,9,1,2,19,3,-.0028977119363844395,.2373327016830444,.5876647233963013,0,2,9,0,6,4,-1,11,0,2,4,3,-.0216106791049242,.1220654994249344,.5194202065467834,0,2,3,1,9,3,-1,6,1,3,3,3,-.004629931878298521,.263123095035553,.5817409157752991,0,3,8,15,10,4,-1,13,15,5,2,2,8,17,5,2,2,.000593937118537724,.363862007856369,.5698544979095459,0,2,0,3,6,10,-1,3,3,3,10,2,.0538786612451077,.4303531050682068,.7559366226196289,0,2,3,4,15,15,-1,3,9,15,5,3,.0018887349870055914,.2122603058815002,.561342716217041,0,2,6,5,8,6,-1,6,7,8,2,3,-.0023635339457541704,.563184916973114,.2642767131328583,0,3,4,4,12,10,-1,10,4,6,5,2,4,9,6,5,2,.0240177996456623,.5797107815742493,.2751705944538117,0,2,6,4,4,4,-1,8,4,2,4,2,.00020543030404951423,.2705242037773132,.575256884098053,0,2,15,11,1,2,-1,15,12,1,1,2,.0008479019743390381,.5435624718666077,.2334876954555512,0,2,3,11,2,2,-1,3,12,2,1,2,.0014091329649090767,.5319424867630005,.2063155025243759,0,2,16,11,1,3,-1,16,12,1,1,3,.0014642629539594054,.5418980717658997,.3068861067295075,0,3,3,15,6,4,-1,3,15,3,2,2,6,17,3,2,2,.0016352549428120255,.3695372939109802,.6112868189811707,0,2,6,7,8,2,-1,6,8,8,1,2,.0008317275205627084,.3565036952495575,.6025236248970032,0,2,3,11,1,3,-1,3,12,1,1,3,-.0020998890977352858,.1913982033729553,.5362827181816101,0,2,6,0,12,2,-1,6,1,12,1,2,-.0007421398186124861,.3835555016994476,.552931010723114,0,2,9,14,2,3,-1,9,15,2,1,3,.0032655049581080675,.4312896132469177,.7101895809173584,0,2,7,15,6,2,-1,7,16,6,1,2,.0008913499186746776,.3984830975532532,.6391963958740234,0,2,0,5,4,6,-1,0,7,4,2,3,-.0152841797098517,.2366732954978943,.5433713793754578,0,2,4,12,12,2,-1,8,12,4,2,3,.004838141147047281,.5817500948905945,.3239189088344574,0,2,6,3,1,9,-1,6,6,1,3,3,-.0009109317907132208,.5540593862533569,.2911868989467621,0,2,10,17,3,2,-1,11,17,1,2,3,-.006127506028860807,.1775255054235458,.5196629166603088,0,2,9,9,2,2,-1,9,10,2,1,2,-.00044576259097084403,.3024170100688934,.5533593893051147,0,2,7,6,6,4,-1,9,6,2,4,3,.0226465407758951,.4414930939674377,.6975377202033997,0,2,7,17,3,2,-1,8,17,1,2,3,-.0018804960418492556,.2791394889354706,.5497952103614807,0,2,10,17,3,3,-1,11,17,1,3,3,.007088910788297653,.5263199210166931,.2385547012090683,0,2,8,12,3,2,-1,8,13,3,1,2,.0017318050377070904,.4319379031658173,.6983600854873657,0,2,9,3,6,2,-1,11,3,2,2,3,-.006848270073533058,.3082042932510376,.5390920042991638,0,2,3,11,14,4,-1,3,13,14,2,2,-15062530110299122e-21,.552192211151123,.3120366036891937,0,3,1,10,18,4,-1,10,10,9,2,2,1,12,9,2,2,.0294755697250366,.5401322841644287,.1770603060722351,0,2,0,10,3,3,-1,0,11,3,1,3,.008138732984662056,.5178617835044861,.121101900935173,0,2,9,1,6,6,-1,11,1,2,6,3,.0209429506212473,.5290294289588928,.3311221897602081,0,2,8,7,3,6,-1,9,7,1,6,3,-.009566552937030792,.7471994161605835,.4451968967914581,15.324139595031738,33,0,2,1,0,18,9,-1,1,3,18,3,3,-.00028206960996612906,.2064086049795151,.6076732277870178,0,2,12,10,2,6,-1,12,13,2,3,2,.00167906004935503,.5851997137069702,.1255383938550949,0,2,0,5,19,8,-1,0,9,19,4,2,.0006982791237533092,.094018429517746,.5728961229324341,0,2,7,0,6,9,-1,9,0,2,9,3,.0007895901217125356,.1781987994909287,.5694308876991272,0,2,5,3,6,1,-1,7,3,2,1,3,-.002856049919500947,.1638399064540863,.5788664817810059,0,2,11,3,6,1,-1,13,3,2,1,3,-.0038122469559311867,.2085440009832382,.5508564710617065,0,2,5,10,4,6,-1,5,13,4,3,2,.0015896620461717248,.5702760815620422,.1857215017080307,0,2,11,3,6,1,-1,13,3,2,1,3,.0100783398374915,.5116943120956421,.2189770042896271,0,2,4,4,12,6,-1,4,6,12,2,3,-.0635263025760651,.7131379842758179,.4043813049793243,0,2,15,12,2,6,-1,15,14,2,2,3,-.009103149175643921,.2567181885242462,.54639732837677,0,2,9,3,2,2,-1,10,3,1,2,2,-.002403500024229288,.1700665950775147,.559097409248352,0,2,9,3,3,1,-1,10,3,1,1,3,.001522636041045189,.5410556793212891,.2619054019451141,0,2,1,1,4,14,-1,3,1,2,14,2,.0179974399507046,.3732436895370483,.6535220742225647,0,3,9,0,4,4,-1,11,0,2,2,2,9,2,2,2,2,-.00645381910726428,.2626481950283051,.5537446141242981,0,2,7,5,1,14,-1,7,12,1,7,2,-.0118807600811124,.2003753930330277,.5544745922088623,0,2,19,0,1,4,-1,19,2,1,2,2,.0012713660253211856,.5591902732849121,.303197592496872,0,2,5,5,6,4,-1,8,5,3,4,2,.0011376109905540943,.2730407118797302,.5646508932113647,0,2,9,18,3,2,-1,10,18,1,2,3,-.00426519988104701,.1405909061431885,.5461820960044861,0,2,8,18,3,2,-1,9,18,1,2,3,-.0029602861031889915,.1795035004615784,.5459290146827698,0,2,4,5,12,6,-1,4,7,12,2,3,-.008844822645187378,.5736783146858215,.280921995639801,0,2,3,12,2,6,-1,3,14,2,2,3,-.006643068976700306,.2370675951242447,.5503826141357422,0,2,10,8,2,12,-1,10,12,2,4,3,.003999780863523483,.5608199834823608,.3304282128810883,0,2,7,18,3,2,-1,8,18,1,2,3,-.004122172016650438,.1640105992555618,.5378993153572083,0,2,9,0,6,2,-1,11,0,2,2,3,.0156249096617103,.5227649211883545,.2288603931665421,0,2,5,11,9,3,-1,5,12,9,1,3,-.0103564197197557,.7016193866729736,.4252927899360657,0,2,9,0,6,2,-1,11,0,2,2,3,-.008796080946922302,.2767347097396851,.5355830192565918,0,2,1,1,18,5,-1,7,1,6,5,3,.1622693985700607,.434224009513855,.744257926940918,0,3,8,0,4,4,-1,10,0,2,2,2,8,2,2,2,2,.0045542530715465546,.5726485848426819,.2582125067710877,0,2,3,12,1,3,-1,3,13,1,1,3,-.002130920998752117,.2106848061084747,.5361018776893616,0,2,8,14,5,3,-1,8,15,5,1,3,-.0132084200158715,.7593790888786316,.4552468061447144,0,3,5,4,10,12,-1,5,4,5,6,2,10,10,5,6,2,-.0659966766834259,.125247597694397,.5344039797782898,0,2,9,6,9,12,-1,9,10,9,4,3,.007914265617728233,.3315384089946747,.5601043105125427,0,3,2,2,12,14,-1,2,2,6,7,2,8,9,6,7,2,.0208942797034979,.5506049990653992,.2768838107585907,21.010639190673828,44,0,2,4,7,12,2,-1,8,7,4,2,3,.0011961159761995077,.1762690991163254,.6156241297721863,0,2,7,4,6,4,-1,7,6,6,2,2,-.0018679830245673656,.6118106842041016,.1832399964332581,0,2,4,5,11,8,-1,4,9,11,4,2,-.00019579799845814705,.0990442633628845,.5723816156387329,0,2,3,10,16,4,-1,3,12,16,2,2,-.0008025565766729414,.5579879879951477,.2377282977104187,0,2,0,0,16,2,-1,0,1,16,1,2,-.0024510810617357492,.2231457978487015,.5858935117721558,0,2,7,5,6,2,-1,9,5,2,2,3,.0005036185029894114,.2653993964195252,.5794103741645813,0,3,3,2,6,10,-1,3,2,3,5,2,6,7,3,5,2,.0040293349884450436,.5803827047348022,.2484865039587021,0,2,10,5,8,15,-1,10,10,8,5,3,-.0144517095759511,.1830351948738098,.5484204888343811,0,3,3,14,8,6,-1,3,14,4,3,2,7,17,4,3,2,.0020380979403853416,.3363558948040009,.6051092743873596,0,2,14,2,2,2,-1,14,3,2,1,2,-.0016155190533027053,.2286642044782639,.5441246032714844,0,2,1,10,7,6,-1,1,13,7,3,2,.0033458340913057327,.5625913143157959,.2392338067293167,0,2,15,4,4,3,-1,15,4,2,3,2,.0016379579901695251,.3906993865966797,.5964621901512146,0,3,2,9,14,6,-1,2,9,7,3,2,9,12,7,3,2,.0302512105554342,.524848222732544,.1575746983289719,0,2,5,7,10,4,-1,5,9,10,2,2,.037251990288496,.4194310903549194,.6748418807983398,0,3,6,9,8,8,-1,6,9,4,4,2,10,13,4,4,2,-.0251097902655602,.1882549971342087,.5473451018333435,0,2,14,1,3,2,-1,14,2,3,1,2,-.005309905856847763,.133997306227684,.5227110981941223,0,2,1,4,4,2,-1,3,4,2,2,2,.0012086479691788554,.3762088119983673,.6109635829925537,0,2,11,10,2,8,-1,11,14,2,4,2,-.0219076797366142,.266314297914505,.5404006838798523,0,2,0,0,5,3,-1,0,1,5,1,3,.0054116579703986645,.5363578796386719,.2232273072004318,0,3,2,5,18,8,-1,11,5,9,4,2,2,9,9,4,2,.069946326315403,.5358232855796814,.2453698068857193,0,2,6,6,1,6,-1,6,9,1,3,2,.00034520021290518343,.2409671992063522,.5376930236816406,0,2,19,1,1,3,-1,19,2,1,1,3,.0012627709656953812,.5425856709480286,.3155693113803864,0,2,7,6,6,6,-1,9,6,2,6,3,.0227195098996162,.4158405959606171,.6597865223884583,0,2,19,1,1,3,-1,19,2,1,1,3,-.001811100053600967,.2811253070831299,.5505244731903076,0,2,3,13,2,3,-1,3,14,2,1,3,.0033469670452177525,.526002824306488,.1891465038061142,0,3,8,4,8,12,-1,12,4,4,6,2,8,10,4,6,2,.00040791751234792173,.5673509240150452,.3344210088253021,0,2,5,2,6,3,-1,7,2,2,3,3,.0127347996458411,.5343592166900635,.2395612001419067,0,2,6,1,9,10,-1,6,6,9,5,2,-.007311972789466381,.6010890007019043,.4022207856178284,0,2,0,4,6,12,-1,2,4,2,12,3,-.0569487512111664,.8199151158332825,.4543190896511078,0,2,15,13,2,3,-1,15,14,2,1,3,-.005011659115552902,.2200281023979187,.5357710719108582,0,2,7,14,5,3,-1,7,15,5,1,3,.006033436860889196,.4413081109523773,.7181751132011414,0,2,15,13,3,3,-1,15,14,3,1,3,.0039437441155314445,.547886073589325,.2791733145713806,0,2,6,14,8,3,-1,6,15,8,1,3,-.0036591119132936,.635786771774292,.3989723920822144,0,2,15,13,3,3,-1,15,14,3,1,3,-.0038456181064248085,.3493686020374298,.5300664901733398,0,2,2,13,3,3,-1,2,14,3,1,3,-.007192626129835844,.1119614988565445,.5229672789573669,0,3,4,7,12,12,-1,10,7,6,6,2,4,13,6,6,2,-.0527989417314529,.2387102991342545,.54534512758255,0,2,9,7,2,6,-1,10,7,1,6,2,-.007953766733407974,.7586917877197266,.4439376890659332,0,2,8,9,5,2,-1,8,10,5,1,2,-.0027344180271029472,.2565476894378662,.5489321947097778,0,2,8,6,3,4,-1,9,6,1,4,3,-.0018507939530536532,.6734347939491272,.4252474904060364,0,2,9,6,2,8,-1,9,10,2,4,2,.0159189198166132,.548835277557373,.2292661964893341,0,2,7,7,3,6,-1,8,7,1,6,3,-.0012687679845839739,.6104331016540527,.4022389948368073,0,2,11,3,3,3,-1,12,3,1,3,3,.006288391072303057,.5310853123664856,.1536193042993546,0,2,5,4,6,1,-1,7,4,2,1,3,-.0062259892001748085,.1729111969470978,.524160623550415,0,2,5,6,10,3,-1,5,7,10,1,3,-.0121325999498367,.659775972366333,.4325182139873505,23.918790817260742,50,0,2,7,3,6,9,-1,7,6,6,3,3,-.0039184908382594585,.6103435158729553,.1469330936670303,0,2,6,7,9,1,-1,9,7,3,1,3,.0015971299726516008,.2632363140583038,.5896466970443726,0,2,2,8,16,8,-1,2,12,16,4,2,.0177801102399826,.587287425994873,.1760361939668655,0,2,14,6,2,6,-1,14,9,2,3,2,.0006533476989716291,.1567801982164383,.5596066117286682,0,2,1,5,6,15,-1,1,10,6,5,3,-.00028353091329336166,.1913153976202011,.5732036232948303,0,2,10,0,6,9,-1,10,3,6,3,3,.0016104689566418529,.2914913892745972,.5623080730438232,0,2,6,6,7,14,-1,6,13,7,7,2,-.0977506190538406,.194347694516182,.5648233294487,0,2,13,7,3,6,-1,13,9,3,2,3,.0005518235848285258,.3134616911411285,.5504639744758606,0,2,1,8,15,4,-1,6,8,5,4,3,-.0128582203760743,.253648191690445,.5760142803192139,0,2,11,2,3,10,-1,11,7,3,5,2,.004153023939579725,.5767722129821777,.36597740650177,0,2,3,7,4,6,-1,3,9,4,2,3,.0017092459602281451,.2843191027641296,.5918939113616943,0,2,13,3,6,10,-1,15,3,2,10,3,.007521735969930887,.4052427113056183,.6183109283447266,0,3,5,7,8,10,-1,5,7,4,5,2,9,12,4,5,2,.0022479810286313295,.578375518321991,.3135401010513306,0,3,4,4,12,12,-1,10,4,6,6,2,4,10,6,6,2,.0520062111318111,.5541312098503113,.1916636973619461,0,2,1,4,6,9,-1,3,4,2,9,3,.0120855299755931,.4032655954360962,.6644591093063354,0,2,11,3,2,5,-1,11,3,1,5,2,14687820112158079e-21,.3535977900028229,.5709382891654968,0,2,7,3,2,5,-1,8,3,1,5,2,7139518857002258e-21,.3037444949150085,.5610269904136658,0,2,10,14,2,3,-1,10,15,2,1,3,-.0046001640148460865,.7181087136268616,.4580326080322266,0,2,5,12,6,2,-1,8,12,3,2,2,.0020058949012309313,.5621951818466187,.2953684031963348,0,2,9,14,2,3,-1,9,15,2,1,3,.004505027085542679,.4615387916564941,.7619017958641052,0,2,4,11,12,6,-1,4,14,12,3,2,.0117468303069472,.5343837141990662,.1772529035806656,0,2,11,11,5,9,-1,11,14,5,3,3,-.0583163388073444,.1686245948076248,.5340772271156311,0,2,6,15,3,2,-1,6,16,3,1,2,.00023629379575140774,.3792056143283844,.6026803851127625,0,2,11,0,3,5,-1,12,0,1,5,3,-.007815618067979813,.151286706328392,.5324323773384094,0,2,5,5,6,7,-1,8,5,3,7,2,-.0108761601150036,.2081822007894516,.5319945216178894,0,2,13,0,1,9,-1,13,3,1,3,3,-.0027745519764721394,.4098246991634369,.5210328102111816,0,3,3,2,4,8,-1,3,2,2,4,2,5,6,2,4,2,-.0007827638182789087,.5693274140357971,.3478842079639435,0,2,13,12,4,6,-1,13,14,4,2,3,.0138704096898437,.5326750874519348,.2257698029279709,0,2,3,12,4,6,-1,3,14,4,2,3,-.0236749108880758,.1551305055618286,.5200707912445068,0,2,13,11,3,4,-1,13,13,3,2,2,-14879409718560055e-21,.5500566959381104,.3820176124572754,0,2,4,4,4,3,-1,4,5,4,1,3,.00361906411126256,.4238683879375458,.6639748215675354,0,2,7,5,11,8,-1,7,9,11,4,2,-.0198171101510525,.2150038033723831,.5382357835769653,0,2,7,8,3,4,-1,8,8,1,4,3,-.0038154039066284895,.6675711274147034,.4215297102928162,0,2,9,1,6,1,-1,11,1,2,1,3,-.0049775829538702965,.2267289012670517,.5386328101158142,0,2,5,5,3,3,-1,5,6,3,1,3,.002244102070108056,.4308691024780273,.6855735778808594,0,3,0,9,20,6,-1,10,9,10,3,2,0,12,10,3,2,.0122824599966407,.5836614966392517,.3467479050159454,0,2,8,6,3,5,-1,9,6,1,5,3,-.002854869933798909,.7016944885253906,.4311453998088837,0,2,11,0,1,3,-1,11,1,1,1,3,-.0037875669077038765,.2895345091819763,.5224946141242981,0,2,4,2,4,2,-1,4,3,4,1,2,-.0012201230274513364,.2975570857524872,.5481644868850708,0,2,12,6,4,3,-1,12,7,4,1,3,.010160599835217,.4888817965984345,.8182697892189026,0,2,5,0,6,4,-1,7,0,2,4,3,-.0161745697259903,.1481492966413498,.5239992737770081,0,2,9,7,3,8,-1,10,7,1,8,3,.0192924607545137,.4786309897899628,.7378190755844116,0,2,9,7,2,2,-1,10,7,1,2,2,-.003247953951358795,.7374222874641418,.4470643997192383,0,3,6,7,14,4,-1,13,7,7,2,2,6,9,7,2,2,-.009380348026752472,.3489154875278473,.5537996292114258,0,2,0,5,3,6,-1,0,7,3,2,3,-.0126061299815774,.2379686981439591,.5315443277359009,0,2,13,11,3,4,-1,13,13,3,2,2,-.0256219301372766,.1964688003063202,.5138769745826721,0,2,4,11,3,4,-1,4,13,3,2,2,-7574149640277028e-20,.5590522885322571,.3365853130817413,0,3,5,9,12,8,-1,11,9,6,4,2,5,13,6,4,2,-.0892108827829361,.0634046569466591,.516263484954834,0,2,9,12,1,3,-1,9,13,1,1,3,-.002767048077657819,.732346773147583,.4490706026554108,0,2,10,15,2,4,-1,10,17,2,2,2,.0002715257869567722,.411483496427536,.5985518097877502,24.52787971496582,51,0,2,7,7,6,1,-1,9,7,2,1,3,.001478621968999505,.266354501247406,.6643316745758057,0,3,12,3,6,6,-1,15,3,3,3,2,12,6,3,3,2,-.001874165958724916,.6143848896026611,.2518512904644013,0,2,0,4,10,6,-1,0,6,10,2,3,-.001715100952424109,.5766341090202332,.2397463023662567,0,3,8,3,8,14,-1,12,3,4,7,2,8,10,4,7,2,-.0018939269939437509,.5682045817375183,.2529144883155823,0,2,4,4,7,15,-1,4,9,7,5,3,-.005300605203956366,.1640675961971283,.5556079745292664,0,3,12,2,6,8,-1,15,2,3,4,2,12,6,3,4,2,-.0466625317931175,.6123154163360596,.4762830138206482,0,3,2,2,6,8,-1,2,2,3,4,2,5,6,3,4,2,-.000794313324149698,.5707858800888062,.2839404046535492,0,2,2,13,18,7,-1,8,13,6,7,3,.0148916700854898,.4089672863483429,.6006367206573486,0,3,4,3,8,14,-1,4,3,4,7,2,8,10,4,7,2,-.0012046529445797205,.5712450742721558,.2705289125442505,0,2,18,1,2,6,-1,18,3,2,2,3,.006061938125640154,.526250422000885,.3262225985527039,0,2,9,11,2,3,-1,9,12,2,1,3,-.0025286648888140917,.6853830814361572,.4199256896972656,0,2,18,1,2,6,-1,18,3,2,2,3,-.005901021882891655,.3266282081604004,.5434812903404236,0,2,0,1,2,6,-1,0,3,2,2,3,.005670276004821062,.5468410849571228,.2319003939628601,0,2,1,5,18,6,-1,1,7,18,2,3,-.003030410036444664,.557066798210144,.2708238065242767,0,2,0,2,6,7,-1,3,2,3,7,2,.002980364952236414,.3700568974018097,.5890625715255737,0,2,7,3,6,14,-1,7,10,6,7,2,-.0758405104279518,.2140070050954819,.5419948101043701,0,2,3,7,13,10,-1,3,12,13,5,2,.0192625392228365,.5526772141456604,.2726590037345886,0,2,11,15,2,2,-1,11,16,2,1,2,.00018888259364757687,.3958011865615845,.6017209887504578,0,3,2,11,16,4,-1,2,11,8,2,2,10,13,8,2,2,.0293695498257875,.5241373777389526,.1435758024454117,0,3,13,7,6,4,-1,16,7,3,2,2,13,9,3,2,2,.0010417619487270713,.3385409116744995,.5929983258247375,0,2,6,10,3,9,-1,6,13,3,3,3,.0026125640142709017,.5485377907752991,.3021597862243652,0,2,14,6,1,6,-1,14,9,1,3,2,.0009697746718302369,.3375276029109955,.553203284740448,0,2,5,10,4,1,-1,7,10,2,1,2,.0005951265920884907,.563174307346344,.3359399139881134,0,2,3,8,15,5,-1,8,8,5,5,3,-.1015655994415283,.0637350380420685,.5230425000190735,0,2,1,6,5,4,-1,1,8,5,2,2,.0361566990613937,.5136963129043579,.1029528975486755,0,2,3,1,17,6,-1,3,3,17,2,3,.003462414024397731,.3879320025444031,.5558289289474487,0,2,6,7,8,2,-1,10,7,4,2,2,.0195549800992012,.5250086784362793,.1875859946012497,0,2,9,7,3,2,-1,10,7,1,2,3,-.0023121440317481756,.667202889919281,.4679641127586365,0,2,8,7,3,2,-1,9,7,1,2,3,-.001860528951510787,.7163379192352295,.4334670901298523,0,2,8,9,4,2,-1,8,10,4,1,2,-.0009402636205777526,.302136093378067,.5650203227996826,0,2,8,8,4,3,-1,8,9,4,1,3,-.005241833161562681,.1820009052753449,.5250256061553955,0,2,9,5,6,4,-1,9,5,3,4,2,.00011729019752237946,.3389188051223755,.544597327709198,0,2,8,13,4,3,-1,8,14,4,1,3,.0011878840159624815,.4085349142551422,.6253563165664673,0,3,4,7,12,6,-1,10,7,6,3,2,4,10,6,3,2,-.0108813596889377,.3378399014472961,.5700082778930664,0,2,8,14,4,3,-1,8,15,4,1,3,.0017354859737679362,.4204635918140411,.6523038744926453,0,2,9,7,3,3,-1,9,8,3,1,3,-.00651190523058176,.2595216035842896,.5428143739700317,0,2,7,4,3,8,-1,8,4,1,8,3,-.0012136430013924837,.6165143847465515,.3977893888950348,0,2,10,0,3,6,-1,11,0,1,6,3,-.010354240424931,.1628028005361557,.5219504833221436,0,2,6,3,4,8,-1,8,3,2,8,2,.0005585883045569062,.3199650943279266,.5503574013710022,0,2,14,3,6,13,-1,14,3,3,13,2,.0152996499091387,.4103994071483612,.6122388243675232,0,2,8,13,3,6,-1,8,16,3,3,2,-.021588210016489,.103491298854351,.519738495349884,0,2,14,3,6,13,-1,14,3,3,13,2,-.1283462941646576,.8493865132331848,.4893102943897247,0,3,0,7,10,4,-1,0,7,5,2,2,5,9,5,2,2,-.0022927189711481333,.3130157887935638,.5471575260162354,0,2,14,3,6,13,-1,14,3,3,13,2,.0799151062965393,.4856320917606354,.6073989272117615,0,2,0,3,6,13,-1,3,3,3,13,2,-.0794410929083824,.8394674062728882,.462453305721283,0,2,9,1,4,1,-1,9,1,2,1,2,-.00528000108897686,.1881695985794067,.5306698083877563,0,2,8,0,2,1,-1,9,0,1,1,2,.0010463109938427806,.5271229147911072,.2583065927028656,0,3,10,16,4,4,-1,12,16,2,2,2,10,18,2,2,2,.00026317298761568964,.4235304892063141,.5735440850257874,0,2,9,6,2,3,-1,10,6,1,3,2,-.0036173160187900066,.6934396028518677,.4495444893836975,0,2,4,5,12,2,-1,8,5,4,2,3,.0114218797534704,.590092122554779,.4138193130493164,0,2,8,7,3,5,-1,9,7,1,5,3,-.0019963278900831938,.6466382741928101,.4327239990234375,27.153350830078125,56,0,2,6,4,8,6,-1,6,6,8,2,3,-.00996912457048893,.6142324209213257,.2482212036848068,0,2,9,5,2,12,-1,9,11,2,6,2,.0007307305932044983,.5704951882362366,.2321965992450714,0,2,4,6,6,8,-1,4,10,6,4,2,.0006404530140571296,.2112251967191696,.5814933180809021,0,2,12,2,8,5,-1,12,2,4,5,2,.004542401991784573,.2950482070446014,.586631178855896,0,2,0,8,18,3,-1,0,9,18,1,3,9247744310414419e-20,.2990990877151489,.5791326761245728,0,2,8,12,4,8,-1,8,16,4,4,2,-.008660314604640007,.2813029885292053,.5635542273521423,0,2,0,2,8,5,-1,4,2,4,5,2,.008051581680774689,.3535369038581848,.6054757237434387,0,2,13,11,3,4,-1,13,13,3,2,2,.00043835240649059415,.5596532225608826,.2731510996818543,0,2,5,11,6,1,-1,7,11,2,1,3,-981689736363478e-19,.5978031754493713,.3638561069965363,0,2,11,3,3,1,-1,12,3,1,1,3,-.0011298790341243148,.2755252122879028,.5432729125022888,0,2,7,13,5,3,-1,7,14,5,1,3,.006435615010559559,.4305641949176788,.7069833278656006,0,2,11,11,7,6,-1,11,14,7,3,2,-.0568293295800686,.2495242953300476,.5294997096061707,0,2,2,11,7,6,-1,2,14,7,3,2,.004066816996783018,.5478553175926208,.2497723996639252,0,2,12,14,2,6,-1,12,16,2,2,3,481647984997835e-19,.3938601016998291,.5706356167793274,0,2,8,14,3,3,-1,8,15,3,1,3,.00617950176820159,.440760612487793,.7394766807556152,0,2,11,0,3,5,-1,12,0,1,5,3,.006498575210571289,.5445243120193481,.2479152977466583,0,2,6,1,4,9,-1,8,1,2,9,2,-.0010211090557277203,.2544766962528229,.5338971018791199,0,2,10,3,6,1,-1,12,3,2,1,3,-.005424752831459045,.2718858122825623,.5324069261550903,0,2,8,8,3,4,-1,8,10,3,2,2,-.0010559899965301156,.3178288042545319,.553450882434845,0,2,8,12,4,2,-1,8,13,4,1,2,.0006646580877713859,.4284219145774841,.6558194160461426,0,2,5,18,4,2,-1,5,19,4,1,2,-.00027524109464138746,.5902860760688782,.3810262978076935,0,2,2,1,18,6,-1,2,3,18,2,3,.004229320213198662,.381648987531662,.5709385871887207,0,2,6,0,3,2,-1,7,0,1,2,3,-.0032868210691958666,.1747743934392929,.5259544253349304,0,3,13,8,6,2,-1,16,8,3,1,2,13,9,3,1,2,.0001561187964398414,.3601722121238709,.5725612044334412,0,2,6,10,3,6,-1,6,13,3,3,2,-7362138148891972e-21,.540185809135437,.3044497072696686,0,3,0,13,20,4,-1,10,13,10,2,2,0,15,10,2,2,-.014767250046134,.3220770061016083,.5573434829711914,0,2,7,7,6,5,-1,9,7,2,5,3,.0244895908981562,.4301528036594391,.6518812775611877,0,2,11,0,2,2,-1,11,1,2,1,2,-.000376520911231637,.356458306312561,.5598236918449402,0,3,1,8,6,2,-1,1,8,3,1,2,4,9,3,1,2,736576885174145e-20,.3490782976150513,.556189775466919,0,3,0,2,20,2,-1,10,2,10,1,2,0,3,10,1,2,-.0150999398902059,.1776272058486939,.5335299968719482,0,2,7,14,5,3,-1,7,15,5,1,3,-.0038316650316119194,.6149687767028809,.4221394062042236,0,3,7,13,6,6,-1,10,13,3,3,2,7,16,3,3,2,.0169254001230001,.5413014888763428,.2166585028171539,0,2,9,12,2,3,-1,9,13,2,1,3,-.003047785023227334,.6449490785598755,.4354617893695831,0,2,16,11,1,6,-1,16,13,1,2,3,.003214058931916952,.5400155186653137,.3523217141628265,0,2,3,11,1,6,-1,3,13,1,2,3,-.004002320114523172,.2774524092674255,.5338417291641235,0,3,4,4,14,12,-1,11,4,7,6,2,4,10,7,6,2,.0074182129465043545,.567673921585083,.3702817857265472,0,2,5,4,3,3,-1,5,5,3,1,3,-.008876458741724491,.7749221920967102,.4583688974380493,0,2,12,3,3,3,-1,13,3,1,3,3,.002731173997744918,.5338721871376038,.3996661007404327,0,2,6,6,8,3,-1,6,7,8,1,3,-.0025082379579544067,.5611963272094727,.377749890089035,0,2,12,3,3,3,-1,13,3,1,3,3,-.008054107427597046,.291522890329361,.5179182887077332,0,3,3,1,4,10,-1,3,1,2,5,2,5,6,2,5,2,-.0009793881326913834,.5536432862281799,.3700192868709564,0,2,5,7,10,2,-1,5,7,5,2,2,-.005874590948224068,.3754391074180603,.5679376125335693,0,2,8,7,3,3,-1,9,7,1,3,3,-.00449367193505168,.7019699215888977,.4480949938297272,0,2,15,12,2,3,-1,15,13,2,1,3,-.00543892290443182,.2310364991426468,.5313386917114258,0,2,7,8,3,4,-1,8,8,1,4,3,-.0007509464048780501,.5864868760108948,.4129343032836914,0,2,13,4,1,12,-1,13,10,1,6,2,14528800420521293e-21,.3732407093048096,.5619621276855469,0,3,4,5,12,12,-1,4,5,6,6,2,10,11,6,6,2,.0407580696046352,.5312091112136841,.2720521986484528,0,2,7,14,7,3,-1,7,15,7,1,3,.006650593131780624,.4710015952587128,.6693493723869324,0,2,3,12,2,3,-1,3,13,2,1,3,.0045759351924061775,.5167819261550903,.1637275964021683,0,3,3,2,14,2,-1,10,2,7,1,2,3,3,7,1,2,.0065269311890006065,.5397608876228333,.2938531935214996,0,2,0,1,3,10,-1,1,1,1,10,3,-.0136603796854615,.7086488008499146,.453220009803772,0,2,9,0,6,5,-1,11,0,2,5,3,.0273588690906763,.5206481218338013,.3589231967926025,0,2,5,7,6,2,-1,8,7,3,2,2,.0006219755159690976,.3507075905799866,.5441123247146606,0,2,7,1,6,10,-1,7,6,6,5,2,-.0033077080734074116,.5859522819519043,.402489185333252,0,2,1,1,18,3,-1,7,1,6,3,3,-.0106311095878482,.6743267178535461,.4422602951526642,0,2,16,3,3,6,-1,16,5,3,2,3,.0194416493177414,.5282716155052185,.1797904968261719,34.55411148071289,71,0,2,6,3,7,6,-1,6,6,7,3,2,-.005505216773599386,.5914731025695801,.2626559138298035,0,2,4,7,12,2,-1,8,7,4,2,3,.001956227933987975,.2312581986188889,.5741627216339111,0,2,0,4,17,10,-1,0,9,17,5,2,-.008892478421330452,.1656530052423477,.5626654028892517,0,2,3,4,15,16,-1,3,12,15,8,2,.0836383774876595,.5423449873924255,.1957294940948486,0,2,7,15,6,4,-1,7,17,6,2,2,.0012282270472496748,.3417904078960419,.5992503762245178,0,2,15,2,4,9,-1,15,2,2,9,2,.0057629169896245,.3719581961631775,.6079903841018677,0,2,2,3,3,2,-1,2,4,3,1,2,-.0016417410224676132,.2577486038208008,.5576915740966797,0,2,13,6,7,9,-1,13,9,7,3,3,.0034113149158656597,.2950749099254608,.5514171719551086,0,2,8,11,4,3,-1,8,12,4,1,3,-.0110693201422691,.7569358944892883,.4477078914642334,0,3,0,2,20,6,-1,10,2,10,3,2,0,5,10,3,2,.0348659716546535,.5583708882331848,.2669621109962463,0,3,3,2,6,10,-1,3,2,3,5,2,6,7,3,5,2,.0006570109981112182,.5627313256263733,.2988890111446381,0,2,13,10,3,4,-1,13,12,3,2,2,-.0243391301482916,.2771185040473938,.5108863115310669,0,2,4,10,3,4,-1,4,12,3,2,2,.0005943520227447152,.5580651760101318,.3120341897010803,0,2,7,5,6,3,-1,9,5,2,3,3,.0022971509024500847,.3330250084400177,.5679075717926025,0,2,7,6,6,8,-1,7,10,6,4,2,-.0037801829166710377,.2990534901618958,.5344808101654053,0,2,0,11,20,6,-1,0,14,20,3,2,-.13420669734478,.1463858932256699,.5392568111419678,0,3,4,13,4,6,-1,4,13,2,3,2,6,16,2,3,2,.0007522454834543169,.3746953904628754,.5692734718322754,0,3,6,0,8,12,-1,10,0,4,6,2,6,6,4,6,2,-.040545541793108,.2754747867584229,.5484297871589661,0,2,2,0,15,2,-1,2,1,15,1,2,.0012572970008477569,.3744584023952484,.5756075978279114,0,2,9,12,2,3,-1,9,13,2,1,3,-.007424994837492704,.7513859272003174,.4728231132030487,0,2,3,12,1,2,-1,3,13,1,1,2,.0005090812919661403,.540489673614502,.2932321131229401,0,2,9,11,2,3,-1,9,12,2,1,3,-.001280845026485622,.6169779896736145,.4273349046707153,0,2,7,3,3,1,-1,8,3,1,1,3,-.0018348860321566463,.2048496007919312,.5206472277641296,0,2,17,7,3,6,-1,17,9,3,2,3,.0274848695844412,.5252984762191772,.1675522029399872,0,2,7,2,3,2,-1,8,2,1,2,3,.0022372419480234385,.5267782807350159,.2777658104896545,0,2,11,4,5,3,-1,11,5,5,1,3,-.008863529190421104,.69545578956604,.4812048971652985,0,2,4,4,5,3,-1,4,5,5,1,3,.004175397101789713,.4291887879371643,.6349195837974548,0,2,19,3,1,2,-1,19,4,1,1,2,-.0017098189564421773,.2930536866188049,.5361248850822449,0,2,5,5,4,3,-1,5,6,4,1,3,.006532854866236448,.4495325088500977,.7409694194793701,0,2,17,7,3,6,-1,17,9,3,2,3,-.009537290781736374,.3149119913578033,.5416501760482788,0,2,0,7,3,6,-1,0,9,3,2,3,.0253109894692898,.5121892094612122,.1311707943677902,0,2,14,2,6,9,-1,14,5,6,3,3,.0364609695971012,.5175911784172058,.2591339945793152,0,2,0,4,5,6,-1,0,6,5,2,3,.0208543296903372,.5137140154838562,.1582316011190414,0,2,10,5,6,2,-1,12,5,2,2,3,-.0008720774785615504,.5574309825897217,.439897894859314,0,2,4,5,6,2,-1,6,5,2,2,3,-15227000403683633e-21,.5548940896987915,.3708069920539856,0,2,8,1,4,6,-1,8,3,4,2,3,-.0008431650931015611,.3387419879436493,.5554211139678955,0,2,0,2,3,6,-1,0,4,3,2,3,.0036037859972566366,.5358061790466309,.3411171138286591,0,2,6,6,8,3,-1,6,7,8,1,3,-.006805789191275835,.6125202775001526,.4345862865447998,0,2,0,1,5,9,-1,0,4,5,3,3,-.0470216609537601,.2358165979385376,.519373893737793,0,2,16,0,4,15,-1,16,0,2,15,2,-.0369541086256504,.7323111295700073,.4760943949222565,0,2,1,10,3,2,-1,1,11,3,1,2,.0010439479956403375,.5419455170631409,.3411330878734589,0,2,14,4,1,10,-1,14,9,1,5,2,-.00021050689974799752,.2821694016456604,.5554947257041931,0,2,0,1,4,12,-1,2,1,2,12,2,-.0808315873146057,.9129930138587952,.4697434902191162,0,2,11,11,4,2,-1,11,11,2,2,2,-.0003657905908767134,.6022670269012451,.3978292942047119,0,2,5,11,4,2,-1,7,11,2,2,2,-.00012545920617412776,.5613213181495667,.384553998708725,0,2,3,8,15,5,-1,8,8,5,5,3,-.0687864869832993,.2261611968278885,.5300496816635132,0,2,0,0,6,10,-1,3,0,3,10,2,.0124157899990678,.4075691998004913,.5828812122344971,0,2,11,4,3,2,-1,12,4,1,2,3,-.004717481788247824,.2827253937721252,.5267757773399353,0,2,8,12,3,8,-1,8,16,3,4,2,.0381368584930897,.5074741244316101,.1023615971207619,0,2,8,14,5,3,-1,8,15,5,1,3,-.0028168049175292253,.6169006824493408,.4359692931175232,0,2,7,14,4,3,-1,7,15,4,1,3,.008130360394716263,.4524433016777039,.76060950756073,0,2,11,4,3,2,-1,12,4,1,2,3,.006005601957440376,.5240408778190613,.185971200466156,0,3,3,15,14,4,-1,3,15,7,2,2,10,17,7,2,2,.0191393196582794,.5209379196166992,.2332071959972382,0,3,2,2,16,4,-1,10,2,8,2,2,2,4,8,2,2,.0164457596838474,.5450702905654907,.3264234960079193,0,2,0,8,6,12,-1,3,8,3,12,2,-.0373568907380104,.6999046802520752,.4533241987228394,0,2,5,7,10,2,-1,5,7,5,2,2,-.0197279006242752,.2653664946556091,.54128098487854,0,2,9,7,2,5,-1,10,7,1,5,2,.0066972579807043076,.4480566084384918,.7138652205467224,0,3,13,7,6,4,-1,16,7,3,2,2,13,9,3,2,2,.0007445752853527665,.4231350123882294,.5471320152282715,0,2,0,13,8,2,-1,0,14,8,1,2,.0011790640419349074,.5341702103614807,.3130455017089844,0,3,13,7,6,4,-1,16,7,3,2,2,13,9,3,2,2,.0349806100130081,.5118659734725952,.343053013086319,0,3,1,7,6,4,-1,1,7,3,2,2,4,9,3,2,2,.0005685979267582297,.3532187044620514,.5468639731407166,0,2,12,6,1,12,-1,12,12,1,6,2,-.0113406497985125,.2842353880405426,.5348700881004333,0,2,9,5,2,6,-1,10,5,1,6,2,-.00662281084805727,.6883640289306641,.4492664933204651,0,2,14,12,2,3,-1,14,13,2,1,3,-.008016033098101616,.1709893941879273,.5224308967590332,0,2,4,12,2,3,-1,4,13,2,1,3,.0014206819469109178,.5290846228599548,.299338310956955,0,2,8,12,4,3,-1,8,13,4,1,3,-.002780171111226082,.6498854160308838,.4460499882698059,0,3,5,2,2,4,-1,5,2,1,2,2,6,4,1,2,2,-.0014747589593753219,.3260438144207001,.5388113260269165,0,2,5,5,11,3,-1,5,6,11,1,3,-.0238303393125534,.7528941035270691,.4801219999790192,0,2,7,6,4,12,-1,7,12,4,6,2,.00693697901442647,.5335165858268738,.3261427879333496,0,2,12,13,8,5,-1,12,13,4,5,2,.008280625566840172,.458039402961731,.5737829804420471,0,2,7,6,1,12,-1,7,12,1,6,2,-.0104395002126694,.2592320144176483,.5233827829360962,39.1072883605957,80,0,2,1,2,6,3,-1,4,2,3,3,2,.0072006587870419025,.325888603925705,.6849808096885681,0,3,9,5,6,10,-1,12,5,3,5,2,9,10,3,5,2,-.002859358908608556,.5838881134986877,.2537829875946045,0,3,5,5,8,12,-1,5,5,4,6,2,9,11,4,6,2,.0006858052802272141,.5708081722259521,.2812424004077911,0,2,0,7,20,6,-1,0,9,20,2,3,.007958019152283669,.2501051127910614,.5544260740280151,0,2,4,2,2,2,-1,4,3,2,1,2,-.0012124150525778532,.2385368049144745,.5433350205421448,0,2,4,18,12,2,-1,8,18,4,2,3,.00794261321425438,.3955070972442627,.6220757961273193,0,2,7,4,4,16,-1,7,12,4,8,2,.0024630590341985226,.5639708042144775,.2992357909679413,0,2,7,6,7,8,-1,7,10,7,4,2,-.006039659958332777,.218651294708252,.541167676448822,0,2,6,3,3,1,-1,7,3,1,1,3,-.0012988339876756072,.23507060110569,.5364584922790527,0,2,11,15,2,4,-1,11,17,2,2,2,.00022299369447864592,.380411297082901,.572960615158081,0,2,3,5,4,8,-1,3,9,4,4,2,.0014654280385002494,.2510167956352234,.5258268713951111,0,2,7,1,6,12,-1,7,7,6,6,2,-.0008121004211716354,.5992823839187622,.3851158916950226,0,2,4,6,6,2,-1,6,6,2,2,3,-.0013836020370945334,.5681396126747131,.3636586964130402,0,2,16,4,4,6,-1,16,6,4,2,3,-.0279364492744207,.1491317003965378,.5377560257911682,0,2,3,3,5,2,-1,3,4,5,1,2,-.0004691955109592527,.3692429959774017,.5572484731674194,0,2,9,11,2,3,-1,9,12,2,1,3,-.004982965998351574,.6758509278297424,.4532504081726074,0,2,2,16,4,2,-1,2,17,4,1,2,.001881530974060297,.5368022918701172,.2932539880275726,0,3,7,13,6,6,-1,10,13,3,3,2,7,16,3,3,2,-.0190675500780344,.1649377048015595,.5330067276954651,0,2,7,0,3,4,-1,8,0,1,4,3,-.0046906559728085995,.1963925957679749,.5119361877441406,0,2,8,15,4,3,-1,8,16,4,1,3,.005977713968604803,.467117190361023,.7008398175239563,0,2,0,4,4,6,-1,0,6,4,2,3,-.0333031304180622,.1155416965484619,.5104162096977234,0,2,5,6,12,3,-1,9,6,4,3,3,.0907441079616547,.5149660110473633,.1306173056364059,0,2,7,6,6,14,-1,9,6,2,14,3,.0009355589863844216,.3605481088161469,.543985903263092,0,2,9,7,3,3,-1,10,7,1,3,3,.0149016501381993,.4886212050914764,.7687569856643677,0,2,6,12,2,4,-1,6,14,2,2,2,.0006159411859698594,.5356813073158264,.3240939080715179,0,2,10,12,7,6,-1,10,14,7,2,3,-.0506709888577461,.1848621964454651,.5230404138565063,0,2,1,0,15,2,-1,1,1,15,1,2,.0006866574985906482,.3840579986572266,.5517945885658264,0,2,14,0,6,6,-1,14,0,3,6,2,.008371243253350258,.4288564026355743,.6131753921508789,0,2,5,3,3,1,-1,6,3,1,1,3,-.0012953069526702166,.2913674116134644,.528073787689209,0,2,14,0,6,6,-1,14,0,3,6,2,-.0419416800141335,.7554799914360046,.4856030941009522,0,2,0,3,20,10,-1,0,8,20,5,2,-.0235293805599213,.2838279902935028,.5256081223487854,0,2,14,0,6,6,-1,14,0,3,6,2,.0408574491739273,.4870935082435608,.6277297139167786,0,2,0,0,6,6,-1,3,0,3,6,2,-.0254068691283464,.7099707722663879,.4575029015541077,0,2,19,15,1,2,-1,19,16,1,1,2,-.00041415440500713885,.4030886888504028,.5469412207603455,0,2,0,2,4,8,-1,2,2,2,8,2,.0218241196125746,.4502024054527283,.6768701076507568,0,3,2,1,18,4,-1,11,1,9,2,2,2,3,9,2,2,.0141140399500728,.5442860722541809,.3791700005531311,0,2,8,12,1,2,-1,8,13,1,1,2,6721459067193791e-20,.4200463891029358,.5873476266860962,0,3,5,2,10,6,-1,10,2,5,3,2,5,5,5,3,2,-.00794176384806633,.3792561888694763,.5585265755653381,0,2,9,7,2,4,-1,10,7,1,4,2,-.00721444096416235,.7253103852272034,.4603548943996429,0,2,9,7,3,3,-1,10,7,1,3,3,.002581733977422118,.4693301916122437,.5900238752365112,0,2,4,5,12,8,-1,8,5,4,8,3,.1340931951999664,.5149213075637817,.1808844953775406,0,2,15,15,4,3,-1,15,16,4,1,3,.0022962710354477167,.5399743914604187,.3717867136001587,0,2,8,18,3,1,-1,9,18,1,1,3,-.002157584996894002,.2408495992422104,.5148863792419434,0,2,9,13,4,3,-1,9,14,4,1,3,-.004919618833810091,.6573588252067566,.4738740026950836,0,2,7,13,4,3,-1,7,14,4,1,3,.0016267469618469477,.4192821979522705,.6303114295005798,0,2,19,15,1,2,-1,19,16,1,1,2,.00033413388882763684,.5540298223495483,.3702101111412048,0,2,0,15,8,4,-1,0,17,8,2,2,-.0266980808228254,.1710917949676514,.5101410746574402,0,2,9,3,6,4,-1,11,3,2,4,3,-.0305618792772293,.1904218047857285,.5168793797492981,0,2,8,14,4,3,-1,8,15,4,1,3,.002851154888048768,.4447506964206696,.6313853859901428,0,2,3,14,14,6,-1,3,16,14,2,3,-.0362114794552326,.2490727007389069,.5377349257469177,0,2,6,3,6,6,-1,6,6,6,3,2,-.002411518944427371,.5381243228912354,.3664236962795258,0,2,5,11,10,6,-1,5,14,10,3,2,-.0007725320174358785,.5530232191085815,.3541550040245056,0,2,3,10,3,4,-1,4,10,1,4,3,.0002948172914329916,.4132699072360992,.5667243003845215,0,2,13,9,2,2,-1,13,9,1,2,2,-.006233456078916788,.0987872332334518,.5198668837547302,0,2,5,3,6,4,-1,7,3,2,4,3,-.0262747295200825,.0911274924874306,.5028107166290283,0,2,9,7,3,3,-1,10,7,1,3,3,.005321226082742214,.4726648926734924,.6222720742225647,0,2,2,12,2,3,-1,2,13,2,1,3,-.004112905822694302,.2157457023859024,.5137804746627808,0,2,9,8,3,12,-1,9,12,3,4,3,.0032457809429615736,.5410770773887634,.3721776902675629,0,3,3,14,4,6,-1,3,14,2,3,2,5,17,2,3,2,-.0163597092032433,.7787874937057495,.4685291945934296,0,2,16,15,2,2,-1,16,16,2,1,2,.00032166109303943813,.5478987097740173,.4240373969078064,0,2,2,15,2,2,-1,2,16,2,1,2,.000644524407107383,.5330560803413391,.3501324951648712,0,2,8,12,4,3,-1,8,13,4,1,3,-.0078909732401371,.6923521161079407,.4726569056510925,0,2,0,7,20,1,-1,10,7,10,1,2,.048336211591959,.50559002161026,.0757492035627365,0,2,7,6,8,3,-1,7,6,4,3,2,-.000751781277358532,.3783741891384125,.5538573861122131,0,2,5,7,8,2,-1,9,7,4,2,2,-.002495391061529517,.3081651031970978,.5359612107276917,0,2,9,7,3,5,-1,10,7,1,5,3,-.0022385010961443186,.663395881652832,.4649342894554138,0,2,8,7,3,5,-1,9,7,1,5,3,-.0017988430336117744,.6596844792366028,.4347187876701355,0,2,11,1,3,5,-1,12,1,1,5,3,.008786091580986977,.523183286190033,.2315579950809479,0,2,6,2,3,6,-1,7,2,1,6,3,.003671538084745407,.520425021648407,.2977376878261566,0,2,14,14,6,5,-1,14,14,3,5,2,-.0353364497423172,.7238878011703491,.4861505031585693,0,2,9,8,2,2,-1,9,9,2,1,2,-.0006918924045749009,.3105022013187408,.5229824781417847,0,2,10,7,1,3,-1,10,8,1,1,3,-.003394610946998,.3138968050479889,.5210173726081848,0,3,6,6,2,2,-1,6,6,1,1,2,7,7,1,1,2,.0009856928372755647,.4536580145359039,.6585097908973694,0,3,2,11,18,4,-1,11,11,9,2,2,2,13,9,2,2,-.0501631014049053,.1804454028606415,.5198916792869568,0,3,6,6,2,2,-1,6,6,1,1,2,7,7,1,1,2,-.0022367259953171015,.7255702018737793,.4651359021663666,0,2,0,15,20,2,-1,0,16,20,1,2,.0007432628772221506,.4412921071052551,.5898545980453491,0,2,4,14,2,3,-1,4,15,2,1,3,-.0009348518215119839,.3500052988529205,.5366017818450928,0,2,8,14,4,3,-1,8,15,4,1,3,.0174979399889708,.4912194907665253,.8315284848213196,0,2,8,7,2,3,-1,8,8,2,1,3,-.0015200000489130616,.3570275902748108,.537056028842926,0,2,9,10,2,3,-1,9,11,2,1,3,.0007800394087098539,.4353772103786469,.5967335104942322,50.61048126220703,103,0,2,5,4,10,4,-1,5,6,10,2,2,-.00999455526471138,.6162583231925964,.3054533004760742,0,3,9,7,6,4,-1,12,7,3,2,2,9,9,3,2,2,-.001108522992581129,.5818294882774353,.3155578076839447,0,2,4,7,3,6,-1,4,9,3,2,3,.001036438043229282,.2552052140235901,.5692911744117737,0,3,11,15,4,4,-1,13,15,2,2,2,11,17,2,2,2,.000682113110087812,.3685089945793152,.5934931039810181,0,2,7,8,4,2,-1,7,9,4,1,2,-.0006805734010413289,.2332392036914825,.5474792122840881,0,2,13,1,4,3,-1,13,1,2,3,2,.0002606878988444805,.325745701789856,.5667545795440674,0,3,5,15,4,4,-1,5,15,2,2,2,7,17,2,2,2,.0005160737200640142,.3744716942310333,.5845472812652588,0,2,9,5,4,7,-1,9,5,2,7,2,.0008500752155669034,.3420371115207672,.5522807240486145,0,2,5,6,8,3,-1,9,6,4,3,2,-.0018607829697430134,.2804419994354248,.5375424027442932,0,2,9,9,2,2,-1,9,10,2,1,2,-.001503397012129426,.2579050958156586,.5498952269554138,0,2,7,15,5,3,-1,7,16,5,1,3,.0023478909861296415,.4175156056880951,.6313710808753967,0,2,11,10,4,3,-1,11,10,2,3,2,-.00028880240279249847,.5865169763565063,.4052666127681732,0,2,6,9,8,10,-1,6,14,8,5,2,.008940547704696655,.5211141109466553,.231865406036377,0,2,10,11,6,2,-1,10,11,3,2,2,-.0193277392536402,.2753432989120483,.5241525769233704,0,2,4,11,6,2,-1,7,11,3,2,2,-.0002020206011366099,.5722978711128235,.3677195906639099,0,2,11,3,8,1,-1,11,3,4,1,2,.002117906929925084,.4466108083724976,.5542430877685547,0,2,6,3,3,2,-1,7,3,1,2,3,-.0017743760254234076,.2813253104686737,.5300959944725037,0,2,14,5,6,5,-1,14,5,3,5,2,.004223445896059275,.439970999956131,.5795428156852722,0,2,7,5,2,12,-1,7,11,2,6,2,-.0143752200528979,.2981117963790894,.5292059183120728,0,2,8,11,4,3,-1,8,12,4,1,3,-.0153491804376245,.7705215215682983,.4748171865940094,0,2,4,1,2,3,-1,5,1,1,3,2,15152279956964776e-21,.3718844056129456,.5576897263526917,0,2,18,3,2,6,-1,18,5,2,2,3,-.009129391983151436,.3615196049213409,.5286766886711121,0,2,0,3,2,6,-1,0,5,2,2,3,.0022512159775942564,.5364704728126526,.3486298024654388,0,2,9,12,2,3,-1,9,13,2,1,3,-.0049696918576955795,.6927651762962341,.4676836133003235,0,2,7,13,4,3,-1,7,14,4,1,3,-.0128290103748441,.7712153792381287,.4660735130310059,0,2,18,0,2,6,-1,18,2,2,2,3,-.009366006590425968,.3374983966350555,.5351287722587585,0,2,0,0,2,6,-1,0,2,2,2,3,.0032452319283038378,.5325189828872681,.3289610147476196,0,2,8,14,6,3,-1,8,15,6,1,3,-.0117235602810979,.6837652921676636,.4754300117492676,0,2,7,4,2,4,-1,8,4,1,4,2,2925794069597032e-20,.357208788394928,.5360502004623413,0,2,8,5,4,6,-1,8,7,4,2,3,-22244219508138485e-21,.5541427135467529,.3552064001560211,0,2,6,4,2,2,-1,7,4,1,2,2,.005088150966912508,.5070844292640686,.1256462037563324,0,3,3,14,14,4,-1,10,14,7,2,2,3,16,7,2,2,.0274296794086695,.5269560217857361,.1625818014144898,0,3,6,15,6,2,-1,6,15,3,1,2,9,16,3,1,2,-.00641428679227829,.7145588994026184,.4584197103977203,0,2,14,15,6,2,-1,14,16,6,1,2,.003347995923832059,.5398612022399902,.3494696915149689,0,2,2,12,12,8,-1,2,16,12,4,2,-.0826354920864105,.2439192980527878,.5160226225852966,0,2,7,7,7,2,-1,7,8,7,1,2,.0010261740535497665,.3886891901493073,.5767908096313477,0,2,0,2,18,2,-1,0,3,18,1,2,-.0016307090409100056,.3389458060264587,.5347700715065002,0,2,9,6,2,5,-1,9,6,1,5,2,.0024546680506318808,.4601413905620575,.638724684715271,0,2,7,5,3,8,-1,8,5,1,8,3,-.0009947651997208595,.5769879221916199,.4120396077632904,0,2,9,6,3,4,-1,10,6,1,4,3,.0154091902077198,.4878709018230438,.7089822292327881,0,2,4,13,3,2,-1,4,14,3,1,2,.001178440055809915,.5263553261756897,.2895244956016541,0,2,9,4,6,3,-1,11,4,2,3,3,-.0277019198983908,.149882897734642,.5219606757164001,0,2,5,4,6,3,-1,7,4,2,3,3,-.0295053999871016,.024893319234252,.4999816119670868,0,2,14,11,5,2,-1,14,12,5,1,2,.0004515943001024425,.5464622974395752,.4029662907123566,0,2,1,2,6,9,-1,3,2,2,9,3,.007177263963967562,.4271056950092316,.5866296887397766,0,2,14,6,6,13,-1,14,6,3,13,2,-.0741820484399796,.6874179244041443,.4919027984142304,0,3,3,6,14,8,-1,3,6,7,4,2,10,10,7,4,2,-.0172541607171297,.3370676040649414,.534873902797699,0,2,16,0,4,11,-1,16,0,2,11,2,.0148515598848462,.4626792967319489,.6129904985427856,0,3,3,4,12,12,-1,3,4,6,6,2,9,10,6,6,2,.0100020002573729,.5346122980117798,.3423453867435455,0,2,11,4,5,3,-1,11,5,5,1,3,.0020138120744377375,.4643830060958862,.5824304223060608,0,2,4,11,4,2,-1,4,12,4,1,2,.0015135470312088728,.5196396112442017,.2856149971485138,0,2,10,7,2,2,-1,10,7,1,2,2,.003138143103569746,.4838162958621979,.5958529710769653,0,2,8,7,2,2,-1,9,7,1,2,2,-.005145044066011906,.8920302987098694,.4741412103176117,0,2,9,17,3,2,-1,10,17,1,2,3,-.004473670851439238,.2033942937850952,.5337278842926025,0,2,5,6,3,3,-1,5,7,3,1,3,.001962847076356411,.457163393497467,.6725863218307495,0,2,10,0,3,3,-1,11,0,1,3,3,.005426045041531324,.5271108150482178,.2845670878887177,0,3,5,6,6,2,-1,5,6,3,1,2,8,7,3,1,2,.0004961146041750908,.4138312935829163,.5718597769737244,0,2,12,16,4,3,-1,12,17,4,1,3,.009372878819704056,.5225151181221008,.2804847061634064,0,2,3,12,3,2,-1,3,13,3,1,2,.0006050089723430574,.523676872253418,.3314523994922638,0,2,9,12,3,2,-1,9,13,3,1,2,.0005679255118593574,.4531059861183167,.6276971101760864,0,3,1,11,16,4,-1,1,11,8,2,2,9,13,8,2,2,.0246443394571543,.5130851864814758,.2017143964767456,0,2,12,4,3,3,-1,12,5,3,1,3,-.0102904504165053,.7786595225334167,.4876641035079956,0,2,4,4,5,3,-1,4,5,5,1,3,.002062941901385784,.4288598895072937,.5881264209747314,0,2,12,16,4,3,-1,12,17,4,1,3,-.005051948130130768,.3523977994918823,.5286008715629578,0,2,5,4,3,3,-1,5,5,3,1,3,-.0057692620903253555,.6841086149215698,.4588094055652618,0,2,9,0,2,2,-1,9,1,2,1,2,-.0004578994121402502,.356552004814148,.5485978126525879,0,2,8,9,4,2,-1,8,10,4,1,2,-.0007591883768327534,.336879312992096,.5254197120666504,0,2,8,8,4,3,-1,8,9,4,1,3,-.001773725962266326,.3422161042690277,.5454015135765076,0,2,0,13,6,3,-1,2,13,2,3,3,-.008561046794056892,.6533612012863159,.4485856890678406,0,2,16,14,3,2,-1,16,15,3,1,2,.0017277270089834929,.5307580232620239,.3925352990627289,0,2,1,18,18,2,-1,7,18,6,2,3,-.0281996093690395,.685745894908905,.4588584005832672,0,2,16,14,3,2,-1,16,15,3,1,2,-.001778110978193581,.4037851095199585,.5369856953620911,0,2,1,14,3,2,-1,1,15,3,1,2,.00033177141449414194,.539979875087738,.3705750107765198,0,2,7,14,6,3,-1,7,15,6,1,3,.0026385399978607893,.4665437042713165,.6452730894088745,0,2,5,14,8,3,-1,5,15,8,1,3,-.0021183069329708815,.5914781093597412,.4064677059650421,0,2,10,6,4,14,-1,10,6,2,14,2,-.0147732896730304,.3642038106918335,.5294762849807739,0,2,6,6,4,14,-1,8,6,2,14,2,-.0168154407292604,.2664231956005096,.5144972801208496,0,2,13,5,2,3,-1,13,6,2,1,3,-.006337014026939869,.6779531240463257,.4852097928524017,0,2,7,16,6,1,-1,9,16,2,1,3,-44560048991115764e-21,.5613964796066284,.4153054058551788,0,2,9,12,3,3,-1,9,13,3,1,3,-.0010240620467811823,.5964478254318237,.4566304087638855,0,2,7,0,3,3,-1,8,0,1,3,3,-.00231616897508502,.2976115047931671,.5188159942626953,0,2,4,0,16,18,-1,4,9,16,9,2,.5321757197380066,.5187839269638062,.220263198018074,0,2,1,1,16,14,-1,1,8,16,7,2,-.1664305031299591,.1866022944450378,.5060343146324158,0,2,3,9,15,4,-1,8,9,5,4,3,.112535297870636,.5212125182151794,.1185022965073586,0,2,6,12,7,3,-1,6,13,7,1,3,.009304686449468136,.4589937031269074,.6826149225234985,0,2,14,15,2,3,-1,14,16,2,1,3,-.004625509958714247,.3079940974712372,.5225008726119995,0,3,2,3,16,14,-1,2,3,8,7,2,10,10,8,7,2,-.1111646965146065,.2101044058799744,.5080801844596863,0,3,16,2,4,18,-1,18,2,2,9,2,16,11,2,9,2,-.0108884396031499,.5765355229377747,.4790464043617249,0,2,4,15,2,3,-1,4,16,2,1,3,.005856430158019066,.5065100193023682,.1563598960638046,0,3,16,2,4,18,-1,18,2,2,9,2,16,11,2,9,2,.0548543892800808,.49669149518013,.7230510711669922,0,2,1,1,8,3,-1,1,2,8,1,3,-.0111973397433758,.2194979041814804,.5098798274993896,0,2,8,11,4,3,-1,8,12,4,1,3,.004406907130032778,.4778401851654053,.6770902872085571,0,2,5,11,5,9,-1,5,14,5,3,3,-.0636652931571007,.1936362981796265,.5081024169921875,0,2,16,0,4,11,-1,16,0,2,11,2,-.009808149188756943,.599906325340271,.4810341000556946,0,2,7,0,6,1,-1,9,0,2,1,3,-.0021717099007219076,.3338333964347839,.5235472917556763,0,2,16,3,3,7,-1,17,3,1,7,3,-.0133155202493072,.6617069840431213,.4919213056564331,0,2,1,3,3,7,-1,2,3,1,7,3,.002544207964092493,.4488744139671326,.6082184910774231,0,2,7,8,6,12,-1,7,12,6,4,3,.0120378397405148,.540939211845398,.3292432129383087,0,2,0,0,4,11,-1,2,0,2,11,2,-.0207010507583618,.6819120049476624,.4594995975494385,0,2,14,0,6,20,-1,14,0,3,20,2,.0276082791388035,.4630792140960693,.5767282843589783,0,2,0,3,1,2,-1,0,4,1,1,2,.0012370620388537645,.5165379047393799,.2635016143321991,0,3,5,5,10,8,-1,10,5,5,4,2,5,9,5,4,2,-.037669338285923,.2536393105983734,.5278980135917664,0,3,4,7,12,4,-1,4,7,6,2,2,10,9,6,2,2,-.0018057259730994701,.3985156118869782,.5517500042915344,54.62007141113281,111,0,2,2,1,6,4,-1,5,1,3,4,2,.004429902881383896,.2891018092632294,.633522629737854,0,3,9,7,6,4,-1,12,7,3,2,2,9,9,3,2,2,-.0023813319858163595,.621178925037384,.3477487862110138,0,2,5,6,2,6,-1,5,9,2,3,2,.0022915711160749197,.2254412025213242,.5582118034362793,0,3,9,16,6,4,-1,12,16,3,2,2,9,18,3,2,2,.0009945794008672237,.3711710870265961,.5930070877075195,0,2,9,4,2,12,-1,9,10,2,6,2,.0007716466789133847,.565172016620636,.334799587726593,0,2,7,1,6,18,-1,9,1,2,18,3,-.001138641033321619,.3069126009941101,.5508630871772766,0,2,4,12,12,2,-1,8,12,4,2,3,-.0001640303962631151,.576282799243927,.3699047863483429,0,2,8,8,6,2,-1,8,9,6,1,2,29793529392918572e-21,.2644244134426117,.5437911152839661,0,2,8,0,3,6,-1,9,0,1,6,3,.008577490225434303,.5051138997077942,.1795724928379059,0,2,11,18,3,2,-1,11,19,3,1,2,-.0002603268949314952,.5826969146728516,.4446826875209808,0,2,1,1,17,4,-1,1,3,17,2,2,-.006140463054180145,.3113852143287659,.5346971750259399,0,2,11,8,4,12,-1,11,8,2,12,2,-.0230869501829147,.32779461145401,.533119797706604,0,2,8,14,4,3,-1,8,15,4,1,3,-.0142436502501369,.7381709814071655,.4588063061237335,0,2,12,3,2,17,-1,12,3,1,17,2,.0194871295243502,.5256630778312683,.2274471968412399,0,2,4,7,6,1,-1,6,7,2,1,3,-.0009668110869824886,.5511230826377869,.3815006911754608,0,2,18,3,2,3,-1,18,4,2,1,3,.003147470997646451,.5425636768341064,.2543726861476898,0,2,8,4,3,4,-1,8,6,3,2,2,-.00018026070029009134,.5380191802978516,.3406304121017456,0,2,4,5,12,10,-1,4,10,12,5,2,-.006026626098901033,.3035801947116852,.54205721616745,0,2,5,18,4,2,-1,7,18,2,2,2,.00044462960795499384,.3990997076034546,.5660110116004944,0,2,17,2,3,6,-1,17,4,3,2,3,.002260976005345583,.5562806725502014,.3940688073635101,0,2,7,7,6,6,-1,9,7,2,6,3,.0511330589652061,.4609653949737549,.7118561863899231,0,2,17,2,3,6,-1,17,4,3,2,3,-.0177863091230392,.2316166013479233,.5322144031524658,0,2,8,0,3,4,-1,9,0,1,4,3,-.004967962857335806,.233077198266983,.5122029185295105,0,2,9,14,2,3,-1,9,15,2,1,3,.002066768938675523,.4657444059848785,.6455488204956055,0,2,0,12,6,3,-1,0,13,6,1,3,.007441376801580191,.5154392123222351,.236163392663002,0,2,8,14,4,3,-1,8,15,4,1,3,-.003627727972343564,.6219773292541504,.4476661086082459,0,2,3,12,2,3,-1,3,13,2,1,3,-.005353075917810202,.1837355047464371,.5102208256721497,0,2,5,6,12,7,-1,9,6,4,7,3,.1453091949224472,.5145987272262573,.1535930931568146,0,2,0,2,3,6,-1,0,4,3,2,3,.0024394490756094456,.5343660116195679,.3624661862850189,0,2,14,6,1,3,-1,14,7,1,1,3,-.003128339070826769,.6215007901191711,.4845592081546783,0,2,2,0,3,14,-1,3,0,1,14,3,.0017940260004252195,.4299261868000031,.5824198126792908,0,2,12,14,5,6,-1,12,16,5,2,3,.0362538211047649,.5260334014892578,.1439467966556549,0,2,4,14,5,6,-1,4,16,5,2,3,-.005174672231078148,.350653886795044,.5287045240402222,0,3,11,10,2,2,-1,12,10,1,1,2,11,11,1,1,2,.0006538329762406647,.4809640944004059,.6122040152549744,0,2,5,0,3,14,-1,6,0,1,14,3,-.0264802295714617,.1139362007379532,.5045586228370667,0,2,10,15,2,3,-1,10,16,2,1,3,-.0030440660193562508,.6352095007896423,.4794734120368958,0,2,0,2,2,3,-1,0,3,2,1,3,.0036993520334362984,.5131118297576904,.2498510926961899,0,2,5,11,12,6,-1,5,14,12,3,2,-.0003676293126773089,.54213947057724,.3709532022476196,0,2,6,11,3,9,-1,6,14,3,3,3,-.041382260620594,.1894959956407547,.5081691741943359,0,3,11,10,2,2,-1,12,10,1,1,2,11,11,1,1,2,-.0010532729793339968,.645436704158783,.4783608913421631,0,2,5,6,1,3,-1,5,7,1,1,3,-.0021648600231856108,.6215031147003174,.449982613325119,0,2,4,9,13,3,-1,4,10,13,1,3,-.0005674774874933064,.3712610900402069,.5419334769248962,0,2,1,7,15,6,-1,6,7,5,6,3,.173758402466774,.5023643970489502,.1215742006897926,0,2,4,5,12,6,-1,8,5,4,6,3,-.0029049699660390615,.3240267932415009,.5381883978843689,0,2,8,10,4,3,-1,8,11,4,1,3,.0012299539521336555,.4165507853031158,.5703486204147339,0,2,15,14,1,3,-1,15,15,1,1,3,-.0005432923790067434,.3854042887687683,.554754912853241,0,2,1,11,5,3,-1,1,12,5,1,3,-.008329725824296474,.2204494029283524,.5097082853317261,0,2,7,1,7,12,-1,7,7,7,6,2,-.00010417630255687982,.560706615447998,.4303036034107208,0,3,0,1,6,10,-1,0,1,3,5,2,3,6,3,5,2,.0312047004699707,.4621657133102417,.6982004046440125,0,2,16,1,4,3,-1,16,2,4,1,3,.007894350215792656,.5269594192504883,.226906806230545,0,2,5,5,2,3,-1,5,6,2,1,3,-.004364531021565199,.6359223127365112,.4537956118583679,0,2,12,2,3,5,-1,13,2,1,5,3,.007679305970668793,.5274767875671387,.274048388004303,0,2,0,3,4,6,-1,0,5,4,2,3,-.0254311393946409,.2038519978523254,.5071732997894287,0,2,8,12,4,2,-1,8,13,4,1,2,.0008200060110539198,.4587455093860626,.6119868159294128,0,2,8,18,3,1,-1,9,18,1,1,3,.002928460016846657,.5071274042129517,.2028204947710037,0,3,11,10,2,2,-1,12,10,1,1,2,11,11,1,1,2,4525647091213614e-20,.4812104105949402,.5430821776390076,0,3,7,10,2,2,-1,7,10,1,1,2,8,11,1,1,2,.0013158309739083052,.4625813961029053,.6779323220252991,0,2,11,11,4,4,-1,11,13,4,2,2,.0015870389761403203,.5386291742324829,.3431465029716492,0,2,8,12,3,8,-1,9,12,1,8,3,-.0215396601706743,.025942500680685,.5003222823143005,0,2,13,0,6,3,-1,13,1,6,1,3,.014334480278194,.5202844738960266,.1590632945299149,0,2,8,8,3,4,-1,9,8,1,4,3,-.008388138376176357,.728248119354248,.4648044109344482,0,3,5,7,10,10,-1,10,7,5,5,2,5,12,5,5,2,.00919068418443203,.556235671043396,.3923191130161285,0,3,3,18,8,2,-1,3,18,4,1,2,7,19,4,1,2,-.005845305975526571,.6803392767906189,.4629127979278565,0,2,10,2,6,8,-1,12,2,2,8,3,-.0547077991068363,.2561671137809753,.5206125974655151,0,2,4,2,6,8,-1,6,2,2,8,3,.009114277549088001,.518962025642395,.3053877055644989,0,2,11,0,3,7,-1,12,0,1,7,3,-.0155750000849366,.1295074969530106,.5169094800949097,0,2,7,11,2,1,-1,8,11,1,1,2,-.0001205060034408234,.5735098123550415,.4230825006961823,0,2,15,14,1,3,-1,15,15,1,1,3,.0012273970060050488,.5289878249168396,.4079791903495789,0,3,7,15,2,2,-1,7,15,1,1,2,8,16,1,1,2,-.0012186600361019373,.6575639843940735,.4574409127235413,0,2,15,14,1,3,-1,15,15,1,1,3,-.0033256649039685726,.3628047108650208,.5195019841194153,0,2,6,0,3,7,-1,7,0,1,7,3,-.0132883097976446,.1284265965223312,.504348874092102,0,2,18,1,2,7,-1,18,1,1,7,2,-.0033839771058410406,.6292240023612976,.475750595331192,0,2,2,0,8,20,-1,2,10,8,10,2,-.2195422053337097,.148773193359375,.5065013766288757,0,2,3,0,15,6,-1,3,2,15,2,3,.004911170806735754,.425610214471817,.5665838718414307,0,2,4,3,12,2,-1,4,4,12,1,2,-.00018744950648397207,.4004144072532654,.5586857199668884,0,2,16,0,4,5,-1,16,0,2,5,2,-.00521786417812109,.6009116172790527,.4812706112861633,0,2,7,0,3,4,-1,8,0,1,4,3,-.0011111519997939467,.3514933884143829,.5287089943885803,0,2,16,0,4,5,-1,16,0,2,5,2,.004403640050441027,.4642275869846344,.5924085974693298,0,2,1,7,6,13,-1,3,7,2,13,3,.1229949966073036,.5025529265403748,.0691524818539619,0,2,16,0,4,5,-1,16,0,2,5,2,-.0123135102912784,.5884591937065125,.4934012889862061,0,2,0,0,4,5,-1,2,0,2,5,2,.004147103987634182,.4372239112854004,.589347779750824,0,2,14,12,3,6,-1,14,14,3,2,3,-.003550264984369278,.4327551126480103,.5396270155906677,0,2,3,12,3,6,-1,3,14,3,2,3,-.0192242693156004,.1913134008646011,.5068330764770508,0,2,16,1,4,3,-1,16,2,4,1,3,.0014395059552043676,.5308178067207336,.424353301525116,0,3,8,7,2,10,-1,8,7,1,5,2,9,12,1,5,2,-.00677519990131259,.6365395784378052,.4540086090564728,0,2,11,11,4,4,-1,11,13,4,2,2,.007011963054537773,.5189834237098694,.302619993686676,0,2,0,1,4,3,-1,0,2,4,1,3,.005401465110480785,.5105062127113342,.2557682991027832,0,2,13,4,1,3,-1,13,5,1,1,3,.0009027498890645802,.4696914851665497,.5861827731132507,0,2,7,15,3,5,-1,8,15,1,5,3,.0114744501188397,.5053645968437195,.152717798948288,0,2,9,7,3,5,-1,10,7,1,5,3,-.006702343001961708,.6508980989456177,.4890604019165039,0,2,8,7,3,5,-1,9,7,1,5,3,-.0020462959073483944,.6241816878318787,.4514600038528442,0,2,10,6,4,14,-1,10,6,2,14,2,-.009995156899094582,.3432781100273132,.5400953888893127,0,2,0,5,5,6,-1,0,7,5,2,3,-.0357007086277008,.1878059059381485,.5074077844619751,0,2,9,5,6,4,-1,9,5,3,4,2,.0004558456130325794,.3805277049541473,.5402569770812988,0,2,0,0,18,10,-1,6,0,6,10,3,-.0542606003582478,.6843714714050293,.4595097005367279,0,2,10,6,4,14,-1,10,6,2,14,2,.0060600461438298225,.5502905249595642,.450052797794342,0,2,6,6,4,14,-1,8,6,2,14,2,-.006479183211922646,.3368858098983765,.5310757160186768,0,2,13,4,1,3,-1,13,5,1,1,3,-.0014939469983801246,.6487640142440796,.4756175875663757,0,2,5,1,2,3,-1,6,1,1,3,2,14610530342906713e-21,.403457909822464,.5451064109802246,0,3,18,1,2,18,-1,19,1,1,9,2,18,10,1,9,2,-.00723219383507967,.6386873722076416,.4824739992618561,0,2,2,1,4,3,-1,2,2,4,1,3,-.004064581822603941,.2986421883106232,.5157335996627808,0,3,18,1,2,18,-1,19,1,1,9,2,18,10,1,9,2,.0304630808532238,.5022199749946594,.7159956097602844,0,3,1,14,4,6,-1,1,14,2,3,2,3,17,2,3,2,-.008054491132497787,.6492452025413513,.4619275033473969,0,2,10,11,7,6,-1,10,13,7,2,3,.0395051389932632,.5150570869445801,.2450613975524902,0,3,0,10,6,10,-1,0,10,3,5,2,3,15,3,5,2,.008453020825982094,.4573669135570526,.6394037008285522,0,2,11,0,3,4,-1,12,0,1,4,3,-.0011688120430335402,.3865512013435364,.548366129398346,0,2,5,10,5,6,-1,5,13,5,3,2,.002807067008689046,.5128579139709473,.2701480090618134,0,2,14,6,1,8,-1,14,10,1,4,2,.000473652093205601,.4051581919193268,.5387461185455322,0,3,1,7,18,6,-1,1,7,9,3,2,10,10,9,3,2,.0117410803213716,.5295950174331665,.3719413876533508,0,2,9,7,2,2,-1,9,7,1,2,2,.0031833238899707794,.4789406955242157,.6895126104354858,0,2,5,9,4,5,-1,7,9,2,5,2,.0007024150108918548,.5384489297866821,.3918080925941467,50.16973114013672,102,0,2,7,6,6,3,-1,9,6,2,3,3,.0170599296689034,.3948527872562408,.7142534852027893,0,2,1,0,18,4,-1,7,0,6,4,3,.0218408405780792,.3370316028594971,.6090016961097717,0,2,7,15,2,4,-1,7,17,2,2,2,.00024520049919374287,.3500576019287109,.5987902283668518,0,2,1,0,19,9,-1,1,3,19,3,3,.008327260613441467,.3267528116703033,.5697240829467773,0,2,3,7,3,6,-1,3,9,3,2,3,.0005714829894714057,.3044599890708923,.5531656742095947,0,3,13,7,4,4,-1,15,7,2,2,2,13,9,2,2,2,.0006737398798577487,.3650012016296387,.567263126373291,0,3,3,7,4,4,-1,3,7,2,2,2,5,9,2,2,2,3468159047770314e-20,.3313541114330292,.5388727188110352,0,2,9,6,10,8,-1,9,10,10,4,2,-.005856339819729328,.2697942852973938,.5498778820037842,0,2,3,8,14,12,-1,3,14,14,6,2,.00851022731512785,.5269358158111572,.2762879133224487,0,3,6,5,10,12,-1,11,5,5,6,2,6,11,5,6,2,-.0698172077536583,.2909603118896484,.5259246826171875,0,2,9,11,2,3,-1,9,12,2,1,3,-.0008611367084085941,.5892577171325684,.4073697924613953,0,2,9,5,6,5,-1,9,5,3,5,2,.0009714924963191152,.3523564040660858,.5415862202644348,0,2,9,4,2,4,-1,9,6,2,2,2,-1472749045206001e-20,.5423017740249634,.3503156006336212,0,2,9,5,6,5,-1,9,5,3,5,2,.0484202913939953,.51939457654953,.3411195874214172,0,2,5,5,6,5,-1,8,5,3,5,2,.0013257140526548028,.315776914358139,.5335376262664795,0,2,11,2,6,1,-1,13,2,2,1,3,1492214960308047e-20,.4451299905776978,.5536553859710693,0,2,3,2,6,1,-1,5,2,2,1,3,-.002717339899390936,.3031741976737976,.5248088836669922,0,2,13,5,2,3,-1,13,6,2,1,3,.0029219500720500946,.4781453013420105,.6606041789054871,0,2,0,10,1,4,-1,0,12,1,2,2,-.0019804988987743855,.3186308145523071,.5287625193595886,0,2,13,5,2,3,-1,13,6,2,1,3,-.004001210909336805,.6413596868515015,.4749928116798401,0,2,8,18,3,2,-1,9,18,1,2,3,-.004349199123680592,.1507498025894165,.5098996758460999,0,2,6,15,9,2,-1,6,16,9,1,2,.0013490889687091112,.4316158890724182,.5881167054176331,0,2,8,14,4,3,-1,8,15,4,1,3,.0185970701277256,.4735553860664368,.9089794158935547,0,2,18,4,2,4,-1,18,6,2,2,2,-.001856237999163568,.3553189039230347,.5577837228775024,0,2,5,5,2,3,-1,5,6,2,1,3,.002294043079018593,.4500094950199127,.6580877900123596,0,2,15,16,3,2,-1,15,17,3,1,2,.00029982850537635386,.5629242062568665,.3975878953933716,0,2,0,0,3,9,-1,0,3,3,3,3,.0035455459728837013,.5381547212600708,.3605485856533051,0,2,9,7,3,3,-1,9,8,3,1,3,.009610472247004509,.5255997180938721,.1796745955944061,0,2,8,7,3,3,-1,8,8,3,1,3,-.0062783220782876015,.227285698056221,.5114030241966248,0,2,9,5,2,6,-1,9,5,1,6,2,.0034598479978740215,.4626308083534241,.6608219146728516,0,2,8,6,3,4,-1,9,6,1,4,3,-.0013112019514665008,.6317539811134338,.4436857998371124,0,3,7,6,8,12,-1,11,6,4,6,2,7,12,4,6,2,.002687617903575301,.5421109795570374,.4054022133350372,0,3,5,6,8,12,-1,5,6,4,6,2,9,12,4,6,2,.003911816980689764,.5358477830886841,.3273454904556274,0,2,12,4,3,3,-1,12,5,3,1,3,-.014206450432539,.7793576717376709,.4975781142711639,0,2,2,16,3,2,-1,2,17,3,1,2,.0007170552853494883,.5297319889068604,.3560903966426849,0,2,12,4,3,3,-1,12,5,3,1,3,.001663501956500113,.467809408903122,.5816481709480286,0,2,2,12,6,6,-1,2,14,6,2,3,.0033686188980937004,.5276734232902527,.3446420133113861,0,2,7,13,6,3,-1,7,14,6,1,3,.0127995302900672,.4834679961204529,.7472159266471863,0,2,6,14,6,3,-1,6,15,6,1,3,.0033901201095432043,.4511859118938446,.6401721239089966,0,2,14,15,5,3,-1,14,16,5,1,3,.004707077983766794,.533565878868103,.355522096157074,0,2,5,4,3,3,-1,5,5,3,1,3,.0014819339849054813,.4250707030296326,.5772724151611328,0,2,14,15,5,3,-1,14,16,5,1,3,-.0069995759986341,.3003320097923279,.5292900204658508,0,2,5,3,6,2,-1,7,3,2,2,3,.0159390103071928,.5067319273948669,.1675581932067871,0,2,8,15,4,3,-1,8,16,4,1,3,.007637734990566969,.4795069992542267,.7085601091384888,0,2,1,15,5,3,-1,1,16,5,1,3,.006733404006808996,.5133113265037537,.2162470072507858,0,3,8,13,4,6,-1,10,13,2,3,2,8,16,2,3,2,-.012858809903264,.1938841938972473,.525137186050415,0,2,7,8,3,3,-1,8,8,1,3,3,-.0006227080011740327,.5686538219451904,.419786810874939,0,2,12,0,5,4,-1,12,2,5,2,2,-.0005265168147161603,.4224168956279755,.5429695844650269,0,3,0,2,20,2,-1,0,2,10,1,2,10,3,10,1,2,.0110750999301672,.5113775134086609,.2514517903327942,0,2,1,0,18,4,-1,7,0,6,4,3,-.0367282517254353,.7194662094116211,.4849618971347809,0,2,4,3,6,1,-1,6,3,2,1,3,-.00028207109426148236,.3840261995792389,.539444625377655,0,2,4,18,13,2,-1,4,19,13,1,2,-.0027489690110087395,.593708872795105,.4569182097911835,0,2,2,10,3,6,-1,2,12,3,2,3,.0100475195795298,.5138576030731201,.2802298069000244,0,3,14,12,6,8,-1,17,12,3,4,2,14,16,3,4,2,-.008149784058332443,.6090037226676941,.4636121094226837,0,3,4,13,10,6,-1,4,13,5,3,2,9,16,5,3,2,-.006883388850837946,.3458611071109772,.5254660248756409,0,2,14,12,1,2,-1,14,13,1,1,2,-140393603942357e-19,.5693104267120361,.4082083106040955,0,2,8,13,4,3,-1,8,14,4,1,3,.001549841952510178,.4350537061691284,.5806517004966736,0,2,14,12,2,2,-1,14,13,2,1,2,-.006784149911254644,.1468873023986816,.5182775259017944,0,2,4,12,2,2,-1,4,13,2,1,2,.00021705629478674382,.5293524265289307,.345617413520813,0,2,8,12,9,2,-1,8,13,9,1,2,.00031198898795992136,.4652450978755951,.5942413806915283,0,2,9,14,2,3,-1,9,15,2,1,3,.005450753029435873,.4653508961200714,.7024846076965332,0,2,11,10,3,6,-1,11,13,3,3,2,-.00025818689027801156,.5497295260429382,.3768967092037201,0,2,5,6,9,12,-1,5,12,9,6,2,-.0174425393342972,.3919087946414948,.5457497835159302,0,2,11,10,3,6,-1,11,13,3,3,2,-.045343529433012,.1631357073783875,.5154908895492554,0,2,6,10,3,6,-1,6,13,3,3,2,.0019190689781680703,.514589786529541,.2791895866394043,0,2,5,4,11,3,-1,5,5,11,1,3,-.006017786916345358,.6517636179924011,.4756332933902741,0,2,7,1,5,10,-1,7,6,5,5,2,-.004072073847055435,.5514652729034424,.4092685878276825,0,2,2,8,18,2,-1,2,9,18,1,2,.00039855059003457427,.316524088382721,.5285550951957703,0,2,7,17,5,3,-1,7,18,5,1,3,-.0065418570302426815,.6853377819061279,.4652808904647827,0,2,5,9,12,1,-1,9,9,4,1,3,.003484508953988552,.5484588146209717,.4502759873867035,0,3,0,14,6,6,-1,0,14,3,3,2,3,17,3,3,2,-.0136967804282904,.6395779848098755,.4572555124759674,0,2,5,9,12,1,-1,9,9,4,1,3,-.017347140237689,.2751072943210602,.5181614756584167,0,2,3,9,12,1,-1,7,9,4,1,3,-.004088542889803648,.3325636088848114,.5194984078407288,0,2,14,10,6,7,-1,14,10,3,7,2,-.009468790143728256,.5942280888557434,.485181987285614,0,2,1,0,16,2,-1,1,1,16,1,2,.0017084840219467878,.4167110919952393,.5519806146621704,0,2,10,9,10,9,-1,10,12,10,3,3,.009480909444391727,.5433894991874695,.4208514988422394,0,2,0,1,10,2,-1,5,1,5,2,2,-.004738965071737766,.6407189965248108,.4560655057430267,0,2,17,3,2,3,-1,17,4,2,1,3,.006576105020940304,.5214555263519287,.2258227020502091,0,2,1,3,2,3,-1,1,4,2,1,3,-.0021690549328923225,.3151527941226959,.5156704783439636,0,2,9,7,3,6,-1,10,7,1,6,3,.014660170301795,.4870837032794952,.668994128704071,0,2,6,5,4,3,-1,8,5,2,3,2,.00017231999663636088,.3569748997688294,.5251078009605408,0,2,7,5,6,6,-1,9,5,2,6,3,-.0218037609010935,.8825920820236206,.496632993221283,0,3,3,4,12,12,-1,3,4,6,6,2,9,10,6,6,2,-.0947361066937447,.1446162015199661,.5061113834381104,0,2,9,2,6,15,-1,11,2,2,15,3,.0055825551971793175,.5396478772163391,.4238066077232361,0,2,2,2,6,17,-1,4,2,2,17,3,.001951709040440619,.4170410931110382,.5497786998748779,0,2,14,10,6,7,-1,14,10,3,7,2,.0121499001979828,.4698367118835449,.5664274096488953,0,2,0,10,6,7,-1,3,10,3,7,2,-.007516962010413408,.6267772912979126,.4463135898113251,0,2,9,2,6,15,-1,11,2,2,15,3,-.0716679096221924,.3097011148929596,.5221003293991089,0,2,5,2,6,15,-1,7,2,2,15,3,-.0882924199104309,.0811238884925842,.5006365180015564,0,2,17,9,3,6,-1,17,11,3,2,3,.0310630798339844,.5155503749847412,.1282255947589874,0,2,6,7,6,6,-1,8,7,2,6,3,.0466218404471874,.4699777960777283,.736396074295044,0,3,1,10,18,6,-1,10,10,9,3,2,1,13,9,3,2,-.0121894897893071,.3920530080795288,.5518996715545654,0,2,0,9,10,9,-1,0,12,10,3,3,.0130161102861166,.5260658264160156,.3685136139392853,0,2,8,15,4,3,-1,8,16,4,1,3,-.003495289944112301,.6339294910430908,.4716280996799469,0,2,5,12,3,4,-1,5,14,3,2,2,-4401503974804655e-20,.5333027243614197,.3776184916496277,0,2,3,3,16,12,-1,3,9,16,6,2,-.1096649020910263,.1765342056751251,.5198346972465515,0,3,1,1,12,12,-1,1,1,6,6,2,7,7,6,6,2,-.0009027955820783973,.5324159860610962,.3838908076286316,0,3,10,4,2,4,-1,11,4,1,2,2,10,6,1,2,2,.0007112664170563221,.4647929966449738,.5755224227905273,0,3,0,9,10,2,-1,0,9,5,1,2,5,10,5,1,2,-.003125027986243367,.323670893907547,.5166770815849304,0,2,9,11,3,3,-1,9,12,3,1,3,.002414467977359891,.4787439107894898,.6459717750549316,0,2,3,12,9,2,-1,3,13,9,1,2,.00044391240226104856,.4409308135509491,.6010255813598633,0,2,9,9,2,2,-1,9,10,2,1,2,-.0002261118934256956,.4038113951683044,.5493255853652954,66.66912078857422,135,0,2,3,4,13,6,-1,3,6,13,2,3,-.0469012893736362,.660017192363739,.3743801116943359,0,3,9,7,6,4,-1,12,7,3,2,2,9,9,3,2,2,-.001456834957934916,.578399121761322,.3437797129154205,0,2,1,0,6,8,-1,4,0,3,8,2,.005559836979955435,.3622266948223114,.5908216238021851,0,2,9,5,2,12,-1,9,11,2,6,2,.0007317048730328679,.550041913986206,.2873558104038239,0,2,4,4,3,10,-1,4,9,3,5,2,.001331800944171846,.267316997051239,.5431019067764282,0,2,6,17,8,3,-1,6,18,8,1,3,.00024347059661522508,.3855027854442596,.574138879776001,0,2,0,5,10,6,-1,0,7,10,2,3,-.0030512469820678234,.5503209829330444,.3462845087051392,0,2,13,2,3,2,-1,13,3,3,1,2,-.0006865719915367663,.3291221857070923,.5429509282112122,0,2,7,5,4,5,-1,9,5,2,5,2,.001466820016503334,.3588382005691528,.5351811051368713,0,2,12,14,3,6,-1,12,16,3,2,3,.0003202187072020024,.429684191942215,.5700234174728394,0,2,1,11,8,2,-1,1,12,8,1,2,.0007412218837998807,.5282164812088013,.3366870880126953,0,2,7,13,6,3,-1,7,14,6,1,3,.0038330298848450184,.4559567868709564,.6257336139678955,0,2,0,5,3,6,-1,0,7,3,2,3,-.0154564399272203,.2350116968154907,.512945294380188,0,2,13,2,3,2,-1,13,3,3,1,2,.002679677912965417,.5329415202140808,.4155062139034271,0,3,4,14,4,6,-1,4,14,2,3,2,6,17,2,3,2,.0028296569362282753,.4273087978363037,.5804538130760193,0,2,13,2,3,2,-1,13,3,3,1,2,-.0039444249123334885,.2912611961364746,.5202686190605164,0,2,8,2,4,12,-1,8,6,4,4,3,.002717955969274044,.5307688117027283,.3585677146911621,0,3,14,0,6,8,-1,17,0,3,4,2,14,4,3,4,2,.005907762795686722,.470377504825592,.5941585898399353,0,2,7,17,3,2,-1,8,17,1,2,3,-.004224034957587719,.2141567021608353,.5088796019554138,0,2,8,12,4,2,-1,8,13,4,1,2,.0040725888684391975,.4766413867473602,.6841061115264893,0,3,6,0,8,12,-1,6,0,4,6,2,10,6,4,6,2,.0101495301350951,.5360798835754395,.3748497068881989,0,3,14,0,2,10,-1,15,0,1,5,2,14,5,1,5,2,-.00018864999583456665,.5720130205154419,.3853805065155029,0,3,5,3,8,6,-1,5,3,4,3,2,9,6,4,3,2,-.0048864358104765415,.3693122863769531,.5340958833694458,0,3,14,0,6,10,-1,17,0,3,5,2,14,5,3,5,2,.0261584799736738,.4962374866008759,.6059989929199219,0,2,9,14,1,2,-1,9,15,1,1,2,.0004856075975112617,.4438945949077606,.6012468934059143,0,2,15,10,4,3,-1,15,11,4,1,3,.0112687097862363,.5244250297546387,.1840388029813767,0,2,8,14,2,3,-1,8,15,2,1,3,-.0028114619199186563,.6060283780097961,.4409897029399872,0,3,3,13,14,4,-1,10,13,7,2,2,3,15,7,2,2,-.005611272994428873,.3891170918941498,.5589237213134766,0,2,1,10,4,3,-1,1,11,4,1,3,.008568009361624718,.5069345831871033,.2062619030475617,0,2,9,11,6,1,-1,11,11,2,1,3,-.00038172779022715986,.5882201790809631,.41926109790802,0,2,5,11,6,1,-1,7,11,2,1,3,-.00017680290329735726,.5533605813980103,.400336891412735,0,2,3,5,16,15,-1,3,10,16,5,3,.006511253770440817,.3310146927833557,.5444191098213196,0,2,6,12,4,2,-1,8,12,2,2,2,-6594868318643421e-20,.5433831810951233,.3944905996322632,0,3,4,4,12,10,-1,10,4,6,5,2,4,9,6,5,2,.006993905175477266,.5600358247756958,.4192714095115662,0,2,8,6,3,4,-1,9,6,1,4,3,-.0046744439750909805,.6685466766357422,.4604960978031158,0,3,8,12,4,8,-1,10,12,2,4,2,8,16,2,4,2,.0115898502990603,.5357121229171753,.2926830053329468,0,2,8,14,4,3,-1,8,15,4,1,3,.013007840141654,.4679817855358124,.730746328830719,0,2,12,2,3,2,-1,13,2,1,2,3,-.0011008579749614,.3937501013278961,.5415065288543701,0,2,8,15,3,2,-1,8,16,3,1,2,.0006047264905646443,.4242376089096069,.5604041218757629,0,2,6,0,9,14,-1,9,0,3,14,3,-.0144948400557041,.3631210029125214,.5293182730674744,0,2,9,6,2,3,-1,10,6,1,3,2,-.005305694881826639,.686045229434967,.4621821045875549,0,2,10,8,2,3,-1,10,9,2,1,3,-.00081829127157107,.3944096863269806,.542043924331665,0,2,0,9,4,6,-1,0,11,4,2,3,-.0190775208175182,.1962621957063675,.5037891864776611,0,2,6,0,8,2,-1,6,1,8,1,2,.00035549470339901745,.4086259007453919,.5613973140716553,0,2,6,14,7,3,-1,6,15,7,1,3,.0019679730758070946,.448912113904953,.5926123261451721,0,2,8,10,8,9,-1,8,13,8,3,3,.006918914150446653,.5335925817489624,.3728385865688324,0,2,5,2,3,2,-1,6,2,1,2,3,.002987277926877141,.5111321210861206,.2975643873214722,0,3,14,1,6,8,-1,17,1,3,4,2,14,5,3,4,2,-.006226461846381426,.5541489720344543,.4824537932872772,0,3,0,1,6,8,-1,0,1,3,4,2,3,5,3,4,2,.013353300280869,.4586423933506012,.6414797902107239,0,3,1,2,18,6,-1,10,2,9,3,2,1,5,9,3,2,.0335052385926247,.5392425060272217,.3429994881153107,0,2,9,3,2,1,-1,10,3,1,1,2,-.0025294460356235504,.1703713983297348,.5013315081596375,0,3,13,2,4,6,-1,15,2,2,3,2,13,5,2,3,2,-.001280162949115038,.5305461883544922,.4697405099868774,0,2,5,4,3,3,-1,5,5,3,1,3,.007068738806992769,.4615545868873596,.643650472164154,0,2,13,5,1,3,-1,13,6,1,1,3,.0009688049904070795,.4833599030971527,.6043894290924072,0,2,2,16,5,3,-1,2,17,5,1,3,.003964765928685665,.5187637209892273,.323181688785553,0,3,13,2,4,6,-1,15,2,2,3,2,13,5,2,3,2,-.022057730704546,.4079256951808929,.520098090171814,0,3,3,2,4,6,-1,3,2,2,3,2,5,5,2,3,2,-.0006690631271339953,.533160924911499,.3815600872039795,0,2,13,5,1,2,-1,13,6,1,1,2,-.0006700932863168418,.5655422210693359,.4688901901245117,0,2,5,5,2,2,-1,5,6,2,1,2,.000742845528293401,.4534381031990051,.6287400126457214,0,2,13,9,2,2,-1,13,9,1,2,2,.0022227810695767403,.5350633263587952,.3303655982017517,0,2,5,9,2,2,-1,6,9,1,2,2,-.005413052160292864,.1113687008619309,.500543475151062,0,2,13,17,3,2,-1,13,18,3,1,2,-14520040167553816e-21,.5628737807273865,.4325133860111237,0,3,6,16,4,4,-1,6,16,2,2,2,8,18,2,2,2,.00023369169502984732,.4165835082530975,.5447791218757629,0,2,9,16,2,3,-1,9,17,2,1,3,.004289454780519009,.4860391020774841,.6778649091720581,0,2,0,13,9,6,-1,0,15,9,2,3,.0059103150852024555,.52623051404953,.3612113893032074,0,2,9,14,2,6,-1,9,17,2,3,2,.0129005396738648,.5319377183914185,.32502880692482,0,2,9,15,2,3,-1,9,16,2,1,3,.004698297940194607,.461824506521225,.6665925979614258,0,2,1,10,18,6,-1,1,12,18,2,3,.0104398597031832,.550567090511322,.3883604109287262,0,2,8,11,4,2,-1,8,12,4,1,2,.0030443191062659025,.4697853028774262,.7301844954490662,0,2,7,9,6,2,-1,7,10,6,1,2,-.0006159375188872218,.3830839097499847,.5464984178543091,0,2,8,8,2,3,-1,8,9,2,1,3,-.0034247159492224455,.256630003452301,.5089530944824219,0,2,17,5,3,4,-1,18,5,1,4,3,-.009353856556117535,.6469966173171997,.49407958984375,0,2,1,19,18,1,-1,7,19,6,1,3,.0523389987647533,.4745982885360718,.787877082824707,0,2,9,0,3,2,-1,10,0,1,2,3,.0035765620414167643,.5306664705276489,.2748498022556305,0,2,1,8,1,6,-1,1,10,1,2,3,.0007155531784519553,.541312575340271,.4041908979415894,0,2,12,17,8,3,-1,12,17,4,3,2,-.0105166798457503,.6158512234687805,.4815283119678497,0,2,0,5,3,4,-1,1,5,1,4,3,.007734792772680521,.4695805907249451,.7028980851173401,0,2,9,7,2,3,-1,9,8,2,1,3,-.004322677850723267,.2849566042423248,.5304684042930603,0,3,7,11,2,2,-1,7,11,1,1,2,8,12,1,1,2,-.0025534399319440126,.7056984901428223,.4688892066478729,0,2,11,3,2,5,-1,11,3,1,5,2,.00010268510231981054,.3902932107448578,.5573464035987854,0,2,7,3,2,5,-1,8,3,1,5,2,7139518857002258e-21,.368423193693161,.526398777961731,0,2,15,13,2,3,-1,15,14,2,1,3,-.0016711989883333445,.3849175870418549,.5387271046638489,0,2,5,6,2,3,-1,5,7,2,1,3,.004926044959574938,.4729771912097931,.7447251081466675,0,2,4,19,15,1,-1,9,19,5,1,3,.0043908702209591866,.4809181094169617,.5591921806335449,0,2,1,19,15,1,-1,6,19,5,1,3,-.0177936293184757,.6903678178787231,.4676927030086517,0,2,15,13,2,3,-1,15,14,2,1,3,.002046966925263405,.5370690226554871,.3308162093162537,0,2,5,0,4,15,-1,7,0,2,15,2,.0298914890736341,.5139865279197693,.3309059143066406,0,2,9,6,2,5,-1,9,6,1,5,2,.0015494900289922953,.466023713350296,.6078342795372009,0,2,9,5,2,7,-1,10,5,1,7,2,.001495696953497827,.4404835999011993,.5863919854164124,0,2,16,11,3,3,-1,16,12,3,1,3,.0009588592802174389,.5435971021652222,.4208523035049439,0,2,1,11,3,3,-1,1,12,3,1,3,.0004964370164088905,.5370578169822693,.4000622034072876,0,2,6,6,8,3,-1,6,7,8,1,3,-.00272808107547462,.5659412741661072,.4259642958641052,0,2,0,15,6,2,-1,0,16,6,1,2,.0023026480339467525,.5161657929420471,.3350869119167328,0,2,1,0,18,6,-1,7,0,6,6,3,.2515163123607636,.4869661927223206,.714730978012085,0,2,6,0,3,4,-1,7,0,1,4,3,-.004632802214473486,.27274489402771,.5083789825439453,0,3,14,10,4,10,-1,16,10,2,5,2,14,15,2,5,2,-.0404344908893108,.6851438879966736,.5021767020225525,0,2,3,2,3,2,-1,4,2,1,2,3,14972220014897175e-21,.428446501493454,.5522555112838745,0,2,11,2,2,2,-1,11,3,2,1,2,-.00024050309730228037,.4226118922233582,.5390074849128723,0,3,2,10,4,10,-1,2,10,2,5,2,4,15,2,5,2,.0236578397452831,.4744631946086884,.7504366040229797,0,3,0,13,20,6,-1,10,13,10,3,2,0,16,10,3,2,-.00814491044729948,.424505889415741,.5538362860679626,0,2,0,5,2,15,-1,1,5,1,15,2,-.003699213033542037,.5952357053756714,.4529713094234467,0,3,1,7,18,4,-1,10,7,9,2,2,1,9,9,2,2,-.0067718601785600185,.4137794077396393,.5473399758338928,0,2,0,0,2,17,-1,1,0,1,17,2,.004266953095793724,.4484114944934845,.5797994136810303,0,3,2,6,16,6,-1,10,6,8,3,2,2,9,8,3,2,.0017791989957913756,.5624858736991882,.4432444870471954,0,2,8,14,1,3,-1,8,15,1,1,3,.0016774770338088274,.4637751877307892,.63642418384552,0,2,8,15,4,2,-1,8,16,4,1,2,.0011732629500329494,.4544503092765808,.5914415717124939,0,3,5,2,8,2,-1,5,2,4,1,2,9,3,4,1,2,.000869981711730361,.5334752798080444,.3885917961597443,0,2,6,11,8,6,-1,6,14,8,3,2,.0007637834060005844,.5398585200309753,.374494194984436,0,2,9,13,2,2,-1,9,14,2,1,2,.00015684569370932877,.4317873120307922,.5614616274833679,0,2,18,4,2,6,-1,18,6,2,2,3,-.0215113703161478,.1785925030708313,.5185542702674866,0,2,9,12,2,2,-1,9,13,2,1,2,.00013081369979772717,.4342499077320099,.5682849884033203,0,2,18,4,2,6,-1,18,6,2,2,3,.021992040798068,.5161716938018799,.2379394024610519,0,2,9,13,1,3,-1,9,14,1,1,3,-.0008013650076463819,.598676323890686,.4466426968574524,0,2,18,4,2,6,-1,18,6,2,2,3,-.008273609913885593,.410821795463562,.5251057147979736,0,2,0,4,2,6,-1,0,6,2,2,3,.0036831789184361696,.5173814296722412,.339751809835434,0,2,9,12,3,3,-1,9,13,3,1,3,-.007952568121254444,.6888983249664307,.4845924079418182,0,2,3,13,2,3,-1,3,14,2,1,3,.0015382299898192286,.5178567171096802,.3454113900661469,0,2,13,13,4,3,-1,13,14,4,1,3,-.0140435304492712,.1678421050310135,.518866777420044,0,2,5,4,3,3,-1,5,5,3,1,3,.0014315890148282051,.436825692653656,.5655773878097534,0,2,5,2,10,6,-1,5,4,10,2,3,-.0340142287313938,.7802296280860901,.4959217011928558,0,2,3,13,4,3,-1,3,14,4,1,3,-.0120272999629378,.1585101038217545,.503223180770874,0,2,3,7,15,5,-1,8,7,5,5,3,.1331661939620972,.5163304805755615,.2755128145217896,0,2,3,7,12,2,-1,7,7,4,2,3,-.0015221949433907866,.372831791639328,.5214552283287048,0,2,10,3,3,9,-1,11,3,1,9,3,-.000939292716793716,.5838379263877869,.4511165022850037,0,2,8,6,4,6,-1,10,6,2,6,2,.0277197398245335,.4728286862373352,.7331544756889343,0,2,9,7,4,3,-1,9,8,4,1,3,.003103015013039112,.5302202105522156,.4101563096046448,0,2,0,9,4,9,-1,2,9,2,9,2,.0778612196445465,.4998334050178528,.127296194434166,0,2,9,13,3,5,-1,10,13,1,5,3,-.0158549398183823,.0508333593606949,.5165656208992004,0,2,7,7,6,3,-1,9,7,2,3,3,-.00497253006324172,.6798133850097656,.4684231877326965,0,2,9,7,3,5,-1,10,7,1,5,3,-.0009767650626599789,.6010771989822388,.4788931906223297,0,2,5,7,8,2,-1,9,7,4,2,2,-.0024647710379213095,.3393397927284241,.5220503807067871,0,2,5,9,12,2,-1,9,9,4,2,3,-.006793770007789135,.4365136921405792,.5239663124084473,0,2,5,6,10,3,-1,10,6,5,3,2,.0326080210506916,.505272388458252,.2425214946269989,0,2,10,12,3,1,-1,11,12,1,1,3,-.0005851442110724747,.5733973979949951,.4758574068546295,0,2,0,1,11,15,-1,0,6,11,5,3,-.0296326000243425,.3892289102077484,.5263597965240479,67.69892120361328,137,0,2,1,0,18,6,-1,7,0,6,6,3,.0465508513152599,.3276950120925903,.6240522861480713,0,2,7,7,6,1,-1,9,7,2,1,3,.007953712716698647,.4256485104560852,.6942939162254333,0,3,5,16,6,4,-1,5,16,3,2,2,8,18,3,2,2,.0006822156137786806,.3711487054824829,.59007328748703,0,2,6,5,9,8,-1,6,9,9,4,2,-.00019348249770700932,.2041133940219879,.53005450963974,0,2,5,10,2,6,-1,5,13,2,3,2,-.0002671050897333771,.5416126251220703,.3103179037570953,0,3,7,6,8,10,-1,11,6,4,5,2,7,11,4,5,2,.0027818060480058193,.5277832746505737,.3467069864273071,0,3,5,6,8,10,-1,5,6,4,5,2,9,11,4,5,2,-.000467790785478428,.5308231115341187,.3294492065906525,0,2,9,5,2,2,-1,9,6,2,1,2,-30335160772665404e-21,.577387273311615,.3852097094058991,0,2,5,12,8,2,-1,5,13,8,1,2,.0007803800981491804,.4317438900470734,.6150057911872864,0,2,10,2,8,2,-1,10,3,8,1,2,-.004255385138094425,.2933903932571411,.5324292778968811,0,3,4,0,2,10,-1,4,0,1,5,2,5,5,1,5,2,-.0002473561035003513,.5468844771385193,.3843030035495758,0,2,9,10,2,2,-1,9,11,2,1,2,-.00014724259381182492,.4281542897224426,.5755587220191956,0,2,2,8,15,3,-1,2,9,15,1,3,.0011864770203828812,.374730110168457,.5471466183662415,0,2,8,13,4,3,-1,8,14,4,1,3,.0023936580400913954,.4537783861160278,.6111528873443604,0,2,7,2,3,2,-1,8,2,1,2,3,-.0015390539774671197,.2971341907978058,.518953800201416,0,2,7,13,6,3,-1,7,14,6,1,3,-.007196879014372826,.6699066758155823,.4726476967334747,0,2,9,9,2,2,-1,9,10,2,1,2,-.0004149978922214359,.3384954035282135,.5260317921638489,0,2,17,2,3,6,-1,17,4,3,2,3,.004435983020812273,.539912223815918,.3920140862464905,0,2,1,5,3,4,-1,2,5,1,4,3,.0026606200262904167,.4482578039169312,.6119617819786072,0,2,14,8,4,6,-1,14,10,4,2,3,-.0015287200221791863,.3711237907409668,.5340266227722168,0,2,1,4,3,8,-1,2,4,1,8,3,-.0047397250309586525,.603108823299408,.4455145001411438,0,2,8,13,4,6,-1,8,16,4,3,2,-.0148291299119592,.2838754057884216,.5341861844062805,0,2,3,14,2,2,-1,3,15,2,1,2,.0009227555710822344,.5209547281265259,.3361653983592987,0,2,14,8,4,6,-1,14,10,4,2,3,.0835298076272011,.5119969844818115,.0811644494533539,0,2,2,8,4,6,-1,2,10,4,2,3,-.0007563314866274595,.331712007522583,.5189831256866455,0,2,10,14,1,6,-1,10,17,1,3,2,.009840385988354683,.524759829044342,.233495905995369,0,2,7,5,3,6,-1,8,5,1,6,3,-.0015953830443322659,.5750094056129456,.4295622110366821,0,3,11,2,2,6,-1,12,2,1,3,2,11,5,1,3,2,34766020689858124e-21,.4342445135116577,.5564029216766357,0,2,6,6,6,5,-1,8,6,2,5,3,.0298629105091095,.4579147100448608,.6579188108444214,0,2,17,1,3,6,-1,17,3,3,2,3,.0113255903124809,.5274311900138855,.3673888146877289,0,2,8,7,3,5,-1,9,7,1,5,3,-.008782864548265934,.7100368738174438,.4642167091369629,0,2,9,18,3,2,-1,10,18,1,2,3,.004363995976746082,.5279216170310974,.2705877125263214,0,2,8,18,3,2,-1,9,18,1,2,3,.004180472809821367,.5072525143623352,.2449083030223846,0,2,12,3,5,2,-1,12,4,5,1,2,-.0004566851130221039,.4283105134963989,.5548691153526306,0,2,7,1,5,12,-1,7,7,5,6,2,-.0037140368949621916,.5519387722015381,.4103653132915497,0,2,1,0,18,4,-1,7,0,6,4,3,-.025304289534688,.6867002248764038,.48698890209198,0,2,4,2,2,2,-1,4,3,2,1,2,-.0003445408074185252,.3728874027729034,.528769314289093,0,3,11,14,4,2,-1,13,14,2,1,2,11,15,2,1,2,-.0008393523166887462,.6060152053833008,.4616062045097351,0,2,0,2,3,6,-1,0,4,3,2,3,.0172800496220589,.5049635767936707,.1819823980331421,0,2,9,7,2,3,-1,9,8,2,1,3,-.006359507795423269,.1631239950656891,.5232778787612915,0,2,5,5,1,3,-1,5,6,1,1,3,.0010298109846189618,.446327805519104,.6176549196243286,0,2,10,10,6,1,-1,10,10,3,1,2,.0010117109632119536,.5473384857177734,.4300698935985565,0,2,4,10,6,1,-1,7,10,3,1,2,-.010308800265193,.1166985034942627,.5000867247581482,0,2,9,17,3,3,-1,9,18,3,1,3,.005468201823532581,.4769287109375,.6719213724136353,0,2,4,14,1,3,-1,4,15,1,1,3,-.0009169646073132753,.3471089899539948,.5178164839744568,0,2,12,5,3,3,-1,12,6,3,1,3,.002392282010987401,.4785236120223999,.6216310858726501,0,2,4,5,12,3,-1,4,6,12,1,3,-.007557381875813007,.5814796090126038,.4410085082054138,0,2,9,8,2,3,-1,9,9,2,1,3,-.0007702403236180544,.387800008058548,.546572208404541,0,2,4,9,3,3,-1,5,9,1,3,3,-.00871259905397892,.1660051047801971,.4995836019515991,0,2,6,0,9,17,-1,9,0,3,17,3,-.0103063201531768,.4093391001224518,.5274233818054199,0,2,9,12,1,3,-1,9,13,1,1,3,-.002094097901135683,.6206194758415222,.4572280049324036,0,2,9,5,2,15,-1,9,10,2,5,3,.006809905171394348,.5567759275436401,.4155600070953369,0,2,8,14,2,3,-1,8,15,2,1,3,-.0010746059706434608,.5638927817344666,.4353024959564209,0,2,10,14,1,3,-1,10,15,1,1,3,.0021550289820879698,.4826265871524811,.6749758124351501,0,2,7,1,6,5,-1,9,1,2,5,3,.0317423194646835,.5048379898071289,.188324898481369,0,2,0,0,20,2,-1,0,0,10,2,2,-.0783827230334282,.2369548976421356,.5260158181190491,0,2,2,13,5,3,-1,2,14,5,1,3,.005741511937230825,.5048828721046448,.2776469886302948,0,2,9,11,2,3,-1,9,12,2,1,3,-.0029014600440859795,.6238604784011841,.4693317115306854,0,2,2,5,9,15,-1,2,10,9,5,3,-.0026427931152284145,.3314141929149628,.5169777274131775,0,3,5,0,12,10,-1,11,0,6,5,2,5,5,6,5,2,-.1094966009259224,.2380045056343079,.5183441042900085,0,2,5,1,2,3,-1,6,1,1,3,2,7407591328956187e-20,.406963586807251,.5362150073051453,0,2,10,7,6,1,-1,12,7,2,1,3,-.0005059380200691521,.5506706237792969,.437459409236908,0,3,3,1,2,10,-1,3,1,1,5,2,4,6,1,5,2,-.0008213177789002657,.5525709986686707,.4209375977516174,0,2,13,7,2,1,-1,13,7,1,1,2,-60276539443293586e-21,.5455474853515625,.4748266041278839,0,2,4,13,4,6,-1,4,15,4,2,3,.006806514225900173,.5157995820045471,.3424577116966248,0,2,13,7,2,1,-1,13,7,1,1,2,.0017202789895236492,.5013207793235779,.6331263780593872,0,2,5,7,2,1,-1,6,7,1,1,2,-.0001301692973356694,.5539718270301819,.4226869940757752,0,3,2,12,18,4,-1,11,12,9,2,2,2,14,9,2,2,-.004801638890057802,.4425095021724701,.5430780053138733,0,3,5,7,2,2,-1,5,7,1,1,2,6,8,1,1,2,-.002539931097999215,.7145782113075256,.4697605073451996,0,2,16,3,4,2,-1,16,4,4,1,2,-.0014278929447755218,.4070445001125336,.539960503578186,0,3,0,2,2,18,-1,0,2,1,9,2,1,11,1,9,2,-.0251425504684448,.7884690761566162,.4747352004051209,0,3,1,2,18,4,-1,10,2,9,2,2,1,4,9,2,2,-.0038899609353393316,.4296191930770874,.5577110052108765,0,2,9,14,1,3,-1,9,15,1,1,3,.004394745919853449,.4693162143230438,.702394425868988,0,3,2,12,18,4,-1,11,12,9,2,2,2,14,9,2,2,.0246784202754498,.5242322087287903,.3812510073184967,0,3,0,12,18,4,-1,0,12,9,2,2,9,14,9,2,2,.0380476787686348,.5011739730834961,.1687828004360199,0,2,11,4,5,3,-1,11,5,5,1,3,.007942486554384232,.4828582108020783,.6369568109512329,0,2,6,4,7,3,-1,6,5,7,1,3,-.0015110049862414598,.5906485915184021,.4487667977809906,0,2,13,17,3,3,-1,13,18,3,1,3,.0064201741479337215,.5241097807884216,.2990570068359375,0,2,8,1,3,4,-1,9,1,1,4,3,-.0029802159406244755,.3041465878486633,.5078489780426025,0,2,11,4,2,4,-1,11,4,1,4,2,-.0007458007894456387,.4128139019012451,.5256826281547546,0,2,0,17,9,3,-1,3,17,3,3,3,-.0104709500446916,.5808395147323608,.4494296014308929,0,3,11,0,2,8,-1,12,0,1,4,2,11,4,1,4,2,.009336920455098152,.524655282497406,.265894889831543,0,3,0,8,6,12,-1,0,8,3,6,2,3,14,3,6,2,.0279369000345469,.4674955010414124,.7087256908416748,0,2,10,7,4,12,-1,10,13,4,6,2,.007427767850458622,.5409486889839172,.3758518099784851,0,2,5,3,8,14,-1,5,10,8,7,2,-.0235845092684031,.3758639991283417,.5238550901412964,0,2,14,10,6,1,-1,14,10,3,1,2,.0011452640173956752,.4329578876495361,.5804247260093689,0,2,0,4,10,4,-1,0,6,10,2,2,-.0004346866044215858,.5280618071556091,.3873069882392883,0,2,10,0,5,8,-1,10,4,5,4,2,.0106485402211547,.4902113080024719,.5681251883506775,0,3,8,1,4,8,-1,8,1,2,4,2,10,5,2,4,2,-.0003941805043723434,.5570880174636841,.4318251013755798,0,2,9,11,6,1,-1,11,11,2,1,3,-.00013270479394122958,.5658439993858337,.4343554973602295,0,2,8,9,3,4,-1,9,9,1,4,3,-.002012551063671708,.6056739091873169,.4537523984909058,0,2,18,4,2,6,-1,18,6,2,2,3,.0024854319635778666,.5390477180480957,.4138010144233704,0,2,8,8,3,4,-1,9,8,1,4,3,.0018237880431115627,.4354828894138336,.5717188715934753,0,2,7,1,13,3,-1,7,2,13,1,3,-.0166566595435143,.3010913133621216,.521612286567688,0,2,7,13,6,1,-1,9,13,2,1,3,.0008034955826587975,.5300151109695435,.3818396925926209,0,2,12,11,3,6,-1,12,13,3,2,3,.003417037893086672,.5328028798103333,.4241400063037872,0,2,5,11,6,1,-1,7,11,2,1,3,-.00036222729249857366,.5491728186607361,.418697714805603,0,3,1,4,18,10,-1,10,4,9,5,2,1,9,9,5,2,-.1163002029061317,.1440722048282623,.522645115852356,0,2,8,6,4,9,-1,8,9,4,3,3,-.0146950101479888,.7747725248336792,.4715717136859894,0,2,8,6,4,3,-1,8,7,4,1,3,.0021972130052745342,.5355433821678162,.3315644860267639,0,2,8,7,3,3,-1,9,7,1,3,3,-.00046965209185145795,.5767235159873962,.4458136856555939,0,2,14,15,4,3,-1,14,16,4,1,3,.006514499895274639,.5215674042701721,.3647888898849487,0,2,5,10,3,10,-1,6,10,1,10,3,.0213000606745481,.4994204938411713,.1567950993776321,0,2,8,15,4,3,-1,8,16,4,1,3,.0031881409231573343,.4742200076580048,.6287270188331604,0,2,0,8,1,6,-1,0,10,1,2,3,.0009001977741718292,.5347954034805298,.394375205039978,0,2,10,15,1,3,-1,10,16,1,1,3,-.005177227780222893,.6727191805839539,.5013138055801392,0,2,2,15,4,3,-1,2,16,4,1,3,-.004376464989036322,.3106675148010254,.5128793120384216,0,3,18,3,2,8,-1,19,3,1,4,2,18,7,1,4,2,.002629996044561267,.488631010055542,.5755215883255005,0,3,0,3,2,8,-1,0,3,1,4,2,1,7,1,4,2,-.002045868895947933,.6025794148445129,.4558076858520508,0,3,3,7,14,10,-1,10,7,7,5,2,3,12,7,5,2,.0694827064871788,.5240747928619385,.2185259014368057,0,2,0,7,19,3,-1,0,8,19,1,3,.0240489393472672,.501186728477478,.2090622037649155,0,2,12,6,3,3,-1,12,7,3,1,3,.003109534038230777,.4866712093353272,.7108548283576965,0,2,0,6,1,3,-1,0,7,1,1,3,-.00125032605137676,.3407891094684601,.5156195163726807,0,2,12,6,3,3,-1,12,7,3,1,3,-.0010281190043315291,.557557225227356,.443943202495575,0,2,5,6,3,3,-1,5,7,3,1,3,-.008889362215995789,.6402000784873962,.4620442092418671,0,2,8,2,4,2,-1,8,3,4,1,2,-.0006109480164013803,.3766441941261292,.5448899865150452,0,2,6,3,4,12,-1,8,3,2,12,2,-.005768635775893927,.3318648934364319,.5133677124977112,0,2,13,6,2,3,-1,13,7,2,1,3,.0018506490159779787,.4903570115566254,.6406934857368469,0,2,0,10,20,4,-1,0,12,20,2,2,-.0997994691133499,.1536051034927368,.5015562176704407,0,2,2,0,17,14,-1,2,7,17,7,2,-.3512834906578064,.0588231310248375,.5174378752708435,0,3,0,0,6,10,-1,0,0,3,5,2,3,5,3,5,2,-.0452445708215237,.6961488723754883,.4677872955799103,0,2,14,6,6,4,-1,14,6,3,4,2,.0714815780520439,.5167986154556274,.1038092970848084,0,2,0,6,6,4,-1,3,6,3,4,2,.0021895780228078365,.4273078143596649,.5532060861587524,0,2,13,2,7,2,-1,13,3,7,1,2,-.0005924265133216977,.46389439702034,.5276389122009277,0,2,0,2,7,2,-1,0,3,7,1,2,.0016788389766588807,.530164897441864,.3932034969329834,0,3,6,11,14,2,-1,13,11,7,1,2,6,12,7,1,2,-.0022163488902151585,.5630694031715393,.4757033884525299,0,3,8,5,2,2,-1,8,5,1,1,2,9,6,1,1,2,.00011568699846975505,.4307535886764526,.5535702705383301,0,2,13,9,2,3,-1,13,9,1,3,2,-.007201728876680136,.144488200545311,.5193064212799072,0,2,1,1,3,12,-1,2,1,1,12,3,.0008908127201721072,.4384432137012482,.5593621134757996,0,2,17,4,1,3,-1,17,5,1,1,3,.00019605009583756328,.5340415835380554,.4705956876277924,0,2,2,4,1,3,-1,2,5,1,1,3,.0005202214233577251,.5213856101036072,.3810079097747803,0,2,14,5,1,3,-1,14,6,1,1,3,.0009458857239224017,.4769414961338043,.6130738854408264,0,2,7,16,2,3,-1,7,17,2,1,3,916984718060121e-19,.4245009124279022,.5429363250732422,0,3,8,13,4,6,-1,10,13,2,3,2,8,16,2,3,2,.002183320000767708,.5457730889320374,.419107586145401,0,2,5,5,1,3,-1,5,6,1,1,3,-.0008603967144154012,.5764588713645935,.4471659958362579,0,2,16,0,4,20,-1,16,0,2,20,2,-.0132362395524979,.6372823119163513,.4695009887218475,0,3,5,1,2,6,-1,5,1,1,3,2,6,4,1,3,2,.0004337670106906444,.5317873954772949,.394582986831665,69.22987365722656,140,0,2,5,4,10,4,-1,5,6,10,2,2,-.024847149848938,.6555516719818115,.3873311877250671,0,2,15,2,4,12,-1,15,2,2,12,2,.006134861148893833,.374807208776474,.5973997712135315,0,2,7,6,4,12,-1,7,12,4,6,2,.006449849810451269,.542549192905426,.2548811137676239,0,2,14,5,1,8,-1,14,9,1,4,2,.0006349121103994548,.2462442070245743,.5387253761291504,0,3,1,4,14,10,-1,1,4,7,5,2,8,9,7,5,2,.0014023890253156424,.5594322085380554,.3528657853603363,0,3,11,6,6,14,-1,14,6,3,7,2,11,13,3,7,2,.0003004400059580803,.3958503901958466,.576593816280365,0,3,3,6,6,14,-1,3,6,3,7,2,6,13,3,7,2,.00010042409849120304,.3698996901512146,.5534998178482056,0,2,4,9,15,2,-1,9,9,5,2,3,-.005084149073809385,.3711090981960297,.5547800064086914,0,2,7,14,6,3,-1,7,15,6,1,3,-.0195372607558966,.7492755055427551,.4579297006130219,0,3,6,3,14,4,-1,13,3,7,2,2,6,5,7,2,2,-7453274065483129e-21,.5649787187576294,.390406996011734,0,2,1,9,15,2,-1,6,9,5,2,3,-.0036079459823668003,.3381088078022003,.5267801284790039,0,2,6,11,8,9,-1,6,14,8,3,3,.002069750102236867,.5519291162490845,.3714388906955719,0,2,7,4,3,8,-1,8,4,1,8,3,-.0004646384040825069,.5608214735984802,.4113566875457764,0,2,14,6,2,6,-1,14,9,2,3,2,.0007549045258201659,.3559206128120422,.532935619354248,0,3,5,7,6,4,-1,5,7,3,2,2,8,9,3,2,2,-.0009832223877310753,.5414795875549316,.3763205111026764,0,2,1,1,18,19,-1,7,1,6,19,3,-.0199406407773495,.634790301322937,.4705299139022827,0,2,1,2,6,5,-1,4,2,3,5,2,.0037680300883948803,.3913489878177643,.5563716292381287,0,2,12,17,6,2,-1,12,18,6,1,2,-.009452850557863712,.2554892897605896,.5215116739273071,0,2,2,17,6,2,-1,2,18,6,1,2,.002956084907054901,.5174679160118103,.3063920140266419,0,2,17,3,3,6,-1,17,5,3,2,3,.009107873775064945,.5388448238372803,.2885963022708893,0,2,8,17,3,3,-1,8,18,3,1,3,.0018219229532405734,.4336043000221252,.58521968126297,0,2,10,13,2,6,-1,10,16,2,3,2,.0146887395530939,.5287361741065979,.2870005965232849,0,2,7,13,6,3,-1,7,14,6,1,3,-.0143879903480411,.701944887638092,.4647370874881744,0,2,17,3,3,6,-1,17,5,3,2,3,-.0189866498112679,.2986552119255066,.5247011780738831,0,2,8,13,2,3,-1,8,14,2,1,3,.0011527639580890536,.4323473870754242,.593166172504425,0,2,9,3,6,2,-1,11,3,2,2,3,.0109336702153087,.5286864042282104,.3130319118499756,0,2,0,3,3,6,-1,0,5,3,2,3,-.0149327302351594,.2658419013023377,.508407711982727,0,2,8,5,4,6,-1,8,7,4,2,3,-.0002997053961735219,.5463526844978333,.374072402715683,0,2,5,5,3,2,-1,5,6,3,1,2,.004167762119323015,.4703496992588043,.7435721755027771,0,2,10,1,3,4,-1,11,1,1,4,3,-.00639053201302886,.2069258987903595,.5280538201332092,0,2,1,2,5,9,-1,1,5,5,3,3,.004502960946410894,.518264889717102,.348354309797287,0,2,13,6,2,3,-1,13,7,2,1,3,-.009204036556184292,.680377721786499,.4932360053062439,0,2,0,6,14,3,-1,7,6,7,3,2,.0813272595405579,.5058398842811584,.2253051996231079,0,2,2,11,18,8,-1,2,15,18,4,2,-.150792807340622,.2963424921035767,.5264679789543152,0,2,5,6,2,3,-1,5,7,2,1,3,.0033179009333252907,.4655495882034302,.7072932124137878,0,3,10,6,4,2,-1,12,6,2,1,2,10,7,2,1,2,.0007740280125290155,.4780347943305969,.5668237805366516,0,3,6,6,4,2,-1,6,6,2,1,2,8,7,2,1,2,.0006819954141974449,.4286996126174927,.5722156763076782,0,2,10,1,3,4,-1,11,1,1,4,3,.0053671570494771,.5299307107925415,.3114621937274933,0,2,7,1,2,7,-1,8,1,1,7,2,9701866656541824e-20,.3674638867378235,.5269461870193481,0,2,4,2,15,14,-1,4,9,15,7,2,-.1253408938646317,.2351492047309876,.5245791077613831,0,2,8,7,3,2,-1,9,7,1,2,3,-.005251626949757338,.7115936875343323,.4693767130374908,0,3,2,3,18,4,-1,11,3,9,2,2,2,5,9,2,2,-.007834210991859436,.4462651014328003,.5409085750579834,0,2,9,7,2,2,-1,10,7,1,2,2,-.001131006982177496,.5945618748664856,.4417662024497986,0,2,13,9,2,3,-1,13,9,1,3,2,.0017601120052859187,.5353249907493591,.3973453044891357,0,2,5,2,6,2,-1,7,2,2,2,3,-.00081581249833107,.3760268092155457,.5264726877212524,0,2,9,5,2,7,-1,9,5,1,7,2,-.003868758911266923,.6309912800788879,.4749819934368134,0,2,5,9,2,3,-1,6,9,1,3,2,.0015207129763439298,.5230181813240051,.3361223936080933,0,2,6,0,14,18,-1,6,9,14,9,2,.545867383480072,.5167139768600464,.1172635033726692,0,2,2,16,6,3,-1,2,17,6,1,3,.0156501904129982,.4979439079761505,.1393294930458069,0,2,9,7,3,6,-1,10,7,1,6,3,-.0117318602278829,.7129650712013245,.4921196103096008,0,2,7,8,4,3,-1,7,9,4,1,3,-.006176512222737074,.2288102954626083,.5049701929092407,0,2,7,12,6,3,-1,7,13,6,1,3,.0022457661107182503,.4632433950901032,.6048725843429565,0,2,9,12,2,3,-1,9,13,2,1,3,-.005191586911678314,.6467421054840088,.4602192938327789,0,2,7,12,6,2,-1,9,12,2,2,3,-.0238278806209564,.1482000946998596,.5226079225540161,0,2,5,11,4,6,-1,5,14,4,3,2,.0010284580057486892,.5135489106178284,.3375957012176514,0,2,11,12,7,2,-1,11,13,7,1,2,-.0100788502022624,.2740561068058014,.5303567051887512,0,3,6,10,8,6,-1,6,10,4,3,2,10,13,4,3,2,.002616893034428358,.533267080783844,.3972454071044922,0,2,11,10,3,4,-1,11,12,3,2,2,.000543853675480932,.5365604162216187,.4063411951065064,0,2,9,16,2,3,-1,9,17,2,1,3,.005351051222532988,.4653759002685547,.6889045834541321,0,2,13,3,1,9,-1,13,6,1,3,3,-.0015274790348485112,.5449501276016235,.3624723851680756,0,2,1,13,14,6,-1,1,15,14,2,3,-.0806244164705276,.1656087040901184,.5000287294387817,0,2,13,6,1,6,-1,13,9,1,3,2,.0221920292824507,.5132731199264526,.2002808004617691,0,2,0,4,3,8,-1,1,4,1,8,3,.007310063112527132,.4617947936058044,.6366536021232605,0,2,18,0,2,18,-1,18,0,1,18,2,-.006406307220458984,.5916250944137573,.4867860972881317,0,2,2,3,6,2,-1,2,4,6,1,2,-.0007641504053026438,.388840913772583,.5315797924995422,0,2,9,0,8,6,-1,9,2,8,2,3,.0007673448999412358,.4159064888954163,.5605279803276062,0,2,6,6,1,6,-1,6,9,1,3,2,.0006147450185380876,.3089022040367127,.5120148062705994,0,2,14,8,6,3,-1,14,9,6,1,3,-.005010527092963457,.3972199857234955,.5207306146621704,0,2,0,0,2,18,-1,1,0,1,18,2,-.008690913207828999,.6257408261299133,.4608575999736786,0,3,1,18,18,2,-1,10,18,9,1,2,1,19,9,1,2,-.016391459852457,.2085209935903549,.5242266058921814,0,2,3,15,2,2,-1,3,16,2,1,2,.00040973909199237823,.5222427248954773,.3780320882797241,0,2,8,14,5,3,-1,8,15,5,1,3,-.002524228999391198,.5803927183151245,.4611890017986298,0,2,8,14,2,3,-1,8,15,2,1,3,.0005094531225040555,.4401271939277649,.5846015810966492,0,2,12,3,3,3,-1,13,3,1,3,3,.001965641975402832,.5322325229644775,.4184590876102448,0,2,7,5,6,2,-1,9,5,2,2,3,.0005629889783449471,.3741844892501831,.5234565734863281,0,2,15,5,5,2,-1,15,6,5,1,2,-.0006794679793529212,.4631041884422302,.5356478095054626,0,2,0,5,5,2,-1,0,6,5,1,2,.007285634987056255,.5044670104980469,.2377564013004303,0,2,17,14,1,6,-1,17,17,1,3,2,-.0174594894051552,.7289121150970459,.5050435066223145,0,2,2,9,9,3,-1,5,9,3,3,3,-.0254217498004436,.6667134761810303,.4678100049495697,0,2,12,3,3,3,-1,13,3,1,3,3,-.0015647639520466328,.4391759037971497,.532362699508667,0,2,0,0,4,18,-1,2,0,2,18,2,.0114443600177765,.4346440136432648,.5680012106895447,0,2,17,6,1,3,-1,17,7,1,1,3,-.0006735255010426044,.44771409034729,.5296812057495117,0,2,2,14,1,6,-1,2,17,1,3,2,.009319420903921127,.4740200042724609,.7462607026100159,0,2,19,8,1,2,-1,19,9,1,1,2,.00013328490604180843,.536506175994873,.475213497877121,0,2,5,3,3,3,-1,6,3,1,3,3,-.007881579920649529,.1752219051122665,.5015255212783813,0,2,9,16,2,3,-1,9,17,2,1,3,-.005798568017780781,.7271236777305603,.4896200895309448,0,2,2,6,1,3,-1,2,7,1,1,3,-.0003892249951604754,.4003908932209015,.5344941020011902,0,3,12,4,8,2,-1,16,4,4,1,2,12,5,4,1,2,-.0019288610201328993,.5605612993240356,.4803955852985382,0,3,0,4,8,2,-1,0,4,4,1,2,4,5,4,1,2,.008421415463089943,.4753246903419495,.7623608708381653,0,2,2,16,18,4,-1,2,18,18,2,2,.008165587671101093,.5393261909484863,.419164389371872,0,2,7,15,2,4,-1,7,17,2,2,2,.00048280550981871784,.4240800142288208,.5399821996688843,0,2,4,0,14,3,-1,4,1,14,1,3,-.002718663075938821,.4244599938392639,.5424923896789551,0,2,0,0,4,20,-1,2,0,2,20,2,-.0125072300434113,.5895841717720032,.4550411105155945,0,3,12,4,4,8,-1,14,4,2,4,2,12,8,2,4,2,-.0242865197360516,.2647134959697723,.518917977809906,0,3,6,7,2,2,-1,6,7,1,1,2,7,8,1,1,2,-.0029676330741494894,.734768271446228,.4749749898910523,0,2,10,6,2,3,-1,10,7,2,1,3,-.0125289997085929,.2756049931049347,.5177599787712097,0,2,8,7,3,2,-1,8,8,3,1,2,-.0010104000102728605,.3510560989379883,.5144724249839783,0,2,8,2,6,12,-1,8,8,6,6,2,-.0021348530426621437,.5637925863265991,.466731995344162,0,2,4,0,11,12,-1,4,4,11,4,3,.0195642597973347,.4614573121070862,.6137639880180359,0,2,14,9,6,11,-1,16,9,2,11,3,-.0971463471651077,.2998378872871399,.5193555951118469,0,2,0,14,4,3,-1,0,15,4,1,3,.00450145686045289,.5077884793281555,.3045755922794342,0,2,9,10,2,3,-1,9,11,2,1,3,.006370697170495987,.486101895570755,.6887500882148743,0,2,5,11,3,2,-1,5,12,3,1,2,-.009072152897715569,.1673395931720734,.5017563104629517,0,2,9,15,3,3,-1,10,15,1,3,3,-.005353720858693123,.2692756950855255,.524263322353363,0,2,8,8,3,4,-1,9,8,1,4,3,-.0109328404068947,.7183864116668701,.4736028909683228,0,2,9,15,3,3,-1,10,15,1,3,3,.008235607296228409,.5223966836929321,.2389862984418869,0,2,7,7,3,2,-1,8,7,1,2,3,-.0010038160253316164,.5719355940818787,.4433943033218384,0,3,2,10,16,4,-1,10,10,8,2,2,2,12,8,2,2,.004085912834852934,.5472841858863831,.4148836135864258,0,2,2,3,4,17,-1,4,3,2,17,2,.1548541933298111,.4973812103271484,.0610615983605385,0,2,15,13,2,7,-1,15,13,1,7,2,.00020897459762636572,.4709174036979675,.542388916015625,0,2,2,2,6,1,-1,5,2,3,1,2,.0003331699117552489,.4089626967906952,.5300992131233215,0,2,5,2,12,4,-1,9,2,4,4,3,-.0108134001493454,.6104369759559631,.4957334101200104,0,3,6,0,8,12,-1,6,0,4,6,2,10,6,4,6,2,.0456560105085373,.5069689154624939,.2866660058498383,0,3,13,7,2,2,-1,14,7,1,1,2,13,8,1,1,2,.0012569549726322293,.484691709280014,.631817102432251,0,2,0,12,20,6,-1,0,14,20,2,3,-.120150700211525,.0605261400341988,.4980959892272949,0,2,14,7,2,3,-1,14,7,1,3,2,-.00010533799650147557,.5363109707832336,.4708042144775391,0,2,0,8,9,12,-1,3,8,3,12,3,-.2070319056510925,.059660330414772,.497909814119339,0,2,3,0,16,2,-1,3,0,8,2,2,.00012909180077258497,.4712977111339569,.5377997756004333,0,2,6,15,3,3,-1,6,16,3,1,3,.000388185289921239,.4363538026809692,.5534191131591797,0,2,8,15,6,3,-1,8,16,6,1,3,-.0029243610333651304,.5811185836791992,.4825215935707092,0,2,0,10,1,6,-1,0,12,1,2,3,.0008388233254663646,.5311700105667114,.403813898563385,0,2,10,9,4,3,-1,10,10,4,1,3,-.0019061550265178084,.3770701885223389,.526001513004303,0,2,9,15,2,3,-1,9,16,2,1,3,.00895143486559391,.4766167998313904,.7682183980941772,0,2,5,7,10,1,-1,5,7,5,1,2,.0130834598094225,.5264462828636169,.3062222003936768,0,2,4,0,12,19,-1,10,0,6,19,2,-.2115933001041412,.6737198233604431,.4695810079574585,0,3,0,6,20,6,-1,10,6,10,3,2,0,9,10,3,2,.0031493250280618668,.5644835233688354,.4386953115463257,0,3,3,6,2,2,-1,3,6,1,1,2,4,7,1,1,2,.00039754100725986063,.4526061117649078,.5895630121231079,0,3,15,6,2,2,-1,16,6,1,1,2,15,7,1,1,2,-.0013814480043947697,.6070582270622253,.4942413866519928,0,3,3,6,2,2,-1,3,6,1,1,2,4,7,1,1,2,-.0005812218878418207,.5998213291168213,.4508252143859863,0,2,14,4,1,12,-1,14,10,1,6,2,-.002390532987192273,.420558899641037,.5223848223686218,0,3,2,5,16,10,-1,2,5,8,5,2,10,10,8,5,2,.0272689294070005,.5206447243690491,.3563301861286163,0,2,9,17,3,2,-1,10,17,1,2,3,-.0037658358924090862,.3144704103469849,.5218814015388489,0,2,1,4,2,2,-1,1,5,2,1,2,-.0014903489500284195,.338019609451294,.5124437212944031,0,2,5,0,15,5,-1,10,0,5,5,3,-.0174282304942608,.5829960703849792,.4919725954532623,0,2,0,0,15,5,-1,5,0,5,5,3,-.0152780301868916,.6163144707679749,.4617887139320374,0,2,11,2,2,17,-1,11,2,1,17,2,.0319956094026566,.5166357159614563,.171276405453682,0,2,7,2,2,17,-1,8,2,1,17,2,-.003825671039521694,.3408012092113495,.5131387710571289,0,2,15,11,2,9,-1,15,11,1,9,2,-.00851864367723465,.6105518937110901,.4997941851615906,0,2,3,11,2,9,-1,4,11,1,9,2,.0009064162150025368,.4327270984649658,.5582311153411865,0,2,5,16,14,4,-1,5,16,7,4,2,.0103448498994112,.4855653047561646,.5452420115470886,79.24907684326172,160,0,2,1,4,18,1,-1,7,4,6,1,3,.007898182608187199,.333252489566803,.5946462154388428,0,3,13,7,6,4,-1,16,7,3,2,2,13,9,3,2,2,.0016170160379260778,.3490641117095947,.5577868819236755,0,2,9,8,2,12,-1,9,12,2,4,3,-.0005544974119402468,.5542566180229187,.3291530013084412,0,2,12,1,6,6,-1,12,3,6,2,3,.001542898011393845,.3612579107284546,.5545979142189026,0,3,5,2,6,6,-1,5,2,3,3,2,8,5,3,3,2,-.0010329450014978647,.3530139029026032,.5576140284538269,0,3,9,16,6,4,-1,12,16,3,2,2,9,18,3,2,2,.0007769815856590867,.3916778862476349,.5645321011543274,0,2,1,2,18,3,-1,7,2,6,3,3,.143203005194664,.4667482078075409,.7023633122444153,0,2,7,4,9,10,-1,7,9,9,5,2,-.007386649027466774,.3073684871196747,.5289257764816284,0,2,5,9,4,4,-1,7,9,2,4,2,-.0006293674232438207,.562211811542511,.4037049114704132,0,2,11,10,3,6,-1,11,13,3,3,2,.0007889352855272591,.5267661213874817,.3557874858379364,0,2,7,11,5,3,-1,7,12,5,1,3,-.0122280502691865,.6668320894241333,.4625549912452698,0,3,7,11,6,6,-1,10,11,3,3,2,7,14,3,3,2,.0035420239437371492,.5521438121795654,.3869673013687134,0,2,0,0,10,9,-1,0,3,10,3,3,-.0010585320414975286,.3628678023815155,.5320926904678345,0,2,13,14,1,6,-1,13,16,1,2,3,14935660146875307e-21,.4632444977760315,.5363323092460632,0,2,0,2,3,6,-1,0,4,3,2,3,.005253770854324102,.5132231712341309,.3265708982944489,0,2,8,14,4,3,-1,8,15,4,1,3,-.008233802393078804,.6693689823150635,.4774140119552612,0,2,6,14,1,6,-1,6,16,1,2,3,2186681012972258e-20,.405386209487915,.5457931160926819,0,2,9,15,2,3,-1,9,16,2,1,3,-.0038150229956954718,.645499587059021,.4793178141117096,0,2,6,4,3,3,-1,7,4,1,3,3,.0011105879675596952,.5270407199859619,.3529678881168366,0,2,9,0,11,3,-1,9,1,11,1,3,-.005770768970251083,.3803547024726868,.5352957844734192,0,2,0,6,20,3,-1,0,7,20,1,3,-.003015833906829357,.533940315246582,.3887133002281189,0,2,10,1,1,2,-1,10,2,1,1,2,-.0008545368909835815,.3564616143703461,.5273603796958923,0,2,9,6,2,6,-1,10,6,1,6,2,.0110505102202296,.4671907126903534,.6849737763404846,0,2,5,8,12,1,-1,9,8,4,1,3,.0426058396697044,.51514732837677,.0702200904488564,0,2,3,8,12,1,-1,7,8,4,1,3,-.0030781750101596117,.3041661083698273,.5152602195739746,0,2,9,7,3,5,-1,10,7,1,5,3,-.005481572821736336,.6430295705795288,.4897229969501495,0,2,3,9,6,2,-1,6,9,3,2,2,.003188186092302203,.5307493209838867,.3826209902763367,0,2,12,9,3,3,-1,12,10,3,1,3,.00035947180003859103,.4650047123432159,.5421904921531677,0,2,7,0,6,1,-1,9,0,2,1,3,-.004070503171533346,.2849679887294769,.5079116225242615,0,2,12,9,3,3,-1,12,10,3,1,3,-.0145941702648997,.2971645891666412,.5128461718559265,0,2,7,10,2,1,-1,8,10,1,1,2,-.00011947689927183092,.563109815120697,.4343082010746002,0,2,6,4,9,13,-1,9,4,3,13,3,-.0006934464909136295,.4403578042984009,.5359959006309509,0,2,6,8,4,2,-1,6,9,4,1,2,14834799912932795e-21,.3421008884906769,.5164697766304016,0,2,16,2,4,6,-1,16,2,2,6,2,.009029698558151722,.4639343023300171,.6114075183868408,0,2,0,17,6,3,-1,0,18,6,1,3,-.008064081892371178,.2820158898830414,.5075494050979614,0,2,10,10,3,10,-1,10,15,3,5,2,.0260621197521687,.5208905935287476,.2688778042793274,0,2,8,7,3,5,-1,9,7,1,5,3,.0173146594315767,.4663713872432709,.6738539934158325,0,2,10,4,4,3,-1,10,4,2,3,2,.0226666405797005,.5209349989891052,.2212723940610886,0,2,8,4,3,8,-1,9,4,1,8,3,-.002196592977270484,.6063101291656494,.4538190066814423,0,2,6,6,9,13,-1,9,6,3,13,3,-.009528247639536858,.4635204970836639,.5247430801391602,0,3,6,0,8,12,-1,6,0,4,6,2,10,6,4,6,2,.00809436198323965,.5289440155029297,.3913882076740265,0,2,14,2,6,8,-1,16,2,2,8,3,-.0728773325681686,.7752001881599426,.4990234971046448,0,2,6,0,3,6,-1,7,0,1,6,3,-.006900952197611332,.2428039014339447,.5048090219497681,0,2,14,2,6,8,-1,16,2,2,8,3,-.0113082397729158,.5734364986419678,.4842376112937927,0,2,0,5,6,6,-1,0,8,6,3,2,.0596132017672062,.5029836297035217,.2524977028369904,0,3,9,12,6,2,-1,12,12,3,1,2,9,13,3,1,2,-.0028624620754271746,.6073045134544373,.4898459911346436,0,2,8,17,3,2,-1,9,17,1,2,3,.00447814492508769,.5015289187431335,.2220316976308823,0,3,11,6,2,2,-1,12,6,1,1,2,11,7,1,1,2,-.001751324045471847,.6614428758621216,.4933868944644928,0,2,1,9,18,2,-1,7,9,6,2,3,.0401634201407433,.5180878043174744,.3741044998168945,0,3,11,6,2,2,-1,12,6,1,1,2,11,7,1,1,2,.0003476894926279783,.4720416963100433,.5818032026290894,0,2,3,4,12,8,-1,7,4,4,8,3,.00265516503714025,.3805010914802551,.5221335887908936,0,2,13,11,5,3,-1,13,12,5,1,3,-.008770627900958061,.294416606426239,.5231295228004456,0,2,9,10,2,3,-1,9,11,2,1,3,-.005512209143489599,.7346177101135254,.4722816944122315,0,2,14,7,2,3,-1,14,7,1,3,2,.0006867204210720956,.5452876091003418,.424241304397583,0,2,5,4,1,3,-1,5,5,1,1,3,.0005601966986432672,.439886212348938,.5601285099983215,0,2,13,4,2,3,-1,13,5,2,1,3,.0024143769405782223,.4741686880588532,.6136621832847595,0,2,5,4,2,3,-1,5,5,2,1,3,-.0015680900542065501,.604455292224884,.4516409933567047,0,2,9,8,2,3,-1,9,9,2,1,3,-.0036827491130679846,.2452459037303925,.5294982194900513,0,2,8,9,2,2,-1,8,10,2,1,2,-.000294091907562688,.3732838034629822,.5251451134681702,0,2,15,14,1,4,-1,15,16,1,2,2,.00042847759323194623,.5498809814453125,.4065535068511963,0,2,3,12,2,2,-1,3,13,2,1,2,-.004881707020103931,.2139908969402313,.4999957084655762,0,3,12,15,2,2,-1,13,15,1,1,2,12,16,1,1,2,.00027272020815871656,.465028703212738,.581342875957489,0,2,9,13,2,2,-1,9,14,2,1,2,.00020947199664078653,.4387486875057221,.5572792887687683,0,2,4,11,14,9,-1,4,14,14,3,3,.0485011897981167,.5244972705841064,.3212889134883881,0,2,7,13,4,3,-1,7,14,4,1,3,-.004516641143709421,.605681300163269,.4545882046222687,0,2,15,14,1,4,-1,15,16,1,2,2,-.0122916800901294,.2040929049253464,.5152214169502258,0,2,4,14,1,4,-1,4,16,1,2,2,.0004854967992287129,.5237604975700378,.3739503026008606,0,2,14,0,6,13,-1,16,0,2,13,3,.0305560491979122,.4960533976554871,.5938246250152588,0,3,4,1,2,12,-1,4,1,1,6,2,5,7,1,6,2,-.00015105320198927075,.5351303815841675,.4145204126834869,0,3,11,14,6,6,-1,14,14,3,3,2,11,17,3,3,2,.0024937440175563097,.4693366885185242,.5514941215515137,0,3,3,14,6,6,-1,3,14,3,3,2,6,17,3,3,2,-.012382130138576,.6791396737098694,.4681667983531952,0,2,14,17,3,2,-1,14,18,3,1,2,-.005133346188813448,.3608739078044891,.5229160189628601,0,2,3,17,3,2,-1,3,18,3,1,2,.0005191927775740623,.5300073027610779,.3633613884449005,0,2,14,0,6,13,-1,16,0,2,13,3,.1506042033433914,.515731692314148,.2211782038211823,0,2,0,0,6,13,-1,2,0,2,13,3,.007714414969086647,.4410496950149536,.5776609182357788,0,2,10,10,7,6,-1,10,12,7,2,3,.009444352239370346,.5401855111122131,.375665009021759,0,3,6,15,2,2,-1,6,15,1,1,2,7,16,1,1,2,.00025006249779835343,.4368270933628082,.5607374906539917,0,3,6,11,8,6,-1,10,11,4,3,2,6,14,4,3,2,-.003307715058326721,.4244799017906189,.551823079586029,0,3,7,6,2,2,-1,7,6,1,1,2,8,7,1,1,2,.0007404891075566411,.4496962130069733,.5900576710700989,0,3,2,2,16,6,-1,10,2,8,3,2,2,5,8,3,2,.0440920516848564,.5293493270874023,.3156355023384094,0,2,5,4,3,3,-1,5,5,3,1,3,.0033639909233897924,.4483296871185303,.5848662257194519,0,2,11,7,3,10,-1,11,12,3,5,2,-.003976007923483849,.4559507071971893,.5483639240264893,0,2,6,7,3,10,-1,6,12,3,5,2,.0027716930489987135,.534178614616394,.3792484104633331,0,2,10,7,3,2,-1,11,7,1,2,3,-.00024123019829858094,.5667188763618469,.4576973021030426,0,2,8,12,4,2,-1,8,13,4,1,2,.0004942566738463938,.4421244859695435,.5628787279129028,0,2,10,1,1,3,-1,10,2,1,1,3,-.0003887646889779717,.4288370907306671,.5391063094139099,0,3,1,2,4,18,-1,1,2,2,9,2,3,11,2,9,2,-.0500488989055157,.6899513006210327,.4703742861747742,0,2,12,4,4,12,-1,12,10,4,6,2,-.0366354808211327,.2217779010534287,.5191826224327087,0,2,0,0,1,6,-1,0,2,1,2,3,.0024273579474538565,.5136224031448364,.3497397899627686,0,2,9,11,2,3,-1,9,12,2,1,3,.001955803018063307,.4826192855834961,.640838086605072,0,2,8,7,4,3,-1,8,8,4,1,3,-.0017494610510766506,.3922835886478424,.5272685289382935,0,2,10,7,3,2,-1,11,7,1,2,3,.0139550799503922,.507820188999176,.8416504859924316,0,2,7,7,3,2,-1,8,7,1,2,3,-.00021896739781368524,.5520489811897278,.4314234852790833,0,2,9,4,6,1,-1,11,4,2,1,3,-.0015131309628486633,.3934605121612549,.5382571220397949,0,2,8,7,2,3,-1,9,7,1,3,2,-.004362280014902353,.7370628714561462,.4736475944519043,0,3,12,7,8,6,-1,16,7,4,3,2,12,10,4,3,2,.0651605874300003,.5159279704093933,.328159511089325,0,3,0,7,8,6,-1,0,7,4,3,2,4,10,4,3,2,-.0023567399475723505,.3672826886177063,.5172886252403259,0,3,18,2,2,10,-1,19,2,1,5,2,18,7,1,5,2,.0151466596871614,.5031493902206421,.6687604188919067,0,2,0,2,6,4,-1,3,2,3,4,2,-.0228509604930878,.676751971244812,.4709596931934357,0,2,9,4,6,1,-1,11,4,2,1,3,.004886765033006668,.5257998108863831,.4059878885746002,0,3,7,15,2,2,-1,7,15,1,1,2,8,16,1,1,2,.0017619599821045995,.4696272909641266,.6688278913497925,0,2,11,13,1,6,-1,11,16,1,3,2,-.0012942519970238209,.4320712983608246,.5344281792640686,0,2,8,13,1,6,-1,8,16,1,3,2,.0109299495816231,.4997706115245819,.1637486070394516,0,2,14,3,2,1,-1,14,3,1,1,2,2995848990394734e-20,.4282417893409729,.5633224248886108,0,2,8,15,2,3,-1,8,16,2,1,3,-.0065884361974895,.677212119102478,.4700526893138886,0,2,12,15,7,4,-1,12,17,7,2,2,.0032527779694646597,.531339704990387,.4536148905754089,0,2,4,14,12,3,-1,4,15,12,1,3,-.00404357397928834,.5660061836242676,.4413388967514038,0,2,10,3,3,2,-1,11,3,1,2,3,-.0012523540062829852,.3731913864612579,.5356451869010925,0,2,4,12,2,2,-1,4,13,2,1,2,.00019246719602961093,.5189986228942871,.3738811016082764,0,2,10,11,4,6,-1,10,14,4,3,2,-.038589671254158,.2956373989582062,.51888108253479,0,3,7,13,2,2,-1,7,13,1,1,2,8,14,1,1,2,.0001548987056594342,.4347135126590729,.5509533286094666,0,3,4,11,14,4,-1,11,11,7,2,2,4,13,7,2,2,-.0337638482451439,.3230330049991608,.5195475816726685,0,2,1,18,18,2,-1,7,18,6,2,3,-.008265706710517406,.5975489020347595,.4552114009857178,0,3,11,18,2,2,-1,12,18,1,1,2,11,19,1,1,2,14481440302915871e-21,.4745678007602692,.5497426986694336,0,3,7,18,2,2,-1,7,18,1,1,2,8,19,1,1,2,14951299817766994e-21,.4324473142623901,.5480644106864929,0,2,12,18,8,2,-1,12,19,8,1,2,-.018741799518466,.1580052971839905,.517853319644928,0,2,7,14,6,2,-1,7,15,6,1,2,.0017572239739820361,.4517636895179749,.5773764252662659,0,3,8,12,4,8,-1,10,12,2,4,2,8,16,2,4,2,-.0031391119118779898,.4149647951126099,.5460842251777649,0,2,4,9,3,3,-1,4,10,3,1,3,6665677938144654e-20,.4039090871810913,.5293084979057312,0,2,7,10,6,2,-1,9,10,2,2,3,.006774342153221369,.4767651855945587,.612195611000061,0,2,5,0,4,15,-1,7,0,2,15,2,-.0073868161998689175,.3586258888244629,.5187280774116516,0,2,8,6,12,14,-1,12,6,4,14,3,.0140409301966429,.4712139964103699,.5576155781745911,0,2,5,16,3,3,-1,5,17,3,1,3,-.005525832995772362,.2661027014255524,.5039281249046326,0,2,8,1,12,19,-1,12,1,4,19,3,.3868423998355866,.5144339799880981,.2525899112224579,0,2,3,0,3,2,-1,3,1,3,1,2,.0001145924034062773,.4284994900226593,.5423371195793152,0,2,10,12,4,5,-1,10,12,2,5,2,-.0184675697237253,.3885835111141205,.5213062167167664,0,2,6,12,4,5,-1,8,12,2,5,2,-.0004590701137203723,.541256308555603,.4235909879207611,0,3,11,11,2,2,-1,12,11,1,1,2,11,12,1,1,2,.0012527540093287826,.4899305105209351,.6624091267585754,0,2,0,2,3,6,-1,0,4,3,2,3,.001491060946136713,.5286778211593628,.4040051996707916,0,3,11,11,2,2,-1,12,11,1,1,2,11,12,1,1,2,-.0007543556275777519,.6032990217208862,.4795120060443878,0,2,7,6,4,10,-1,7,11,4,5,2,-.0069478838704526424,.408440113067627,.5373504161834717,0,3,11,11,2,2,-1,12,11,1,1,2,11,12,1,1,2,.0002809292054735124,.4846062958240509,.5759382247924805,0,2,2,13,5,2,-1,2,14,5,1,2,.0009607371757738292,.5164741277694702,.3554979860782623,0,3,11,11,2,2,-1,12,11,1,1,2,11,12,1,1,2,-.0002688392996788025,.5677582025527954,.4731765985488892,0,3,7,11,2,2,-1,7,11,1,1,2,8,12,1,1,2,.0021599370520561934,.4731487035751343,.7070567011833191,0,2,14,13,3,3,-1,14,14,3,1,3,.005623530130833387,.5240243077278137,.2781791985034943,0,2,3,13,3,3,-1,3,14,3,1,3,-.005024399142712355,.2837013900279999,.5062304139137268,0,2,9,14,2,3,-1,9,15,2,1,3,-.009761163964867592,.7400717735290527,.4934569001197815,0,2,8,7,3,3,-1,8,8,3,1,3,.004151510074734688,.5119131207466125,.3407008051872253,0,2,13,5,3,3,-1,13,6,3,1,3,.006246508099138737,.4923788011074066,.6579058766365051,0,2,0,9,5,3,-1,0,10,5,1,3,-.007059747818857431,.2434711009263992,.503284215927124,0,2,13,5,3,3,-1,13,6,3,1,3,-.0020587709732353687,.590031087398529,.469508707523346,0,3,9,12,2,8,-1,9,12,1,4,2,10,16,1,4,2,-.0024146060459315777,.3647317886352539,.5189201831817627,0,3,11,7,2,2,-1,12,7,1,1,2,11,8,1,1,2,-.0014817609917372465,.6034948229789734,.4940128028392792,0,2,0,16,6,4,-1,3,16,3,4,2,-.0063016400672495365,.5818989872932434,.4560427963733673,0,2,10,6,2,3,-1,10,7,2,1,3,.00347634288482368,.5217475891113281,.3483993113040924,0,2,9,5,2,6,-1,9,7,2,2,3,-.0222508702427149,.2360700070858002,.5032082796096802,0,2,12,15,8,4,-1,12,15,4,4,2,-.030612550675869,.6499186754226685,.4914919137954712,0,2,0,14,8,6,-1,4,14,4,6,2,.013057479634881,.4413323104381561,.5683764219284058,0,2,9,0,3,2,-1,10,0,1,2,3,-.0006009574281051755,.4359731078147888,.5333483219146729,0,2,4,15,4,2,-1,6,15,2,2,2,-.0004151425091549754,.550406277179718,.4326060116291046,0,2,12,7,3,13,-1,13,7,1,13,3,-.013776290230453,.4064112901687622,.5201548933982849,0,2,5,7,3,13,-1,6,7,1,13,3,-.0322965085506439,.0473519712686539,.4977194964885712,0,2,9,6,3,9,-1,9,9,3,3,3,.0535569787025452,.4881733059883118,.666693925857544,0,2,4,4,7,12,-1,4,10,7,6,2,.008188954554498196,.5400037169456482,.4240820109844208,0,3,12,12,2,2,-1,13,12,1,1,2,12,13,1,1,2,.00021055320394225419,.4802047908306122,.5563852787017822,0,3,6,12,2,2,-1,6,12,1,1,2,7,13,1,1,2,-.00243827304802835,.7387793064117432,.4773685038089752,0,3,8,9,4,2,-1,10,9,2,1,2,8,10,2,1,2,.003283557016402483,.5288546085357666,.3171291947364807,0,3,3,6,2,2,-1,3,6,1,1,2,4,7,1,1,2,.00237295706756413,.4750812947750092,.7060170769691467,0,2,16,6,3,2,-1,16,7,3,1,2,-.0014541699783876538,.3811730146408081,.533073902130127,87.69602966308594,177,0,2,0,7,19,4,-1,0,9,19,2,2,.0557552389800549,.4019156992435455,.6806036829948425,0,2,10,2,10,1,-1,10,2,5,1,2,.002473024884238839,.3351148962974548,.5965719819068909,0,2,9,4,2,12,-1,9,10,2,6,2,-.00035031698644161224,.5557708144187927,.3482286930084229,0,2,12,18,4,1,-1,12,18,2,1,2,.0005416763015091419,.426085889339447,.5693380832672119,0,3,1,7,6,4,-1,1,7,3,2,2,4,9,3,2,2,.0007719367858953774,.3494240045547485,.5433688759803772,0,2,12,0,6,13,-1,14,0,2,13,3,-.0015999219613149762,.4028499126434326,.5484359264373779,0,2,2,0,6,13,-1,4,0,2,13,3,-.00011832080053864047,.3806901872158051,.5425465106964111,0,2,10,5,8,8,-1,10,9,8,4,2,.0003290903114248067,.262010008096695,.5429521799087524,0,2,8,3,2,5,-1,9,3,1,5,2,.0002951810893137008,.379976898431778,.5399264097213745,0,2,8,4,9,1,-1,11,4,3,1,3,9046671038959175e-20,.4433645009994507,.5440226197242737,0,2,3,4,9,1,-1,6,4,3,1,3,15007190086180344e-21,.3719654977321625,.5409119725227356,0,2,1,0,18,10,-1,7,0,6,10,3,.1393561065196991,.552539587020874,.4479042887687683,0,2,7,17,5,3,-1,7,18,5,1,3,.0016461990308016539,.4264501035213471,.5772169828414917,0,2,7,11,6,1,-1,9,11,2,1,3,.0004998443182557821,.4359526038169861,.5685871243476868,0,2,2,2,3,2,-1,2,3,3,1,2,-.001097128028050065,.3390136957168579,.5205408930778503,0,2,8,12,4,2,-1,8,13,4,1,2,.0006691989256069064,.4557456076145172,.598065972328186,0,2,6,10,3,6,-1,6,13,3,3,2,.0008647104259580374,.5134841203689575,.2944033145904541,0,2,11,4,2,4,-1,11,4,1,4,2,-.0002718259929679334,.3906578123569489,.5377181172370911,0,2,7,4,2,4,-1,8,4,1,4,2,3024949910468422e-20,.3679609894752502,.5225688815116882,0,2,9,6,2,4,-1,9,6,1,4,2,-.008522589690983295,.7293102145195007,.4892365038394928,0,2,6,13,8,3,-1,6,14,8,1,3,.0016705560265108943,.43453249335289,.5696138143539429,0,2,9,15,3,4,-1,10,15,1,4,3,-.0071433838456869125,.2591280043125153,.5225623846054077,0,2,9,2,2,17,-1,10,2,1,17,2,-.0163193698972464,.6922279000282288,.4651575982570648,0,2,7,0,6,1,-1,9,0,2,1,3,.004803426098078489,.5352262854576111,.3286302983760834,0,2,8,15,3,4,-1,9,15,1,4,3,-.0075421929359436035,.2040544003248215,.5034546256065369,0,2,7,13,7,3,-1,7,14,7,1,3,-.0143631100654602,.6804888844490051,.4889059066772461,0,2,8,16,3,3,-1,9,16,1,3,3,.0008906358852982521,.5310695767402649,.3895480930805206,0,2,6,2,8,10,-1,6,7,8,5,2,-.004406019113957882,.5741562843322754,.4372426867485046,0,2,2,5,8,8,-1,2,9,8,4,2,-.0001886254030978307,.2831785976886749,.5098205208778381,0,2,14,16,2,2,-1,14,17,2,1,2,-.0037979281041771173,.3372507989406586,.5246580243110657,0,2,4,16,2,2,-1,4,17,2,1,2,.00014627049677073956,.5306674242019653,.391171008348465,0,2,10,11,4,6,-1,10,14,4,3,2,-49164638767251745e-21,.5462496280670166,.3942720890045166,0,2,6,11,4,6,-1,6,14,4,3,2,-.0335825011134148,.2157824039459229,.5048211812973022,0,2,10,14,1,3,-1,10,15,1,1,3,-.0035339309833943844,.6465312242507935,.4872696995735169,0,2,8,14,4,3,-1,8,15,4,1,3,.005014411173760891,.4617668092250824,.6248074769973755,0,3,10,0,4,6,-1,12,0,2,3,2,10,3,2,3,2,.0188173707574606,.5220689177513123,.2000052034854889,0,2,0,3,20,2,-1,0,4,20,1,2,-.001343433978036046,.4014537930488586,.53016197681427,0,3,12,0,8,2,-1,16,0,4,1,2,12,1,4,1,2,.001755796023644507,.4794039130210877,.5653169751167297,0,2,2,12,10,8,-1,2,16,10,4,2,-.0956374630331993,.2034195065498352,.5006706714630127,0,3,17,7,2,10,-1,18,7,1,5,2,17,12,1,5,2,-.0222412291914225,.7672473192214966,.5046340227127075,0,3,1,7,2,10,-1,1,7,1,5,2,2,12,1,5,2,-.0155758196488023,.7490342259407043,.4755851030349731,0,2,15,10,3,6,-1,15,12,3,2,3,.005359911825507879,.5365303754806519,.4004670977592468,0,2,4,4,6,2,-1,6,4,2,2,3,-.0217634998261929,.0740154981613159,.4964174926280975,0,2,0,5,20,6,-1,0,7,20,2,3,-.165615901350975,.2859103083610535,.5218086242675781,0,3,0,0,8,2,-1,0,0,4,1,2,4,1,4,1,2,.0001646132004680112,.4191615879535675,.5380793213844299,0,2,1,0,18,4,-1,7,0,6,4,3,-.008907750248908997,.6273192763328552,.4877404868602753,0,2,1,13,6,2,-1,1,14,6,1,2,.0008634644909761846,.5159940719604492,.3671025931835175,0,2,10,8,3,4,-1,11,8,1,4,3,-.0013751760125160217,.5884376764297485,.4579083919525147,0,2,6,1,6,1,-1,8,1,2,1,3,-.0014081239933148026,.3560509979724884,.5139945149421692,0,2,8,14,4,3,-1,8,15,4,1,3,-.003934288863092661,.5994288921356201,.466427206993103,0,2,1,6,18,2,-1,10,6,9,2,2,-.0319669283926487,.3345462083816528,.5144183039665222,0,2,15,11,1,2,-1,15,12,1,1,2,-15089280168467667e-21,.5582656264305115,.441405713558197,0,2,6,5,1,2,-1,6,6,1,1,2,.0005199447041377425,.4623680114746094,.6168993711471558,0,2,13,4,1,3,-1,13,5,1,1,3,-.0034220460802316666,.6557074785232544,.4974805116653442,0,2,2,15,1,2,-1,2,16,1,1,2,.00017723299970384687,.5269501805305481,.3901908099651337,0,2,12,4,4,3,-1,12,5,4,1,3,.0015716759953647852,.4633373022079468,.5790457725524902,0,2,0,0,7,3,-1,0,1,7,1,3,-.00890413299202919,.2689608037471771,.5053591132164001,0,2,9,12,6,2,-1,9,12,3,2,2,.00040677518700249493,.5456603169441223,.4329898953437805,0,2,5,4,2,3,-1,5,5,2,1,3,.0067604780197143555,.4648993909358978,.6689761877059937,0,2,18,4,2,3,-1,18,5,2,1,3,.0029100088868290186,.5309703946113586,.3377839922904968,0,2,3,0,8,6,-1,3,2,8,2,3,.0013885459629818797,.4074738919734955,.5349133014678955,0,3,0,2,20,6,-1,10,2,10,3,2,0,5,10,3,2,-.0767642632126808,.1992176026105881,.522824227809906,0,2,4,7,2,4,-1,5,7,1,4,2,-.00022688310127705336,.5438501834869385,.4253072142601013,0,2,3,10,15,2,-1,8,10,5,2,3,-.006309415213763714,.4259178936481476,.5378909707069397,0,2,3,0,12,11,-1,9,0,6,11,2,-.1100727990269661,.6904156804084778,.4721749126911163,0,2,13,0,2,6,-1,13,0,1,6,2,.0002861965913325548,.4524914920330048,.5548306107521057,0,2,0,19,2,1,-1,1,19,1,1,2,2942532955785282e-20,.5370373725891113,.4236463904380798,0,3,16,10,4,10,-1,18,10,2,5,2,16,15,2,5,2,-.0248865708708763,.6423557996749878,.4969303905963898,0,2,4,8,10,3,-1,4,9,10,1,3,.0331488512456417,.4988475143909454,.1613811999559403,0,2,14,12,3,3,-1,14,13,3,1,3,.0007849169196560979,.541602611541748,.4223009049892426,0,3,0,10,4,10,-1,0,10,2,5,2,2,15,2,5,2,.004708718974143267,.4576328992843628,.6027557849884033,0,2,18,3,2,6,-1,18,5,2,2,3,.0024144479539245367,.530897319316864,.4422498941421509,0,2,6,6,1,3,-1,6,7,1,1,3,.0019523180089890957,.4705634117126465,.666332483291626,0,2,7,7,7,2,-1,7,8,7,1,2,.0013031980488449335,.4406126141548157,.5526962280273438,0,2,0,3,2,6,-1,0,5,2,2,3,.004473549779504538,.5129023790359497,.3301498889923096,0,2,11,1,3,1,-1,12,1,1,1,3,-.002665286883711815,.3135471045970917,.5175036191940308,0,2,5,0,2,6,-1,6,0,1,6,2,.0001366677024634555,.4119370877742767,.530687689781189,0,2,1,1,18,14,-1,7,1,6,14,3,-.0171264503151178,.6177806258201599,.4836578965187073,0,2,4,6,8,3,-1,8,6,4,3,2,-.0002660143072716892,.3654330968856812,.5169736742973328,0,2,9,12,6,2,-1,9,12,3,2,2,-.022932380437851,.349091500043869,.5163992047309875,0,2,5,12,6,2,-1,8,12,3,2,2,.0023316550068557262,.5166299939155579,.3709389865398407,0,2,10,7,3,5,-1,11,7,1,5,3,.016925660893321,.501473605632782,.8053988218307495,0,2,7,7,3,5,-1,8,7,1,5,3,-.008985882624983788,.6470788717269897,.465702086687088,0,2,13,0,3,10,-1,14,0,1,10,3,-.0118746999651194,.3246378898620606,.5258755087852478,0,2,4,11,3,2,-1,4,12,3,1,2,.00019350569345988333,.5191941857337952,.3839643895626068,0,2,17,3,3,6,-1,18,3,1,6,3,.005871349014341831,.4918133914470673,.6187043190002441,0,2,1,8,18,10,-1,1,13,18,5,2,-.2483879029750824,.1836802959442139,.4988150000572205,0,2,13,0,3,10,-1,14,0,1,10,3,.0122560001909733,.5227053761482239,.3632029891014099,0,2,9,14,2,3,-1,9,15,2,1,3,.0008399017970077693,.4490250051021576,.5774148106575012,0,2,16,3,3,7,-1,17,3,1,7,3,.002540736924856901,.4804787039756775,.5858299136161804,0,2,4,0,3,10,-1,5,0,1,10,3,-.0148224299773574,.2521049976348877,.5023537278175354,0,2,16,3,3,7,-1,17,3,1,7,3,-.005797395948320627,.5996695756912231,.4853715002536774,0,2,0,9,1,2,-1,0,10,1,1,2,.000726621481589973,.5153716802597046,.3671779930591583,0,2,18,1,2,10,-1,18,1,1,10,2,-.0172325801104307,.6621719002723694,.4994656145572662,0,2,0,1,2,10,-1,1,1,1,10,2,.007862408645451069,.4633395075798035,.6256101727485657,0,2,10,16,3,4,-1,11,16,1,4,3,-.004734362009912729,.3615573048591614,.5281885266304016,0,2,2,8,3,3,-1,3,8,1,3,3,.0008304847870022058,.4442889094352722,.5550957918167114,0,3,11,0,2,6,-1,12,0,1,3,2,11,3,1,3,2,.00766021991148591,.5162935256958008,.2613354921340942,0,3,7,0,2,6,-1,7,0,1,3,2,8,3,1,3,2,-.004104837775230408,.2789632081985474,.5019031763076782,0,2,16,3,3,7,-1,17,3,1,7,3,.004851257894188166,.4968984127044678,.5661668181419373,0,2,1,3,3,7,-1,2,3,1,7,3,.0009989645332098007,.4445607960224152,.5551813244819641,0,2,14,1,6,16,-1,16,1,2,16,3,-.2702363133430481,.0293882098048925,.515131413936615,0,2,0,1,6,16,-1,2,1,2,16,3,-.0130906803533435,.5699399709701538,.4447459876537323,0,3,2,0,16,8,-1,10,0,8,4,2,2,4,8,4,2,-.009434279054403305,.4305466115474701,.5487895011901855,0,2,6,8,5,3,-1,6,9,5,1,3,-.0015482039889320731,.3680317103862763,.512808084487915,0,2,9,7,3,3,-1,10,7,1,3,3,.005374613218009472,.4838916957378388,.6101555824279785,0,2,8,8,4,3,-1,8,9,4,1,3,.0015786769799888134,.5325223207473755,.4118548035621643,0,2,9,6,2,4,-1,9,6,1,4,2,.003685605013743043,.4810948073863983,.6252303123474121,0,2,0,7,15,1,-1,5,7,5,1,3,.009388701990246773,.520022988319397,.3629410862922669,0,2,8,2,7,9,-1,8,5,7,3,3,.0127926301211119,.4961709976196289,.673801600933075,0,3,1,7,16,4,-1,1,7,8,2,2,9,9,8,2,2,-.003366104094311595,.4060279130935669,.5283598899841309,0,2,6,12,8,2,-1,6,13,8,1,2,.00039771420415490866,.4674113988876343,.5900775194168091,0,2,8,11,3,3,-1,8,12,3,1,3,.0014868030557408929,.4519116878509522,.6082053780555725,0,3,4,5,14,10,-1,11,5,7,5,2,4,10,7,5,2,-.0886867493391037,.2807899117469788,.5180991888046265,0,2,4,12,3,2,-1,4,13,3,1,2,-7429611287079751e-20,.5295584201812744,.408762514591217,0,2,9,11,6,1,-1,11,11,2,1,3,-14932939848222304e-21,.5461400151252747,.4538542926311493,0,2,4,9,7,6,-1,4,11,7,2,3,.005916223861277103,.5329161286354065,.4192134141921997,0,2,7,10,6,3,-1,7,11,6,1,3,.001114164013415575,.4512017965316773,.5706217288970947,0,2,9,11,2,2,-1,9,12,2,1,2,8924936264520511e-20,.4577805995941162,.5897638201713562,0,2,0,5,20,6,-1,0,7,20,2,3,.0025319510605186224,.5299603939056396,.3357639014720917,0,2,6,4,6,1,-1,8,4,2,1,3,.0124262003228068,.4959059059619904,.1346601992845535,0,2,9,11,6,1,-1,11,11,2,1,3,.0283357501029968,.5117079019546509,.0006104363710619509,0,2,5,11,6,1,-1,7,11,2,1,3,.006616588216274977,.4736349880695343,.7011628150939941,0,2,10,16,3,4,-1,11,16,1,4,3,.008046876639127731,.5216417908668518,.3282819986343384,0,2,8,7,3,3,-1,9,7,1,3,3,-.001119398046284914,.5809860825538635,.4563739001750946,0,2,2,12,16,8,-1,2,16,16,4,2,.0132775902748108,.5398362278938293,.4103901088237763,0,2,0,15,15,2,-1,0,16,15,1,2,.0004879473999608308,.424928605556488,.5410590767860413,0,2,15,4,5,6,-1,15,6,5,2,3,.0112431701272726,.526996374130249,.3438215851783752,0,2,9,5,2,4,-1,10,5,1,4,2,-.0008989666821435094,.5633075833320618,.4456613063812256,0,2,8,10,9,6,-1,8,12,9,2,3,.006667715962976217,.5312889218330383,.4362679123878479,0,2,2,19,15,1,-1,7,19,5,1,3,.0289472993463278,.4701794981956482,.657579779624939,0,2,10,16,3,4,-1,11,16,1,4,3,-.0234000496566296,0,.5137398838996887,0,2,0,15,20,4,-1,0,17,20,2,2,-.0891170501708984,.0237452797591686,.4942430853843689,0,2,10,16,3,4,-1,11,16,1,4,3,-.0140546001493931,.3127323091030121,.511751115322113,0,2,7,16,3,4,-1,8,16,1,4,3,.008123939856886864,.50090491771698,.2520025968551636,0,2,9,16,3,3,-1,9,17,3,1,3,-.004996465053409338,.6387143731117249,.4927811920642853,0,2,8,11,4,6,-1,8,14,4,3,2,.0031253970228135586,.5136849880218506,.3680452108383179,0,2,9,6,2,12,-1,9,10,2,4,3,.006766964215785265,.5509843826293945,.4363631904125214,0,2,8,17,4,3,-1,8,18,4,1,3,-.002371144015341997,.6162335276603699,.4586946964263916,0,3,9,18,8,2,-1,13,18,4,1,2,9,19,4,1,2,-.005352279171347618,.6185457706451416,.4920490980148315,0,2,1,18,8,2,-1,1,19,8,1,2,-.0159688591957092,.1382617950439453,.4983252882957459,0,2,13,5,6,15,-1,15,5,2,15,3,.004767606034874916,.4688057899475098,.5490046143531799,0,2,9,8,2,2,-1,9,9,2,1,2,-.002471469109877944,.2368514984846115,.5003952980041504,0,2,9,5,2,3,-1,9,5,1,3,2,-.0007103378884494305,.5856394171714783,.4721533060073853,0,2,1,5,6,15,-1,3,5,2,15,3,-.1411755979061127,.0869000628590584,.4961591064929962,0,3,4,1,14,8,-1,11,1,7,4,2,4,5,7,4,2,.1065180972218514,.5138837099075317,.1741005033254623,0,3,2,4,4,16,-1,2,4,2,8,2,4,12,2,8,2,-.0527447499334812,.7353636026382446,.4772881865501404,0,2,12,4,3,12,-1,12,10,3,6,2,-.00474317604675889,.3884406089782715,.5292701721191406,0,3,4,5,10,12,-1,4,5,5,6,2,9,11,5,6,2,.0009967676596716046,.5223492980003357,.4003424048423767,0,2,9,14,2,3,-1,9,15,2,1,3,.00802841316908598,.4959106147289276,.7212964296340942,0,2,5,4,2,3,-1,5,5,2,1,3,.0008602585876360536,.4444884061813355,.55384761095047,0,3,12,2,4,10,-1,14,2,2,5,2,12,7,2,5,2,.0009319150121882558,.539837121963501,.4163244068622589,0,2,6,4,7,3,-1,6,5,7,1,3,-.002508206060156226,.5854265093803406,.456250011920929,0,3,2,0,18,2,-1,11,0,9,1,2,2,1,9,1,2,-.0021378761157393456,.4608069062232971,.5280259251594543,0,3,0,0,18,2,-1,0,0,9,1,2,9,1,9,1,2,-.002154604997485876,.3791126906871796,.5255997180938721,0,3,13,13,4,6,-1,15,13,2,3,2,13,16,2,3,2,-.007621400989592075,.5998609066009521,.4952073991298676,0,3,3,13,4,6,-1,3,13,2,3,2,5,16,2,3,2,.002205536002293229,.4484206140041351,.5588530898094177,0,2,10,12,2,6,-1,10,15,2,3,2,.0012586950324475765,.5450747013092041,.4423840939998627,0,3,5,9,10,10,-1,5,9,5,5,2,10,14,5,5,2,-.005092672072350979,.4118275046348572,.5263035893440247,0,3,11,4,4,2,-1,13,4,2,1,2,11,5,2,1,2,-.0025095739401876926,.5787907838821411,.4998494982719421,0,2,7,12,6,8,-1,10,12,3,8,2,-.0773275569081306,.8397865891456604,.481112003326416,0,3,12,2,4,10,-1,14,2,2,5,2,12,7,2,5,2,-.041485819965601,.240861102938652,.5176993012428284,0,2,8,11,2,1,-1,9,11,1,1,2,.00010355669655837119,.4355360865592957,.5417054295539856,0,2,10,5,1,12,-1,10,9,1,4,3,.0013255809899419546,.5453971028327942,.4894095063209534,0,2,0,11,6,9,-1,3,11,3,9,2,-.00805987324565649,.5771024227142334,.4577918946743012,0,3,12,2,4,10,-1,14,2,2,5,2,12,7,2,5,2,.019058620557189,.5169867873191833,.3400475084781647,0,3,4,2,4,10,-1,4,2,2,5,2,6,7,2,5,2,-.0350578911602497,.2203243970870972,.5000503063201904,0,3,11,4,4,2,-1,13,4,2,1,2,11,5,2,1,2,.005729605909436941,.5043408274650574,.6597570776939392,0,2,0,14,6,3,-1,0,15,6,1,3,-.0116483299061656,.2186284959316254,.4996652901172638,0,3,11,4,4,2,-1,13,4,2,1,2,11,5,2,1,2,.0014544479781761765,.5007681846618652,.5503727793693542,0,2,6,1,3,2,-1,7,1,1,2,3,-.00025030909455381334,.4129841029644013,.524167001247406,0,3,11,4,4,2,-1,13,4,2,1,2,11,5,2,1,2,-.000829072727356106,.541286826133728,.4974496066570282,0,3,5,4,4,2,-1,5,4,2,1,2,7,5,2,1,2,.0010862209601327777,.460552990436554,.5879228711128235,0,3,13,0,2,12,-1,14,0,1,6,2,13,6,1,6,2,.0002000050008064136,.5278854966163635,.4705209136009216,0,2,6,0,3,10,-1,7,0,1,10,3,.0029212920926511288,.5129609704017639,.375553697347641,0,2,3,0,17,8,-1,3,4,17,4,2,.0253874007612467,.4822691977024078,.5790768265724182,0,2,0,4,20,4,-1,0,6,20,2,2,-.00319684692658484,.5248395204544067,.3962840139865875,90.25334930419922,182,0,2,0,3,8,2,-1,4,3,4,2,2,.005803173873573542,.3498983979225159,.596198320388794,0,2,8,11,4,3,-1,8,12,4,1,3,-.009000306949019432,.6816636919975281,.4478552043437958,0,3,5,7,6,4,-1,5,7,3,2,2,8,9,3,2,2,-.00115496595390141,.5585706233978271,.3578251004219055,0,2,8,3,4,9,-1,8,6,4,3,3,-.0011069850297644734,.5365036129951477,.3050428032875061,0,2,8,15,1,4,-1,8,17,1,2,2,.00010308309720130637,.363909512758255,.5344635844230652,0,2,4,5,12,7,-1,8,5,4,7,3,-.005098483990877867,.2859157025814056,.5504264831542969,0,3,4,2,4,10,-1,4,2,2,5,2,6,7,2,5,2,.0008257220033556223,.5236523747444153,.3476041853427887,0,2,3,0,17,2,-1,3,1,17,1,2,.009978332556784153,.4750322103500366,.621964693069458,0,2,2,2,16,15,-1,2,7,16,5,3,-.0374025292694569,.334337592124939,.527806282043457,0,2,15,2,5,2,-1,15,3,5,1,2,.0048548257909715176,.5192180871963501,.3700444102287293,0,2,9,3,2,2,-1,10,3,1,2,2,-.001866447040811181,.2929843962192535,.5091944932937622,0,2,4,5,16,15,-1,4,10,16,5,3,.0168888904154301,.3686845898628235,.5431225895881653,0,2,7,13,5,6,-1,7,16,5,3,2,-.005837262142449617,.3632183969020844,.5221335887908936,0,2,10,7,3,2,-1,11,7,1,2,3,-.00147137395106256,.5870683789253235,.4700650870800018,0,2,8,3,3,1,-1,9,3,1,1,3,-.0011522950371727347,.3195894956588745,.5140954256057739,0,2,9,16,3,3,-1,9,17,3,1,3,-.004256030078977346,.6301859021186829,.4814921021461487,0,2,0,2,5,2,-1,0,3,5,1,2,-.006737829186022282,.1977048069238663,.5025808215141296,0,2,12,5,4,3,-1,12,6,4,1,3,.0113826701417565,.495413213968277,.6867045760154724,0,2,1,7,12,1,-1,5,7,4,1,3,.005179470870643854,.5164427757263184,.3350647985935211,0,2,7,5,6,14,-1,7,12,6,7,2,-.1174378991127014,.2315246015787125,.5234413743019104,0,3,0,0,8,10,-1,0,0,4,5,2,4,5,4,5,2,.0287034492939711,.4664297103881836,.6722521185874939,0,2,9,1,3,2,-1,10,1,1,2,3,.004823103081434965,.5220875144004822,.2723532915115356,0,2,8,1,3,2,-1,9,1,1,2,3,.0026798530016094446,.5079277157783508,.2906948924064636,0,2,12,4,3,3,-1,12,5,3,1,3,.008050408214330673,.4885950982570648,.6395021080970764,0,2,7,4,6,16,-1,7,12,6,8,2,.004805495962500572,.5197256803512573,.365666389465332,0,2,12,4,3,3,-1,12,5,3,1,3,-.0022420159075409174,.6153467893600464,.4763701856136322,0,2,2,3,2,6,-1,2,5,2,2,3,-.0137577103450894,.2637344896793366,.5030903220176697,0,2,14,2,6,9,-1,14,5,6,3,3,-.1033829972147942,.2287521958351135,.5182461142539978,0,2,5,4,3,3,-1,5,5,3,1,3,-.009443208575248718,.6953303813934326,.4694949090480804,0,2,9,17,3,2,-1,10,17,1,2,3,.0008027118165045977,.5450655221939087,.4268783926963806,0,2,5,5,2,3,-1,5,6,2,1,3,-.004194566980004311,.6091387867927551,.4571642875671387,0,2,13,11,3,6,-1,13,13,3,2,3,.0109422104433179,.5241063237190247,.3284547030925751,0,2,3,14,2,6,-1,3,17,2,3,2,-.0005784106906503439,.5387929081916809,.4179368913173676,0,2,14,3,6,2,-1,14,4,6,1,2,-.002088862005621195,.4292691051959992,.5301715731620789,0,2,0,8,16,2,-1,0,9,16,1,2,.0032383969519287348,.379234790802002,.5220744013786316,0,2,14,3,6,2,-1,14,4,6,1,2,.004907502792775631,.5237283110618591,.4126757979393005,0,2,0,0,5,6,-1,0,2,5,2,3,-.0322779417037964,.1947655975818634,.4994502067565918,0,2,12,5,4,3,-1,12,6,4,1,3,-.008971123024821281,.6011285185813904,.4929032027721405,0,2,4,11,3,6,-1,4,13,3,2,3,.0153210898861289,.5009753704071045,.2039822041988373,0,2,12,5,4,3,-1,12,6,4,1,3,.002085556974634528,.4862189888954163,.5721694827079773,0,2,9,5,1,3,-1,9,6,1,1,3,.005061502102762461,.5000218749046326,.1801805943250656,0,2,12,5,4,3,-1,12,6,4,1,3,-.0037174751050770283,.5530117154121399,.4897592961788178,0,2,6,6,8,12,-1,6,12,8,6,2,-.0121705001220107,.4178605973720551,.5383723974227905,0,2,12,5,4,3,-1,12,6,4,1,3,.004624839872121811,.4997169971466065,.5761327147483826,0,2,5,12,9,2,-1,8,12,3,2,3,-.0002104042941937223,.5331807136535645,.4097681045532227,0,2,12,5,4,3,-1,12,6,4,1,3,-.0146417804062366,.5755925178527832,.5051776170730591,0,2,4,5,4,3,-1,4,6,4,1,3,.00331994891166687,.4576976895332336,.6031805872917175,0,2,6,6,9,2,-1,9,6,3,2,3,.003723687957972288,.4380396902561188,.541588306427002,0,2,4,11,1,3,-1,4,12,1,1,3,.0008295116131193936,.5163031816482544,.3702219128608704,0,2,14,12,6,6,-1,14,12,3,6,2,-.0114084901288152,.6072946786880493,.4862565100193024,0,2,7,0,3,7,-1,8,0,1,7,3,-.004532012157142162,.3292475938796997,.5088962912559509,0,2,9,8,3,3,-1,10,8,1,3,3,.00512760179117322,.4829767942428589,.6122708916664124,0,2,8,8,3,3,-1,9,8,1,3,3,.00985831581056118,.4660679996013641,.6556177139282227,0,2,5,10,11,3,-1,5,11,11,1,3,.036985918879509,.5204849243164062,.1690472066402435,0,2,5,7,10,1,-1,10,7,5,1,2,.004649116192013025,.5167322158813477,.3725225031375885,0,2,9,7,3,2,-1,10,7,1,2,3,-.004266470205038786,.6406493186950684,.4987342953681946,0,2,8,7,3,2,-1,9,7,1,2,3,-.0004795659042429179,.5897293090820312,.4464873969554901,0,2,11,9,4,2,-1,11,9,2,2,2,.0036827160511165857,.5441560745239258,.347266286611557,0,2,5,9,4,2,-1,7,9,2,2,2,-.0100598800927401,.2143162935972214,.500482976436615,0,2,14,10,2,4,-1,14,12,2,2,2,-.0003036184061784297,.538642406463623,.4590323865413666,0,2,7,7,3,2,-1,8,7,1,2,3,-.0014545479789376259,.5751184225082397,.4497095048427582,0,2,14,17,6,3,-1,14,18,6,1,3,.0016515209572389722,.5421937704086304,.4238520860671997,0,3,4,5,12,12,-1,4,5,6,6,2,10,11,6,6,2,-.007846863940358162,.4077920913696289,.5258157253265381,0,3,6,9,8,8,-1,10,9,4,4,2,6,13,4,4,2,-.005125985015183687,.422927588224411,.5479453206062317,0,2,0,4,15,4,-1,5,4,5,4,3,-.0368909612298012,.6596375703811646,.4674678146839142,0,2,13,2,4,1,-1,13,2,2,1,2,.0002403563994448632,.4251135885715485,.5573202967643738,0,2,4,12,2,2,-1,4,13,2,1,2,-15150169929256663e-21,.5259246826171875,.4074114859104157,0,2,8,13,4,3,-1,8,14,4,1,3,.0022108471021056175,.4671722948551178,.5886352062225342,0,2,9,13,2,3,-1,9,14,2,1,3,-.0011568620102480054,.5711066126823425,.4487161934375763,0,2,13,11,2,3,-1,13,12,2,1,3,.004999629221856594,.5264198184013367,.2898327112197876,0,3,7,12,4,4,-1,7,12,2,2,2,9,14,2,2,2,-.0014656189596280456,.3891738057136536,.5197871923446655,0,3,10,11,2,2,-1,11,11,1,1,2,10,12,1,1,2,-.0011975039960816503,.5795872807502747,.4927955865859985,0,2,8,17,3,2,-1,9,17,1,2,3,-.0044954330660402775,.2377603054046631,.5012555122375488,0,3,10,11,2,2,-1,11,11,1,1,2,10,12,1,1,2,.00014997160178609192,.4876626133918762,.5617607831954956,0,2,0,17,6,3,-1,0,18,6,1,3,.002639150945469737,.516808807849884,.3765509128570557,0,3,10,11,2,2,-1,11,11,1,1,2,10,12,1,1,2,-.0002936813107226044,.5446649193763733,.4874630868434906,0,3,8,11,2,2,-1,8,11,1,1,2,9,12,1,1,2,.0014211760135367513,.4687897861003876,.669133186340332,0,2,12,5,8,4,-1,12,5,4,4,2,.0794276371598244,.5193443894386292,.273294597864151,0,2,0,5,8,4,-1,4,5,4,4,2,.0799375027418137,.4971731007099152,.1782083958387375,0,2,13,2,4,1,-1,13,2,2,1,2,.0110892597585917,.5165994763374329,.3209475874900818,0,2,3,2,4,1,-1,5,2,2,1,2,.00016560709627810866,.4058471918106079,.5307276248931885,0,3,10,0,4,2,-1,12,0,2,1,2,10,1,2,1,2,-.0053354292176663876,.3445056974887848,.5158129930496216,0,2,7,12,3,1,-1,8,12,1,1,3,.0011287260567769408,.4594863057136536,.6075533032417297,0,3,8,11,4,8,-1,10,11,2,4,2,8,15,2,4,2,-.0219692196696997,.1680400967597961,.5228595733642578,0,2,9,9,2,2,-1,9,10,2,1,2,-.00021775320055894554,.3861596882343292,.5215672850608826,0,2,3,18,15,2,-1,3,19,15,1,2,.00020200149447191507,.5517979264259338,.4363039135932922,0,3,2,6,2,12,-1,2,6,1,6,2,3,12,1,6,2,-.0217331498861313,.7999460101127625,.4789851009845734,0,2,9,8,2,3,-1,9,9,2,1,3,-.0008439993252977729,.4085975885391235,.5374773144721985,0,2,7,10,3,2,-1,8,10,1,2,3,-.00043895249837078154,.5470405220985413,.4366143047809601,0,2,11,11,3,1,-1,12,11,1,1,3,.0015092400135472417,.4988996982574463,.5842149257659912,0,2,6,11,3,1,-1,7,11,1,1,3,-.003554783994331956,.6753690242767334,.4721005856990814,0,3,9,2,4,2,-1,11,2,2,1,2,9,3,2,1,2,.00048191400128416717,.541585385799408,.4357109069824219,0,2,4,12,2,3,-1,4,13,2,1,3,-.00602643983438611,.2258509993553162,.499188095331192,0,2,2,1,18,3,-1,8,1,6,3,3,-.0116681400686502,.625655472278595,.4927498996257782,0,2,5,1,4,14,-1,7,1,2,14,2,-.0028718370012938976,.3947784900665283,.524580180644989,0,2,8,16,12,3,-1,8,16,6,3,2,.0170511696487665,.4752511084079742,.5794224143028259,0,2,1,17,18,3,-1,7,17,6,3,3,-.0133520802482963,.6041104793548584,.4544535875320435,0,2,9,14,2,6,-1,9,17,2,3,2,-.0003930180100724101,.4258275926113129,.5544905066490173,0,2,9,12,1,8,-1,9,16,1,4,2,.0030483349692076445,.5233420133590698,.3780272901058197,0,2,9,14,2,3,-1,9,15,2,1,3,-.00435792887583375,.6371889114379883,.4838674068450928,0,2,9,6,2,12,-1,9,10,2,4,3,.0056661018170416355,.5374705791473389,.4163666069507599,0,2,12,9,3,3,-1,12,10,3,1,3,6067733920644969e-20,.4638795852661133,.5311625003814697,0,2,0,1,4,8,-1,2,1,2,8,2,.0367381609976292,.4688656032085419,.6466524004936218,0,3,9,1,6,2,-1,12,1,3,1,2,9,2,3,1,2,.008652813732624054,.5204318761825562,.2188657969236374,0,2,1,3,12,14,-1,1,10,12,7,2,-.1537135988473892,.1630371958017349,.4958840012550354,0,3,8,12,4,2,-1,10,12,2,1,2,8,13,2,1,2,-.00041560421232134104,.577445924282074,.4696458876132965,0,3,1,9,10,2,-1,1,9,5,1,2,6,10,5,1,2,-.0012640169588848948,.3977175951004028,.5217198133468628,0,2,8,15,4,3,-1,8,16,4,1,3,-.003547334112226963,.6046528220176697,.480831503868103,0,2,6,8,8,3,-1,6,9,8,1,3,3001906952704303e-20,.3996723890304565,.5228201150894165,0,2,9,15,5,3,-1,9,16,5,1,3,.00131130195222795,.4712158143520355,.5765997767448425,0,2,8,7,4,3,-1,8,8,4,1,3,-.0013374709524214268,.4109584987163544,.5253170132637024,0,2,7,7,6,2,-1,7,8,6,1,2,.0208767093718052,.5202993750572205,.1757981926202774,0,3,5,7,8,2,-1,5,7,4,1,2,9,8,4,1,2,-.007549794856458902,.6566609740257263,.4694975018501282,0,2,12,9,3,3,-1,12,10,3,1,3,.0241885501891375,.5128673911094666,.3370220959186554,0,2,4,7,4,2,-1,4,8,4,1,2,-.002935882890596986,.658078670501709,.4694541096687317,0,2,14,2,6,9,-1,14,5,6,3,3,.0575579293072224,.5146445035934448,.2775259912014008,0,2,4,9,3,3,-1,5,9,1,3,3,-.0011343370424583554,.3836601972579956,.5192667245864868,0,2,12,9,3,3,-1,12,10,3,1,3,.0168169997632504,.5085592865943909,.6177260875701904,0,2,0,2,6,9,-1,0,5,6,3,3,.005053517874330282,.5138763189315796,.3684791922569275,0,2,17,3,3,6,-1,18,3,1,6,3,-.004587471019476652,.5989655256271362,.4835202097892761,0,2,0,3,3,6,-1,1,3,1,6,3,.001688246033154428,.4509486854076386,.5723056793212891,0,2,17,14,1,2,-1,17,15,1,1,2,-.0016554000321775675,.3496770858764648,.5243319272994995,0,2,4,9,4,3,-1,6,9,2,3,2,-.0193738006055355,.1120536997914314,.496871292591095,0,2,12,9,3,3,-1,12,10,3,1,3,.0103744501248002,.5148196816444397,.4395213127136231,0,2,5,9,3,3,-1,5,10,3,1,3,.00014973050565458834,.4084999859333038,.526988685131073,0,3,9,5,6,8,-1,12,5,3,4,2,9,9,3,4,2,-.042981930077076,.6394104957580566,.501850426197052,0,3,5,5,6,8,-1,5,5,3,4,2,8,9,3,4,2,.008306593634188175,.470755398273468,.6698353290557861,0,2,16,1,4,6,-1,16,4,4,3,2,-.0041285790503025055,.4541369080543518,.5323647260665894,0,2,1,0,6,20,-1,3,0,2,20,3,.0017399420030415058,.433396190404892,.5439866185188293,0,2,12,11,3,2,-1,13,11,1,2,3,.00011739750334527344,.4579687118530273,.5543426275253296,0,2,5,11,3,2,-1,6,11,1,2,3,.00018585780344437808,.4324643909931183,.5426754951477051,0,2,9,4,6,1,-1,11,4,2,1,3,.005558769218623638,.525722086429596,.3550611138343811,0,2,0,0,8,3,-1,4,0,4,3,2,-.007985156029462814,.6043018102645874,.4630635976791382,0,2,15,0,2,5,-1,15,0,1,5,2,.0006059412262402475,.4598254859447479,.55331951379776,0,2,4,1,3,2,-1,5,1,1,2,3,-.0002298304025316611,.4130752086639404,.5322461128234863,0,2,7,0,6,15,-1,9,0,2,15,3,.0004374021082185209,.4043039977550507,.5409289002418518,0,2,6,11,3,1,-1,7,11,1,1,3,.0002948202018160373,.4494963884353638,.5628852248191833,0,2,12,0,3,4,-1,13,0,1,4,3,.0103126596659422,.5177510976791382,.2704316973686218,0,2,5,4,6,1,-1,7,4,2,1,3,-.007724110968410969,.1988019049167633,.4980553984642029,0,2,12,7,3,2,-1,12,8,3,1,2,-.004679720848798752,.6644750237464905,.5018296241760254,0,2,0,1,4,6,-1,0,4,4,3,2,-.005075545981526375,.3898304998874664,.5185269117355347,0,2,12,7,3,2,-1,12,8,3,1,2,.00224797404371202,.4801808893680573,.5660336017608643,0,2,2,16,3,3,-1,2,17,3,1,3,.0008332700817845762,.5210919976234436,.3957188129425049,0,3,13,8,6,10,-1,16,8,3,5,2,13,13,3,5,2,-.0412793308496475,.6154541969299316,.5007054209709167,0,2,0,9,5,2,-1,0,10,5,1,2,-.0005093018990010023,.3975942134857178,.5228403806686401,0,3,12,11,2,2,-1,13,11,1,1,2,12,12,1,1,2,.0012568780221045017,.4979138076305389,.5939183235168457,0,2,3,15,3,3,-1,3,16,3,1,3,.008004849776625633,.4984497129917145,.1633366048336029,0,2,12,7,3,2,-1,12,8,3,1,2,-.0011879300000146031,.5904964804649353,.4942624866962433,0,2,5,7,3,2,-1,5,8,3,1,2,.0006194895249791443,.4199557900428772,.5328726172447205,0,2,9,5,9,9,-1,9,8,9,3,3,.006682985927909613,.5418602824211121,.490588903427124,0,2,5,0,3,7,-1,6,0,1,7,3,-.0037062340416014194,.3725939095020294,.5138000249862671,0,2,5,2,12,5,-1,9,2,4,5,3,-.0397394113242626,.6478961110115051,.5050346851348877,0,3,6,11,2,2,-1,6,11,1,1,2,7,12,1,1,2,.0014085009461268783,.4682339131832123,.6377884149551392,0,2,15,15,3,2,-1,15,16,3,1,2,.0003932268882635981,.5458530187606812,.415048211812973,0,2,2,15,3,2,-1,2,16,3,1,2,-.0018979819724336267,.3690159916877747,.5149704217910767,0,3,14,12,6,8,-1,17,12,3,4,2,14,16,3,4,2,-.0139704402536154,.6050562858581543,.4811357855796814,0,2,2,8,15,6,-1,7,8,5,6,3,-.1010081991553307,.2017080038785934,.4992361962795258,0,2,2,2,18,17,-1,8,2,6,17,3,-.0173469204455614,.5713148713111877,.4899486005306244,0,2,5,1,4,1,-1,7,1,2,1,2,.000156197595060803,.4215388894081116,.5392642021179199,0,2,5,2,12,5,-1,9,2,4,5,3,.1343892961740494,.5136151909828186,.3767612874507904,0,2,3,2,12,5,-1,7,2,4,5,3,-.0245822407305241,.7027357816696167,.4747906923294067,0,3,4,9,12,4,-1,10,9,6,2,2,4,11,6,2,2,-.0038553720805794,.4317409098148346,.5427716970443726,0,3,5,15,6,2,-1,5,15,3,1,2,8,16,3,1,2,-.002316524973139167,.594269871711731,.4618647992610931,0,2,10,14,2,3,-1,10,15,2,1,3,-.004851812031120062,.6191568970680237,.4884895086288452,0,3,0,13,20,2,-1,0,13,10,1,2,10,14,10,1,2,.002469993894919753,.5256664752960205,.4017199873924255,0,3,4,9,12,8,-1,10,9,6,4,2,4,13,6,4,2,.0454969592392445,.5237867832183838,.2685773968696594,0,2,8,13,3,6,-1,8,16,3,3,2,-.0203195996582508,.213044598698616,.4979738891124725,0,2,10,12,2,2,-1,10,13,2,1,2,.0002699499891605228,.481404185295105,.5543122291564941,0,3,9,12,2,2,-1,9,12,1,1,2,10,13,1,1,2,-.0018232699949294329,.6482579708099365,.4709989130496979,0,3,4,11,14,4,-1,11,11,7,2,2,4,13,7,2,2,-.006301579065620899,.4581927955150604,.5306236147880554,0,2,8,5,4,2,-1,8,6,4,1,2,-.0002413949987385422,.5232086777687073,.4051763117313385,0,2,10,10,6,3,-1,12,10,2,3,3,-.001033036969602108,.5556201934814453,.4789193868637085,0,2,2,14,1,2,-1,2,15,1,1,2,.0001804116036510095,.5229442715644836,.4011810123920441,0,3,13,8,6,12,-1,16,8,3,6,2,13,14,3,6,2,-.0614078603684902,.62986820936203,.5010703206062317,0,3,1,8,6,12,-1,1,8,3,6,2,4,14,3,6,2,-.0695439130067825,.7228280901908875,.4773184061050415,0,2,10,0,6,10,-1,12,0,2,10,3,-.0705426633358002,.2269513010978699,.5182529091835022,0,3,5,11,8,4,-1,5,11,4,2,2,9,13,4,2,2,.0024423799477517605,.5237097144126892,.4098151028156281,0,3,10,16,8,4,-1,14,16,4,2,2,10,18,4,2,2,.0015494349645450711,.4773750901222229,.5468043088912964,0,2,7,7,6,6,-1,9,7,2,6,3,-.0239142198115587,.7146975994110107,.4783824980258942,0,2,10,2,4,10,-1,10,2,2,10,2,-.0124536901712418,.2635296881198883,.5241122841835022,0,2,6,1,4,9,-1,8,1,2,9,2,-.00020760179904755205,.3623757064342499,.5113608837127686,0,2,12,19,2,1,-1,12,19,1,1,2,29781080229440704e-21,.4705932140350342,.5432801842689514,104.74919891357422,211,0,2,1,2,4,9,-1,3,2,2,9,2,.0117727499455214,.3860518932342529,.6421167254447937,0,2,7,5,6,4,-1,9,5,2,4,3,.0270375702530146,.4385654926300049,.675403892993927,0,2,9,4,2,4,-1,9,6,2,2,2,-3641950024757534e-20,.5487101078033447,.34233158826828,0,2,14,5,2,8,-1,14,9,2,4,2,.001999540952965617,.3230532109737396,.5400317907333374,0,2,7,6,5,12,-1,7,12,5,6,2,.0045278300531208515,.5091639757156372,.2935043871402741,0,2,14,6,2,6,-1,14,9,2,3,2,.00047890920541249216,.4178153872489929,.5344064235687256,0,2,4,6,2,6,-1,4,9,2,3,2,.0011720920447260141,.2899182140827179,.5132070779800415,0,3,8,15,10,4,-1,13,15,5,2,2,8,17,5,2,2,.0009530570241622627,.428012490272522,.5560845136642456,0,2,6,18,2,2,-1,7,18,1,2,2,15099150004971307e-21,.4044871926307678,.5404760241508484,0,2,11,3,6,2,-1,11,4,6,1,2,-.0006081790197640657,.4271768927574158,.5503466129302979,0,2,2,0,16,6,-1,2,2,16,2,3,.003322452073916793,.3962723910808563,.5369734764099121,0,2,11,3,6,2,-1,11,4,6,1,2,-.0011037490330636501,.4727177917957306,.5237749814987183,0,2,4,11,10,3,-1,4,12,10,1,3,-.0014350269921123981,.5603008270263672,.4223509132862091,0,2,11,3,6,2,-1,11,4,6,1,2,.0020767399109899998,.5225917100906372,.4732725918292999,0,2,3,3,6,2,-1,3,4,6,1,2,-.00016412809782195836,.3999075889587402,.5432739853858948,0,2,16,0,4,7,-1,16,0,2,7,2,.008830243721604347,.4678385853767395,.6027327179908752,0,2,0,14,9,6,-1,0,16,9,2,3,-.0105520701035857,.3493967056274414,.5213974714279175,0,2,9,16,3,3,-1,9,17,3,1,3,-.00227316003292799,.6185818910598755,.4749062955379486,0,2,4,6,6,2,-1,6,6,2,2,3,-.0008478633244521916,.5285341143608093,.3843482136726379,0,2,15,11,1,3,-1,15,12,1,1,3,.0012081359745934606,.536064088344574,.3447335958480835,0,2,5,5,2,3,-1,5,6,2,1,3,.002651273040100932,.4558292031288147,.6193962097167969,0,2,10,9,2,2,-1,10,10,2,1,2,-.0011012479662895203,.368023008108139,.5327628254890442,0,2,3,1,4,3,-1,5,1,2,3,2,.0004956151824444532,.396059513092041,.5274940729141235,0,2,16,0,4,7,-1,16,0,2,7,2,-.0439017713069916,.7020444869995117,.4992839097976685,0,2,0,0,20,1,-1,10,0,10,1,2,.0346903502941132,.5049164295196533,.276660293340683,0,2,15,11,1,3,-1,15,12,1,1,3,-.002744219033047557,.2672632932662964,.5274971127510071,0,2,0,4,3,4,-1,1,4,1,4,3,.003331658896058798,.4579482972621918,.6001101732254028,0,2,16,3,3,6,-1,16,5,3,2,3,-.0200445707887411,.3171594142913818,.523571789264679,0,2,1,3,3,6,-1,1,5,3,2,3,.0013492030557245016,.5265362858772278,.4034324884414673,0,3,6,2,12,6,-1,12,2,6,3,2,6,5,6,3,2,.0029702018946409225,.5332456827163696,.4571984112262726,0,2,8,10,4,3,-1,8,11,4,1,3,.006303998176008463,.4593310952186585,.6034635901451111,0,3,4,2,14,6,-1,11,2,7,3,2,4,5,7,3,2,-.0129365902394056,.4437963962554932,.5372971296310425,0,2,9,11,2,3,-1,9,12,2,1,3,.004014872945845127,.4680323898792267,.6437833905220032,0,2,15,13,2,3,-1,15,14,2,1,3,-.002640167949721217,.3709631860256195,.5314332842826843,0,2,8,12,4,3,-1,8,13,4,1,3,.0139184398576617,.4723555147647858,.713080883026123,0,2,15,11,1,3,-1,15,12,1,1,3,-.00045087869511917233,.4492394030094147,.5370404124259949,0,2,7,13,5,2,-1,7,14,5,1,2,.00025384349282830954,.4406864047050476,.5514402985572815,0,2,7,12,6,3,-1,7,13,6,1,3,.002271000063046813,.4682416915893555,.5967984199523926,0,2,5,11,4,4,-1,5,13,4,2,2,.002412077970802784,.5079392194747925,.3018598854541779,0,2,11,4,3,3,-1,12,4,1,3,3,-3602567085181363e-20,.560103714466095,.4471096992492676,0,2,6,4,3,3,-1,7,4,1,3,3,-.0074905529618263245,.2207535058259964,.4989944100379944,0,2,16,5,3,6,-1,17,5,1,6,3,-.017513120546937,.6531215906143188,.5017648935317993,0,2,3,6,12,7,-1,7,6,4,7,3,.1428163051605225,.4967963099479675,.1482062041759491,0,2,16,5,3,6,-1,17,5,1,6,3,.005534526892006397,.4898946881294251,.5954223871231079,0,2,3,13,2,3,-1,3,14,2,1,3,-.0009632359142415226,.3927116990089417,.519607424736023,0,2,16,5,3,6,-1,17,5,1,6,3,-.0020370010752230883,.5613325238227844,.4884858131408691,0,2,1,5,3,6,-1,2,5,1,6,3,.0016614829655736685,.4472880065441132,.5578880906105042,0,2,1,9,18,1,-1,7,9,6,1,3,-.0031188090797513723,.3840532898902893,.5397477746009827,0,2,0,9,8,7,-1,4,9,4,7,2,-.006400061771273613,.5843983888626099,.4533218145370483,0,2,12,11,8,2,-1,12,12,8,1,2,.0003131960111204535,.5439221858978271,.4234727919101715,0,2,0,11,8,2,-1,0,12,8,1,2,-.0182220991700888,.1288464963436127,.4958404898643494,0,2,9,13,2,3,-1,9,14,2,1,3,.008796924725174904,.49512979388237,.7153480052947998,0,3,4,10,12,4,-1,4,10,6,2,2,10,12,6,2,2,-.004239507019519806,.3946599960327148,.5194936990737915,0,2,9,3,3,7,-1,10,3,1,7,3,.009708627127110958,.4897503852844238,.6064900159835815,0,2,7,2,3,5,-1,8,2,1,5,3,-.003993417136371136,.3245440125465393,.5060828924179077,0,3,9,12,4,6,-1,11,12,2,3,2,9,15,2,3,2,-.0167850591242313,.1581953018903732,.5203778743743896,0,2,8,7,3,6,-1,9,7,1,6,3,.018272090703249,.4680935144424439,.6626979112625122,0,2,15,4,4,2,-1,15,5,4,1,2,.00568728381767869,.5211697816848755,.3512184917926788,0,2,8,7,3,3,-1,9,7,1,3,3,-.0010739039862528443,.5768386125564575,.4529845118522644,0,2,14,2,6,4,-1,14,4,6,2,2,-.00370938703417778,.4507763087749481,.5313581228256226,0,2,7,16,6,1,-1,9,16,2,1,3,-.0002111070934915915,.5460820198059082,.4333376884460449,0,2,15,13,2,3,-1,15,14,2,1,3,.0010670139454305172,.5371856093406677,.4078390896320343,0,2,8,7,3,10,-1,9,7,1,10,3,.0035943021066486835,.4471287131309509,.5643836259841919,0,2,11,10,2,6,-1,11,12,2,2,3,-.005177603103220463,.4499393105506897,.5280330181121826,0,2,6,10,4,1,-1,8,10,2,1,2,-.00025414369883947074,.5516173243522644,.4407708048820496,0,2,10,9,2,2,-1,10,10,2,1,2,.006352256052196026,.5194190144538879,.2465227991342545,0,2,8,9,2,2,-1,8,10,2,1,2,-.00044205080484971404,.3830705881118774,.5139682292938232,0,3,12,7,2,2,-1,13,7,1,1,2,12,8,1,1,2,.0007448872784152627,.4891090989112854,.5974786877632141,0,3,5,7,2,2,-1,5,7,1,1,2,6,8,1,1,2,-.0035116379149258137,.7413681745529175,.4768764972686768,0,2,13,0,3,14,-1,14,0,1,14,3,-.0125409103929996,.3648819029331207,.5252826809883118,0,2,4,0,3,14,-1,5,0,1,14,3,.009493185207247734,.5100492835044861,.362958699464798,0,2,13,4,3,14,-1,14,4,1,14,3,.0129611501470208,.5232442021369934,.4333561062812805,0,2,9,14,2,3,-1,9,15,2,1,3,.004720944911241531,.4648149013519287,.6331052780151367,0,2,8,14,4,3,-1,8,15,4,1,3,-.0023119079414755106,.5930309891700745,.4531058073043823,0,2,4,2,3,16,-1,5,2,1,16,3,-.002826229901984334,.3870477974414825,.5257101058959961,0,2,7,2,8,10,-1,7,7,8,5,2,-.0014311339473351836,.552250325679779,.4561854898929596,0,2,6,14,7,3,-1,6,15,7,1,3,.0019378310535103083,.4546220898628235,.5736966729164124,0,3,9,2,10,12,-1,14,2,5,6,2,9,8,5,6,2,.00026343559147790074,.5345739126205444,.4571875035762787,0,2,6,7,8,2,-1,6,8,8,1,2,.0007825752254575491,.3967815935611725,.5220187902450562,0,2,8,13,4,6,-1,8,16,4,3,2,-.0195504408329725,.282964289188385,.5243508219718933,0,2,6,6,1,3,-1,6,7,1,1,3,.00043914958951063454,.4590066969394684,.589909017086029,0,2,16,2,4,6,-1,16,4,4,2,3,.0214520003646612,.523141086101532,.2855378985404968,0,3,6,6,4,2,-1,6,6,2,1,2,8,7,2,1,2,.0005897358059883118,.4397256970405579,.550642192363739,0,2,16,2,4,6,-1,16,4,4,2,3,-.0261576101183891,.3135079145431519,.5189175009727478,0,2,0,2,4,6,-1,0,4,4,2,3,-.0139598604291677,.3213272988796234,.5040717720985413,0,2,9,6,2,6,-1,9,6,1,6,2,-.006369901821017265,.6387544870376587,.4849506914615631,0,2,3,4,6,10,-1,3,9,6,5,2,-.008561382070183754,.2759132087230682,.5032019019126892,0,2,9,5,2,6,-1,9,5,1,6,2,.000966229010373354,.4685640931129456,.5834879279136658,0,2,3,13,2,3,-1,3,14,2,1,3,.0007655026856809855,.5175207257270813,.389642208814621,0,2,13,13,3,2,-1,13,14,3,1,2,-.008183334022760391,.2069136947393417,.5208122134208679,0,3,2,16,10,4,-1,2,16,5,2,2,7,18,5,2,2,-.009397693909704685,.6134091019630432,.4641222953796387,0,3,5,6,10,6,-1,10,6,5,3,2,5,9,5,3,2,.004802898038178682,.5454108119010925,.439521998167038,0,2,7,14,1,3,-1,7,15,1,1,3,-.003568056970834732,.6344485282897949,.4681093990802765,0,2,14,16,6,3,-1,14,17,6,1,3,.0040733120404183865,.5292683243751526,.4015620052814484,0,2,5,4,3,3,-1,5,5,3,1,3,.0012568129459396005,.4392988085746765,.5452824831008911,0,2,7,4,10,3,-1,7,5,10,1,3,-.0029065010603517294,.5898832082748413,.4863379895687103,0,2,0,4,5,4,-1,0,6,5,2,2,-.00244093406945467,.4069364964962006,.5247421860694885,0,2,13,11,3,9,-1,13,14,3,3,3,.0248307008296251,.5182725787162781,.3682524859905243,0,2,4,11,3,9,-1,4,14,3,3,3,-.0488540083169937,.1307577937841415,.496128112077713,0,2,9,7,2,1,-1,9,7,1,1,2,-.001611037994734943,.6421005725860596,.4872662127017975,0,2,5,0,6,17,-1,7,0,2,17,3,-.0970094799995422,.0477693490684032,.495098888874054,0,2,10,3,6,3,-1,10,3,3,3,2,.0011209240183234215,.4616267085075378,.5354745984077454,0,2,2,2,15,4,-1,7,2,5,4,3,-.001306409016251564,.626185417175293,.4638805985450745,0,3,8,2,8,2,-1,12,2,4,1,2,8,3,4,1,2,.00045771620352752507,.5384417772293091,.4646640121936798,0,2,8,1,3,6,-1,8,3,3,2,3,-.0006314995116554201,.3804047107696533,.51302570104599,0,2,9,17,2,2,-1,9,18,2,1,2,.0001450597046641633,.4554310142993927,.5664461851119995,0,2,0,0,2,14,-1,1,0,1,14,2,-.0164745505899191,.6596958041191101,.4715859889984131,0,2,12,0,7,3,-1,12,1,7,1,3,.0133695797994733,.519546627998352,.3035964965820313,0,2,1,14,1,2,-1,1,15,1,1,2,.00010271780047332868,.522917628288269,.4107066094875336,0,3,14,12,2,8,-1,15,12,1,4,2,14,16,1,4,2,-.0055311559699475765,.6352887749671936,.4960907101631165,0,2,1,0,7,3,-1,1,1,7,1,3,-.0026187049224972725,.3824546039104462,.5140984058380127,0,3,14,12,2,8,-1,15,12,1,4,2,14,16,1,4,2,.005083426833152771,.4950439929962158,.6220818758010864,0,3,6,0,8,12,-1,6,0,4,6,2,10,6,4,6,2,.0798181593418121,.4952335953712463,.1322475969791412,0,2,6,1,8,9,-1,6,4,8,3,3,-.0992265865206718,.7542728781700134,.5008416771888733,0,2,5,2,2,2,-1,5,3,2,1,2,-.0006517401780001819,.3699302971363068,.5130121111869812,0,3,13,14,6,6,-1,16,14,3,3,2,13,17,3,3,2,-.018996849656105,.6689178943634033,.4921202957630158,0,3,0,17,20,2,-1,0,17,10,1,2,10,18,10,1,2,.0173468999564648,.4983300864696503,.1859198063611984,0,3,10,3,2,6,-1,11,3,1,3,2,10,6,1,3,2,.0005508210160769522,.4574424028396606,.5522121787071228,0,2,5,12,6,2,-1,8,12,3,2,2,.002005605027079582,.5131744742393494,.3856469988822937,0,2,10,7,6,13,-1,10,7,3,13,2,-.007768819108605385,.4361700117588043,.5434309244155884,0,2,5,15,10,5,-1,10,15,5,5,2,.0508782789111137,.4682720899581909,.6840639710426331,0,2,10,4,4,10,-1,10,4,2,10,2,-.0022901780903339386,.4329245090484619,.5306099057197571,0,2,5,7,2,1,-1,6,7,1,1,2,-.00015715380141045898,.5370057225227356,.4378164112567902,0,2,10,3,6,7,-1,10,3,3,7,2,.1051924005150795,.5137274265289307,.0673614665865898,0,2,4,3,6,7,-1,7,3,3,7,2,.002719891956076026,.4112060964107513,.5255665183067322,0,2,1,7,18,5,-1,7,7,6,5,3,.0483377799391747,.5404623746871948,.4438967108726502,0,2,3,17,4,3,-1,5,17,2,3,2,.0009570376132614911,.4355969130992889,.5399510860443115,0,3,8,14,12,6,-1,14,14,6,3,2,8,17,6,3,2,-.0253712590783834,.5995175242424011,.5031024813652039,0,3,0,13,20,4,-1,0,13,10,2,2,10,15,10,2,2,.0524579510092735,.4950287938117981,.1398351043462753,0,3,4,5,14,2,-1,11,5,7,1,2,4,6,7,1,2,-.0123656298965216,.639729917049408,.496410608291626,0,3,1,2,10,12,-1,1,2,5,6,2,6,8,5,6,2,-.1458971947431564,.1001669988036156,.494632214307785,0,2,6,1,14,3,-1,6,2,14,1,3,-.0159086007624865,.3312329947948456,.5208340883255005,0,2,8,16,2,3,-1,8,17,2,1,3,.00039486068999394774,.4406363964080811,.5426102876663208,0,2,9,17,3,2,-1,10,17,1,2,3,-.0052454001270234585,.2799589931964874,.5189967155456543,0,3,5,15,4,2,-1,5,15,2,1,2,7,16,2,1,2,-.005042179953306913,.6987580060958862,.4752142131328583,0,2,10,15,1,3,-1,10,16,1,1,3,.0029812189750373363,.4983288943767548,.6307479739189148,0,3,8,16,4,4,-1,8,16,2,2,2,10,18,2,2,2,-.007288430817425251,.298233300447464,.5026869773864746,0,2,6,11,8,6,-1,6,14,8,3,2,.0015094350092113018,.5308442115783691,.3832970857620239,0,2,2,13,5,2,-1,2,14,5,1,2,-.009334079921245575,.2037964016199112,.4969817101955414,0,3,13,14,6,6,-1,16,14,3,3,2,13,17,3,3,2,.0286671407520771,.5025696754455566,.6928027272224426,0,2,1,9,18,4,-1,7,9,6,4,3,.1701968014240265,.4960052967071533,.1476442962884903,0,3,13,14,6,6,-1,16,14,3,3,2,13,17,3,3,2,-.003261447884142399,.5603063702583313,.4826056063175201,0,2,0,2,1,6,-1,0,4,1,2,3,.0005576927796937525,.5205562114715576,.4129633009433746,0,2,5,0,15,20,-1,5,10,15,10,2,.3625833988189697,.5221652984619141,.3768612146377564,0,3,1,14,6,6,-1,1,14,3,3,2,4,17,3,3,2,-.0116151301190257,.6022682785987854,.4637489914894104,0,3,8,14,4,6,-1,10,14,2,3,2,8,17,2,3,2,-.004079519771039486,.4070447087287903,.5337479114532471,0,2,7,11,2,1,-1,8,11,1,1,2,.0005720430053770542,.4601835012435913,.5900393128395081,0,2,9,17,3,2,-1,10,17,1,2,3,.000675433489959687,.5398252010345459,.4345428943634033,0,2,8,17,3,2,-1,9,17,1,2,3,.0006329569732770324,.5201563239097595,.4051358997821808,0,3,12,14,4,6,-1,14,14,2,3,2,12,17,2,3,2,.00124353205319494,.4642387926578522,.5547441244125366,0,3,4,14,4,6,-1,4,14,2,3,2,6,17,2,3,2,-.004736385773867369,.6198567152023315,.4672552049160004,0,3,13,14,2,6,-1,14,14,1,3,2,13,17,1,3,2,-.006465846206992865,.6837332844734192,.5019000768661499,0,3,5,14,2,6,-1,5,14,1,3,2,6,17,1,3,2,.000350173213519156,.4344803094863892,.5363622903823853,0,2,7,0,6,12,-1,7,4,6,4,3,.00015754920605104417,.4760079085826874,.5732020735740662,0,2,0,7,12,2,-1,4,7,4,2,3,.009977436624467373,.5090985894203186,.3635039925575256,0,2,10,3,3,13,-1,11,3,1,13,3,-.0004146452993154526,.5570064783096313,.4593802094459534,0,2,7,3,3,13,-1,8,3,1,13,3,-.00035888899583369493,.5356845855712891,.4339134991168976,0,2,10,8,6,3,-1,10,9,6,1,3,.0004046325047966093,.4439803063869476,.5436776876449585,0,2,3,11,3,2,-1,4,11,1,2,3,-.0008218478760682046,.4042294919490814,.5176299214363098,0,3,13,12,6,8,-1,16,12,3,4,2,13,16,3,4,2,.005946741905063391,.4927651882171631,.5633779764175415,0,2,7,6,6,5,-1,9,6,2,5,3,-.0217533893883228,.8006293773651123,.480084091424942,0,2,17,11,2,7,-1,17,11,1,7,2,-.0145403798669577,.3946054875850678,.5182222723960876,0,2,3,13,8,2,-1,7,13,4,2,2,-.0405107699334621,.0213249903172255,.4935792982578278,0,2,6,9,8,3,-1,6,10,8,1,3,-.0005845826817676425,.4012795984745026,.5314025282859802,0,2,4,3,4,3,-1,4,4,4,1,3,.005515180062502623,.4642418920993805,.5896260738372803,0,2,11,3,4,3,-1,11,4,4,1,3,-.006062622182071209,.6502159237861633,.5016477704048157,0,2,1,4,17,12,-1,1,8,17,4,3,.0945358425378799,.5264708995819092,.4126827120780945,0,2,11,3,4,3,-1,11,4,4,1,3,.004731505177915096,.4879199862480164,.5892447829246521,0,2,4,8,6,3,-1,4,9,6,1,3,-.0005257147131487727,.391728013753891,.5189412832260132,0,2,12,3,5,3,-1,12,4,5,1,3,-.002546404954046011,.5837599039077759,.498570591211319,0,2,1,11,2,7,-1,2,11,1,7,2,-.0260756891220808,.1261983960866928,.4955821931362152,0,3,15,12,2,8,-1,16,12,1,4,2,15,16,1,4,2,-.00547797093167901,.5722513794898987,.5010265707969666,0,2,4,8,11,3,-1,4,9,11,1,3,.005133774131536484,.527326226234436,.4226376116275787,0,3,9,13,6,2,-1,12,13,3,1,2,9,14,3,1,2,.000479449809063226,.4450066983699799,.5819587111473083,0,2,6,13,4,3,-1,6,14,4,1,3,-.0021114079281687737,.5757653117179871,.451171487569809,0,2,9,12,3,3,-1,10,12,1,3,3,-.0131799904629588,.1884381026029587,.5160734057426453,0,2,5,3,3,3,-1,5,4,3,1,3,-.004796809982508421,.6589789986610413,.4736118912696838,0,2,9,4,2,3,-1,9,5,2,1,3,.0067483168095350266,.5259429812431335,.3356395065784454,0,2,0,2,16,3,-1,0,3,16,1,3,.0014623369788751006,.5355271100997925,.4264092147350311,0,3,15,12,2,8,-1,16,12,1,4,2,15,16,1,4,2,.004764515906572342,.5034406781196594,.5786827802658081,0,3,3,12,2,8,-1,3,12,1,4,2,4,16,1,4,2,.0068066660314798355,.475660502910614,.6677829027175903,0,2,14,13,3,6,-1,14,15,3,2,3,.0036608621012419462,.5369611978530884,.4311546981334686,0,2,3,13,3,6,-1,3,15,3,2,3,.0214496403932571,.4968641996383667,.1888816058635712,0,3,6,5,10,2,-1,11,5,5,1,2,6,6,5,1,2,.004167890176177025,.4930733144283295,.5815368890762329,0,2,2,14,14,6,-1,2,17,14,3,2,.008646756410598755,.5205205082893372,.4132595062255859,0,2,10,14,1,3,-1,10,15,1,1,3,-.0003611407882999629,.5483555197715759,.4800927937030792,0,3,4,16,2,2,-1,4,16,1,1,2,5,17,1,1,2,.0010808729566633701,.4689902067184448,.6041421294212341,0,2,10,6,2,3,-1,10,7,2,1,3,.005771995987743139,.5171142220497131,.3053277134895325,0,3,0,17,20,2,-1,0,17,10,1,2,10,18,10,1,2,.001572077046148479,.5219978094100952,.4178803861141205,0,2,13,6,1,3,-1,13,7,1,1,3,-.0019307859474793077,.5860369801521301,.4812920093536377,0,2,8,13,3,2,-1,9,13,1,2,3,-.007892627269029617,.1749276965856552,.497173398733139,0,2,12,2,3,3,-1,13,2,1,3,3,-.002222467912361026,.434258908033371,.521284818649292,0,3,3,18,2,2,-1,3,18,1,1,2,4,19,1,1,2,.0019011989934369922,.4765186905860901,.689205527305603,0,2,9,16,3,4,-1,10,16,1,4,3,.0027576119173318148,.5262191295623779,.4337486028671265,0,2,6,6,1,3,-1,6,7,1,1,3,.005178744904696941,.4804069101810455,.7843729257583618,0,2,13,1,5,2,-1,13,2,5,1,2,-.0009027334162965417,.412084698677063,.5353423953056335,0,3,7,14,6,2,-1,7,14,3,1,2,10,15,3,1,2,.005179795902222395,.4740372896194458,.6425960063934326,0,2,11,3,3,4,-1,12,3,1,4,3,-.0101140001788735,.2468792051076889,.5175017714500427,0,2,1,13,12,6,-1,5,13,4,6,3,-.0186170600354671,.5756294131278992,.4628978967666626,0,2,14,11,5,2,-1,14,12,5,1,2,.0059225959703326225,.5169625878334045,.3214271068572998,0,3,2,15,14,4,-1,2,15,7,2,2,9,17,7,2,2,-.006294507998973131,.3872014880180359,.5141636729240417,0,3,3,7,14,2,-1,10,7,7,1,2,3,8,7,1,2,.0065353019163012505,.4853048920631409,.6310489773750305,0,2,1,11,4,2,-1,1,12,4,1,2,.0010878399480134249,.5117315053939819,.3723258972167969,0,2,14,0,6,14,-1,16,0,2,14,3,-.0225422400981188,.5692740082740784,.4887112975120544,0,2,4,11,1,3,-1,4,12,1,1,3,-.003006566083058715,.2556012868881226,.5003992915153503,0,2,14,0,6,14,-1,16,0,2,14,3,.007474127225577831,.4810872972011566,.5675926804542542,0,2,1,10,3,7,-1,2,10,1,7,3,.0261623207479715,.4971194863319397,.1777237057685852,0,2,8,12,9,2,-1,8,13,9,1,2,.0009435273823328316,.4940010905265808,.549125075340271,0,2,0,6,20,1,-1,10,6,10,1,2,.0333632417023182,.5007612109184265,.2790724039077759,0,2,8,4,4,4,-1,8,4,2,4,2,-.0151186501607299,.7059578895568848,.4973031878471375,0,2,0,0,2,2,-1,0,1,2,1,2,.0009864894673228264,.5128620266914368,.3776761889457703,105.76110076904297,213,0,2,5,3,10,9,-1,5,6,10,3,3,-.0951507985591888,.6470757126808167,.4017286896705627,0,2,15,2,4,10,-1,15,2,2,10,2,.006270234007388353,.399982213973999,.574644923210144,0,2,8,2,2,7,-1,9,2,1,7,2,.000300180894555524,.355877012014389,.5538809895515442,0,2,7,4,12,1,-1,11,4,4,1,3,.0011757409665733576,.425653487443924,.5382617712020874,0,2,3,4,9,1,-1,6,4,3,1,3,4423526843311265e-20,.3682908117771149,.5589926838874817,0,2,15,10,1,4,-1,15,12,1,2,2,-29936920327600092e-21,.5452470183372498,.4020367860794067,0,2,4,10,6,4,-1,7,10,3,4,2,.003007319988682866,.5239058136940002,.3317843973636627,0,2,15,9,1,6,-1,15,12,1,3,2,-.0105138896033168,.4320689141750336,.5307983756065369,0,2,7,17,6,3,-1,7,18,6,1,3,.008347682654857635,.4504637122154236,.6453298926353455,0,3,14,3,2,16,-1,15,3,1,8,2,14,11,1,8,2,-.0031492270063608885,.4313425123691559,.5370525121688843,0,2,4,9,1,6,-1,4,12,1,3,2,-1443564997316571e-20,.5326603055000305,.381797194480896,0,2,12,1,5,2,-1,12,2,5,1,2,-.00042855090578086674,.430516391992569,.5382009744644165,0,3,6,18,4,2,-1,6,18,2,1,2,8,19,2,1,2,.00015062429883982986,.4235970973968506,.5544965267181396,0,3,2,4,16,10,-1,10,4,8,5,2,2,9,8,5,2,.0715598315000534,.5303059816360474,.2678802907466888,0,2,6,5,1,10,-1,6,10,1,5,2,.0008409518050029874,.3557108938694,.5205433964729309,0,2,4,8,15,2,-1,9,8,5,2,3,.0629865005612373,.5225362777709961,.2861376106739044,0,2,1,8,15,2,-1,6,8,5,2,3,-.0033798629883676767,.3624185919761658,.5201697945594788,0,2,9,5,3,6,-1,9,7,3,2,3,-.00011810739670181647,.547447681427002,.3959893882274628,0,2,5,7,8,2,-1,9,7,4,2,2,-.0005450560129247606,.3740422129631043,.5215715765953064,0,2,9,11,2,3,-1,9,12,2,1,3,-.0018454910023137927,.5893052220344543,.4584448933601379,0,2,1,0,16,3,-1,1,1,16,1,3,-.0004383237101137638,.4084582030773163,.5385351181030273,0,2,11,2,7,2,-1,11,3,7,1,2,-.002400083001703024,.377745509147644,.5293580293655396,0,2,5,1,10,18,-1,5,7,10,6,3,-.0987957417964935,.2963612079620361,.5070089101791382,0,2,17,4,3,2,-1,18,4,1,2,3,.0031798239797353745,.4877632856369019,.6726443767547607,0,2,8,13,1,3,-1,8,14,1,1,3,.00032406419632025063,.4366911053657532,.5561109781265259,0,2,3,14,14,6,-1,3,16,14,2,3,-.0325472503900528,.31281578540802,.5308616161346436,0,2,0,2,3,4,-1,1,2,1,4,3,-.007756113074719906,.6560224890708923,.4639872014522553,0,2,12,1,5,2,-1,12,2,5,1,2,.0160272493958473,.5172680020332336,.3141897916793823,0,2,3,1,5,2,-1,3,2,5,1,2,710023505234858e-20,.4084446132183075,.5336294770240784,0,2,10,13,2,3,-1,10,14,2,1,3,.007342280820012093,.4966922104358673,.660346508026123,0,2,8,13,2,3,-1,8,14,2,1,3,-.0016970280557870865,.5908237099647522,.4500182867050171,0,2,14,12,2,3,-1,14,13,2,1,3,.0024118260480463505,.5315160751342773,.3599720895290375,0,2,7,2,2,3,-1,7,3,2,1,3,-.005530093796551228,.2334040999412537,.4996814131736755,0,3,5,6,10,4,-1,10,6,5,2,2,5,8,5,2,2,-.0026478730142116547,.5880935788154602,.4684734046459198,0,2,9,13,1,6,-1,9,16,1,3,2,.0112956296652555,.4983777105808258,.1884590983390808,0,3,10,12,2,2,-1,11,12,1,1,2,10,13,1,1,2,-.000669528788421303,.5872138142585754,.4799019992351532,0,2,4,12,2,3,-1,4,13,2,1,3,.0014410680159926414,.5131189227104187,.350101113319397,0,2,14,4,6,6,-1,14,6,6,2,3,.0024637870956212282,.5339372158050537,.4117639064788818,0,2,8,17,2,3,-1,8,18,2,1,3,.0003311451873742044,.4313383102416992,.5398246049880981,0,2,16,4,4,6,-1,16,6,4,2,3,-.0335572697222233,.26753368973732,.5179154872894287,0,2,0,4,4,6,-1,0,6,4,2,3,.0185394193977118,.4973869919776917,.2317177057266235,0,2,14,6,2,3,-1,14,6,1,3,2,-.00029698139405809343,.552970826625824,.4643664062023163,0,2,4,9,8,1,-1,8,9,4,1,2,-.0004557725915219635,.5629584193229675,.4469191133975983,0,2,8,12,4,3,-1,8,13,4,1,3,-.0101589802652597,.6706212759017944,.4925918877124786,0,2,5,12,10,6,-1,5,14,10,2,3,-22413829356082715e-21,.5239421725273132,.3912901878356934,0,2,11,12,1,2,-1,11,13,1,1,2,7203496352303773e-20,.4799438118934631,.5501788854598999,0,2,8,15,4,2,-1,8,16,4,1,2,-.006926720961928368,.6930009722709656,.4698084890842438,0,3,6,9,8,8,-1,10,9,4,4,2,6,13,4,4,2,-.007699783891439438,.409962385892868,.5480883121490479,0,3,7,12,4,6,-1,7,12,2,3,2,9,15,2,3,2,-.007313054986298084,.3283475935459137,.5057886242866516,0,2,10,11,3,1,-1,11,11,1,1,3,.0019650589674711227,.4978047013282776,.6398249864578247,0,3,9,7,2,10,-1,9,7,1,5,2,10,12,1,5,2,.007164760027080774,.4661160111427307,.6222137212753296,0,2,8,0,6,6,-1,10,0,2,6,3,-.0240786392241716,.2334644943475723,.5222162008285522,0,2,3,11,2,6,-1,3,13,2,2,3,-.0210279691964388,.1183653995394707,.4938226044178009,0,2,16,12,1,2,-1,16,13,1,1,2,.00036017020465806127,.5325019955635071,.4116711020469666,0,3,1,14,6,6,-1,1,14,3,3,2,4,17,3,3,2,-.0172197297215462,.6278762221336365,.4664269089698792,0,2,13,1,3,6,-1,14,1,1,6,3,-.007867214269936085,.3403415083885193,.5249736905097961,0,2,8,8,2,2,-1,8,9,2,1,2,-.000447773898486048,.3610411882400513,.5086259245872498,0,2,9,9,3,3,-1,10,9,1,3,3,.005548601038753986,.4884265959262848,.6203498244285583,0,2,8,7,3,3,-1,8,8,3,1,3,-.00694611482322216,.262593001127243,.5011097192764282,0,2,14,0,2,3,-1,14,0,1,3,2,.00013569870498031378,.4340794980525971,.5628312230110168,0,2,1,0,18,9,-1,7,0,6,9,3,-.0458802506327629,.6507998704910278,.4696274995803833,0,2,11,5,4,15,-1,11,5,2,15,2,-.0215825606137514,.3826502859592438,.5287616848945618,0,2,5,5,4,15,-1,7,5,2,15,2,-.0202095396816731,.3233368098735809,.5074477195739746,0,2,14,0,2,3,-1,14,0,1,3,2,.005849671084433794,.5177603960037231,.4489670991897583,0,2,4,0,2,3,-1,5,0,1,3,2,-5747637987951748e-20,.4020850956439972,.5246363878250122,0,3,11,12,2,2,-1,12,12,1,1,2,11,13,1,1,2,-.001151310047134757,.6315072178840637,.490515410900116,0,3,7,12,2,2,-1,7,12,1,1,2,8,13,1,1,2,.0019862831104546785,.4702459871768951,.6497151255607605,0,2,12,0,3,4,-1,13,0,1,4,3,-.005271951202303171,.3650383949279785,.5227652788162231,0,2,4,11,3,3,-1,4,12,3,1,3,.0012662699446082115,.5166100859642029,.387761801481247,0,2,12,7,4,2,-1,12,8,4,1,2,-.006291944067925215,.737589418888092,.5023847818374634,0,2,8,10,3,2,-1,9,10,1,2,3,.000673601112794131,.4423226118087769,.5495585799217224,0,2,9,9,3,2,-1,10,9,1,2,3,-.0010523450328037143,.5976396203041077,.4859583079814911,0,2,8,9,3,2,-1,9,9,1,2,3,-.00044216238893568516,.5955939292907715,.4398930966854096,0,2,12,0,3,4,-1,13,0,1,4,3,.0011747940443456173,.5349888205528259,.4605058133602142,0,2,5,0,3,4,-1,6,0,1,4,3,.005245743785053492,.5049191117286682,.2941577136516571,0,3,4,14,12,4,-1,10,14,6,2,2,4,16,6,2,2,-.0245397202670574,.2550177872180939,.5218586921691895,0,2,8,13,2,3,-1,8,14,2,1,3,.0007379304151982069,.4424861073493958,.5490816235542297,0,2,10,10,3,8,-1,10,14,3,4,2,.0014233799884095788,.5319514274597168,.4081355929374695,0,3,8,10,4,8,-1,8,10,2,4,2,10,14,2,4,2,-.0024149110540747643,.4087659120559692,.5238950252532959,0,2,10,8,3,1,-1,11,8,1,1,3,-.0012165299849584699,.567457914352417,.4908052980899811,0,2,9,12,1,6,-1,9,15,1,3,2,-.0012438809499144554,.4129425883293152,.5256118178367615,0,2,10,8,3,1,-1,11,8,1,1,3,.006194273941218853,.5060194134712219,.7313653230667114,0,2,7,8,3,1,-1,8,8,1,1,3,-.0016607169527560472,.5979632139205933,.4596369862556458,0,2,5,2,15,14,-1,5,9,15,7,2,-.0273162592202425,.4174365103244782,.5308842062950134,0,3,2,1,2,10,-1,2,1,1,5,2,3,6,1,5,2,-.00158455700147897,.56158047914505,.4519486129283905,0,2,14,14,2,3,-1,14,15,2,1,3,-.0015514739789068699,.4076187014579773,.5360785126686096,0,2,2,7,3,3,-1,3,7,1,3,3,.0003844655875582248,.4347293972969055,.5430442094802856,0,2,17,4,3,3,-1,17,5,3,1,3,-.0146722598001361,.1659304946660996,.5146093964576721,0,2,0,4,3,3,-1,0,5,3,1,3,.008160888217389584,.4961819052696228,.1884745955467224,0,3,13,5,6,2,-1,16,5,3,1,2,13,6,3,1,2,.0011121659772470593,.4868263900279999,.6093816161155701,0,2,4,19,12,1,-1,8,19,4,1,3,-.007260377053171396,.6284325122833252,.4690375924110413,0,2,12,12,2,4,-1,12,14,2,2,2,-.00024046430189628154,.5575000047683716,.4046044051647186,0,2,3,15,1,3,-1,3,16,1,1,3,-.00023348190006799996,.4115762114524841,.5252848267555237,0,2,11,16,6,4,-1,11,16,3,4,2,.005573648028075695,.4730072915554047,.5690100789070129,0,2,2,10,3,10,-1,3,10,1,10,3,.0306237693876028,.4971886873245239,.1740095019340515,0,2,12,8,2,4,-1,12,8,1,4,2,.0009207479888573289,.5372117757797241,.4354872107505798,0,2,6,8,2,4,-1,7,8,1,4,2,-4355073906481266e-20,.5366883873939514,.4347316920757294,0,2,10,14,2,3,-1,10,14,1,3,2,-.006645271088927984,.3435518145561218,.516053318977356,0,2,5,1,10,3,-1,10,1,5,3,2,.0432219989597797,.4766792058944702,.7293652892112732,0,2,10,7,3,2,-1,11,7,1,2,3,.0022331769578158855,.5029315948486328,.5633171200752258,0,2,5,6,9,2,-1,8,6,3,2,3,.0031829739455133677,.4016092121601105,.5192136764526367,0,2,9,8,2,2,-1,9,9,2,1,2,-.00018027749320026487,.4088315963745117,.5417919754981995,0,3,2,11,16,6,-1,2,11,8,3,2,10,14,8,3,2,-.0052934689447283745,.407567709684372,.5243561863899231,0,3,12,7,2,2,-1,13,7,1,1,2,12,8,1,1,2,.0012750959722325206,.4913282990455627,.6387010812759399,0,2,9,5,2,3,-1,9,6,2,1,3,.004338532220572233,.5031672120094299,.2947346866130829,0,2,9,7,3,2,-1,10,7,1,2,3,.00852507445961237,.4949789047241211,.6308869123458862,0,2,5,1,8,12,-1,5,7,8,6,2,-.0009426635224372149,.5328366756439209,.4285649955272675,0,2,13,5,2,2,-1,13,6,2,1,2,.0013609660090878606,.4991525113582611,.5941501259803772,0,2,5,5,2,2,-1,5,6,2,1,2,.0004478250921238214,.4573504030704498,.5854480862617493,0,2,12,4,3,3,-1,12,5,3,1,3,.001336005050688982,.4604358971118927,.584905207157135,0,2,4,14,2,3,-1,4,15,2,1,3,-.0006096754805184901,.3969388902187347,.522942304611206,0,2,12,4,3,3,-1,12,5,3,1,3,-.002365678083151579,.5808320045471191,.4898357093334198,0,2,5,4,3,3,-1,5,5,3,1,3,.001073434017598629,.435121089220047,.5470039248466492,0,3,9,14,2,6,-1,10,14,1,3,2,9,17,1,3,2,.0021923359017819166,.535506010055542,.3842903971672058,0,2,8,14,3,2,-1,9,14,1,2,3,.005496861878782511,.5018138885498047,.2827191948890686,0,2,9,5,6,6,-1,11,5,2,6,3,-.0753688216209412,.1225076019763947,.5148826837539673,0,2,5,5,6,6,-1,7,5,2,6,3,.0251344703137875,.4731766879558563,.702544629573822,0,2,13,13,1,2,-1,13,14,1,1,2,-2935859993158374e-20,.5430532097816467,.465608686208725,0,2,0,2,10,2,-1,0,3,10,1,2,-.0005835591000504792,.4031040072441101,.5190119743347168,0,2,13,13,1,2,-1,13,14,1,1,2,-.0026639450807124376,.4308126866817474,.5161771178245544,0,3,5,7,2,2,-1,5,7,1,1,2,6,8,1,1,2,-.0013804089976474643,.621982991695404,.4695515930652618,0,2,13,5,2,7,-1,13,5,1,7,2,.0012313219485804439,.5379363894462585,.4425831139087677,0,2,6,13,1,2,-1,6,14,1,1,2,-14644179827882908e-21,.5281640291213989,.4222503006458283,0,2,11,0,3,7,-1,12,0,1,7,3,-.0128188095986843,.2582092881202698,.5179932713508606,0,3,0,3,2,16,-1,0,3,1,8,2,1,11,1,8,2,.0228521898388863,.4778693020343781,.7609264254570007,0,2,11,0,3,7,-1,12,0,1,7,3,.0008230597013607621,.5340992212295532,.4671724140644074,0,2,6,0,3,7,-1,7,0,1,7,3,.0127701200544834,.4965761005878449,.1472366005182266,0,2,11,16,8,4,-1,11,16,4,4,2,-.0500515103340149,.641499400138855,.5016592144966125,0,2,1,16,8,4,-1,5,16,4,4,2,.0157752707600594,.4522320032119751,.5685362219810486,0,2,13,5,2,7,-1,13,5,1,7,2,-.0185016207396984,.2764748930931091,.5137959122657776,0,2,5,5,2,7,-1,6,5,1,7,2,.0024626250378787518,.5141941905021667,.3795408010482788,0,2,18,6,2,14,-1,18,13,2,7,2,.0629161670804024,.5060648918151855,.658043384552002,0,2,6,10,3,4,-1,6,12,3,2,2,-21648500478477217e-21,.5195388197898865,.401988685131073,0,2,14,7,1,2,-1,14,8,1,1,2,.0021180990152060986,.4962365031242371,.5954458713531494,0,3,0,1,18,6,-1,0,1,9,3,2,9,4,9,3,2,-.0166348908096552,.3757933080196381,.517544686794281,0,2,14,7,1,2,-1,14,8,1,1,2,-.002889947034418583,.6624013781547546,.5057178735733032,0,2,0,6,2,14,-1,0,13,2,7,2,.076783262193203,.4795796871185303,.8047714829444885,0,2,17,0,3,12,-1,18,0,1,12,3,.003917067777365446,.4937882125377655,.5719941854476929,0,2,0,6,18,3,-1,0,7,18,1,3,-.0726706013083458,.0538945607841015,.4943903982639313,0,2,6,0,14,16,-1,6,8,14,8,2,.5403950214385986,.5129774212837219,.1143338978290558,0,2,0,0,3,12,-1,1,0,1,12,3,.0029510019812732935,.4528343975543976,.5698574185371399,0,2,13,0,3,7,-1,14,0,1,7,3,.0034508369863033295,.5357726812362671,.4218730926513672,0,2,5,7,1,2,-1,5,8,1,1,2,-.0004207793972454965,.5916172862052917,.4637925922870636,0,2,14,4,6,6,-1,14,6,6,2,3,.0033051050268113613,.5273385047912598,.438204288482666,0,2,5,7,7,2,-1,5,8,7,1,2,.0004773506079800427,.4046528041362763,.5181884765625,0,2,8,6,6,9,-1,8,9,6,3,3,-.0259285103529692,.7452235817909241,.5089386105537415,0,2,5,4,6,1,-1,7,4,2,1,3,-.002972979098558426,.3295435905456543,.5058795213699341,0,3,13,0,6,4,-1,16,0,3,2,2,13,2,3,2,2,.005850832909345627,.4857144057750702,.5793024897575378,0,2,1,2,18,12,-1,1,6,18,4,3,-.0459675192832947,.4312731027603149,.5380653142929077,0,2,3,2,17,12,-1,3,6,17,4,3,.1558596044778824,.5196170210838318,.1684713959693909,0,2,5,14,7,3,-1,5,15,7,1,3,.0151648297905922,.4735757112503052,.6735026836395264,0,2,10,14,1,3,-1,10,15,1,1,3,-.0010604249546304345,.5822926759719849,.4775702953338623,0,2,3,14,3,3,-1,3,15,3,1,3,.006647629197686911,.4999198913574219,.231953501701355,0,2,14,4,6,6,-1,14,6,6,2,3,-.0122311301529408,.4750893115997315,.5262982249259949,0,2,0,4,6,6,-1,0,6,6,2,3,.005652888212352991,.5069767832756042,.3561818897724152,0,2,12,5,4,3,-1,12,6,4,1,3,.0012977829901501536,.4875693917274475,.5619062781333923,0,2,4,5,4,3,-1,4,6,4,1,3,.0107815898954868,.4750770032405853,.6782308220863342,0,2,18,0,2,6,-1,18,2,2,2,3,.002865477930754423,.5305461883544922,.4290736019611359,0,2,8,1,4,9,-1,10,1,2,9,2,.0028663428965955973,.4518479108810425,.5539351105690002,0,2,6,6,8,2,-1,6,6,4,2,2,-.005198332015424967,.4149119853973389,.5434188842773438,0,3,6,5,4,2,-1,6,5,2,1,2,8,6,2,1,2,.005373999010771513,.471789687871933,.6507657170295715,0,2,10,5,2,3,-1,10,6,2,1,3,-.0146415298804641,.2172164022922516,.5161777138710022,0,2,9,5,1,3,-1,9,6,1,1,3,-15042580344015732e-21,.533738374710083,.4298836886882782,0,2,9,10,2,2,-1,9,11,2,1,2,-.0001187566012958996,.4604594111442566,.5582447052001953,0,2,0,8,4,3,-1,0,9,4,1,3,.0169955305755138,.4945895075798035,.0738800764083862,0,2,6,0,8,6,-1,6,3,8,3,2,-.0350959412753582,.70055091381073,.4977591037750244,0,3,1,0,6,4,-1,1,0,3,2,2,4,2,3,2,2,.0024217350874096155,.4466265141963959,.5477694272994995,0,2,13,0,3,7,-1,14,0,1,7,3,-.0009634033776819706,.4714098870754242,.5313338041305542,0,2,9,16,2,2,-1,9,17,2,1,2,.00016391130338888615,.4331546127796173,.5342242121696472,0,2,11,4,6,10,-1,11,9,6,5,2,-.0211414601653814,.2644700109958649,.5204498767852783,0,2,0,10,19,2,-1,0,11,19,1,2,.0008777520270086825,.5208349823951721,.4152742922306061,0,2,9,5,8,9,-1,9,8,8,3,3,-.0279439203441143,.6344125270843506,.5018811821937561,0,2,4,0,3,7,-1,5,0,1,7,3,.006729737855494022,.5050438046455383,.3500863909721375,0,3,8,6,4,12,-1,10,6,2,6,2,8,12,2,6,2,.0232810396701097,.4966318011283875,.6968677043914795,0,2,0,2,6,4,-1,0,4,6,2,2,-.0116449799388647,.3300260007381439,.5049629807472229,0,2,8,15,4,3,-1,8,16,4,1,3,.0157643090933561,.4991598129272461,.7321153879165649,0,2,8,0,3,7,-1,9,0,1,7,3,-.001361147966235876,.3911735117435455,.5160670876502991,0,2,9,5,3,4,-1,10,5,1,4,3,-.0008152233785949647,.5628911256790161,.49497190117836,0,2,8,5,3,4,-1,9,5,1,4,3,-.0006006627227179706,.585359513759613,.4550595879554749,0,2,7,6,6,1,-1,9,6,2,1,3,.0004971551825292408,.4271470010280609,.5443599224090576,0,3,7,14,4,4,-1,7,14,2,2,2,9,16,2,2,2,.0023475370835512877,.5143110752105713,.3887656927108765,0,3,13,14,4,6,-1,15,14,2,3,2,13,17,2,3,2,-.008926156908273697,.6044502258300781,.497172087430954,0,2,7,8,1,8,-1,7,12,1,4,2,-.013919910416007,.2583160996437073,.5000367760658264,0,3,16,0,2,8,-1,17,0,1,4,2,16,4,1,4,2,.0010209949687123299,.4857374131679535,.5560358166694641,0,3,2,0,2,8,-1,2,0,1,4,2,3,4,1,4,2,-.0027441629208624363,.5936884880065918,.464577704668045,0,2,6,1,14,3,-1,6,2,14,1,3,-.0162001308053732,.3163014948368073,.5193495154380798,0,2,7,9,3,10,-1,7,14,3,5,2,.004333198070526123,.5061224102973938,.3458878993988037,0,2,9,14,2,2,-1,9,15,2,1,2,.0005849793087691069,.4779017865657806,.5870177745819092,0,2,7,7,6,8,-1,7,11,6,4,2,-.0022466450463980436,.4297851026058197,.5374773144721985,0,2,9,7,3,6,-1,9,10,3,3,2,.0023146099410951138,.5438671708106995,.4640969932079315,0,2,7,13,3,3,-1,7,14,3,1,3,.008767912164330482,.472689300775528,.6771789789199829,0,2,9,9,2,2,-1,9,10,2,1,2,-.00022448020172305405,.4229173064231873,.5428048968315125,0,2,0,1,18,2,-1,6,1,6,2,3,-.007433602120727301,.6098880767822266,.4683673977851868,0,2,7,1,6,14,-1,7,8,6,7,2,-.0023189240600913763,.5689436793327332,.4424242079257965,0,2,1,9,18,1,-1,7,9,6,1,3,-.0021042178850620985,.3762221038341522,.5187087059020996,0,2,9,7,2,2,-1,9,7,1,2,2,.000460348412161693,.4699405133724213,.5771207213401794,0,2,9,3,2,9,-1,10,3,1,9,2,.0010547629790380597,.4465216994285584,.5601701736450195,0,2,18,14,2,3,-1,18,15,2,1,3,.0008714881842024624,.544980525970459,.3914709091186523,0,2,7,11,3,1,-1,8,11,1,1,3,.00033364820410497487,.4564009010791779,.5645738840103149,0,2,10,8,3,4,-1,11,8,1,4,3,-.0014853250468149781,.5747377872467041,.4692778885364533,0,2,7,14,3,6,-1,8,14,1,6,3,.0030251620337367058,.5166196823120117,.3762814104557037,0,2,10,8,3,4,-1,11,8,1,4,3,.005028074141591787,.5002111792564392,.6151527166366577,0,2,7,8,3,4,-1,8,8,1,4,3,-.0005816451157443225,.5394598245620728,.4390751123428345,0,2,7,9,6,9,-1,7,12,6,3,3,.0451415292918682,.5188326835632324,.206303596496582,0,2,0,14,2,3,-1,0,15,2,1,3,-.001079562003724277,.3904685080051422,.5137907266616821,0,2,11,12,1,2,-1,11,13,1,1,2,.00015995999274309725,.4895322918891907,.5427504181861877,0,2,4,3,8,3,-1,8,3,4,3,2,-.0193592701107264,.6975228786468506,.4773507118225098,0,2,0,4,20,6,-1,0,4,10,6,2,.207255095243454,.5233635902404785,.3034991919994354,0,2,9,14,1,3,-1,9,15,1,1,3,-.00041953290929086506,.5419396758079529,.4460186064243317,0,2,8,14,4,3,-1,8,15,4,1,3,.0022582069505006075,.4815764129161835,.6027408838272095,0,2,0,15,14,4,-1,0,17,14,2,2,-.0067811207845807076,.3980278968811035,.5183305740356445,0,2,1,14,18,6,-1,1,17,18,3,2,.0111543098464608,.543123185634613,.4188759922981262,0,3,0,0,10,6,-1,0,0,5,3,2,5,3,5,3,2,.0431624315679073,.4738228023052216,.6522961258888245]),
angular.module("Authentication",[]),angular.module("Dashboard",[]);var app=angular.module("classDigApp",["Authentication","Dashboard","classDigServices","ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngFileUpload","LocalStorageModule","ui.bootstrap","ui.calendar","ui.bootstrap.datetimepicker","infinite-scroll","ui.slimscroll","chart.js","slickCarousel","nvd3","rzModule","socialLogin","youtube-embed"]);app.constant("_",window._),app.constant("io",window.io),app.constant("moment",window.moment),app.constant("uiDatetimePickerConfig",{closeOnDateSelection:!0,closeOnTimeNow:!0,enableDate:!0}),app.config(["$logProvider",function(a){a.debugEnabled(!1)}]),app.config(["$routeProvider",function(a){a.when("/",{redirectTo:"/classes"}).when("/login",{controller:"LoginController",hideMenus:!0,templateUrl:"components/authentication/login/login.html"}).when("/signup",{controller:"RegistrationController",templateUrl:"components/authentication/registration/registration.html"}).when("/auth/change/:token",{templateUrl:"components/authentication/change-password/change-password.html",controller:"ChangePasswordCtrl"}).when("/auth/forgot",{templateUrl:"components/authentication/forgot-password/forgot-password.html",controller:"ForgotPasswordCtrl"}).when("/classes",{url:"/classes",templateUrl:"components/classes/classes.html",activeTab:"class",auth:!0}).when("/class",{url:"/class",templateUrl:"components/class/class.html",activeTab:"class",auth:!0}).when("/class/:classId/students",{url:"/class/:classId/students",templateUrl:"components/class/dashboard/students/students.html",controller:"studentsController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/students",{url:"/class/:classId/user/:studentId/students",templateUrl:"components/class/dashboard/students/students.html",controller:"studentsController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/attendance",{url:"/class/attendance",templateUrl:"components/class/dashboard/attendance/attendance.html",controller:"attendanceController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/behaviour",{url:"/class/behaviour",templateUrl:"components/class/dashboard/behaviour/behaviour.html",controller:"behaviourController",auth:!0,activeTab:"class"}).when("/class/:classId/user/:studentId/polls",{url:"/class/polls",templateUrl:"components/class/dashboard/polls/polls.html",controller:"pollsController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/grades",{url:"/class/grades",templateUrl:"components/class/dashboard/grades/grades.html",controller:"gradesController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/assignment",{url:"/class/assignment",templateUrl:"components/class/dashboard/assignment/assignment.html",controller:"assignmentController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/exams",{url:"/class/exams",templateUrl:"components/class/dashboard/exams/exams.html",controller:"examsController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/events",{url:"/class/events",templateUrl:"components/class/dashboard/events/events.html",controller:"eventsController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/files",{url:"/class/files",templateUrl:"components/class/dashboard/files/files.html",controller:"filesController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/reports",{url:"/class/reports",templateUrl:"components/class/dashboard/reports/reports.html",activeTab:"class",controller:"reportsController",auth:!0}).when("/class/:classId/user/:studentId/announcments",{url:"/class/announcments",templateUrl:"components/class/dashboard/announcments/announcments.html",controller:"announcmentsController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/distinguished",{url:"/class/distinguished",templateUrl:"components/class/dashboard/distinguished/distinguished.html",controller:"distinguishedController",activeTab:"class",auth:!0}).when("/class/:classId/user/:studentId/parents",{url:"/class/parents",templateUrl:"components/class/dashboard/parents/parents.html",controller:"parentsController",activeTab:"class",auth:!0}).when("/feed",{url:"/feed",templateUrl:"components/feed/feed.html",controller:"FeedController",activeTab:"feed",auth:!0}).when("/message",{templateUrl:"components/message/message.html",controller:"MessageCtrl",reloadOnSearch:!1,activeTab:"messages",auth:!0}).when("/main",{templateUrl:"views/main.html"}).when("/premium",{url:"/premium",templateUrl:"components/premium/premium.html",controller:"PremiumController",activeTab:"premium",auth:!0}).when("/profile",{url:"/profile",templateUrl:"components/profile/profile.html",controller:"ProfileController",activeTab:"profile",auth:!0}).when("/findPeople",{url:"/findPeople",templateUrl:"components/findPeople/findPeople.html",controller:"findPeopleController",activeTab:"findPeople",auth:!0}).when("/notifications",{url:"/notifications",templateUrl:"components/notifications/notifications.html",controller:"notificationsController",activeTab:"notifications",auth:!0}).when("/settings",{url:"/settings",templateUrl:"components/settings/settings.html",controller:"settingsController",activeTab:"",auth:!0}).when("/groups",{url:"/groups",templateUrl:"components/groups/groups.html",controller:"groupsController",activeTab:"groups",auth:!0}).when("/group/:groupId/user/:studentId/members",{url:"/group/members",templateUrl:"components/groups/group/dashboard/members/members.html",controller:"groupMembersController",activeTab:"groups",auth:!0}).when("/group/:groupId/user/:studentId/discussions",{url:"/group/discussions",templateUrl:"components/groups/group/dashboard/discussions/discussions.html",controller:"groupDiscussionsController",activeTab:"groups",auth:!0}).when("/group/:groupId/user/:studentId/invite",{url:"/group/invite",templateUrl:"components/groups/group/dashboard/invite/invite.html",controller:"groupInviteController",activeTab:"groups",auth:!0}).otherwise({redirectTo:"/login"})}]),app.run(["$rootScope","$location","AuthenticationService","DialogMessages","socket","$log","Chat","groupDiscussions","$interval","$http","appSettings","localStorageService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){for(var b=a.content.split("\n"),c=b.length-1;c>=0;c--)""===b[c]&&b.splice(c,1);return b.join("<br>")}function n(){a.user=c.getUserData(),a.user&&j.get(k.link+"current-user/"+a.user.data.id).then(function(b){a.user.data.details=b.data.data.details,b.data.data.settings||(b.data.data.settings={data:{notifications:!0,protected_follow:!1}},j.put(k.link+"/user-settings",{protected_follow:!1,notifications:!0})),a.user.data.settings=b.data.data.settings.data,a.notificationsEnabled=a.user.data.settings.notifications,a.protectedEnable=a.user.data.settings.protected_follow;var c=localStorage.getItem("ls.storage");c=JSON.parse(c),c.data.details=b.data.data.details,l.set("storage",c)},function(a){console.log("fail")}),a.user&&(e.init(a.user.data.id),angular.isUndefined(a.dialog)&&(a.dialog=new d),null===a.dialog.items&&a.dialog.nextPage(!0))}i(function(){j.get(k.link+"notifications?status=0").success(function(b){a.newNotifications=b.data})},5e3),e.io.on("connect",function(b){console.log("connect"),a.user&&e.init(a.user.data.id,!0)}).on("chat-message",function(b){f.info("From server",b),b.contentR=m(b),b.type&&(1===b.type&&a.dialog?a.dialog.updateItem(b):2===b.type&&a.groupDiscussions&&a.groupDiscussions.updateItem(b)),a.$apply()}),a.$on("$routeChangeStart",function(c,d,e){n(),d.$$route&&(d.$$route.activeTab&&(a.activeTab=d.$$route.activeTab),d.$$route.auth&&(f.log("routeChange"),a.dialog&&(a.dialog.activeRoom=-1),a.user&&null!==a.user||b.path("/login")))}),a.$on("$locationChangeStart",function(a,b,c){n()})}]),app.controller("HomeCtrl",function(){}),app.value("appSettings",{link:"http://api.classdig.oyihost.com/"}),app.factory("socket",["appSettings",function(a){var b=io("http://classdig.oyihost.com:3001");return{io:b,socketUsers:{},init:function(a,b){(!this.socketUsers[a]||b)&&(this.io.send({event:"init",user:a}),this.socketUsers[a]=a)}}}]),angular.module("classDigServices",[]).factory("registerUser",["$resource","appSettings",function(a,b){var c=a(b.link+"/register",{},{save:{method:"POST"}});return c}]).factory("ClassFactory",["$resource","appSettings",function(a,b){return{classs:function(){return a(b.link+"class/:id",{id:"@id"})}}}]).factory("AllClasses",["$resource","appSettings","$rootScope",function(a,b,c){var d=c.user.data.id;return a(b.link+"class/all?user_id="+d+"&status=1")}]).factory("chatTitle",["$rootScope",function(a){var b={};return b.prepare=function(b){var c="",d=b.length-1,e=0;return b.forEach(function(f,g){a.user.data.id!=f.id&&(c+=f.first_name+" "+f.last_name,++e,g!=d&&a.user.data.id!=b[g+1].id&&(c+=", "))}),{type:e>1?"group":"direct",text:c}},b}]).factory("DialogMessages",["$http","appSettings","$rootScope","chatTitle","$timeout","ChatGroups","$uibModal",function(a,b,c,d,e,f,g){var h=function(){this.items=null,this.busy=!1,this.after=1,this.lastPage=!1,this.rooms={},this._unread=-1,this.UNREAD_MAX=99,this.activeRoom=-1,this.addItem=this.addItem.bind(this)};return Object.defineProperty(h.prototype,"unread",{get:function(){return this._unread>this.UNREAD_MAX?this.UNREAD_MAX+"+":this._unread<this.UNREAD_MAX&&this._unread>-1?this._unread:(this.getUnread(),this._unread)},set:function(a){this._unread=a}}),h.prototype.getUnread=function(){var d=this,e=b.link+"chat/unread";a.get(e).success(function(a){d._unread=parseInt(a.unread_count),c.$broadcast("dialog-unread-success")})},h.prototype.markRead=function(d){d.newRoom||d.unread_count>0&&((this.activeRoom!=d.room||d.unread_count>0)&&(this._unread-=d.unread_count,c.$broadcast("dialog-unread-success"),d.unread_count=0),a.put(b.link+"chat",{status:"read",id:d.room}).success(function(a){}))},h.prototype.nextPage=function(e){if(!(this.busy||this.lastPage||!e&&1==this.after)){var g=$("#dialog-loader");if(g.show(),this.items>=10){var h=$("#dialog-list"),i=h[0].scrollHeight;h.scrollTop(i)}this.busy=!0;var j=this;a.get(b.link+"chat/last-message?orderBy=updated_at&sortedBy=desc&page="+j.after).success(function(a){null===j.items&&(j.items=[]);for(var b=a.data,g=0;g<b.length;g++){var h=b[g];""===h.status&&(h.newRoom=d.prepare(h.recipients)),b[g].chat=new f,b[g].seen=!1,j.addItem(b[g])}a.meta.pagination.total_pages>1&&a.meta.pagination.total_pages>j.after?++j.after:j.lastPage=!0,$("#dialog-loader").hide(),j.busy=!1,e&&c.$broadcast("chat-dialog-success")}.bind(this))}},h.prototype.addItem=function(a){this.items.unshift(a),this.rooms[a.room]=a},h.prototype.updateItem=function(a){c.$broadcast("new-message-was-received");var b=this.items.find(function(b){return b.room===a.room});if(b){b.chat||(b.chat=new f),b.hasOwnProperty("seen")||(this.activeRoom!=a.room?b.seen=!1:b.seen=!0),b.unread_count=this.activeRoom!=b.room?b.unread_count+1:b.unread_count,b.content=a.content,b.date_time=a.date_time,b.recipients=a.recipients,b.sender=a.sender,b.status=a.status,b.chat.items.push(a);var d=this.items.indexOf(b);this.items.splice(d,1),this.items.push(b)}else b=angular.copy(a),b.unread_count=1,b.chat=new f,this.activeRoom!=b.room?b.seen=!1:b.seen=!0,b.chat.items.push(a),this.items.push(b);this.activeRoom!=a.room?(this._unread+=1,c.$broadcast("dialog-unread-success")):c.dialog.markRead(a,!0)},h.prototype.newRoom=function(c,d,e){var f=b.link+"chat/channel";a.post(f,{users:c}).success(function(a){d(a.data.room_id)}).error(function(a){g.open({templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"Chat already exists."}}})})},h}]).factory("offsetTZ",function(){return{val:(new Date).getTimezoneOffset()}}).filter("datechat",["moment","offsetTZ",function(a,b){return function(c){return b.val<0?a(c).add(-b.val,"minutes").format("MMMM DD"):a(c).subtract(b.val,"minutes").format("MMMM DD")}}]).filter("datemessage",["moment","offsetTZ",function(a,b){return function(c){return b.val<0?a(c).add(-b.val,"minutes").format("h:mm"):a(c).subtract(b.val,"minutes").format("h:mm")}}]).factory("Chat",["$http","appSettings","$log","$rootScope","$timeout",function(a,b,c,d,e){function f(a){for(var b=a.content.split("\n"),c=b.length-1;c>=0;c--)""===b[c]&&b.splice(c,1);return b.join("<br>")}var g=function(){this.items=[],this.busy=!1,this.after=1,this.lastPage=!1};return g.prototype.sendMessage=function(e,g){c.info("appendMess:",e),e.contentR=f(e);var h=b.link+"chat/message";if(g){var i=angular.copy(e),j=i.attachments[0];i.attachments[0]={id:j,link:g.link},this.items.push(i)}else this.items.push(angular.copy(e));a.post(h,e).success(function(a){d.$broadcast("current-user-message-sent",e),c.log(a)}).error(function(a){c.error(a)})},g.prototype.setInputMessageState=function(){e(function(){var a=$("#type-message");a.focus(),a.trigger("keyup")},0)},g.prototype.nextPage=function(d,e){if(!this.busy&&!this.lastPage[d]&&-1!==d&&0===$("#chat").scrollTop()||e){var g=this;if(e&&g.rooms[d]){var h=$("#chat"),i=0;return i=h[0].scrollHeight,$(h).scrollTop(i),void g.setInputMessageState()}this.busy=!0,g.after[d]||(g.after[d]=1),$("#chat-loader").show();var j=b.link+"chat/room/"+d+"/messages?page="+g.after[d];a.get(j).success(function(a){var b=a.data;g.countItems=b.length;for(var e=0;e<b.length;e++)b[e].contentR=f(b[e]),g.items.unshift(b[e]);a.meta.pagination.total_pages>1&&a.meta.pagination.total_pages>g.after[d]?++g.after[d]:g.lastPage[d]=!0,g.busy=!1,g.rooms[d]=b,$("#chat-loader").hide(),(2==g.after[d]||1==g.after[d])&&(c.log("focus"),g.setInputMessageState())}.bind(this))}},g}]).factory("Users",["$http","appSettings","$log","$rootScope",function(a,b,c,d){var e=function(){this.items=[],this.busy=!1,this.after=1,this.lastPage={},this.request=null};return e.prototype.nextPage=function(e,f,g){if(e&&(this.lastPage[e]||(this.lastPage[e]={},this.lastPage[e][f]=!1),!this.busy&&!this.lastPage[e][f])){$("#user-loader").show(),this.busy=!0;var h=this,i=b.link+"class/"+e+"/list/"+f+"?page="+h.after;this.request=a.get(i).success(function(a){for(var b=a.data,c=0;c<b.length;c++){var i=b[c];if(d.user.data.id!==i.id&&(i.type=f,i["class"]=e),g)var j=g.find(function(a){return i.id===a.id});g?j||h.items.push(i):h.items.push(i)}h.lastPage[e][f]=!0,h.busy=!1,g&&d.$broadcast("u-can-render"),$("#user-loader").hide()}.bind(this)).error(function(a){c.error(a)})}},e}]).factory("classData",["$http","AuthenticationService","appSettings","$routeParams","$rootScope","$q","_",function(a,b,c,d,e,f,g){var h={};return h.pickedClass={},h.init=function(){h.pickedClass={}},h.setPickedClass=function(a){h.pickedClass=a,e.user.classData=a},h.getClassById=function(b,e){g.isEmpty(h.pickedClass)?a.get(c.link+"class/"+d.classId).success(function(a){h.pickedClass=a.data,2!==h.pickedClass.status?h.pickedClass.classInArchived=!1:h.pickedClass.classInArchived=!0,e(h.pickedClass)}).error(function(a){}):e(h.pickedClass)},h}]).factory("Polls",["$http","appSettings","$log","$rootScope","$routeParams",function(a,b,c,d,e){var f=function(){this.items=[],this.busy=!1,this.after=1,this.lastPage={},this.request=null};return f.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var d=this,f=b.link+"poll?search=class_id:"+e.classId+"&page="+d.after;this.request=a.get(f).success(function(a){for(var b=a.data,c=0;c<b.length;c++)for(var e=b[c],f=0;f<e.poll.questions.length;f++)e.poll.questions[f].userAnswers=[];d.busy=!1}.bind(this)).error(function(a){c.error(a)})}},f}]).factory("behaviorPreParser",["$http","AuthenticationService","appSettings","$routeParams","$rootScope","$q","_",function(a,b,c,d,e,f,g){var h={},i=["#0D7257","#187E62","#3D8E78","#49AD92","#24A280","#36CDA4","#7BCCB6"],j=["#D0021B","#E40924","#F10D29","#F54157","#F75D70","#F47080","#F58E9B"],k={positiveLabels:[],positiveBackgroundColor:[],negativeLabels:[],negativeBackgroundColor:[],options:{tooltips:{enabled:!1},animation:{duration:0},legend:{display:!1},line:{borderWidth:0},elements:{arc:{borderWidth:0}}}};return h.createConfigObj=function(a){for(var b=angular.copy(k),c=0;c<a.length;c++)1===a[c].type?b.positiveLabels.push(a[c].description):b.negativeLabels.push(a[c].description);return b.positiveBackgroundColor=i,b.negativeBackgroundColor=j,b},h.generateTemplate=function(a){for(var b=0,c=0,d={1:{},2:{}},e=0;e<a.length;e++)1===a[e].type?(1===a[e].id?d[1]["Working hard"]={count:0,color:i[b]}:d[1][a[e].description]={count:0,color:i[b]},b++):(d[2][a[e].description]={count:0,color:j[c]},c++);return d},h.generateDataForDiagram=function(a,b){for(var c=[{values:[]}],d=0;d<a.length;d++)if(a[d].type===b){var e={label:a[d].description,value:0,color:1===b?"#1ea66d":"#f93640"};c[0].values.push(e)}return c},h}]),angular.module("classDigApp").controller("myBtnController",["$scope",function(a){var b=function(){};a.data={items:[{img:"images/banner-01_3x.png",text:"Positive",click:b},{img:"images/banner-01_3x.png",text:"Add bonus",click:b},{img:"images/banner-01_3x.png",text:"Need work",click:b}],onGlobalButtonClick:b}}]).directive("customButton",["$timeout","$rootScope",function(a,b){return{templateUrl:"scripts/directives/customButton/floatingButtonTemplate.html",controller:["$scope",function(a){if(a.data&&a.data.hide)for(var c=0;c<a.data.hide.length;c++)a.data.hide[c]==b.user.data.role?a.dontDisplay=!0:a.dontDisplay=!1;a.showlist=!1;a.CustomButtonClick=function(){0===a.data.items.length?a.data.onGlobalButtonClick():(a.showlist=!a.showlist,a.showlist?angular.element(".rotate_btn").animate({borderSpacing:45},{step:function(a,b){$(this).css("-webkit-transform","rotate("+a+"deg) translate(0px, 0px)")},duration:0},"linear"):angular.element(".rotate_btn").animate({borderSpacing:0},{step:function(a,b){$(this).css("-webkit-transform","rotate("+a+"deg)")},duration:0},"linear"))}}]}}]),angular.module("classDigApp").directive("customSwitcher",["$timeout",function(a){return{scope:{switchValue:"=",switchId:"="},templateUrl:"scripts/directives/customSwitcher/customSwitcher.html",controller:["$scope","$rootScope",function(b,c){b.background=c.userData.background,b.changeValue=function(a){1==b.switchValue?($("#"+a).attr("checked","checked"),b.switchValue=0):($("#"+a).attr("checked","none"),b.switchValue=1)},a(function(){b.changeValue(b.switchId)})}]}}]),angular.module("classDigApp").directive("arrayofMembers",["$timeout",function(a){return{scope:{membersArray:"="},templateUrl:"scripts/directives/arrayOfMembers/arrayOfMembers.html",controller:["$scope","$rootScope",function(b,c){b.background=c.userData.background,a(function(){})}]}}]),angular.module("classDigApp").controller("RegistrationController",["$scope","$rootScope","Upload","registerUser","appSettings","$location","$timeout",function(a,b,c,d,e,f,g){function h(a){for(var b=a.split(","),c=b[0].match(/:(.*?);/)[1],d=atob(b[1]),e=d.length,f=new Uint8Array(e);e--;)f[e]=d.charCodeAt(e);return new Blob([f],{type:c,name:"test.jpg"})}a.registrationData={},a.initForm=function(){if(b.fbInfo){a.viaFb=!0,a.registrationData.first_name=b.fbInfo.first_name,a.registrationData.last_name=b.fbInfo.last_name,a.registrationData.email=b.fbInfo.email,a.registrationData.image=b.fbInfo.picture.data.url;var c=new Image;c.crossOrigin="Anonymous",c.src=b.fbInfo.picture.data.url,c.onload=function(){var b=document.createElement("canvas");b.width=c.width,b.height=c.height;var d=b.getContext("2d");d.drawImage(c,0,0),a.blob=h(b.toDataURL("image/jpeg"))}}},a.changeRole=function(b){"student"==b?(a.imageStudent===!1?(a.imageStudent=!0,a.registrationData.role="student"):(a.imageStudent=!1,a.registrationData.role=""),a.imageTeacher=!1,a.imageParent=!1):"teacher"==b?(a.imageTeacher===!1?(a.imageTeacher=!0,a.registrationData.role="teacher"):(a.imageTeacher=!1,a.registrationData.role=""),a.imageStudent=!1,a.imageParent=!1):(a.imageParent===!1?(a.imageParent=!0,a.registrationData.role="parent"):(a.imageParent=!1,a.registrationData.role=""),a.imageStudent=!1,a.imageTeacher=!1)},a.st={startReg:!1},a.registrationSuccess=!1,a.regex="^[a-zA-Z0-9.-_$@*!]{3,30}$",a.createAccount=function(d){b.fbInfo?this.registerForm.$valid&&($("#registration-button").hide(),$("#registration-loader").show(),a.startReg||(a.st.startReg=!0,c.upload({url:e.link+"auth/facebook",data:{code:b.fbInfo.code,email:d.email,name:d.username,first_name:d.first_name,last_name:d.last_name,country:d.country,city:d.city,school_name:d.school_name,gender:d.gender,role:d.role,image:angular.isObject(d.image)?d.image:new File([a.blob],"file_"+Math.random().toString(36).substring(7)+".jpg")}}).then(function(a){b.$broadcast("authorized-via-fb")},function(a){})),$("#registration-loader").hide(),$("#registration-button").show()):this.registerForm.$valid&&($("#registration-button").hide(),$("#registration-loader").show(),a.startReg||(a.st.startReg=!0,c.upload({url:e.link+"register",data:{email:d.email,password:d.password,name:d.username,first_name:d.first_name,last_name:d.last_name,country:d.country,city:d.city,school_name:d.school_name,gender:d.gender,role:d.role,image:d.image}}).then(function(b){a.registrationSuccess=!0,a.st.startReg=!1},function(b){a.st.startReg=!1,console.error("Error",b),b.data.errors.email&&(a.serverErrorEmail=b.data.errors.email[0]),b.data.errors.name&&(a.serverErrorUsername=b.data.errors.name[0])})),$("#registration-loader").hide(),$("#registration-button").show())}}]),angular.module("Authentication").controller("LoginController",["$scope","$rootScope","$location","localStorageService","AuthenticationService","appSettings","classData","Groups","$timeout","$http",function(a,b,c,d,e,f,g,h,i,j){function k(b){if(console.log("eeee"),"connected"===b.status){a.facebookNotLogged=!1,l(b.authResponse.accessToken);var d=b.authResponse.accessToken;j.post("http://api.classdig.oyihost.com/login/facebook",{code:d}).success(function(a){e.setUserData(a),h.init(),g.init(),c.path("/")}).error(function(a){c.path("/signup")})}else a.facebookNotLogged=!0,a.fixedStyle={margin:"25px 0 0 0"}}function l(a){FB.api("/me",{fields:["last_name","first_name","email","gender","middle_name"]},function(c){b.fbInfo=c,b.fbInfo.code=a,j.get("https://graph.facebook.com/v2.7/"+b.fbInfo.id+"/picture?type=large&redirect=0").success(function(a){b.fbInfo.picture=a})})}a.clear=function(){b.fbInfo&&delete b.fbInfo},b.$on("authorized-via-fb",function(){FB.login(function(a){k(a)})}),a.checkLoginState=function(){FB.login(function(a){k(a)})},window.fbAsyncInit=function(){FB.init({appId:"1097012913686902",cookie:!0,xfbml:!0,version:"v2.7"})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk"),e.clearCredentials(),a.login=function(){a.dataLoading=!0,e.login(a.username,a.password,function(d){d.data?(e.setCredentials(a.username,a.password),h.init(),g.init(),b.newNotifications=[],c.path("/")):(a.error=data.message,a.dataLoading=!1)})}}]),app.factory("BearerAuthInterceptor",["$rootScope","localStorageService","$q",function(a,b,c){return{request:function(b){return a.user&&(b.headers.Authorization="Bearer "+a.user.data.token,a.config=b.headers),b},response:function(a){return 401===a.status,a||c.when(a)}}}]),app.config(["$httpProvider",function(a){a.interceptors.push("BearerAuthInterceptor")}]),angular.module("classDigApp").controller("ForgotPasswordCtrl",["$scope","$http","appSettings","$log",function(a,b,c,d){a.data={},a.successReset=!1,a.serverMessage={error:!1,message:""},a.forgotPassword=function(){this.forgotPasswordForm.$valid&&(a.serverMessage.error=!1,b.post(c.link+"forgot-password",{email:a.data.email}).success(function(b){a.successReset=!0}).error(function(b){d.log(b),a.serverMessage={error:!0,message:null!==b&&b.message?b.message:"Something went wrong!"}}))}}]),angular.module("classDigApp").controller("ChangePasswordCtrl",["$scope","$http","appSettings","$log","$routeParams","$location",function(a,b,c,d,e,f){d.log(e.token),d.log(e),a.data={},a.successReset=!1,a.serverMessage={error:!1,message:""};var g=f.$$url.split("?");g=g[0],f.$$url=g,a.changePassword=function(){this.form.$valid&&(a.serverMessage.error=!1,b.post(c.link+"reset-password",{email:e.email,token:e.token,password:a.data.password,password_confirmation:a.data.password_confirmation}).success(function(a){f.path("/login ")}).error(function(b){d.log(b),a.serverMessage={error:!0,message:null!==b&&b.message?b.message:"Something went wrong!"}}))}}]).directive("pwCheck",["$timeout",function(a){return{require:"ngModel",link:function(b,c,d,e){var f="#"+d.pwCheck;c.add(c).on("keyup",function(){b.$apply(function(){var b=c.val()===$(f).val();b&&a(function(){$(f).trigger("keyup")}),e.$setValidity("pwmatch",b)})})}}}]),angular.module("classDigApp").factory("AuthenticationService",["$http","$location","localStorageService","$cookieStore","$rootScope","$timeout","appSettings",function(a,b,c,d,e,f,g){var h={};return e.user,e.config={headers:{Accept:"application/json"}},h.login=function(b,c,d){var f={email:b,password:c};$("#login-button").hide(),$("#login-loader").show(),console.log(g.link);a.post(g.link+"login",f,e.config).success(function(a){h.setUserData(a),e.loginError="",d(a)}).error(function(a){e.loginError=a.message}),$("#login-loader").hide(),$("#login-button").show()},h.setCredentials=function(b,c){a.defaults.headers.common.Authorization="Basic "+b+":"+c},h.clearCredentials=function(){e.globals={},a.defaults.headers.common.Authorization="Basic "},h.setUserData=function(a){c.set("storage",a),e.user=a},h.getUserData=function(){return null!==e.user&&e.user||(e.user=c.get("storage")),e.user},h.getToken=function(){return e.user.data.token},h.getUserRole=function(){return e.user.data.role},h.getUserId=function(){return e.user.data.id},h.getUserName=function(){return e.user.data.details.data.first_name+" "+e.user.data.details.data.last_name},h.logout=function(){delete e.config,delete e.role,delete e.user,delete e.globals,delete e.userData,delete e.fbInfo,delete e.dialog,c.clearAll()},h}]).config(["socialProvider",function(a){a.setFbKey({appId:"1097012913686902",apiVersion:"v2.7"})}]),angular.module("classDigApp").directive("contextMenu",["$timeout",function(a){return{templateUrl:"scripts/directives/contextMenu/contextMenuTemplate.html",controller:["$scope","$rootScope",function(a,b){b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"../images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"},$(document).ready(function(){$(document).on("mouseenter",".context-menu-active",function(){$(this).addClass(b.userData.background),$(this).find(".context-menu-button-title").addClass(b.userData.color),$(this).find(".context-menu-button-title").addClass(b.userData.border)}).on("mouseleave",".context-menu-active",function(){$(this).removeClass(b.userData.background),$(this).find(".context-menu-button-title").removeClass(b.userData.color),$(this).find(".context-menu-button-title").removeClass(b.userData.border)})})}]}}]),angular.module("classDigApp").directive("multiSelect",["$rootScope",function(a,b){return{restrict:"EA",link:function(b,c,d){c.on("click",function(){b.$apply();var c=b.multiSelectItem.id,d=b.multiSelectSelection.selectedItems.indexOf(c);-1===d?(b.multiSelectSelection.selectedItems.push(c),b.multiSelectSelection.currentItem.push(b.multiSelectItem)):(b.multiSelectSelection.selectedItems.splice(d,1),b.multiSelectSelection.currentItem.splice(d,1)),b.$apply(b.multiSelectSelection),a.selection=b.multiSelectSelection.selectedItems})},scope:{multiSelectItem:"=",multiSelectSelection:"="}}}]),angular.module("classDigApp").directive("customSelector",["$timeout",function(a){return{scope:{selectedOption:"=",options:"=",bottom:"="},transclude:"true",templateUrl:"scripts/directives/customSelector/customSelectorTemplate.html",controller:["$scope","$rootScope",function(b,c){function d(a){return a.val==b.selectedOption}if(a(function(){b.bottom&&$("#allOptionList"+b.$id).css({bottom:0})}),$(document).click(function(a){-1===["selectedArea","customSelectorLabel","selector-right-icon"].indexOf(a.target.id)&&!$(a.target).hasClass("select-item")&&b.showOptions&&(b.showOptions=!b.showOptions,b.$apply(b.showOptions))}),b.options.length){if(b.showOptions=!1,b.selectedOption){var e=b.options.find(d);e&&(b.label=e.option)}else b.label=b.options[0].option,b.selectedOption=b.options[0].val;b.functionShowOptions=function(){b.showOptions=!b.showOptions},c.$on("semester-name-was-changed",function(a,c,d){4===b.options.length&&(b.options=c,b.selectedOption=d,b.label=d)}),b.functionPushValue=function(a,d){b.label=d,b.selectedOption=a,b.showOptions=!b.showOptions,4===b.options.length&&c.$broadcast("semester-was-changed",b.selectedOption)}}}]}}]),angular.module("classDigApp").directive("colorPicker",["$timeout",function(a){return{scope:{selectedColor:"="},templateUrl:"scripts/directives/arrayOfColors/ArrayOfColorsTemplate.html",controller:["$scope",function(b){function c(a){var b=a;return a.length>7&&(b="#"+a.slice(3),"#ff2641"==b&&(b="#f93640"),"#fd585b"==b&&(b="#f05e5b"),"#ffaa14"==b&&(b="#f6ad25"),"#f29e7a"==b&&(b="#e9a07b"),"#ff6d15"==b&&(b="#ff731c"),"#ad6780"==b&&(b="#a7687f"),"#00a76a"==b&&(b="#1ea66d"),"#33cef8"==b&&(b="#61ccf7"),"#0088c9"==b&&(b="#0486c7"),"#9542d4"==b&&(b="#9541d1"),"#a00780"==b&&(b="#99127e"),"#002e53"==b&&(b="#0f2d52")),b}b.array_of_colors=[{color:"#f93640",id:"f93640",check:"true"},{color:"#f05e5b",id:"f05e5b",check:"false"},{color:"#f6ad25",id:"f6ad25",check:"false"},{color:"#e9a07b",id:"e9a07b",check:"false"},{color:"#ff731c",id:"ff731c",check:"false"},{color:"#a7687f",id:"a7687f",check:"false"},{color:"#1ea66d",id:"1ea66d",check:"false"},{color:"#61ccf7",id:"61ccf7",check:"false"},{color:"#0486c7",id:"0486c7",check:"false"},{color:"#9541d1",id:"9541d1",check:"false"},{color:"#99127e",id:"99127e",check:"false"},{color:"#0f2d52",id:"0f2d52",check:"false"}],b.functionSelectColor=function(c){a(function(){b.$apply(function(){b.selectedColor=c})})},a(function(){b.selectedColor=b.selectedColor.toLowerCase(),b.selectedColor=c(b.selectedColor),"#f93640"==b.selectedColor&&b.functionSelectColor("#99127e"),b.functionSelectColor(b.selectedColor)})}]}}]),angular.module("classDigApp").directive("createClassTime",["$timeout",function(a){return{restrict:"E",scope:{time:"="},templateUrl:"scripts/directives/createClass/createClassTime.html",controller:["$scope","$rootScope","_","moment","$log",function(b,c,d,e,f){b.role=c.user.data.role,b.color=c.userData.color,b.background=c.userData.background,b.selectedDays=[],b.defaultFrom=new Date,b.defaultTo=new Date(e().add(1,"h").format()),b.defaultFromTime=e(b.defaultFrom).format("LT"),b.defaultToTime=e(b.defaultTo).format("LT"),b.createClassTimeData=[{day:1,dayTitle:"Sun",fullDay:"Sunday",active:!1,from:b.defaultFromTime,to:b.defaultToTime},{day:2,dayTitle:"Mon",fullDay:"Monday",active:!1,from:b.defaultFromTime,to:b.defaultToTime},{day:3,dayTitle:"Tue",fullDay:"Tuesday",active:!1,from:b.defaultFromTime,to:b.defaultToTime},{day:4,dayTitle:"Wed",fullDay:"Wednesday",active:!1,from:b.defaultFromTime,to:b.defaultToTime},{day:5,dayTitle:"Thu",fullDay:"Thursday",active:!1,from:b.defaultFromTime,to:b.defaultToTime},{day:6,dayTitle:"Fri",fullDay:"Friday",active:!1,from:b.defaultFromTime,to:b.defaultToTime},{day:7,dayTitle:"Sat",fullDay:"Saturday",active:!1,from:b.defaultFromTime,to:b.defaultToTime}],a(function(){b.init()}),b.initDatePicker=function(a){d.each(a,function(a,c){$(c).datetimepicker({defaultDate:a,format:"LT"}).on("dp.change",function(a){$(this).change(),b.doValidation(a.target.id)}).on("dp.show",function(){$(".bootstrap-datetimepicker-widget .btn-primary").addClass("bg-"+b.role).css({
border:"none"}),$(".bootstrap-datetimepicker-widget .btn :not(.btn-primary)").addClass("c-"+b.role)})})},b.preparePickerData=function(a){var c={};return c["#from"+a.day]=a.from?new Date(e(a.to,"LT").format()):b.defaultFrom,c["#to"+a.day]=a.to?new Date(e(a.to,"LT").format()):b.defaultTo,c},b.doValidation=function(a){if(-1!==a.indexOf("to")){var c=a.charAt(a.length-1),d=b.createClassTimeData.find(function(a){return a.day===+c}),f=new Date(e(d.from,"LT")),g=new Date(e(d.to,"LT")),h=g-f,i=Math.floor(h%864e5/36e5),j=Math.round(h%864e5%36e5/6e4);(60*i+j>0&&30>60*i+j||60*i+j>-90&&-60>60*i+j)&&(d.from=e(e(e(d.to,"LT")).add(-60,"m")).format("LT"),$(this).change())}else-1!==a.indexOf("from")&&(c=a.charAt(a.length-1),d=b.createClassTimeData.find(function(a){return a.day===+c}),f=new Date(e(d.from,"LT")),g=new Date(e(d.to,"LT")),h=g-f,i=Math.floor(h%864e5/36e5),j=Math.round(h%864e5%36e5/6e4),(60*i+j>0&&30>60*i+j||60*i+j>-90&&-60>60*i+j)&&(d.to=e(e(e(d.from,"LT")).add(60,"m")).format("LT"),$(this).change()))},b.syncData=function(){b.time=d.filter(b.createClassTimeData,function(a){return a.active}),console.log("time",b.createClassTimeData),f.log("data time",b.time),b.time.length||(b.createClassTimeData[1].active=!0,b.syncData())},b.init=function(){for(var a=0;a<b.createClassTimeData.length;a++){for(var c=b.createClassTimeData[a],d=0;d<b.time.length;d++){var e=b.time[d];e.day==c.day&&(c.from=e.from,c.to=e.to,c.active=!0,f.log("Info:",c))}b.initDatePicker(b.preparePickerData(c))}b.syncData()},b.selectDay=function(a){if(a.active){var c=d.filter(b.createClassTimeData,function(a){return a.active}).length;if(1==c)return}a.active=!a.active,b.syncData()}}]}}]),angular.module("classDigApp").directive("selectUsers",[function(){return{templateUrl:"scripts/directives/selectUsers/selectUsersTemplate.html",controller:["$scope","Users","$log","$rootScope","$http","appSettings","$timeout","$routeParams","classData","_","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){for(var c=0;c<a.notSubmittedStudent.length;c++)if(b.id===a.notSubmittedStudent[c].id)return!0}a.users=new b,a.userRole="users",a.selectedUsers={},a.showMembersHeader=!0,a.memberRole="students",a.selectAllParents=!1,a.selectAllStudents=!1;var m=h.classId;a.currentClassObj=i.getClassById(m,function(b){a.currentClassObj=b,a.currentClass=b.id,a.role=d.user.data.role,g(function(){a.openedFromStudents||(a.users.nextPage(a.currentClass,a.userRole),a.classToSortBy=a.currentClass)}),c.log("users",a.users)}),d.$on("userRoleChanged",function(b,c){a.users.nextPage(h.classId,c),a.memberRole=c,"users"===a.memberRole&&(a.memberRole="students"),"users"==a.userRole&&(a.checkedSelectAll=a.selectAllStudents),"parents"==a.userRole&&(a.checkedSelectAll=a.selectAllParents)}),a.checkHandSubmission&&(a.users.nextPage(a.classToSortBy,"users"),g(function(){a.users.items=a.users.items.filter(l)},1e3)),a.selectAll=function(b){var c;if("users"===b&&(c=a.allSelected),"parents"===b&&(c=a.allSelectedParent),c)for(var d=0;d<a.users.items.length;d++)a.users.items[d].type===b&&(a.selectedUsers[a.users.items[d].id]=a.users.items[d]);else if(a.openedFromStudents)for(var e=a.users.items.filter(function(b){return b["class"]===a.classToSortBy}),f=0;f<e.length;f++)e[f].type===b&&delete a.selectedUsers[e[f].id];else for(var f=0;f<a.users.items.length;f++)a.users.items[f].type===b&&delete a.selectedUsers[a.users.items[f].id]},d.$on("arrayOfSelectedUsers",function(b,c){if(c){a.showMembersHeader=!1,a.ArrayOfVottersDissabled="ready",a.userRole="parent",a.classToSortBy=1,a.users.items=c.participants;for(var d=0;d<a.users.items.length;d++)a.users.items[d].type="parent",a.users.items[d]["class"]=1}c.voted.length?(a.selectedUsers=c.voted,a.selectedUsers=a.selectedUsers.reduce(function(a,b){return a[b.id]=b,a},{})):a.selectedUsers={}}),d.$on("arrayOfSeenBy",function(b,c){if(c){a.showMembersHeader=!1,a.ArrayOfVottersDissabled="ready",a.userRole="parent",a.classToSortBy=1,a.users.items=c.seen_by;for(var d=0;d<a.users.items.length;d++)a.users.items[d].type="parent",a.users.items[d]["class"]=1}a.selectedUsers={}}),d.$on("arrayOfStudentWithoutParents",function(b,c){if(c){a.showMembersHeader=!1,a.ArrayOfVottersDissabled="ready",a.classToSortBy=1,a.users.items=c;for(var d=0;d<a.users.items.length;d++)a.users.items[d].type="parent",a.users.items[d]["class"]=1}a.selectedUsers={}}),a.selectUser=function(b){"ready"!==a.ArrayOfVottersDissabled&&(a.selectedUsers[b.id]?(delete a.selectedUsers[b.id],a.allSelected=!1):(a.singleRecipient&&(a.selectedUsers={}),a.selectedUsers[b.id]=b,a.areAllSelected()))},d.$on("invite-members-for-groups",function n(b,c,e,f){a.classToSortBy=c.id,a.openedFromStudents=!0,a.users.nextPage(a.classToSortBy,e,f),a.areAllSelected(),d.$$listeners["invite-members-for-groups"]=[n]}),a.confirmAction=function(b){if(b){k.open({templateUrl:"components/groups/confirmationModalGroups/confirmationModalGroups.html",controller:"confirmationModalCroupsController",size:"sm",resolve:{items:function(){return a.invite}}})}},d.$on("invite-students-to-group",function(b,d){var g=[];for(var h in a.selectedUsers)g.push(+h);g.length>1?a.invite="invite2":a.invite="invite1",e.post(f.link+"group/invite",{group_id:d,users:g}).success(function(b){a.confirmAction(g.length),c.log("STUDENTS ADDED SUCCESSFUL");for(var d in a.selectedUsers)delete a.selectedUsers[d]}).error(function(a){c.log("Code: "+a.status_code+"; Message: "+a.message)})}),a.areAllSelected=function(){var b=a.users.items.filter(function(b){return b["class"]===a.classToSortBy}),c=[];for(var d in a.selectedUsers)c.push(+d);for(var e=0;e<b.length;e++){var f=c.indexOf(b[e].id);if(-1===f){var g=!0;a.allSelected=!1}else g||(a.allSelected=!0)}},d.$on("modal-opened-in-srudents",function(b,c){a.currentClassUsers=c,a.openedFromStudents=!0}),d.$on("picked-another-class",function(b,c,d){a.classToSortBy=c.id,a.users.nextPage(a.classToSortBy,a.userRole,d),a.areAllSelected()}),d.$on("add-students-to-class",function(b){var g=[];for(var h in a.selectedUsers)g.push(+h);e.post(f.link+"class/"+a.currentClass+"/add/users",{users:g}).success(function(a){d.$broadcast("student-added-to-class"),c.log("STUDENTS ADDED SUCCESSFUL")}).error(function(a){c.log("Code: "+a.status_code+"; Message: "+a.message)})}),d.$on("u-can-render",function o(){a.areAllSelected(),d.$$listeners["u-can-render"]=[o]}),d.$on("add-to-distinguished-list",function(b,g,h,i){a.arrayOfId=[];for(var j in a.selectedUsers)a.arrayOfId.push(+j);e.post(f.link+"/distinguished",{user_ids:a.arrayOfId,class_id:i,week_start:g,week_end:h}).success(function(a){d.$broadcast("need-to-be-reloaded",g,h,i),c.log("POST SUCCES")}).error(function(a){c.log("Code: "+a.status_code+"; Message: "+a.message)}),d.$$listeners["add-to-distinguished-list"]=[]})}]}}]),angular.module("classDigApp").directive("chooseUserRole",["$timeout",function(a){return{templateUrl:"scripts/directives/chooseUserRole/chooseUserRole.html",controller:["$scope","$rootScope",function(a,b,c){a.selectRole=function(c){a.selectedRole=c,a.userRole=c,b.$broadcast("userRoleChanged",a.userRole)},a.selectRole(a.userRole),"teacher"==b.userData.role?a.roles=[{id:"student",description:"Students",url:"users"},{id:"parent",description:"Parents",url:"parents"}]:a.roles=[{id:"student",description:"Students",url:"users"}]}]}}]),angular.module("classDigApp").directive("userInfo",[function(){return{scope:{selectedUser:"=",showAdditionalInfo:"=",showDistinguishedAdditionalInfo:"=",onStudentsPage:"="},templateUrl:"scripts/directives/userInfo/userInfoTemplate.html",controller:["$scope","Users","$log","$rootScope","$http","appSettings","$timeout","$routeParams","classData","_","$q",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){k.all([e.get(f.link+"profile/indicator/"+b),e.get(f.link+"current-user/"+b),e.get(f.link+"user/announcements/"+d.user.data.id)]).then(function(b){a.requesstInProgress=!1,a.userStatistic=b[0].data.data,a.userStatistic.countActivity=a.userStatistic.countActivity+a.userStatistic.countFollows+a.userStatistic.countSubscribers+b[2].data.announcements.length,a.userInformation=b[1].data.data,a.userData.profileBackground="profile-bg-"+a.userInformation.role,a.userData.color=a.userInformation.role+"-color"},function(a){})}function m(b){k.all([e.get(f.link+"profile/indicator/"+b),e.get(f.link+"current-user/"+b)]).then(function(b){a.userStatistic.countFollows=a.userStatistic.countFollows-1},function(a){})}a.userData={},a.userData.color=d.user.data.role+"-color",a.userData.profileBackground="profile-bg-"+d.user.data.role,a.userInformation={};var n=d.user.data.role;a.userProfileData={color:n+"-color",border:n+"-border",background:n+"-background",userPhotoBorder:d.user.data.role+"-userPhotoBorder"},a.$watch("selectedUser",function(){a.requesstInProgress=!0,a.selectedUser?l(a.selectedUser.id):a.onStudentsPage||l(d.user.data.id)}),d.activitiesBlock=!0,a.showUserInfo=!0,d.showActivitiesFindPeople=!0,a.switchAddUserInfo=function(){$(".additional-user-data-item").removeClass("active"),$("#add-user_info").addClass("active"),a.showUserInfo=!0,a.showUserFollowers=!1,a.showUserFollow=!1,a.childmethod=function(){d.$emit("switchActivities",{})},a.childmethod(),a.showActivities=!0,d.activitiesBlock=!0,d.showActivitiesFindPeople=!0},a.switchUserFollowers=function(){$(".additional-user-data-item").removeClass("active"),$("#followers").addClass("active"),a.showUserInfo=!1,a.showUserFollowers=!0,a.showUserFollow=!1,a.showActivities=!1,d.activitiesBlock=!1},a.switchUserFollow=function(){$(".additional-user-data-item").removeClass("active"),$("#user-follow").addClass("active"),a.showUserInfo=!1,a.showUserFollowers=!1,a.showUserFollow=!0,a.showActivities=!1,d.activitiesBlock=!1},a.show=function(b){a.chldmeth=function(a){a.id=a.user_id,d.$emit("activateUser")},d.activeUserId=b.user_id,d.activeUser=b,d.feedUrl=f.link+"story/"+b.user_id,a.chldmeth(b)},d.$on("show",function(){a.show(user)});var o,p=[];a.followList=p;var q,r=[];a.followersList=r,e({url:f.link+"users/follows/"+d.user.data.id,method:"GET"}).then(function(b){a.listUsers=b.data.follows,o=a.listUsers;for(var c=0;c<o.length;c++)p.push(o[c])},function(a){}),d.refreshFollowList=function(b){e({url:f.link+"users/follows/"+b,method:"GET"}).then(function(b){a.listUsers=b.data.follows,o=a.listUsers,p=[],a.followList=[];for(var c=0;c<o.length;c++)a.followList.push(o[c])},function(a){})},a.unfollow=function(b,c){event.preventDefault(),p.splice(c,1);var d,g=b.user_id;r.forEach(function(a,b){a.user_id===g&&(d=b)}),e({url:f.link+"follow/"+b.user_id,method:"DELETE"}).then(function(c){m(b.user_id),a.followersList[d].is_follower=!1},function(a){})},e({url:f.link+"users/followers/"+d.user.data.id,method:"GET"}).then(function(b){a.listUsersFoolowers=b.data.followers,q=a.listUsersFoolowers;for(var c=0;c<q.length;c++)r.push(q[c])},function(a){}),d.refreshFollowersList=function(b){e({url:f.link+"users/followers/"+b,method:"GET"}).then(function(b){a.listUsersFoolowers=b.data.followers,q=a.listUsersFoolowers,r=[],a.followersList=[];for(var c=0;c<q.length;c++)a.followersList.push(q[c])},function(a){})},a.followUser=function(b,c,g){event.preventDefault(),a.followList.push(c),d.$on("activities",function(a){a.unshift(c),console.log(a),console.log()}),e({url:f.link+"follow/"+c.user_id,method:b,headers:{"Content-Type":"application/json"}}).then(function(b){a.followersList[g].is_follower=!a.followersList[g].is_follower,a.userStatistic.countFollows=a.userStatistic.countFollows+1},function(a){})};var s=$(".class-menu-item-block-right-profile"),t=$(".profile-center-container");s.on("scroll",function(){t.scrollTop=this.scrollTop})}]}}]),angular.module("classDigApp").directive("userAdditionalInfo",[function(){return{scope:{userInformation:"="},templateUrl:"scripts/directives/userAdditionalInfo/userAdditionalInfoTemplate.html",controller:["$scope","Users","$log","$rootScope","$http","appSettings","$timeout","$routeParams","classData","_","$q",function(a,b,c,d,e,f,g,h,i,j,k){}]}}]),angular.module("classDigApp").directive("feedList",["Feed","$uibModal",function(a,b){return{scope:{feedUrl:"="},templateUrl:"scripts/directives/feedList/feedListTemplate.html",controller:["$scope","Users","$log","$rootScope","$http","appSettings","$timeout","$routeParams","classData","_","$q","Feed","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k,l,m){$ctrl=this,$(document).ready(function(){$(document).on("mouseenter",".controll-button",function(){$(this).find(".inside-menu").show()}).on("mouseleave",".controll-button",function(){$(this).find(".inside-menu").hide()}),$(document).on("mouseenter",".comment-info",function(){$(this).find(".del-comment-button").show()}).on("mouseleave",".comment-info",function(){$(this).find(".del-comment-button").hide()})}),d.$on("addNewPost",function(b,c){if(a.feeds.items.unshift(c),c.link){var d=c.link.match(/^http:\/\/(?:www\.)?youtube.com\/watch\?(?=.*v=\w+)(?:\S+)?$/),e=c.link.match(/^https:\/\/(?:www\.)?youtube.com\/watch\?(?=.*v=\w+)(?:\S+)?$/);if(d||e){var f=c.link.split("=");c.link=f[f.length-1],c.youtube=!0}}}),a.userData={},a.userId=d.user.data.id,a.userData.color=d.user.data.role+"-color",a.$watch("feedUrl",function(){a.feeds=new l,a.feeds.nextPage(a.feedUrl)}),e({url:f.link+"user/classes",method:"GET"}).then(function(b){var c=b.data.data;a.classId=c[0].id},function(a){}),a.openModalAddComment=function(a){m.open({animation:$ctrl.animationsEnabled,templateUrl:"components/feed/addCommentModal/addCommentModal.html",controller:"sendCommentController",controllerAs:"$ctrl",size:"sm",resolve:{items:function(){return a}}})},a.showFeedLinkFunction=function(a){var b=new RegExp("^(http|https)://","i"),c=b.test(a);return c?a:"http://"+a},a.userChanges=window.localStorage.changes,a.followList=window.localStorage.followList,window.localStorage.changed&&(a.changeProfileEvents=[],a.changeProfileEvents.push(a.userChanges),a.changeProfileEvents.forEach(function(a,b){var c={};a=JSON.parse(a),c.updated=a.data.updated,c.firstName=a.data.details.data.first_name,c.lastName=a.data.details.data.last_name,c.gender=a.data.details.data.gender,c.photo=a.data.details.data.photo})),a.openAreUSureModalComment=function(a,b){m.open({animation:$ctrl.animationsEnabled,templateUrl:"components/feed/areUSureModalComment/areUSureModal.html",controller:"areUSureModalCommentCtrl",controllerAs:"$ctrl",size:a,resolve:{items:function(){return b}}})},a.deleteFeedComment=function(b,c,d){a.commentsList=c,a.commentsCount=d,a.openAreUSureModalComment("sm",b)},d.$on("delete-comment-was-approved",function(b,c){e({method:"DELETE",url:f.link+"comment/"+c.id,headers:{"Content-Type":"application/json"},data:{id:c.id}}).success(function(b){a.commentsCount--,a.deleteElementFromArray(a.commentsList,c)}).error(function(){})}),a.getFinishTime=function(a){var b=0,c=moment(new Date),d=moment.utc(a).toDate();return c.diff(d,"weeks")>0?b=c.diff(d,"weeks")+" w. ":c.diff(d,"days")>0?b=c.diff(d,"days")+" d. "+c.diff(d,"hours")%24+" h. ":c.diff(d,"hours")>0?b=c.diff(d,"hours")+" h. "+c.diff(d,"minutes")%60+" min. ":c.diff(d,"minutes")>0&&(b=c.diff(d,"minutes")+" min. "),b},a.showCommentsFunction=function(){a.showComment=!0},a.hideCommentsFunction=function(){a.showComment=!1},a.addLikeFunction=function(a){a.is_liked?(a.likes--,e({url:f.link+"like/"+a.id,method:"DELETE",data:{id:a.id}}).then(function(a){},function(a){})):(a.likes++,e({url:f.link+"like",method:"POST",data:{story_id:a.id}}).then(function(a){},function(a){})),a.is_liked=!a.is_liked},a.deleteElementFromArray=function(a,b){for(var c=0,d=0;d<a.length;d++)if(a[d].id===b.id)return c=d,void a.splice(c,1)},a.openAreUSureModal=function(a,b){m.open({animation:$ctrl.animationsEnabled,templateUrl:"components/feed/areUSureModal/areUSureModal.html",controller:"areUSureModalEventsCtrl",controllerAs:"$ctrl",size:a,resolve:{items:function(){return b}}})},d.$on("delete-was-approved",function(b,c){e({method:"DELETE",url:f.link+"/story/"+c.id,headers:{"Content-Type":"application/json"}}).success(function(b){a.deleteElementFromArray(a.feeds.items,c)}).error(function(){})}),a.deleteFeed=function(b){a.openAreUSureModal("sm",b)}}]}}]).factory("Feed",["$http","appSettings","$routeParams",function(a,b,c){var d=function(){this.items=[],this.busy=!1,this.after=""};return d.prototype.nextPage=function(b){if(!this.busy){this.busy=!0;var c=b+this.after;a.get(c).success(function(a){if(0!==a.data.length){for(var b=a.data,c=0;c<b.length;c++){if(b[c].link){var d=b[c].link.match(/^http:\/\/(?:www\.)?youtube.com\/watch\?(?=.*v=\w+)(?:\S+)?$/),e=b[c].link.match(/^https:\/\/(?:www\.)?youtube.com\/watch\?(?=.*v=\w+)(?:\S+)?$/);if(d||e){var f=b[c].link.split("=");b[c].link=f[f.length-1],b[c].youtube=!0}}this.items.push(b[c])}if(this.after=a.meta.pagination.current_page+1,a.meta.pagination.total_pages===a.meta.pagination.current_page)return void $("#user-loader").hide();this.busy=!1,$("#user-loader").hide()}}.bind(this))}},d}]),angular.module("classDigApp").directive("settingsClassList",[function(){return{scope:{classList:"=",classIdForGradableItems:"="},templateUrl:"scripts/directives/settingsClassList/settingsClassList.html",controller:["$scope","Users","$log","$rootScope","$http","appSettings","$timeout","$routeParams","classData","_","$q",function(a,b,c,d,e,f,g,h,i,j,k){a.selectClass=function(b){a.classIdForGradableItems=b.id}}]}}]),angular.module("classDigApp").directive("listOfGradableItems",[function(){return{scope:{classId:"="},templateUrl:"scripts/directives/listOfGradableItems/listOfGradableItems.html",controller:["$scope","Users","$log","$rootScope","$http","appSettings","$timeout","$routeParams","classData","_","$q","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){e({url:f.link+"gradable/item?search=class_id:"+a.classId,method:"GET"}).then(function(b){a.listOfGradableItems=b.data.data,$("#user-loader").hide(),0!==b.data.data.length?a.examExist=!0:a.examNotExist=!0,a.hideLoader=!0},function(b){a.hideLoader=!0})}function n(){e({url:f.link+"category",method:"GET"}).then(function(b){a.optionsList=[];for(var c=0;c<b.data.data.length;c++)a.optionsList[c]={},a.optionsList[c].id=b.data.data[c].id,a.optionsList[c].option=b.data.data[c].name,a.optionsList[c].val=b.data.data[c].id},function(a){})}d.userData={role:d.user.data.role,iconPlus:"images/modal/icon-plus-"+d.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+d.user.data.role+"_3x.png",background:d.user.data.role+"-background",color:d.user.data.role+"-color",border:d.user.data.role+"-border",iconAddButton:"images/modal/icon-add-button-"+d.user.data.role+"_3x.png"},a.$watch("classId",function(){m()});var o=this;m(),n(),a.editGradableItem=function(b,c){l.open({animation:o.animationsEnabled,templateUrl:"components/class/dashboard/grades/createGradableItem/createGradableItem.html",controller:"createGradableItemCtrl",controllerAs:"$ctrl",resolve:{items:function(){return b},category:function(){return a.optionsList}}});m()},a.deleteGradableItem=function(b,c){a.classToDelete=b;l.open({animation:o.animationsEnabled,templateUrl:"components/class/dashboard/events/areUSureModal/areUSureModal.html",controller:"areUSureModalEventsCtrl",controllerAs:"$ctrl",size:"sm",resolve:{items:function(){return a.classToDelete}}});a.deleteEvent=function(b,c){a.eventToDelete=b,a.openAreUSureModal("sm")}},d.$on("delete-was-approved",function(a,b){e({method:"delete",url:f.link+"gradable/item/"+b.id,headers:{"Content-Type":"application/json"}}).success(function(a){m()}).error(function(){})}),d.$on("updateGradableItem",function(){m()})}]}}]),angular.module("classDigApp").directive("distinguishedAdditionalInfo",[function(){return{scope:{userInformation:"="},templateUrl:"scripts/directives/distinguishedAdditionalInfo/distinguishedAditionalInfo.html",controller:["$scope","Users","$log","$rootScope","$http","appSettings","$timeout","$routeParams","classData","_","$q",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){for(var c=[],d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}console.log("ADITIONAL DIST INFO",a.userInformation),a.configDiagramMarks={chart:{type:"discreteBarChart",height:130,tooltip:{contentGenerator:function(a){return a.data.id},fixedTop:!0,classes:"toltip-for-nvd3"},duration:500,margin:{top:5,right:20,bottom:20,left:20},xAxis:{axisLabel:""},yAxis:{axisLabel:""},valueFormat:function(a){return d3.format(",.0f")(a)},x:function(a){return a.label},y:function(a){return a.value+1e-10}}},a.configChartAttendance={attendanceLabels:["Present","Late","Absent"],attendanceBackgroundColor:["#1ea66d","#ffc600","#f93640"],options:{tooltips:{enabled:!1},animation:{duration:0},legend:{display:!1},line:{borderWidth:0},elements:{arc:{borderWidth:0}}}},a.parseMarksDataByStudent=function(b){for(var c=[{values:[]}],d=0;d<b.length;d++){b[d].color.length>7&&(b[d].color="#"+b[d].color.slice(3));var e={label:Math.floor(+b[d].averageMark),id:b[d]["class"],value:Math.floor(+b[d].averageMark),color:b[d].color};c[0].values.push(e)}a.dataForDiagramMarks=c;for(var d=0;d<a.dataForDiagramMarks[0].values.length;d++)for(var f=0;d>f;f++)a.dataForDiagramMarks[0].values[d].label+=" ";a.chunkedData=l(a.dataForDiagramMarks[0].values,4)},a.getMarksDataByStudent=function(){var b=a.userInformation.id;b&&e.get(f.link+"class/report-marks/user/"+b).success(function(b){b.data.length?a.marks=!0:a.marks=!1,a.parseMarksDataByStudent(b.data),console.log(b)})},a.getAttendanceDataByStudent=function(){var b=a.userInformation.id;b&&e.get(f.link+"attendance/report/user/"+b).success(function(b){b.data.length?a.attendance=!0:a.attendance=!1,a.parseAttendanceDataByStudent(b.data)})},a.parseAttendanceDataByStudent=function(b){b.map(function(a){a.general=[],a.general[0]=+a.present,a.general[1]=+a.absent,a.general[2]=+a.late}),a.attendanceDataByStudent=b},a.getMarksDataByStudent(),a.getAttendanceDataByStudent()}]}}]),angular.module("classDigApp").controller("ModalDemoController",["$scope","$rootScope","$uibModal","$log","$document","$http",function(a,b,c,d,e,f){var g=this;b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+".png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+".png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"images/modal/icon-add-button-"+b.user.data.role+"_2x.png"},g.animationsEnabled=!0,g.openModal=function(a,b){var d=b?angular.element(e[0].querySelector(".modal-demo "+b)):void 0;c.open({animation:g.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"scripts/directives/CreateClassModalWindow/CreateClassModal.html",controller:"ModalInstanceCtrl",controllerAs:"$ctrl",size:a,appendTo:d,resolve:{items:function(){return g.items}}});Date.prototype.addHours=function(a){return this.setHours(this.getHours()+a),this},Date.prototype.addMonth=function(a){return this.setUTCMonth(this.getUTCMonth()+a),this},Date.prototype.ChangeTime=function(a,b,c){return this.setUTCMonth(this.getDay()+a),this.setUTCMonth(this.getUTCMonth()+b),this.setUTCMonth(this.getYear()+c),this}},g.toggleAnimation=function(){g.animationsEnabled=!g.animationsEnabled}}]),angular.module("classDigApp").controller("ModalInstanceCtrl",["$uibModalInstance","$scope","$http","Upload","$timeout","$resource","ResoursUpload","$rootScope","$compile","appSettings","items",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){for(var d=0;d<a.length;d++)c({url:j.link+"upload/"+a[d],method:"DELETE"}).then(function(a){},function(a){b.ExamServerError=!0})}b.format="MMMM D YYYY",e(function(){$(".datetimepickerMonthTo, .datetimepickerMonthFrom").datetimepicker({format:"LL"}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .active").addClass("bg-"+b.role).css({border:"none",color:"white"}),$(".bootstrap-datetimepicker-widget .today").toggleClass(""+b.role)})}),b.functionHideCode=function(a){null!==b.currentClass.code||a?null===b.currentClass.code&&a?(b.clickcount=!1,e(function(){$("#myonoffswitch").prop("checked",!1)})):b.clickcount=!b.clickcount:(c.get(j.link+"/class/code").then(function(a){b.currentClass.code=a.data.code}),b.clickcount=!0)},b.generateSemesterNames=function(a,b){for(var c=moment(a,b).format("YYYY"),d=[],e=["Winter "+c,"Spring "+c,"Summer "+c,"Autumn "+c],f=0;f<e.length;f++){var g=e[f];d[f]={id:f,option:g,val:g}}return d},void 0===k?(b.ArrayOfUploadFiles=[],b.httpParams={},b.httpParams.method="POST",b.httpParams.url=j.link+"class",b.currentClass={},b.currentClass.reminder=-1,b.currentClass.time=[],b.currentClass.image=!1,b.currentClass.semester={},b.currentClass.color="#a7687f",b.currentClass.code=null,b.currentClass.semester.syllabus=[],b.functionHideCode(),this.modalConstant={header:"Create Class",buttonSubmit:"CREATE CLASS"}):(b.ArrayOfUploadFiles=_.map(k.semester.syllabus,function(a){var b={};return b.name=a.filename,b.id=a.id,b}),b.httpParams={},b.currentClass=angular.copy(k),b.currentClass.color=b.currentClass.color.toLowerCase(),b.httpParams.method="PUT",b.httpParams.url=j.link+"class/"+b.currentClass.id,b.currentClass.semester.syllabus=k.semester.syllabus.map(function(a){var b=a.id;return b}),b.currentClass.image=angular.copy(k.image),(b.currentClass.time.length||-1!==b.currentClass.reminder)&&(b.showContinue=1),b.dateForUpdate={from:b.currentClass.semester.from,to:b.currentClass.semester.to,name:b.currentClass.semester.name},this.modalConstant={header:"Update class",buttonSubmit:"UPDATE CLASS"},b.functionHideCode(!0),angular.element("#AddDateTime").css("display","block")),b.dateForUpdate&&"0000-00-00"!=b.dateForUpdate.from&&"Invalid date"!=b.dateForUpdate.from||(b.dateForUpdate={from:moment(new Date).format("YYYY-MM-DD"),to:moment(new Date).add(2,"month").format("YYYY-MM-DD"),name:""}),b.semesterNames=b.generateSemesterNames(b.dateForUpdate.from,"YYYY-MM-DD"),b.dateForUpdate.from=moment(b.dateForUpdate.from).format("LL"),b.dateForUpdate.to=moment(b.dateForUpdate.to).format("LL"),b.$watch("dateForUpdate.from",function(a,c){var d="MMMM D, YYYY",f=moment(a,d);b.semesterNames=b.generateSemesterNames(a,"MMMM D, YYYY"),"01"==moment(b.dateForUpdate.from,d).format("MM")||"02"==moment(b.dateForUpdate.from,d).format("MM")||"12"==moment(b.dateForUpdate.from,d).format("MM")?b.currentClass.semester.name=b.semesterNames[0].option:"03"==moment(b.dateForUpdate.from,d).format("MM")||"04"==moment(b.dateForUpdate.from,d).format("MM")||"05"==moment(b.dateForUpdate.from,d).format("MM")?b.currentClass.semester.name=b.semesterNames[1].option:"06"==moment(b.dateForUpdate.from,d).format("MM")||"07"==moment(b.dateForUpdate.from,d).format("MM")||"08"==moment(b.dateForUpdate.from,d).format("MM")?b.currentClass.semester.name=b.semesterNames[2].option:("09"==moment(b.dateForUpdate.from,d).format("MM")||"10"==moment(b.dateForUpdate.from,d).format("MM")||"11"==moment(b.dateForUpdate.from,d).format("MM"))&&(b.currentClass.semester.name=b.semesterNames[3].option),h.$broadcast("semester-name-was-changed",b.semesterNames,b.currentClass.semester.name),b.minimalDateForCalendar=moment(b.dateForUpdate.from,d).add(2,"month").format(),b.maximumDateForCalendar=moment(b.dateForUpdate.from,d).add(6,"month").format(),b.oldValue=moment(b.dateForUpdate.to,d).format("LL"),e(function(){$(".datetimepickerMonthTo").datetimepicker("destroy"),$(".datetimepickerMonthTo").datetimepicker({minDate:b.minimalDateForCalendar,maxDate:b.maximumDateForCalendar,format:"LL"})}).then(function(){new Date(b.minimalDateForCalendar)>new Date(b.oldValue)||new Date(b.maximumDateForCalendar)<new Date(b.oldValue)?b.dateForUpdate.to=moment(f,d).add(2,"month").format("LL"):b.dateForUpdate.to=b.oldValue})}),h.$on("semester-was-changed",function(a,c){var d=c.split(" "),f="MMMM D, YYYY";"Winter"===d[0]?("01"!==moment(b.dateForUpdate.from,f).format("MM")||"02"!==moment(b.dateForUpdate.from,f).format("MM")||"12"!==moment(b.dateForUpdate.from,f).format("MM"))&&(b.dateForUpdate.from="January 1, "+d[1]):"Spring"===d[0]?("03"!==moment(b.dateForUpdate.from,f).format("MM")||"04"!==moment(b.dateForUpdate.from,f).format("MM")||"05"!==moment(b.dateForUpdate.from,f).format("MM"))&&(b.dateForUpdate.from="March 1, "+d[1]):"Summer"===d[0]?("06"!==moment(b.dateForUpdate.from,f).format("MM")||"07"!==moment(b.dateForUpdate.from,f).format("MM")||"08"!==moment(b.dateForUpdate.from,f).format("MM"))&&(b.dateForUpdate.from="June 1, "+d[1]):"Autumn"===d[0]&&("09"!==moment(b.dateForUpdate.from,f).format("MM")||"10"!==moment(b.dateForUpdate.from,f).format("MM")||"11"!==moment(b.dateForUpdate.from,f).format("MM"))&&(b.dateForUpdate.from="September 1, "+d[1]),e(function(){$(".datetimepickerMonthTo").datetimepicker("destroy"),$(".datetimepickerMonthTo").datetimepicker({minDate:b.minimalDateForCalendar,maxDate:b.maximumDateForCalendar,format:"LL"})})}),b.options=[{id:0,option:"Never",val:-1},{id:1,option:"At time of exam",val:0},{id:2,option:"5 minutes before",val:5},{id:3,option:"10 minutes before",val:10},{id:4,option:"15 minutes before",val:15},{id:5,option:"30 minutes before",val:30},{id:6,option:"1 hour before",val:60},{id:7,option:"2 hours before",val:120},{id:8,option:"1 day before",val:1440},{id:9,option:"2 days before",val:2880},{id:10,option:"1 week before",val:10080},{id:11,option:"2 weeks before",val:20160}],b.$watch("picFile",function(){b.picFile&&b.uploadPic(b.picFile)}),b.uploadPic=function(a){a.upload=d.upload({url:j.link+"upload",data:{file:a}}),a.upload.then(function(c){a.result=c.data,b.uploadPictureId=c.data.data.id,b.currentClass.image_id=b.uploadPictureId},function(a){a.status>0&&(b.errorMsg=a.status+": "+a.data)},function(c){a.progress=Math.min(100,parseInt(100*c.loaded/c.total)),b.progressNumber=a.progress})},b.UploadFileHeight=-20,b.$watch("UploadFile",function(){b.UploadFile&&(b.uploadFile(b.UploadFile),b.UploadFileHeight+=10)}),b.uploadFile=function(a){a.upload=d.upload({url:j.link+"upload",data:{file:a}}),a.upload.then(function(c){a.result=c.data;var d={};d.id=c.data.data.id,d.name=a.name,b.currentClass.semester.syllabus.push(d.id),b.ArrayOfUploadFiles.push(d)},function(a){a.status>0&&(b.errorMsg=a.status+": "+a.data)},function(c){a.progress=Math.min(100,parseInt(100*c.loaded/c.total)),b.progressNumber=a.progress})},b.arrayOfFilesToDelete=[],b.DeleteFileFromSyllabus=function(a){var c=$(a.target).parent().attr("id");b.arrayOfFilesToDelete.push(+c),b.currentClass.semester.syllabus=_.filter(b.currentClass.semester.syllabus,function(a){return a!=c}),b.ArrayOfUploadFiles=_.filter(b.ArrayOfUploadFiles,function(a){return a.id!=c}),$(a.target).parent().remove()},b.ok=function(){b.invalidTimeMessage=!1;for(var d=0;d<b.currentClass.time.length;d++){var e=moment(b.currentClass.time[d].from,"LT"),f=moment(b.currentClass.time[d].to,"LT");if(f.diff(e)<18e5)return b.invalidTimeMessage=!0,!1}if(b.CreateClassModal.$invalid)return!1;if(1==b.showContinue){b.currentClass.semester.from=moment(b.dateForUpdate.from,b.format).format("YYYY-MM-DD"),b.currentClass.semester.to=moment(b.dateForUpdate.to,b.format).format("YYYY-MM-DD");for(var g=0;g<b.currentClass.time.length;g++){var i=b.currentClass.time[g];b.currentClass.time[g]={day:i.day,from:i.from,to:i.to}}}else b.currentClass.time=[],b.currentClass.semester={};c({url:b.httpParams.url,method:b.httpParams.method,data:b.currentClass}).then(function(c){h.$broadcast("ClassWasEdited",c,b.httpParams.method),l(b.arrayOfFilesToDelete),a.close()},function(a){b.showErrorMessage=!0})},b.cancel=function(){a.dismiss("cancel"),h.$broadcast("ClassWasNotEdited")},b.joinClass=function(){c({url:"http://api.classdig.oyihost.com/class/request",method:"POST",data:b.classCode}).then(function(a){b.codeWasSend=!0},function(a){b.errorMessage=a.data.message,b.showErrorMessage=!0})}}]),angular.module("classDigApp").directive("progressBar",[function(a,b){return{scope:{progressNumber:"=progressNumber",currentText:"="},templateUrl:"scripts/directives/progressBarDirective/progressBarDirective.html",controller:["$scope","$rootScope",function(a,b){a.background=b.userData.background}]}}]),angular.module("classDigApp").factory("ResoursUpload",["$resource",function(a){return a("http://api.classdig.oyihost.com/upload/:id");
}]),angular.module("classDigApp").controller("MainController",["$rootScope","AuthenticationService","registerUser",function(a,b,c){}]),angular.module("classDigApp").factory("userRoleFactory",function(){return{getUserRole:function(a,b,c){var d,e=a,f=b,g=c,h="student";switch(h){case"teacher":d=e;break;case"student":d=f;break;case"parent":d=g}return d}}});var app=angular.module("classDigApp");app.directive("pickStudents",[function(){return{templateUrl:"components/usersList/userList.html",controller:["$scope","$http","$rootScope","classData","$routeParams","$timeout",function(a,b,c,d,e,f){a.propertyName="first_name",a.userData={userListBorder:c.user.data.role+"-userListBorder"},a.pickStudent=function(b){if(b.state=!b.state,b.state===!0)a.pickedStudents.push(b),a.attendanceViewIsActive&&c.$broadcast("student-was-selected-in-attendance",b),a.studentsViewIsActive&&c.$broadcast("student-was-selected-in-students",b);else for(var d=0;d<a.pickedStudents.length;d++)a.pickedStudents[d].state===!1&&a.pickedStudents.splice(d,1);a.behaviourViewIsActive&&c.$broadcast("student-was-selected-in-behaviour",b),a.studentsViewIsActive&&c.$broadcast("student-was-selected-in-students-all",b),a.distingushedViewIsActive&&c.$broadcast("student-was-selected-in-distinguished-all",b)},c.$on("sort-by-changed",function(b,c,d){a.propertyName=c,0==d?a.sorting=!1:a.sorting=!0}),c.$on("display-mode-changed",function(b,c){a.displayMode=c})}]}}]);var app=angular.module("classDigApp");app.controller("HeaderController",["$scope","$rootScope","$http","$location","localStorageService","AuthenticationService",function(a,b,c,d,e,f){a.activeTab=b.activeTab,a.user=f.getUserData(),a.username=f.getUserName(),a.role=f.getUserRole(),a.unread=b.dialog.unread,a.$on("dialog-unread-success",function(){a.unread=b.dialog.unread}),b.role=f.getUserRole(),a.onMessageClick=function(a,b){a.preventDefault()},"teacher"===b.role?(b.bgClass="bg-teacher",b.bgIcon="bg-icon-teacher"):"student"===b.role?(b.bgClass="bg-student",b.bgIcon="bg-icon-student"):(b.bgClass="bg-parents",b.bgIcon="bg-icon-parents"),a.logout=function(){c.defaults.headers.common.Authorization=null,f.logout(),d.path("/")}}]),app.controller("ClassesController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","classData","$timeout","DeletedClasses","CurrentClasses","$q","_","behaviorPreParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.configChart={attendanceLabels:["Present","Late","Absent"],attendanceBackgroundColor:["#1ea66d","#ffc600","#f93640"],options:{tooltips:{enabled:!1},animation:{duration:0},legend:{display:!1},line:{borderWidth:0},elements:{arc:{borderWidth:0}}}},a.configDiagram={chart:{type:"discreteBarChart",height:110,showValues:!0,duration:500,showXAxis:!1,margin:{top:5,right:20,bottom:10,left:20},tooltip:{enabled:!1},xAxis:{axisLabel:""},yAxis:{axisLabel:""},valueFormat:function(a){return d3.format(",.0f")(a)},x:function(a){return a.label},y:function(a){return a.value+1e-10}}},a.userInfo={iconAddFile:"images/files-library/icon-addfile-"+b.user.data.role+".svg",iconCreateFolder:"images/files-library/icon-createfolder-"+b.user.data.role+".svg",iconFolder:"images/files-library/icon-folder-"+b.user.data.role+".svg",iconArrowBack:"images/files-library/icon-arrow-back-"+b.user.data.role+".svg",color:b.user.data.role+"-color",border:b.user.data.role+"-border",background:b.user.data.role+"-background",iconPlus:"images/modal/icon-plus-"+b.user.data.role+".png"};var q=this,r=a.role=b.user.data.role;a.showChildren="parent"===b.user.data.role,a.selection={selectedItems:[],currentItem:[]},a.classesNotExist=!1,a.achivedNotExist=!1,a.activeContext=!1,a.hideArchived=!0,a.hideDeleted=!0,a.classesItems={},a.archivedClasses={},a.currentClasses=[],a.deletedClasses=[],c.get(i.link+"shared-users").success(function(b){a.sharedUsers=[],b.data.forEach(function(b){a.sharedUsers.push(b.user)})}),a.accept=function(){a.accepting=!0,a.modalInstance=f.open({templateUrl:"components/class/dashboard/students/choseClass/choseClass.html",controller:"ModalMessageInstanceCtrl",controllerAs:"$ctrl",scope:a,resolve:{items:function(){return a.sharedUsers}}}),a.$on("can-move-students",function(b,d){var e=[];a.sharedUsers.forEach(function(a){e.push(a.id)}),a.accepting&&(a.accepting=!1,c.post(i.link+"class/share-students/accept",{users:e,class_id:d}).success(function(b){a.sharedUsers=[],f.open({templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"Students were successfully accepted."}}});var c=a.currentClasses.find(function(a){return a.id===d});c.members+=e.length}).error(function(){f.open({templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"Students are already in class."}}})}))})},a.reject=function(d){a.modalContext={action:"rejectStudents",actionTitle:"reject",students:[d],fromStudents:!1},a.openAreUSureModal("sm"),b.$on("rejectStudents",function e(){c({method:"delete",url:i.link+"class/share-students/decline",headers:{"Content-Type":"application/json"},data:{users:[d.id]}}).success(function(c){var f=a.sharedUsers.find(function(a){return a.id===d.id});if(f){var g=a.sharedUsers.indexOf(f);a.sharedUsers.splice(g,1)}b.$$listeners.rejectStudents=[e],b.$$listeners.rejectStudents.splice(0,1)}).error(function(){})})},a.catClassesNames=function(a){for(var b=0;b<a.length;b++)a[b].name.length>12?a[b].cated_name=a[b].name.substring(0,13)+"...":a[b].cated_name=a[b].name},a.clear=function(){a.selection={selectedItems:[],currentItem:[]};for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].state=!1},a.changeCountClass=function(){if(a.countClass=0,"current"==a.currentView)a.countClass=a.currentClasses.length;else if("deleted"==a.currentView)a.countClass=a.deletedClasses.length;else if("archived"==a.currentView)for(var b in a.archivedClasses)a.countClass+=a.archivedClasses[b].length},a.helpToUnarchive=function(){function b(b){return b.id===a.selection.selectedItems[c]}for(var c=0;c<a.selection.selectedItems.length;c++)for(var d in a.archivedClasses){var e=a.archivedClasses[d].find(b);if(e){var f=a.archivedClasses[d].indexOf(e);a.archivedClasses[d].splice(f,1),a.currentClasses.unshift(e)}}a.countClass=0;for(var d in a.archivedClasses)a.countClass+=a.archivedClasses[d].length;0===a.countClass&&(a.hideArchived=!0,a.archivedClasses={},a.changeView("current"))},a.helpToArchive=function(){function b(b){return b.id===a.selection.selectedItems[c]}for(var c=0;c<a.selection.selectedItems.length;c++){var d=a.currentClasses.find(b),e=a.currentClasses.indexOf(d);a.currentClasses.splice(e,1),a.archivedClasses||(a.archivedClasses={}),a.archivedClasses[d.semester.name]||(a.archivedClasses[d.semester.name]=[]),a.archivedClasses[d.semester.name].unshift(d)}console.log("ARCHIVED CLASSES AFTER ARCHIVATION",a.archivedClasses),a.countClass-=a.selection.selectedItems.length,a.currentClasses.length||(a.countClass=0,a.classesNotExist=!0)},a.selectionWasChanged=function(b){b.reports||n.all([c.get(i.link+"class/"+b.id+"/reports"),c.get(i.link+"behavior/"+b.owner)]).then(function(a){if(b.reports={},a[0].data.data.grade.averageMark&&(b.reports.grade=a[0].data.data.grade.averageMark.toFixed(2)),b.reports.attendance=[0,0,0],b.reports.attendance[0]=a[0].data.data.attendance.present,b.reports.attendance[1]=a[0].data.data.attendance.late,b.reports.attendance[2]=a[0].data.data.attendance.absent,a[0].data.data.behavior.length&&a[1].data.data.length){b.reports.positiveBehavior=p.generateDataForDiagram(a[1].data.data,1),b.reports.negativeBehavior=p.generateDataForDiagram(a[1].data.data,2);for(var c=0;c<a[0].data.data.behavior.length;c++)if("Positive"===a[0].data.data.behavior[c].name){var d=b.reports.positiveBehavior[0].values.find(function(b){return b.label===a[0].data.data.behavior[c].description});d.value=a[0].data.data.behavior[c].total}else d=b.reports.negativeBehavior[0].values.find(function(b){return b.label===a[0].data.data.behavior[c].description}),d.value=a[0].data.data.behavior[c].total}}),k(function(){function b(b){return b.id===a.selection.selectedItems[c]}if("teacher"===r||"parent"===r)if(1===a.selection.selectedItems.length)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!0;else if(0===a.selection.selectedItems.length)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!1;else a.contextMenu.items[0].state=!1;else if("student"===r){var d=!1;if("current"===a.currentView)for(var c=0;c<a.selection.selectedItems.length;c++){var e=a.currentClasses.find(b);e.owner!==g.getUserId()&&(d=!0)}else if("deleted"===a.currentView)for(var c=0;c<a.selection.selectedItems.length;c++){var e=a.deletedClasses.find(b);e.owner!==g.getUserId()&&(d=!0)}else if("archived"===a.currentView)for(var c=0;c<a.selection.selectedItems.length;c++)for(var f in a.archivedClasses)e=a.archivedClasses[f].find(b),e.owner!==g.getUserId()&&(d=!0);if(1===a.selection.selectedItems.length)if(d)a.contextMenu.items[3].state=!0;else for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!0;else if(0===a.selection.selectedItems.length)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!1;else if(d){for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!1;a.contextMenu.items[3].state=!0}else{for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!0;a.contextMenu.items[0].state=!1}}})},a.changeChildren=function(b){a.childName=b.first_name,a.childId=b.id,b.cur.clear(),a.cur=b.cur,k(function(){angular.element(".children").css("border-bottom","2px solid white"),angular.element("#"+a.childName).css("border-bottom","2px solid rgb(207, 81, 93)")}),a.requestUrlsConfig(),a.loadClasses()},a.environmentConfig=function(){"teacher"===r||"student"===r?(a.contextMenu.items[0].active=!0,a.contextMenu.items[1].active=!0,a.contextMenu.items[3].active=!0,a.contextMenu.items[5].active=!0,"teacher"===r?(a.roleColor="#4785d6",a.data={items:[],onGlobalButtonClick:q.openModal}):"student"===r&&(a.roleColor="#429c87",angular.element(".modal-content").addClass("joinClass"),a.data={items:[{img:"images/classes/icon-student-join-class.svg",text:"Join a class",click:q.openModalJoinClass},{img:"images/classes/icon-student-create-class.svg",text:"Create new class",click:q.openModal}],onGlobalButtonClick:""})):(a.contextMenu.items[3].active=!1,a.roleColor="#cf515d",a.data={items:[],onGlobalButtonClick:q.openModalJoinClass})},a.requestUrlsConfig=function(){"parent"===b.user.data.role?(a.childrenArray=b.user.data.children.data,a.configCurrent="?user_id="+a.childId+"&status=1",a.configDeleted="?user_id="+a.childId+"&status=3",a.configArchived="?user_id="+a.childId):(a.configCurrent="?status=1",a.configDeleted="?status=3",a.configArchived="")},a.loadClasses=function(){n.all([c.get(i.link+"class"+a.configCurrent),c.get(i.link+"class"+a.configDeleted),c.get(i.link+"class/archived"+a.configArchived)]).then(function(b){a.currentClasses=b[0].data.data,a.deletedClasses=b[1].data.data,a.archivedClasses=b[2].data,b[2].data.length||(a.archivedClasses={}),console.log("RIGHT FROM REQUEST -->",a.archivedClasses),a.currentClasses.length||(a.classesNotExist=!0),a.deletedClasses.length&&(a.hideDeleted=!1),Object.keys(a.archivedClasses).length&&(a.hideArchived=!1),a.catClassesNames(a.currentClasses),a.catClassesNames(a.deletedClasses);for(var c in a.archivedClasses)a.catClassesNames(a.archivedClasses[c]);if(a.changeCountClass(),"parent"===r&&(a.hideDeleted=!0,a.deletedClasses=[]),"student"===r)for(var d=0;d<a.deletedClasses.length;d++)if(a.deletedClasses[d].owner!==g.getUserId()){var e=a.deletedClasses.indexOf(a.deletedClasses[d]);a.deletedClasses.splice(e,1)}})},a.paginationObjectsFabric=function(){"parent"===r?a.childrenArray.forEach(function(a){a.cur=new m(a.id),a.del=new l(a.id)}):(a.cur=new m,a.del=new l)},a.init=function(){a.requestUrlsConfig(),a.paginationObjectsFabric(),"parent"!==b.user.data.role||a.childId?a.loadClasses():a.changeChildren(b.user.data.children.data[0]),a.changeView("current"),a.environmentConfig()},a.changeView=function(b){a.currentView=b,k(function(){angular.element(".classes-subheader-item").css("border-bottom","2px solid white"),angular.element(".classes-subheader-item").css("color",a.roleColor),angular.element("#"+b).css("border-bottom","2px solid"+a.roleColor),angular.element("#"+b).css("color",a.roleColor)});for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].active=!1;if("current"===b)"parent"===r&&a.currentClasses.length?a.changeCountClass():"parent"!==r&&a.currentClasses.length&&(a.contextMenu.items[0].active=!0,a.contextMenu.items[1].active=!0,a.contextMenu.items[3].active=!0,a.contextMenu.items[5].active=!0,a.countClass=a.currentClasses.length);else if("archived"===b)if("parent"!==r||o.isEmpty(a.archivedClasses)){if("parent"!==r&&!o.isEmpty(a.archivedClasses)){a.contextMenu.items[2].active=!0,a.contextMenu.items[7].active=!0,a.countClass=0;for(var d in a.archivedClasses)a.countClass+=a.archivedClasses[d].length}}else a.changeCountClass();else"parent"===r&&a.deletedClasses.length?a.changeCountClass():"parent"!==r&&a.deletedClasses.length&&(a.contextMenu.items[4].active=!0,a.contextMenu.items[6].active=!0,a.countClass=a.deletedClasses.length);a.clear()},a.deleteClass=function(){a.modalContext={action:"deleteClass",actionTitle:"delete",fromClasses:!0,selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("deleteClass",function(){c({method:"delete",url:i.link+"class",headers:{"Content-Type":"application/json"},data:{class_id:a.selection.selectedItems}}).success(function(b){function c(b){return b.id===a.selection.selectedItems[d]}for(var d=0;d<a.selection.selectedItems.length;d++){var e=a.deletedClasses.find(c),f=a.deletedClasses.indexOf(e);a.deletedClasses.splice(f,1)}a.countClass=a.deletedClasses.length,a.deletedClasses.length||(a.hideDeleted=!0),a.changeView("current"),a.clear()}).error(function(){})})},a.recoverClass=function(){a.modalContext={action:"recoverClass",fromClasses:!0,actionTitle:"recover",selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("recoverClass",function(){c.post(i.link+"class/recovery",{class_id:a.selection.selectedItems}).success(function(b){function c(b){return b.id===a.selection.selectedItems[d]}for(var d=0;d<a.selection.selectedItems.length;d++){var e=a.deletedClasses.find(c),f=a.deletedClasses.indexOf(e);a.deletedClasses.splice(f,1),a.currentClasses.unshift(e)}a.countClass=a.deletedClasses.length,a.classesNotExist=!1,a.deletedClasses.length||(a.hideDeleted=!0),a.changeView("current"),a.clear()}).error(function(){})})},a.archiveClass=function(){a.modalContext={action:"archiveClass",fromClasses:!0,actionTitle:"archive",selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("archiveClass",function(){c.post(i.link+"/class/archive",{class_id:a.selection.selectedItems}).success(function(b){a.helpToArchive(a.archivedClasses),a.hideArchived=!1,a.clear(),a.currentClasses.length||a.changeView("current")}).error(function(){})})},a.unArchiveClass=function(){a.modalContext={action:"unArchiveClass",actionTitle:"unarchive",fromClasses:!0,selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("unArchiveClass",function(){c.post(i.link+"/class/unarchive",{class_id:a.selection.selectedItems}).success(function(b){a.helpToUnarchive(),Object.keys(a.archivedClasses).length||(a.hideArchived=!0),a.changeView("current"),a.clear()}).error(function(){})})},a.moveToTrashFromCurrent=function(){a.modalContext={action:"moveToTrashFromCurrent",actionTitle:"delete",fromClasses:!0,selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("moveToTrashFromCurrent",function(){c.post(i.link+"/class/delete",{class_id:a.selection.selectedItems}).success(function(b){function c(b){return b.id===a.selection.selectedItems[d]}for(var d=0;d<a.selection.selectedItems.length;d++){var e=a.currentClasses.find(c),f=a.currentClasses.indexOf(e);a.currentClasses.splice(f,1),a.deletedClasses.unshift(e)}a.changeCountClass(),a.currentClasses.length||(a.countClass=0,a.classesNotExist=!0),a.clear(),a.currentClasses.length||a.changeView("current"),a.hideDeleted=!1,a.clear()}).error(function(){})})},a.moveToTrashFromArchived=function(){a.modalContext={action:"moveToTrashFromArchived",actionTitle:"delete",fromClasses:!0,selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("moveToTrashFromArchived",function(){c.post(i.link+"/class/delete",{class_id:a.selection.selectedItems}).success(function(b){function c(b){return b.id===a.selection.selectedItems[d]}for(var d=0;d<a.selection.selectedItems.length;d++)for(var e in a.archivedClasses){var f=a.archivedClasses[e].find(c);if(f){var g=a.archivedClasses[e].indexOf(f);a.archivedClasses[e].splice(g,1),a.deletedClasses.unshift(f)}}a.countClass=0;for(var e in a.archivedClasses)a.countClass+=a.archivedClasses[e].length;console.log(a.archivedClasses),0===a.countClass&&(a.hideArchived=!0,a.archivedClasses={},a.changeView("current")),a.hideDeleted=!1,a.clear()}).error(function(){})})},a["export"]=function(){f.open({animation:q.animationsEnabled,templateUrl:"components/classes/classExport/classExport.html",controller:"classExportCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a.selection.selectedItems}}})},a.openAreUSureModal=function(b){f.open({animation:q.animationsEnabled,templateUrl:"components/classes/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.editClass=function(){if(1===a.selection.currentItem.length&&a.selection.currentItem[0].owner===b.user.data.id){f.open({templateUrl:"scripts/directives/CreateClassModalWindow/CreateClassModal.html",controller:"ModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a.selection.currentItem[0]}}})}},q.openModal=function(a,b){var c=b?angular.element($document[0].querySelector(".modal-demo "+b)):void 0;f.open({animation:q.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"scripts/directives/CreateClassModalWindow/CreateClassModal.html",controller:"ModalInstanceCtrl",controllerAs:"$ctrl",size:a,appendTo:c,resolve:{items:function(){return q.items}}})},q.openModalJoinClass=function(a,b){angular.element(".modal-content").addClass("joinClass");var c=b?angular.element($document[0].querySelector(".modal-demo "+b)):void 0;f.open({animation:q.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/classes/joinClassByCode.html",controller:"ModalInstanceCtrl",controllerAs:"$ctrl",size:"sm",appendTo:c,resolve:{items:function(){return q.items}}})},a.openClass=function(c,d){c.classInArchived=!1,"deleted"!==a.currentView&&("archived"===a.currentView&&(c.classInArchived=!0),"teacher"==b.role?d=0:("parent"===b.role||"student"==b.role)&&(d=b.user.data.id),j.setPickedClass(c),e.path("/class/"+c.id+"/user/"+d+"/students"))},a.contextMenu={items:[{img:"images/context_menu/icon-edit-"+r+"_3x.png",imgDisabled:"images/context_menu/icon-edit-default_3x.png",imgHover:"images/context_menu/icon-edit-hover_3x.png",state:!1,text:"Edit",multiSelect:!1,click:a.editClass},{img:"images/context_menu/icon-archive-"+r+"_3x.png",imgDisabled:"images/context_menu/icon-archive-default_3x.png",imgHover:"images/context_menu/icon-archive-hover_3x.png",state:!1,text:"Archive",multiSelect:["teacher","student","parents"],singleSelect:["teacher","student","parents"],click:a.archiveClass},{img:"images/context_menu/icon-unarchive-"+r+"_3x.png",imgDisabled:"images/context_menu/icon-unarchive-default_3x.png",imgHover:"images/context_menu/icon-unarchive-hover_3x.png",state:!1,text:"Unarchive",multiSelect:["teacher","student","parents"],singleSelect:["teacher","student","parents"],click:a.unArchiveClass},{img:"images/context_menu/icon-share-"+r+"_3x.png",imgDisabled:"images/context_menu/icon-share-default_3x.png",imgHover:"images/context_menu/icon-share-hover_3x.png",state:!1,text:"Export",multiSelect:!1,click:a["export"]},{img:"images/context_menu/icon-recover-"+r+"_3x.png",imgDisabled:"images/context_menu/icon-recover-default_3x.png",imgHover:"images/context_menu/icon-recover-hover_3x.png",state:!1,text:"Recover",multiSelect:["teacher","student","parents"],singleSelect:["teacher","student","parents"],click:a.recoverClass},{img:"images/context_menu/icon-delete-"+r+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"],click:a.moveToTrashFromCurrent},{img:"images/context_menu/icon-delete-"+r+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"],click:a.deleteClass},{img:"images/context_menu/icon-delete-"+r+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"],click:a.moveToTrashFromArchived}]},b.$on("ClassWasEdited",function s(c,d,e){if("POST"===e){a.currentClasses||(a.currentClasses=[]);var g=a.currentClasses.find(function(a){return a.id===d.data.data.id});g||a.currentClasses.unshift(d.data.data),a.countClass=a.currentClasses.length,a.classesNotExist=!1}else{for(var h=0;h<a.currentClasses.length;h++)a.currentClasses[h].id==d.data.data.id&&(a.currentClasses[h]=angular.copy(d.data.data));a.clear();f.open({animation:q.animationsEnabled,templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"Class was  successfully updated."}}})}b.$$listeners.ClassWasEdited=[s],2===b.$$listeners.ClassWasEdited.length&&b.$$listeners.ClassWasEdited.splice(0,1),a.catClassesNames(a.currentClasses),a.selection={selectedItems:[],currentItem:[]}}),b.$on("ClassWasNotEdited",function(b){a.selection={selectedItems:[],currentItem:[]}}),b.$on("action-was-not-approved",function(){a.clear()}),b.$on("class-was-exported",function(){a.clear()}),b.$on("load-more-deleted",function(b,c){a.catClassesNames(c),a.deletedClasses.length&&(a.deletedClasses=c),"deleted"==a.currentView&&"parent"!==r?a.countClass=a.deletedClasses.length:"deleted"==a.currentView&&"parent"===r&&a.changeCountClass()}),b.$on("load-more-current",function(b,c){a.catClassesNames(c),a.currentClasses=c,"current"==a.currentView&&"parent"!==r?a.countClass=a.currentClasses.length:"current"==a.currentView&&"parent"===r&&a.changeCountClass()})}]).factory("CurrentClasses",["$http","appSettings","$routeParams","AuthenticationService","$rootScope",function(a,b,c,d,e){var f=function(a){this.items=[],this.busy=!1,this.after="",a&&(this.child=a)};return f.prototype.clear=function(){this.items=[],this.busy=!1,this.after=""},f.prototype.nextPage=function(){if(!this.busy){if(this.busy=!0,$("#classes-loader").show(),this.child)var c="?user_id="+this.child+"&status=1&page="+this.after;else c="?user_id="+d.getUserId()+"&status=1&page="+this.after;var f=b.link+"class"+c;a.get(f).success(function(a){if(0!==a.data.length){for(var b=a.data,c=0;c<b.length;c++)this.items.push(b[c]);if(e.$broadcast("load-more-current",this.items),this.after=a.meta.pagination.current_page+1,a.meta.pagination.total_pages===a.meta.pagination.current_page)return void $("#classes-loader").hide();$("#classes-loader").hide(),this.busy=!1}}.bind(this))}},f}]).factory("DeletedClasses",["$http","appSettings","$routeParams","AuthenticationService","$rootScope",function(a,b,c,d,e){var f=function(a){this.items=[],this.busy=!1,this.after="",a&&(this.child=a)};return f.prototype.nextPage=function(){if(!this.busy){if(this.busy=!0,$("#classes-del-loader").show(),this.child)var c="?user_id="+this.child+"&status=3&page="+this.after;else c="?user_id="+d.getUserId()+"&status=3&page="+this.after;var f=b.link+"class"+c;a.get(f).success(function(a){if(0!==a.data.length){for(var b=a.data,c=0;c<b.length;c++)this.items.push(b[c]);if(e.$broadcast("load-more-deleted",this.items),this.after=a.meta.pagination.current_page+1,a.meta.pagination.total_pages===a.meta.pagination.current_page)return void $("#classes-del-loader").hide();this.busy=!1,$("#classes-del-loader").hide()}}.bind(this))}},f}]).filter("colorParse",function(){return function(a){return a.length>7?"#"+a.slice(3):a}}),app.controller("FeedController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","classData","$timeout","DeletedClasses","CurrentClasses","$q","_","Upload","Feed",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;b.user.data.role;a.newFeed={},a.parseFileType=function(b){var c=["jpeg","svg","jpg","png"],d=["mp4","avi","3gp"],e=b.split(".");e=e[e.length-1];for(var f=0;f<c.length;f++)if(e===c[f])return void(a.newFeed.type_file=1);for(var g=0;g<d.length;g++)if(e===d[g])return void(a.newFeed.type_file=2);a.newFeed.type_file=3},a.userAva=b.user.data.details.data.photo,a.userId=b.user.data.id,b.userData={iconAddLink:"images/modal/icon-clip-"+b.user.data.role+".svg",iconAddPhoto:"images/modal/icon-camera-"+b.user.data.role+".svg",placeholder:b.user.data.role+"-placeholder"},a.addPhotoText="Add photo",a.placeholder=b.user.data.role+"-placeholder",r.animationsEnabled=!0,a.iconAddLink="images/modal/icon-clip-"+b.user.data.role+".svg",a.$watch("newFeed.picFile",function(b){a.newFeed.picFile.$ngfName?(a.newFeed.link=void 0,a.parseFileType(a.newFeed.picFile.$ngfName),a.addPhotoText=a.newFeed.picFile.$ngfName):a.newFeed.picFile.name&&(a.newFeed.link=void 0,a.parseFileType(a.newFeed.picFile.name),a.addPhotoText=a.newFeed.picFile.name)},!0),a.$watch("newFeed.link",function(b){void 0!==a.newFeed.link&&(delete a.newFeed.file_id,delete a.newFeed.type_file,delete a.newFeed.picFile,a.addPhotoText="Attach photo")}),a.uploadPic=function(d,e){d.upload=p.upload({url:i.link+"upload",data:{file:d}}),d.upload.then(function(f){d.result=f.data,a.newFeed.file_id=f.data.data.id,console.log("post feed from img"),c({url:i.link+e,method:"POST",data:a.newFeed}).then(function(c){a.listOfFeeds.unshift(c.data.data),a.feeds.items.unshift(c.data.data),b.$emit("addNewPost",c.data.data),a.newFeed={},a.addPhotoText="Attach file"},function(a){})},function(b){b.status>0&&(a.errorMsg=b.status+": "+b.data)})},a.a=function(){console.log(b.activitiesContainer)},a.postFeedFunction=function(){return a.newFeed.content||a.newFeed.link||a.newFeed.picFile?void(a.newFeed.picFile?"class"===a.feedType?(a.url="class-story",a.newFeed.picFile&&a.uploadPic(a.newFeed.picFile,a.url)):(a.url="story",a.newFeed.picFile&&a.uploadPic(a.newFeed.picFile,a.url)):("class"===a.feedType?a.url="class-story":a.url="story",c({url:i.link+a.url,method:"POST",data:a.newFeed}).then(function(c){a.listOfFeeds.unshift(c.data.data),b.$emit("addNewPost",c.data.data),a.feeds.items.unshift(c.data.data),a.newFeed={}},function(a){}))):!1},a.listOfFeeds=[],b.$on("communityFeed",function(b,c){a.feedUrl=i.link+"story?search=category:"+c,a.createNewFeed=!0,a.feedType="community",a.newFeed={},a.newFeed.category=c,a.feeds=new q,a.feeds.nextPage(a.feedUrl)}),b.$on("classFeed",function(b,c){a.feedUrl=i.link+"story?search=class_id:"+c,a.createNewFeed=!0,a.feedType="class",a.newFeed={},a.newFeed.class_id=c,a.feeds=new q,a.feeds.nextPage(a.feedUrl)})}]);var app=angular.module("classDigApp");app.controller("MenuClassController",["$scope","$http","$routeParams","$rootScope","classData","$timeout",function(a,b,c,d,e,f){a.activeItem=d.activeClassItem;var g=c.studentId,h="",i="-"+d.user.data.role,j=c.classId;e.getClassById(j,function(b){d.user.classData=b,a.mydata=b,"student"===d.role&&d.user.classData.owner===d.user.data.id?a.menuLinks=[{Id:1,icon:"images/menu_class/students/icon-students",role:h,exte:"_3x.png",title:"Classmates",href:"#/class/"+j+"/user/"+g+"/students"},{Id:5,icon:"images/menu_class/assignment/icon-assignment",role:h,exte:"_3x.png",title:"Assignments",href:"#/class/"+j+"/user/"+g+"/assignment"},{Id:6,icon:"images/menu_class/exams/icon-exams",role:h,exte:"_3x.png",title:"Exams",href:"#/class/"+j+"/user/"+g+"/exams"},{Id:7,icon:"images/menu_class/events/icon-events",role:h,exte:"_3x.png",title:"Events",href:"#/class/"+j+"/user/"+g+"/events"},{Id:8,icon:"images/menu_class/files/icon-files",role:h,exte:"_3x.png",title:"Files",href:"#/class/"+j+"/user/"+g+"/files"},{Id:9,icon:"images/menu_class/polls/icon-polls",role:h,exte:"_3x.png",title:"Polls",href:"#/class/"+j+"/user/"+g+"/polls"}]:a.menuLinks=[{Id:1,icon:"images/menu_class/students/icon-students",role:h,exte:"_3x.png",title:"Students",href:"#/class/"+j+"/user/"+g+"/students"},{Id:2,icon:"images/menu_class/attendance/icon-attendance",role:h,exte:"_3x.png",title:"Attendance",href:"#/class/"+j+"/user/"+g+"/attendance"},{Id:3,icon:"images/menu_class/behaviour/icon-behaviour",role:h,exte:"_3x.png",title:"Behavior",href:"#/class/"+j+"/user/"+g+"/behaviour"},{Id:4,icon:"images/menu_class/grades/icon-grades",role:h,exte:"_3x.png",title:"Grades",href:"#/class/"+j+"/user/"+g+"/grades"},{Id:5,icon:"images/menu_class/assignment/icon-assignment",role:h,exte:"_3x.png",title:"Assignments",href:"#/class/"+j+"/user/"+g+"/assignment"},{Id:6,icon:"images/menu_class/exams/icon-exams",role:h,exte:"_3x.png",title:"Exams",href:"#/class/"+j+"/user/"+g+"/exams"},{Id:7,icon:"images/menu_class/events/icon-events",role:h,exte:"_3x.png",title:"Events",href:"#/class/"+j+"/user/"+g+"/events"},{Id:8,icon:"images/menu_class/files/icon-files",role:h,exte:"_3x.png",title:"Files",href:"#/class/"+j+"/user/"+g+"/files"},{Id:9,icon:"images/menu_class/polls/icon-polls",role:h,exte:"_3x.png",title:"Polls",href:"#/class/"+j+"/user/"+g+"/polls"},{Id:10,icon:"images/menu_class/reports/icon-reports",role:h,exte:"_3x.png",title:"Reports",href:"#/class/"+j+"/user/"+g+"/reports"},{Id:11,icon:"images/menu_class/announcments/icon-announcments",role:h,exte:"_3x.png",title:"Announcments",href:"#/class/"+j+"/user/"+g+"/announcments"},{Id:12,icon:"images/menu_class/distinguished/icon-distinguished",role:h,exte:"_3x.png",title:"Distinguished",href:"#/class/"+j+"/user/"+g+"/distinguished"},{Id:13,icon:"images/menu_class/parents/icon-parents",role:h,exte:"_3x.png",title:"Parents",href:"#/class/"+j+"/user/"+g+"/parents"}];for(var c=0;c<a.menuLinks.length;c++)a.menuLinks[c].Id===a.activeItem&&(a.menuLinks[c].role=i);d.$broadcast("class-data-was-received",d.user.classData)})}]),angular.module("classDigApp").controller("ModalMessageInstanceCtrl",["$uibModalInstance","AllClasses","$scope","Users","$log","_","chatTitle","items","$rootScope","$http",function(a,b,c,d,e,f,g,h,i,j){var k=this;c.userRole=i.user.data.role,k.hasClass=!1,k.users=new d,k.selectedRole="users",k.selectedUsers={},k.selectedOption={opt:0},k.roles=[{id:"student",description:"Student",url:"users"},{id:"parent",description:"Parent",url:"parents"}],k.options=b.get(function(a){k.options=a.data,a.data.length?k.hasClass=!0:k.noClasses=!0}),c.getTeacher=function(a){j.get("http://api.classdig.oyihost.com/current-user/"+a).success(function(a){k.teacher=a.data})},c.$watch("$ctrl.selectedOption.opt",function(a,b){if(e.log(a),a){k.teacher=void 0;var d=k.options.find(function(b){return b.id===a});d.owner_id!==i.user.data.id&&c.getTeacher(d.owner_id),k.selectRole(k.selectedRole)}}),k.selectUser=function(a){k.selectedUsers[a.id]?delete k.selectedUsers[a.id]:(c.singleRecipient&&(k.selectedUsers={}),k.selectedUsers[a.id]=a)},k.selectRole=function(a){"student"===c.userRole?a="users":"parent"===c.userRole&&(a="parents"),
k.selectedRole=a,k.users.nextPage(k.selectedOption.opt,a)},k.canCreateRoom=function(){var a=Object.keys(k.selectedUsers).length,b=!1;return c.singleRecipient?a>0&&(b=!0):a>1&&(b=!0),b},k.ok=function(){h&&(i.$broadcast("can-move-students",k.selectedOption.opt),a.close()),k.canCreateRoom()&&c.dialog.newRoom(f.pluck(k.selectedUsers,"id"),function(b){e.log("Recipients:",k.selectedUsers);var d=f.values(k.selectedUsers);e.log("Calculate Recipients:",d);var h=g.prepare(d);e.log("Room title:",h);var i={newRoom:h,room:b,recipients:d};c.dialog.items.push(i),c.changeRoom(i),a.close()})},k.cancel=function(){i.$broadcast("action-was-not-approved"),a.dismiss("cancel")},k.close=function(){i.$broadcast("action-was-not-approved"),a.close()}}]),angular.module("classDigApp").directive("messagePopup",["$timeout","$rootScope","$location",function(a,b,c){return{templateUrl:"components/message/message-popup.html",link:function(a,d,e){a.selectRoom=function(d,e){b.$broadcast("room-changed-from-popup",e),a.dialog.markRead(e),b.dialog.markRead(e),c.path("message").search({room:d})},a.role=b.role,a.dialog=b.dialog}}}]),angular.module("classDigApp").controller("MessageCtrl",["$scope","$rootScope","appSettings","$log","Chat","$uibModal","Users","$timeout","AllClasses","$routeParams","$location","chatTitle","moment","Upload","ChatGroups","$http",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){null===a.dialog.items?$("#dialog-loader").show():b.dialog.items.length?j.room&&($("#dialog-loader").hide(),a.active=j.room,a.changeRoom(a.dialog.rooms[j.room])):($("#dialog-loader").hide(),a.emptyDialog=!0)}function r(){a.selectedRole="users",a.activeClass=1,a.singleRecipient=!1,a.startRequest=!1,a.startRooms=!1}var s=this;a.user=b.user.data,a.active=-1,a.unread=0,a.dialog=b.dialog,a.content="",a.message={content:"",sender:{id:b.user.data.id,first_name:b.user.data.details.data.first_name,last_name:b.user.data.details.data.last_name,image:b.user.data.details.data.photo},date_time:{},attachments:[]},s.role=a.role=b.user.data.role,a.unread=b.dialog._unread,a.$on("dialog-unread-success",function(){d.info("Unread messages",b.dialog._unread),a.unread=b.dialog._unread}),scrollEventHendlerChat=function(){0===$("#chat").scrollTop()&&a.currentRoom.chat.nextPage(a.active,!0)},a.openAreUSureModal=function(b){f.open({templateUrl:"components/classes/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.deleteMessages=function(){a.modalContext={action:"deleteMessage",actionTitle:"delete",students:a.selectedMessages,fromStudents:!1},a.openAreUSureModal("sm"),b.$on("deleteMessage",function d(){var e=[];a.selectedMessages.forEach(function(a){e.push(a.id)}),p({method:"delete",url:c.link+"chat/messages",headers:{"Content-Type":"application/json"},data:{messages:e}}).success(function(c){var f=b.dialog.items.find(function(b){return b.room===a.selectedMessages[0].room});e.forEach(function(a){var b=f.chat.items.find(function(b){return b.id===a}),c=f.chat.items.indexOf(b);f.chat.items.splice(c,1)}),f.chat.items.length?(f.content=f.chat.items[f.chat.items.length-1].content,f.date_time=f.chat.items[f.chat.items.length-1].date_time,f.sender=f.chat.items[f.chat.items.length-1].sender):(f.newRoom={},f.newRoom.text="",f.recipients.length>2?f.newRoom.type="group":f.newRoom.type="direct",f.recipients.forEach(function(b){b.id!==a.user.id&&(f.newRoom.text+=b.first_name+" "+b.last_name+", ")})),a.selectedMessages=[],b.$$listeners.deleteMessage=[d],b.$$listeners.deleteMessage.splice(0,1)}).error(function(){})})},a.contextMenu={items:[{img:"images/context_menu/icon-delete-"+a.role+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,active:!0,text:"Delete",click:a.deleteMessages}]},a.selectedMessages=[],a.selectMessage=function(b){var c=a.selectedMessages.find(function(a){return a.id===b.id});if(c){var d=a.selectedMessages.indexOf(c);a.selectedMessages.splice(d,1)}else a.selectedMessages.push(b);a.selectedMessages.length?a.contextMenu.items[0].state=!0:a.contextMenu.items[0].state=!1},a.$watch("picFile",function(){a.picFile&&(a.loadingImg=!0,a.uploadPic(a.picFile))}),a.uploadPic=function(b){b.upload=n.upload({url:c.link+"upload",data:{file:b}}),b.upload.then(function(c){b.result=c.data,a.upload=c.data.data,a.loadingImg=!1},function(b){b.status>0&&(a.errorMsg=b.status+": "+b.data)})},a.sendMessage=function(){(""!==a.content||a.upload)&&(a.upload&&(a.message.attachments[0]=a.upload.id),a.currentRoom.newRoom&&delete a.currentRoom.newRoom,a.message.type=1,a.message.date_time.date=m(m().format()).utc().format("YYYY-MM-DD H:m:ss"),a.message.content=a.content,a.message.room=a.active,a.currentRoom.chat.sendMessage(a.message,a.upload),a.currentRoom.chat.setInputMessageState(),a.content="",a.newMessageSent=!0,a.picFile=void 0,a.upload=void 0)},a.$on("groups-message-sent",function(b,c){var d=a.dialog.items.indexOf(a.currentRoom);a.dialog.items.splice(d,1),a.dialog.items.push(a.currentRoom),a.currentRoom.content=c.content,a.currentRoom.sender=c.sender,a.currentRoom.date_time.date=c.date_time.date,a.message.attachments=[]}),b.$on("new-message-was-received",function(){a.newMessageReceived=!0}),b.$on("new-message-received-scroll-e",function(){a.newMessageReceived=!1}),a.changeRoom=function(c){c&&(a.selectedMessages=[],a.contextMenu.items[0].state=!1,a.justEntered=!0,a.currentRoom=c,a.active=c.room,k.search({room:c.room}),c.seen||c.newRoom||c.chat.nextPage(c.room,!0),c.newRoom&&(c.seen=!1,c.chat=new o,c.date_time={},c.date_time.date=m(m().format()).utc().format("YYYY-MM-DD H:m:ss")),a.chatTitle=l.prepare(c.recipients),a.dialog.markRead(c),b.dialog.activeRoom=c.room,c.chat.setInputMessageState(),c.seen=!0);var d=$("#chat");h(function(){var a=d[0].scrollHeight;$(d).scrollTop(a)})},a.$on("room-changed-from-popup",function(b,c){a.changeRoom(c)}),q(),a.$on("chat-dialog-success",function(){$("#dialog-loader").hide(),q()}),r(),a.groupMessages=function(){r(),a.modalInstance=f.open({templateUrl:"components/message/selectPeople.html",controller:"ModalMessageInstanceCtrl",controllerAs:"$ctrl",scope:a,resolve:{items:function(){return!1}}})},a.directMessage=function(){r(),a.singleRecipient=!0,a.modalInstance=f.open({templateUrl:"components/message/selectPeople.html",controller:"ModalMessageInstanceCtrl",controllerAs:"$ctrl",scope:a,resolve:{items:function(){return!1}}})},a.data={items:[{img:"images/message/direct-message-"+a.role+".png",text:"Direct Message",click:a.directMessage},{img:"images/message/group-message-"+a.role+".png",text:"Group Message",click:a.groupMessages}],onGlobalButtonClick:null},a.resizeArea=function(a){var b=angular.element(".type-message")[0],c=a.currentTarget;if(c.scrollHeight<100){c.style.height=0,c.style.height=c.scrollHeight+"px";var d=34+c.scrollHeight;$(b).css({height:d+"px"});var e=$("#chat"),f=e[0].scrollHeight;e.scrollTop()+e.innerHeight()>=e[0].scrollHeight-250&&$(e).scrollTop(f)}},b.$on("chat-entered-room-scroll-event",function(){a.justEntered=!1}),b.$on("chat-new-message-sent-scroll-event",function(){a.newMessageSent=!1})}]).filter("orderObjectBy",function(){return function(a,b,c){var d=function(a,b){function c(a,b,c){return b?a[b.slice(0,c?-1:b.length)]:a}function d(a,b){return b?b.split("[").reduce(c,a):a}return b.split(".").reduce(d,a)},e=[];return angular.forEach(a,function(a){e.push(a)}),e.sort(function(a,c){return d(a,b)>d(a,b)?1:-1}),c&&e.reverse(),e}}).directive("chatScrolDir",["$rootScope",function(a){return function(b,c,d){if(b.$last){var e=$("#chat"),f=e[0].scrollHeight;if(b.newMessageReceived)return e.scrollTop()+e.innerHeight()<=e[0].scrollHeight-250?void a.$broadcast("new-message-received-scroll-e"):(a.$broadcast("new-message-received-scroll-e"),f=e[0].scrollHeight,void $(e).scrollTop(f));b.currentRoom.chat.after<=2&&$(e).scrollTop(f),b.justEntered&&b.currentRoom.seen&&($(e).scrollTop(f),a.$broadcast("chat-entered-room-scroll-event")),b.newMessageSent&&($(e).scrollTop(f),a.$broadcast("chat-new-message-sent-scroll-event"))}}}]),angular.module("classDigApp").directive("notificationsPopup",["$timeout","$rootScope","$location","$http","appSettings","classData",function(a,b,c,d,e,f){return{templateUrl:"components/notifications/notifications-popup.html",link:function(a,g,h){a.onMessageClick=function(a){a.preventDefault()},a.updateNotifications=function(a){d.get(e.link+"notifications?status="+a).success(function(a){b.newNotifications=a.data})},a.parseLokation=function(a){var b;switch(a.type){case"add_user_to_class":b="/class/"+a.class_id+"/user/"+a.user_id+"/students";break;case"add_new_exam":b="/class/"+a.class_id+"/user/"+a.user_id+"/exams";break;case"add_new_assignment":b="/class/"+a.class_id+"/user/"+a.user_id+"/assignment";break;case"add_new_announcement":b="/class/"+a.class_id+"/user/"+a.user_id+"/announcments";break;case"add_new_poll":b="/class/"+a.class_id+"/user/"+a.user_id+"/polls";break;case"add_new_event":b="/class/"+a.class_id+"/user/"+a.user_id+"/events"}return b},a.readAllNotifications=function(){var a=[];b.newNotifications.forEach(function(b){a.push(b.id)}),d.put(e.link+"notifications",{notifications:a}).success(function(a){b.newNotifications=[],b.$broadcast("all-notifications-were-red")})},a.readNotification=function(g){g.status=1,b.$broadcast("notification-was-read",g),d.put(e.link+"notifications",{notifications:[g.id]}).success(function(b){a.updateNotifications(0)}),d.get(e.link+"class/"+g.class_id).success(function(b){f.setPickedClass(b.data),c.path(a.parseLokation(g))})},a.role=b.role,a.dialog=b.dialog}}}]),angular.module("classDigApp").controller("notificationsController",["$scope","$rootScope","appSettings","$log","Chat","$uibModal","Users","$timeout","AllClasses","$routeParams","$location","chatTitle","moment","Upload","ChatGroups","$http","classData",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a.init=function(){a.updateNotifications(1)},a.parseLokation=function(a){var b;switch(a.type){case"add_user_to_class":b="/class/"+a.class_id+"/user/"+a.user_id+"/students";break;case"add_new_exam":b="/class/"+a.class_id+"/user/"+a.user_id+"/exams";break;case"add_new_assignment":b="/class/"+a.class_id+"/user/"+a.user_id+"/assignment";break;case"add_new_announcement":b="/class/"+a.class_id+"/user/"+a.user_id+"/announcments";break;case"add_new_poll":b="/class/"+a.class_id+"/user/"+a.user_id+"/polls";break;case"add_new_event":b="/class/"+a.class_id+"/user/"+a.user_id+"/events"}return b},a.merjNotifications=function(){b.newNotifications&&a.notifications&&b.newNotifications.forEach(function(b){var c=a.notifications.find(function(a){return a.id===b.id});c||a.notifications.unshift(b)})},b.$watch("newNotifications",function(){a.merjNotifications()}),a.$on("all-notifications-were-red",function(){a.updateNotifications(1)}),a.updateNotifications=function(d){p.get(c.link+"notifications?status="+d).success(function(c){0===d?b.newNotifications=c.data:1===d&&(a.notifications=c.data,a.merjNotifications())})},a.$on("notification-was-read",function(b,c){var d=a.notifications.find(function(a){return a.id===c.id});d&&(d.status=1)}),a.readNotification=function(b){1!==b.status&&(b.status=1,p.put("http://api.classdig.oyihost.com/notifications",{notifications:[b.id]}).success(function(b){a.updateNotifications(0)}),p.get(c.link+"class/"+b.class_id).success(function(c){q.setPickedClass(c.data),k.path(a.parseLokation(b))}))}}]),angular.module("classDigApp").controller("settingsController",["$scope","$rootScope","appSettings","$log","Chat","$uibModal","Users","$timeout","AllClasses","$routeParams","$location","chatTitle","moment","Upload","ChatGroups","$http",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.role=b.user.data.role,a.selectedEN=!0,b.$watch("notificationsEnabled",function(){h(function(){$("#myonoffswitch").prop("checked",b.notificationsEnabled)})}),b.$watch("protectedEnable",function(){h(function(){$("#myonoffswitch1").prop("checked",b.protectedEnable)})}),$(document).ready(function(){$(document).on("mouseenter",".controll-button",function(){$(this).find(".inside-menu").show()}).on("mouseleave",".controll-button",function(){$(this).find(".inside-menu").hide()})}),p.get(c.link+"behavior/"+b.user.data.id).success(function(b){b.data[4].image="images/behavior/bad_behaviour_13@2x.png",b.data[5].image="images/behavior/bad_behaviour_12@2x.png",b.data[6].image="images/behavior/bad_behaviour_11@2x.png",b.data[7].image="images/behavior/bad_behaviour_10@2x.png",a.behaviours=b.data,console.log(b.data)}),a.$on("new-category-created",function(){p.get(c.link+"behavior/"+b.user.data.id).success(function(b){a.behaviours=b.data})}),p.get(c.link+"user/classes").success(function(b){a.listOfClasses=b.data,a.users=b.data}),p.get(c.link+"gradable/item").success(function(b){a.gradableItems=b.data}),a.showListOfClasses=!0,a.showListOfGradableItems=!1,a.$watch("classIdForGradableItems",function(){a.selectedClassId=a.classIdForGradableItems,a.classIdForGradableItems?(a.showListOfClasses=!1,a.showListOfGradableItems=!0):(a.showListOfClasses=!0,a.showListOfGradableItems=!1)}),a.iconArrowBack="images/files-library/icon-arrow-back-"+b.user.data.role+".svg",a.backToListOfClasses=function(){a.classIdForGradableItems=void 0},a.selectLanguage=function(b){"EN"===b?(a.selectedEN=!0,a.selectedAR=!1):"AR"===b&&(a.selectedEN=!1,a.selectedAR=!0)},a.notificationsEnable=function(){b.notificationsEnabled=!b.notificationsEnabled,p.put(c.link+"/user-settings",{notifications:b.notificationsEnabled})},a.protectedEnable=function(){b.protectedEnable=!b.protectedEnable,p.put(c.link+"/user-settings",{protected_follow:b.protectedEnable})},a.openAreUSureModal=function(b){f.open({templateUrl:"components/classes/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.editBehavior=function(a){f.open({templateUrl:"components/class/dashboard/behaviour/newBehaviorTypeModal/newBehaviorTypeModal.html",controller:"newBehaviorTypeModal",controllerAs:"$ctrl",resolve:{items:a}})},a.deleteBehavior=function(d){a.modalContext={action:"deleteBehavior",actionTitle:"delete",behavior:d},a.openAreUSureModal("sm"),b.$on("deleteBehavior",function e(){p({method:"delete",url:c.link+"behavior/"+d.id,headers:{"Content-Type":"application/json"}}).success(function(b){var c=a.behaviours.find(function(a){return a.id===d.id}),e=a.behaviours.indexOf(c);a.behaviours.splice(e,1)}).error(function(){}),b.$$listeners.deleteBehavior=[e],b.$$listeners.deleteBehavior.splice(0,1)})}}]),angular.module("classDigApp").controller("announcmentsController",["$scope","$rootScope","$uibModal","$log","$document","appSettings","$http","$routeParams","Announcement","$timeout","$q",function(a,b,c,d,e,f,g,h,i,j,k){function l(){g.get(f.link+"announcement?search=class_id:"+h.classId).success(function(b){0!==b.data.length?(a.pollsExist=!0,$("#announcement-loader").hide()):(a.pollsNotExist=!0,$("#announcement-loader").hide())}).error(function(b){a.pollsNotExist=!0,$("#announcement-loader").hide()})}function m(a){for(var c="notSeen",d=0;d<a.length;d++)a[d].id===b.user.data.id&&(c="seen");return c}function n(b){for(var c=$("#announcementList").height(),d=p;d<a.announcementList.items.length;d++){var e="#"+d,h=($("#announcementList").offset().top,$(e).offset().top+$(e).height()-$("#announcementList").offset().top);if(c>h&&"notSeen"===m(a.announcementList.items[d].seen_by)&&"ok"!==a.announcementList.items[d].seen){a.announcementList.items[d].id;a.announcementList.items[d].seen="ok",g({url:f.link+"announcement/"+a.announcementList.items[d].id,method:"POST"}).then(function(a){},function(a){})}}}var o=this;b.activeClassItem=11,b.userData={role:b.user.data.role,background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",userListBorder:b.user.data.role+"-userListBorder",announcementPage:b.user.data.role+"-announcement-page",pollBorder:b.user.data.role+"-poll-border"},a.selection={selectedItems:[],currentItem:[]},a.announcementPage=b.user.data.role+"-announcement-page",a.hideCustomButton=!0,b.$on("class-data-was-received",function(){if(b.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&b.user.classData.owner!==b.user.data.id&&(a.hideCustomButton=!0),b.user.classData.owner===b.user.data.id)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].active=!0}),a.data={items:[],onGlobalButtonClick:function(){}},a.contextMenu={items:[{img:"images/context_menu/icon-edit-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-edit-default_3x.png",imgHover:"images/context_menu/icon-edit-hover_3x.png",state:!1,active:!0,text:"Edit",multiSelect:!1,click:a.editAnnouncement},{img:"images/context_menu/icon-delete-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,active:!0,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"],context:a.selection.selectedItems,click:a.deleteArrayOfAnnouncements}]},a.pollsExist=!1,a.pollsNotExist=!1,a.announcementList=new i,l(),a.formatDataCreate=function(a){return moment(a).format("D MMM H.mm")},b.$on("deleteFromAnnouncementList",function q(c,e){d.log("--lll---",a.announcementList.items),d.log("--pollId---",e),b.$$listeners.deleteFromAnnouncementList=[q];for(var f=0;f<e.length;f++)for(var g=0;g<a.announcementList.items.length;g++)a.announcementList.items[g].id===e[f]&&a.announcementList.items.splice(a.announcementList.items[g],1);a.selection.selectedItems=[],a.selection.currentItem=[],console.log(b.$$listeners.deleteFromAnnouncementList)}),o.animationsEnabled=!0,o.openModal=function(a,b){var d=b?angular.element(e[0].querySelector(".modal-demo "+b)):void 0;c.open({animation:o.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/announcments/announcementsModal/announcementsModal.html",controller:"announcementsModalInstanceCtrl",controllerAs:"$ctrl",size:a,appendTo:d,resolve:{items:function(){return o.items}}})},a.openAreUSureModal=function(b){c.open({animation:o.animationsEnabled,templateUrl:"components/class/dashboard/announcments/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.editAnnouncement=function(a){d.log(a);c.open({animation:o.animationsEnabled,templateUrl:"components/class/dashboard/announcments/announcementsModal/announcementsModal.html",controller:"announcementsModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a}}})},b.$on("announcement-changed",function(){a.announcementList.reinitialize(),a.selection.selectedItems=[],a.selection.currentItem=[],a.activeAnnouncement=null,a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!1,a.showButtonSelection=!1}),a.activateAnnouncement=function(a){a="#"+a,$(".poll-list").removeClass(b.userData.pollBorder),$(a).addClass(b.userData.pollBorder)},a.deleteArrayOfAnnouncements=function(c){a.deletingInProgress=!0,a.modalContext={action:"deleteAnnouncements",actionTitle:"delete"},a.openAreUSureModal("sm"),b.$on("deleteAnnouncements",function(){if(a.deletingInProgress){a.deletingInProgress=!1,d.log("selectedItems",c),a.promises=[];for(var e=0;e<c.length;e++)a.promises.push(g({method:"DELETE",url:f.link+"announcement/"+c[e],headers:{"Content-Type":"application/json"},data:{id:c[e]}}));console.log(a.promises),k.all(a.promises).then(function(){console.log("all resolved"),b.$broadcast("deleteFromAnnouncementList",c)})}})},a.$on("createAnnouncement",function(b,c){d.log("createAnnouncement:",c),a.pollsExist=!0,a.pollsNotExist=!1,a.announcementList.reinitialize()}),a.selectionWasChanged=function(){j(function(){if(console.log("sel - >",a.selection.currentItem[0],a.selection.selectedItems),a.selection.currentItem[0]&&(a.activeAnnouncement=a.selection.currentItem[0],a.activeAnnouncement.seem_by="Seen by",b.$broadcast("arrayOfSeenBy",a.activeAnnouncement)),a.selection.currentItem[0]?a.showButtonSelection=!0:a.showButtonSelection=!1,1===a.selection.selectedItems.length)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!0,0===a.selection.currentItem[0].seen_by.length?a.contextMenu.items[0].state=!0:a.contextMenu.items[0].state=!1,a.contextMenu.items[0].context=a.selection.currentItem[0];else if(0===a.selection.selectedItems.length)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!1;else a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!0})};var p=0;$(document).ready(function(){$("#announcementList").bind("scroll",n),j(function(){for(var b=$("#announcementList").height(),c=0;c<a.announcementList.items.length;c++){var d="#"+c,e=$(d).offset().top+$(d).height()-$("#announcementList").offset().top;if(!(b>e))return;p=c,"notSeen"===m(a.announcementList.items[c].seen_by)&&g({url:f.link+"announcement/"+a.announcementList.items[c].id,method:"POST"}).then(function(a){},function(a){})}},8e3)})}]).factory("Announcement",["$http","appSettings","$routeParams",function(a,b,c){var d=function(){this.items=[],this.busy=!1,this.after=""};return d.prototype.reinitialize=function(){this.items=[],this.busy=!1,this.after="",this.nextPage()},d.prototype.nextPage=function(){if(!this.busy){this.busy=!0,$("#announcement-loader").show();var d=b.link+"announcement?search=class_id:"+c.classId+"&page="+this.after;a.get(d).success(function(a){if(0!==a.data.length){for(var b=a.data,c=0;c<b.length;c++){b[c];this.items.push(b[c])}if(this.after=a.meta.pagination.current_page+1,a.meta.pagination.total_pages===a.meta.pagination.current_page)return void $("#announcement-loader").hide();$("#announcement-loader").hide(),this.busy=!1}}.bind(this))}},d}]),angular.module("classDigApp").controller("announcementsModalInstanceCtrl",["$uibModalInstance","$scope","$routeParams","$rootScope","Upload","appSettings","$http","$timeout","$log","items",function(a,b,c,d,e,f,g,h,i,j){var k=this;void 0===j?(b.newAnnouncement={title:"",class_id:c.classId,description:"",participants:[]},this.modalConstant={header:"Create Announcement",buttonSubmit:"ADD ANNOUNCEMENT"}):(b.newAnnouncement=angular.copy(j),this.modalConstant={header:"Update Announcement",buttonSubmit:"UPDATE ANNOUNCEMENT"}),b.createPollModal=!0,b.addVoters=!1,b.addVoteParticipants=function(){b.createPollModal=!0,b.addVoters=!1,b.userRole="users",d.$broadcast("userRoleChanged",b.userRole);var a=$.map(b.selectedUsers,function(a,b){return[a.id]});b.newAnnouncement.participants=a},b.cancelVoteParticipants=function(){b.createPollModal=!0,b.addVoters=!1},b.showParticipantsList=function(){b.createPollModal=!1,b.addVoters=!0},b.userRole="users",k.cancel=function(){a.dismiss("cancel")},k.ok=function(){if(void 0===j)g({url:f.link+"announcement",method:"POST",data:b.newAnnouncement}).then(function(c){d.$broadcast("createAnnouncement",b.newAnnouncement),a.close()},function(a){b.formSubmitted=!0});else{if(b.newAnnouncement.participants[0].id){for(var c=[],e=0;e<b.newAnnouncement.participants.length;e++)c.push(b.newAnnouncement.participants[e].id);b.newAnnouncement.participants=c}g({url:f.link+"announcement/"+b.newAnnouncement.id,method:"PUT",data:b.newAnnouncement}).then(function(b){a.close(),d.$broadcast("announcement-changed")},function(a){b.formSubmitted=!0})}}}]),angular.module("classDigApp").controller("assignmentController",["$scope","$rootScope","$uibModal","$log","$document","$http","appSettings","$routeParams","Assignment","$timeout",function(a,b,c,d,e,f,g,h,i,j){var k=this;b.activeClassItem=5,a.examExist=!1,a.examNotExist=!1,a.role=b.user.data.role,a.assignment=new i,a.hideCustomButton=!0,b.$on("class-data-was-received",function(){if(b.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&b.user.classData.owner!==b.user.data.id&&(a.hideCustomButton=!0),b.user.classData.owner===b.user.data.id)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].active=!0}),f({url:g.link+"assignment?search=class_id:"+h.classId,method:"GET"}).then(function(b){0!==b.data.data.length?a.examExist=!0:(a.examNotExist=!0,$("#user-loader").hide())},function(b){a.examNotExist=!0}),a.changeDateFormat=function(a,b){var c=moment(a,"YYYY-MM-DD").format("D MMM");return c+" "+b},b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},a.selection={selectedItems:[],currentItem:[]},a.userId=b.user.data.id,a.data={items:[],onGlobalButtonClick:function(){}},a.contextMenu={items:[{img:"images/context_menu/icon-edit-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-edit-default_3x.png",imgHover:"images/context_menu/icon-edit-hover_3x.png",state:!1,active:!1,text:"Edit",multiSelect:!1,click:a.editAssignment},{img:"images/context_menu/icon-delete-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,active:!1,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"],click:a.deleteArrayOfAssignments,context:a.selection.selectedItems}]},a.$on("changeAssignment",function(b,c){d.log("New assignment:",c),d.log("list000",a.assignment.items),a.assignment.items.unshift(c.data.data),a.examExist=!0,a.examNotExist=!1}),a.$on("updateAssignment",function(b,c){d.log("--lll---",a.assignment.items);for(var e=0;e<a.assignment.items.length;e++)a.assignment.items[e].id===c.id&&(a.assignment.items[e]=c);a.selection={selectedItems:[],currentItem:[]}}),a.$on("submitAssignmentByStudent",function(b,c,e){d.log("submitAssignmentByStudent:",c),a.buttonSubmitByStudent="Submit assignment",f({url:g.link+"assignment?search=class_id:"+h.classId,method:"GET"}).then(function(b){console.log(b.data.data.filter(function(a){return a.id==c}));var d=b.data.data.filter(function(a){return a.id==c});a.assignment.items[e]=d[0]},function(b){a.AssignmentServerError=!0})}),a.$on("DeleteAssignmentFromList",function(b,c){for(var d=0;d<a.assignment.items.length;d++)a.assignment.items[d].id===c&&a.assignment.items.splice(a.assignment.items[d],1)}),a.openAreUSureModal=function(b){c.open({animation:k.animationsEnabled,templateUrl:"components/class/dashboard/assignment/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.deleteArrayOfAssignments=function(c){d.log("deleteAssignment",c),a.modalContext={action:"deleteFiles",actionTitle:"delete",selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("deleteFiles",function(){d.log("selectedItems",c);for(var e=0;e<c.length;e++)a.curenItemDeleteId=c[e],d.log("selectedItems",c[e]),f({method:"DELETE",url:g.link+"assignment/"+c[e],headers:{"Content-Type":"application/json"},data:{id:c[e]}}).success(function(c){d.log("all good",c),b.$broadcast("DeleteAssignmentFromList",a.curenItemDeleteId)}).error(function(){})})},a.editAssignment=function(a){c.open({templateUrl:"components/class/dashboard/assignment/assignmentModal/assignmentModal.html",controller:"assignmentModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a}}})},a.filterSubmittedParticipants=function(a){function b(a){return 1==a.submission}var c=[];c=a.filter(b);var d=c.map(function(a){var b={};return b.image=a.user.image,b});return d},a.getSubmitButtonValue=function(a){a.disableSubmitButton=!1;for(var c=a.participants,d="",e=new Date-new Date((a.due_date+" "+a.due_time_24).replace(/-/g,"/")),f=0;f<c.length;f++)if(c[f].user.id==b.user.data.id){var g=c[f];1===g.submission?0===g.files.length?(d="Your assignment has been submitted",a.disableSubmitButton=!0):0>e?d="edit":(d="Due date has passed",a.disableSubmitButton=!0):d="submit"}return d},a.submitAssignment=function(a,b,d,e){new Date-new Date((e.due_date+" "+e.due_time_24).replace(/-/g,"/"));if(!e.disableSubmitButton){c.open({templateUrl:"components/class/dashboard/assignment/assignmentModal/submitAssignmentModal.html",controller:"submitAssignmentModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a},assignmentId:function(){return b},index:function(){return d},assign:function(){return e}}})}},a.markAssignment=function(a){if(0!==a.files.length){c.open({templateUrl:"components/class/dashboard/assignment/assignmentModal/markAssignment/markAssignment.html",controller:"markAssignmentModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a}}})}},k.animationsEnabled=!0,k.openModal=function(a,b){var d=b?angular.element(e[0].querySelector(".modal-demo "+b)):void 0;c.open({animation:k.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/assignment/assignmentModal/assignmentModal.html",controller:"assignmentModalInstanceCtrl",controllerAs:"$ctrl",size:a,appendTo:d,resolve:{items:function(){return k.items}}})},a.selectionWasChanged=function(b){j(function(){if(1===a.selection.selectedItems.length){a.hideButton=!0;for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].state=!0,a.contextMenu.items[0].context=a.selection.currentItem[0]}else if(0===a.selection.selectedItems.length){a.hideButton=!1;for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].state=!1}else a.hideButton=!0,a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!0})},a.checkHandSubmission=function(b){a.selection={selectedItems:[],currentItem:[]};c.open({templateUrl:"components/class/dashboard/assignment/assignmentModal/handSubmissionModal/handSubmissionModal.html",controller:"handSubmissionModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return b}}})}}]).factory("Assignment",["$http","appSettings","$routeParams",function(a,b,c){var d=function(){this.items=[],this.busy=!1,this.after=""};return d.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var d=b.link+"assignment?search=class_id:"+c.classId+"&page="+this.after;a.get(d).success(function(a){if(0!==a.data.length){for(var b=a.data,c=0;c<b.length;c++)this.items.push(b[c]);if(this.after=a.meta.pagination.current_page+1,a.meta.pagination.total_pages===a.meta.pagination.current_page)return void $("#user-loader").hide();this.busy=!1,$("#user-loader").hide()}}.bind(this))}},d}]),angular.module("classDigApp").controller("assignmentModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){for(var c=0;c<a.length;c++)d({url:e.link+"upload/"+a[c],method:"DELETE"}).then(function(a){},function(a){b.ExamServerError=!0})}b.AssignmentServerError=!1,i(function(){$(".datetimepickerDate").datetimepicker({format:"LL",minDate:new Date}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .active").addClass("bg-"+b.role).css({border:"none",color:"white"}),$(".bootstrap-datetimepicker-widget .today").toggleClass(""+b.role)}).val(b.monthDate),$(".datetimepickerTimeFrom").datetimepicker({format:"LT"}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .btn-primary").addClass("bg-"+b.role).css({border:"none"}),$(".bootstrap-datetimepicker-widget .btn :not(.btn-primary)").addClass("c-"+b.role)})}),b.format="MMMM Do YYYY",void 0===g?(b.assignment={},b.assignment.class_id=f.classId,b.assignment.due_date=new Date,b.assignment.due_time=new Date,b.assignment.priority=2,b.assignment.color="#a7687f",b.assignment.reminder=-1,b.assignment.attachments=[],b.assignment.partisipants=[],b.assignment.hand_submission=1,b.hand_submission=!0,b.ArrayOfUploadFiles=[],
b.assignment.due_time=moment(b.assignment.due_time).format("LT"),this.modalConstant={header:"Create new assignment",buttonSubmit:"CREATE ASSIGNMENT"},setTimeout(function(){b.monthDate=b.assignment.due_date},5e3)):(b.assignment=angular.copy(g),b.assignment.due_time=moment(b.assignment.due_time,"hh:mm:ss").format("LT"),b.monthDate=b.assignment.due_date,b.ArrayOfUploadFiles=b.assignment.attachments.map(function(a){var b={};return b.name=a.filename,b.id=a.id,b}),b.hand_submission=!!b.assignment.hand_submission,b.assignment.attachments=k.pluck(b.assignment.attachments,"id"),setTimeout(function(){b.functionCheckPriority(b.assignment.priority)},300),this.modalConstant={header:"Update assignment",buttonSubmit:"UPDATE ASSIGNMENT"}),b.options=[{id:0,option:"Never",val:-1},{id:1,option:"At time of exam",val:0},{id:2,option:"5 minutes before",val:5},{id:3,option:"10 minutes before",val:10},{id:4,option:"15 minutes before",val:15},{id:5,option:"30 minutes before",val:30},{id:6,option:"1 hour before",val:60},{id:7,option:"2 hours before",val:120},{id:8,option:"1 day before",val:1440},{id:9,option:"2 days before",val:2880},{id:10,option:"1 week before",val:10080},{id:11,option:"2 weeks before",val:20160}],setTimeout(function(){b.hand_submission===!0&&angular.element("#myonoffswitch").attr("checked",!0)},300),b.hand_submission===!0&&angular.element("#myonoffswitch").attr("checked",!0),b.functionCheckHandSubmission=function(){b.hand_submission=!b.hand_submission},b.functionCheckPriority=function(a){b.assignment.priority=a,angular.element(".priority-item").removeClass("priority-item-active"),angular.element(".priority-item").removeClass(c.userData.background),angular.element("#"+a).addClass("priority-item-active"),angular.element("#"+a).addClass(c.userData.background)},b.assignment.due_date=moment(b.assignment.due_date).format("LL"),b.monthDate=b.assignment.due_date,b.UploadFileHeight=-20,b.$watch("UploadFile",function(){b.UploadFile&&(b.uploadFile(b.UploadFile),b.UploadFileHeight+=10)}),b.$watch("assignment",function(){b.ExamServerError=!1}),b.uploadFile=function(a){a.upload=h.upload({url:e.link+"upload",data:{file:a}}),a.upload.then(function(c){a.result=c.data;var d={};d.id=c.data.data.id,d.name=a.name,b.ArrayOfUploadFiles[0]=d,b.assignment.attachments[0]=d.id},function(a){a.status>0&&(b.errorMsg=a.status+": "+a.data,b.ExamServerError=!0,setTimeout(function(){b.ExamServerError=!1},5e3))},function(c){a.progress=Math.min(100,parseInt(100*c.loaded/c.total)),b.progressNumber=a.progress})},b.arrayOfFilesToDelete=[],b.DeleteFileFromSyllabus=function(a){var c=$(a.target).parent().attr("id");b.arrayOfFilesToDelete.push(+c),b.assignment.attachments=k.filter(b.assignment.attachments,function(a){return a!=c}),b.ArrayOfUploadFiles=k.filter(b.ArrayOfUploadFiles,function(a){return a.id!=c}),$(a.target).parent().remove()},b.cancel=function(){a.dismiss("cancel")},b.ok=function(){b.assignment.hand_submission=+b.hand_submission,b.assignment.due_date=moment(b.monthDate,b.format).format("YYYY-MM-DD"),b.assignment.note||(b.assignment.note="no notes"),void 0===g?d({url:e.link+"assignment",method:"POST",data:b.assignment}).then(function(b){c.$broadcast("changeAssignment",b),a.close()},function(a){b.AssignmentServerError=!0;var c=a.data.errors,d=c[Object.keys(c)[0]];$(".exam-server-error").html(d)}):(b.assignment.participants=[],d({url:e.link+"assignment/"+b.assignment.id,method:"PUT",data:b.assignment}).then(function(d){l(b.arrayOfFilesToDelete),j.log(d.data.data),c.$broadcast("updateAssignment",d.data.data),a.close()},function(a){b.AssignmentServerError=!0,$(".exam-server-error").html(a)}))}}]),angular.module("classDigApp").controller("submitAssignmentModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_","assignmentId","index","assign",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.AssignmentServerError=!1,void 0===g?(b.assignmentSubmit={},b.assignmentSubmit.user_ids=[],b.assignmentSubmit.user_ids[0]=c.user.data.id,b.assignmentSubmit.file_ids=[],b.ArrayOfUploadFiles=[],this.modalConstant={header:"Submit assignment"}):(b.assignmentSubmit=angular.copy(g),b.ArrayOfUploadFiles=b.assignmentSubmit.file_ids.map(function(a){var b={};return b.name=a.filename,b.id=a.id,b}),b.hand_submission=!!b.assignment.hand_submission,b.assignment.attachments=k.pluck(b.assignment.attachments,"id"),setTimeout(function(){b.functionCheckPriority(b.assignment.priority)},300),this.modalConstant={header:"Update assignment"});for(var o=0;o<n.participants.length;o++)if(n.participants[o].id===c.user.data.id&&n.participants[o].files.length>0){var p=n.participants[o].files[n.participants[o].files.length-1];b.ArrayOfUploadFiles=[];var q={};q.name=p.filename,q.id=p.id,b.ArrayOfUploadFiles.push(q),b.assignmentSubmit.file_ids.push(p.id),b.assignmentSubmit.note=n.participants[o].user_note,this.modalConstant={header:"Update assignment"}}b.UploadFileHeight=-20,b.$watch("UploadFile",function(){b.UploadFile&&(b.uploadFile(b.UploadFile),b.UploadFileHeight+=10)}),b.uploadFile=function(a){a.upload=h.upload({url:e.link+"upload",data:{file:a}}),a.upload.then(function(c){a.result=c.data;var d={};d.id=c.data.data.id,d.name=a.name,b.ArrayOfUploadFiles[0]=d,b.assignmentSubmit.file_ids[0]=d.id},function(a){a.status>0&&(b.errorMsg=a.status+": "+a.data,b.ExamServerError=!0,setTimeout(function(){b.ExamServerError=!1},5e3))},function(c){a.progress=Math.min(100,parseInt(100*c.loaded/c.total)),b.progressNumber=a.progress})},b.arrayOfFilesToDelete=[],b.DeleteFileFromSyllabus=function(a){var c=$(a.target).parent().attr("id");b.arrayOfFilesToDelete.push(+c),b.exam.attachments=k.filter(b.exam.attachments,function(a){return a!=c}),b.ArrayOfUploadFiles=k.filter(b.ArrayOfUploadFiles,function(a){return a.id!=c}),$(a.target).parent().remove()},b.cancel=function(){a.dismiss("cancel")},b.ok=function(){return 0===b.assignmentSubmit.file_ids.length?void(b.AssignmentServerError=!0):void(void 0===g&&d({url:e.link+"assignment/"+l+"/user",method:"PATCH",data:b.assignmentSubmit}).then(function(b){a.close(),c.$broadcast("submitAssignmentByStudent",l,m)},function(a){b.AssignmentServerError=!0}))}}]),angular.module("classDigApp").controller("markAssignmentModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){b.AssignmentServerError=!1,b.currentStudent=g,b.cancel=function(){a.dismiss("cancel")},b.ok=function(){a.close()}}]),angular.module("classDigApp").controller("handSubmissionModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){return 0===a.submission}function m(a){return 1===a.submission}b.AssignmentServerError=!1,b.assignment=g,b.notSubmittedStudent=b.assignment.participants,b.notSubmittedStudent=b.notSubmittedStudent.filter(l),b.SubmittedStudent=b.assignment.participants,b.SubmittedStudent=b.SubmittedStudent.filter(m),b.checkHandSubmission=!0,b.cancel=function(){a.dismiss("cancel")},b.ok=function(){function c(a){for(var b=0;b<f.length;b++)a.id==f[b]&&(a.submission=1);return!0}var f=Object.keys(b.selectedUsers);b.newSubmittedStudent=b.assignment.participants,b.newSubmittedStudent=b.newSubmittedStudent.filter(c);var g=[];g=b.newSubmittedStudent;for(var h=0;h<f.length;h++){var i={};i.user_ids=[],i.user_ids.push(f[h]),i.file_ids=[],i.note="hand submission",d({url:e.link+"assignment/"+b.assignment.id+"/user",method:"PATCH",data:i}).then(function(a){},function(a){b.AssignmentServerError=!0})}a.close()}}]),angular.module("classDigApp").directive("childCheckAssignment",["$timeout",function(a){return{scope:{membersArray:"=",fileArray:"="},templateUrl:"components/class/dashboard/assignment/assignmentDirectives/childCheckAssignment/childCheckAssignment.html",controller:["$scope","$rootScope",function(b,c){b.role=c.userData.role,b.checkChildSubmitAssignment=function(a){for(var c=!1,d=0;d<b.fileArray.length;d++)b.fileArray[d].id===a.id&&b.fileArray[d].files.length>0&&(c=!0);return c},b.background=c.userData.background,a(function(){})}]}}]),angular.module("classDigApp").directive("studentCheckAssignment",["$timeout",function(a){return{scope:{membersArray:"=",fileArray:"=",fontColor:"="},templateUrl:"components/class/dashboard/assignment/assignmentDirectives/studentCheckAssignment/studentCheckAssignment.html",controller:["$scope","$rootScope",function(b,c){b.role=c.userData.role,b.currentId=c.user.data.id,b.checkSubmitAssignment=function(){b.submittedArray=0;for(var a=0;a<b.fileArray.length;a++)1===b.fileArray[a].submission&&b.fileArray[a].id!==b.currentId&&b.submittedArray++;return b.submittedArray},b.checkNotSubmitAssignment=function(){b.notsubmittedArray=0;for(var a=0;a<b.fileArray.length;a++)0===b.fileArray[a].submission&&b.fileArray[a].id!==b.currentId&&b.notsubmittedArray++;return b.notsubmittedArray},b.background=c.userData.background,a(function(){})}]}}]),app.controller("attendanceController",["$scope","$http","$routeParams","appSettings","uiCalendarConfig","$rootScope","$log","$timeout",function(a,b,c,d,e,f,g,h){a.role=f.user.data.role,a.hideCustomButton=!0,f.$on("class-data-was-received",function(){if(f.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===f.role&&f.user.classData.owner!==f.user.data.id&&(a.hideCustomButton=!0),Array.isArray(f.user.classData.members)){a.arrayOfChildrenId=[];var b=f.user.classData.members[0].first_name;a.pickedChildId=f.user.classData.members[0].id;for(var c=0;c<f.user.classData.members.length;c++)a.arrayOfChildrenId.push(f.user.classData.members[c].first_name);h(function(){a.childName=b,a.changeChildren(a.childName)})}}),a.students=[],a.pickedStudents=[],a.attendanceList=[],f.activeClassItem=2,a.attendance=[],a.lateIcon="images/usersList/timer-circle.svg",a.absentIcon="images/usersList/cross-circle.svg",a.presentIcon="images/usersList/checked-circle.svg",a.requestDateFormat="YYYY/MM/DD",a.attendanceViewIsActive=!0;var i=c.classId,j=f.user.data.id;a.selectedDate=null,a.datatime=new Date,a.configChart={attendanceLabels:["Present","Late","Absent"],attendanceBackgroundColor:["#1ea66d","#ffc600","#f93640"],options:{tooltips:{enabled:!1},animation:{duration:0},legend:{display:!1},line:{borderWidth:0},elements:{arc:{borderWidth:0}}}},a.role=f.user.data.role,a.changeChildren=function(b){a.childName=b,a.countClass=0,angular.element(".children").css("border-bottom","2px solid white"),angular.element("#"+b).css("border-bottom","2px solid rgb(207, 81, 93)");for(var c=0;c<f.user.classData.members.length;c++)if(f.user.classData.members[c].first_name==a.childName){a.childName;a.pickedChildId=f.user.classData.members[c].id,a.pickedChild=f.user.classData.members[c],a.$broadcast("picked-child-attendance",a.pickedChild)}},a.parseResponse=function(b){a.presentStudents=[],a.lateStudents=[],a.absentStudents=[],a.listAttendance=[0,0,0];for(var c=0;c<b.length;c++)1==b[c].type?(a.presentStudents.push(b[c]),a.listAttendance[0]++):2==b[c].type?(a.absentStudents.push(b[c]),a.listAttendance[2]++):3==b[c].type&&(a.lateStudents.push(b[c]),a.listAttendance[1]++)},a.getTodayAttendance=function(){b.get(d.link+"class/"+i+"/attendance?date="+a.selectedDate).success(function(b){a.students=b.data,a.parseResponse(b.data)}).error(function(){g.info("Code: "+data.status_code+"; Message: "+data.message)})},a.$watch("datatime",function(b){angular.element(document.getElementById("dropdown-controller")).removeClass("open"),angular.element(document.querySelector(".dropdown-backdrop")).removeClass("dropdown-backdrop"),$("#dLabel").attr("aria-expanded",!1),a.selectedDate=moment(b).format(a.requestDateFormat),a.slectedMonth=moment(b).format("MMMM"),a.slectedDay=moment(b).format("dddd"),a.selectedDate>moment(new Date).format(a.requestDateFormat)?a.dateIsAhead=!0:a.dateIsAhead=!1,a.getTodayAttendance(),a.pickedStudents.splice(0,a.pickedStudents.length)}),f.$on("student-was-selected-in-attendance",function k(c,e){var g=moment(a.selectedDate).format("YYYY-MM")+"-01",h=moment(g,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat);b.get(d.link+"class/"+i+"/user/"+e.id+"/attendance/report?from="+g+"&to="+h).success(function(a){for(var b=[0,0,0],c=0;c<a.data.length;c++)1==a.data[c].type?b[0]++:2==a.data[c].type?b[2]++:3==a.data[c].type&&b[1]++;e.listAttendance=b,e.from=g,e.to=h}),f.$$listeners["student-was-selected-in-attendance"]=[k]}),a.pushToAttendanceList=function(){for(var b=0;b<a.pickedStudents.length;b++){var c={user_id:a.pickedStudents[b].id,date:a.selectedDate,type:a.pickedStudents[b].type};if(a.attendanceList.length)for(var d=0;d<a.attendanceList.length;d++)a.pickedStudents[b].id===a.attendanceList[d].user_id&&a.attendanceList.splice(d,1);a.attendanceList.push(c)}},a.addStudentStatus=function(c){switch(c){case"late":a.pickedStudents.forEach(function(a){a.type=3});break;case"absent":a.pickedStudents.forEach(function(a){a.type=2});break;case"present":a.pickedStudents.forEach(function(a){a.type=1})}for(var e=0;e<a.students.length;e++)for(var f=0;f<a.pickedStudents.length;f++)a.students[e].id===a.pickedStudents[f].id&&(a.students[e].type=a.pickedStudents[f].type);a.pushToAttendanceList();for(var e=0;e<a.students.length;e++)a.students[e].state=!1;a.pickedStudents.splice(0,a.pickedStudents.length),b.post(d.link+"/class/"+i+"/attendance",{users:a.attendanceList}).success(function(){a.getTodayAttendance()}).error(function(){})},$(document).ready(function(){$(document).on("mouseenter",".button-inside",function(){$(this).find(".img-hover").show()}).on("mouseleave",".button-inside",function(){$(this).find(".img-hover").hide()})}),a.data={items:[{img:"images/usersList/button-late.svg",imgHover:"images/usersList/timer-circle.svg",text:"Late",click:a.addStudentStatus,params:"late"},{img:"images/usersList/button-absent.svg",imgHover:"images/usersList/cross-circle.svg",text:"Absent",click:a.addStudentStatus,params:"absent"},{img:"images/usersList/button-present.svg",imgHover:"images/usersList/checked-circle.svg",text:"Present",click:a.addStudentStatus,params:"present"}],onGlobalButtonClick:null},"parent"==a.role?(a.parseDate=function(b,c){if(!b||!c||b.id||c.id)a.lastFromDate?(a.fromDate=moment(a.lastFromDate).format("YYYY/MM")+"/01",a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)):(a.fromDate=moment(new Date).format("YYYY/MM")+"/01",a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat));else{var d=moment(b).format("MM"),e=moment(b).format("DD"),f=moment(c).format("MM");1!=e&&+f-+d!=1?(a.fromDate=moment(moment(b).format("YYYY")+"/"+(+d+1)+"/01").format(a.requestDateFormat),a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)):(a.fromDate=moment(b).format(a.requestDateFormat),a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat))}a.lastFromDate=a.fromDate,a.lastToDate=a.toDate,a.slectedMonth=moment(a.fromDate,a.requestDateFormat).format("MMMM")},a.getChildAttendance=function(c){b.get(d.link+"/class/"+i+"/user/"+a.pickedChild.id+"/attendance/report?from="+a.fromDate+"&to="+a.toDate).success(function(a){c(a.data)})},a.prepareEvents=function(b,c){var d=[];a.attendanceData=b,a.currentStudent={},a.currentStudent.first_name=a.pickedChild.first_name,a.currentStudent.last_name=a.pickedChild.last_name,a.currentStudent.photo=a.pickedChild.image;for(var e=[0,0,0],f=0;f<a.attendanceData.length;f++)d.push({start:new Date(a.attendanceData[f].date),allDay:!0,type:a.attendanceData[f].type});for(f=0;f<d.length;f++)1==d[f].type?(e[0]++,d[f].className="present"):2==d[f].type?(e[2]++,d[f].className="absent"):3==d[f].type&&(e[1]++,d[f].className="late");a.currentStudent.listAttendance=e,c(d)},a.events=function(a,b,c,d){d([])},a.$on("picked-child-attendance",function(){a.events2=function(b,c,d,e){a.parseDate(b,c),a.getChildAttendance(function(b){a.prepareEvents(b,function(a){e(a)})})},a.eventSources[1]=a.events2})):(a.parseDate=function(b,c){var d=moment(b).format("MM"),e=moment(b).format("DD"),f=moment(c).format("MM");1!=e&&+f-+d!=1?(a.fromDate=moment(moment(b).format("YYYY")+"/"+(+d+1)+"/01").format(a.requestDateFormat),a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)):(a.fromDate=moment(b).format(a.requestDateFormat),a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)),a.slectedMonth=moment(a.fromDate,a.requestDateFormat).format("MMMM")},a.getChildAttendance=function(c){b.get(d.link+"/class/"+i+"/user/"+j+"/attendance/report?from="+a.fromDate+"&to="+a.toDate).success(function(a){c(a.data)})},a.prepareEvents=function(b,c){var d=[];a.attendanceData=b,a.currentStudent={},a.currentStudent.first_name=f.user.data.details.data.first_name,a.currentStudent.last_name=f.user.data.details.data.last_name,a.currentStudent.photo=f.user.data.details.data.photo;for(var e=[0,0,0],g=0;g<a.attendanceData.length;g++)d.push({start:new Date(a.attendanceData[g].date),allDay:!0,type:a.attendanceData[g].type});for(g=0;g<d.length;g++)1==d[g].type?(e[0]++,d[g].className="present"):2==d[g].type?(e[2]++,d[g].className="absent"):3==d[g].type&&(e[1]++,d[g].className="late");a.currentStudent.listAttendance=e,c(d)},a.events=function(b,c,d,e){a.parseDate(b,c),a.getChildAttendance(function(b){a.prepareEvents(b,function(a){e(a)})})}),a.uiConfig={calendar:{height:"auto",editable:!1,header:{left:"prev",center:"title",right:"next"},eventClick:a.alertOnEventClick,eventDrop:a.alertOnDrop,eventResize:a.alertOnResize,eventRender:a.eventRender}},a.eventSources=[a.events]}]),app.controller("behaviourController",["$scope","$rootScope","$http","appSettings","$uibModal","$routeParams","uiCalendarConfig","uiDatetimePickerConfig","_","$log","$timeout","behaviorPreParser","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(b){var c=a.behaviours.find(function(a){return a.description===b});return c.image}b.activeClassItem=3,a.behaviourViewIsActive=!0,a.requestDateFormat="YYYY/MM/DD",a.role=b.user.data.role;var o,p=f.classId,q=b.user.data.id;a._=i,a.students=[],a.negativeIcon="images/usersList/downfist.svg",a.positiveIcon="images/usersList/upfist.svg",a.datatime=new Date,a.animationsEnabled=!0,a.hideCustomButton=!0,b.$on("class-data-was-received",function r(){if(b.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&b.user.classData.owner!==b.user.data.id&&(a.hideCustomButton=!0),Array.isArray(b.user.classData.members)){a.arrayOfChildrenId=[];var c=b.user.classData.members[0].first_name;a.pickedChildId=b.user.classData.members[0].id;for(var d=0;d<b.user.classData.members.length;d++)a.arrayOfChildrenId.push(b.user.classData.members[d].first_name);k(function(){a.childName=c,a.changeChildren(a.childName)})}a.getListAllBehavior(),b.$$listeners["class-data-was-received"]=[r]}),b.$on("new-category-created",function(){a.getListAllBehavior()}),a.changeChildren=function(c){a.childName=c,a.countClass=0,angular.element(".children").css("border-bottom","2px solid white"),angular.element("#"+c).css("border-bottom","2px solid rgb(207, 81, 93)");for(var d=0;d<b.user.classData.members.length;d++)if(b.user.classData.members[d].first_name==a.childName){a.childName;a.pickedChildId=b.user.classData.members[d].id,a.pickedChild=b.user.classData.members[d],a.$broadcast("picked-child-behaviour",a.pickedChild)}},a.addBonus=function(){for(var b=[],g=0;g<a.students.length;g++)a.students[g].state===!0&&b.push(a.students[g].id);c({url:d.link+"bonus-mark",method:"POST",data:{students:b,class_id:f.classId}}).then(function(b){e.open({templateUrl:"components/class/dashboard/behaviour/addBonusSusses/addBonusSusses.html",controller:"addBonusSussesController",controllerAs:"$ctrl",size:"sm",resolve:{information:function(){return"Bonus mark has been added successfully."}}}).closed.then(function(){for(var b=0;b<a.students.length;b++)a.students[b].state=!1,a.pickedStudents=[]})},function(b){e.open({templateUrl:"components/class/dashboard/behaviour/addBonusSusses/addBonusSusses.html",controller:"addBonusSussesController",controllerAs:"$ctrl",size:"sm",resolve:{information:function(){return"Bonus mark hasn't been added."}}}).closed.then(function(){for(var b=0;b<a.students.length;b++)a.students[b].state=!1,a.pickedStudents=[]})})},a.addPositiveBehavior=function(b){var f=!1;j.info("add Positive");for(var g=0;g<a.students.length;g++)a.students[g].state===!0&&(f=!0);if(f){e.open({templateUrl:"components/class/dashboard/behaviour/behaviourModal/behaviourModal.html",controller:"behaviourModalInstanceCtrl",controllerAs:"$ctrl",resolve:{positive:!0,type:function(){return a.type},selectedDate:function(){return o},pickedStudents:function(){return a.pickedStudents},students:function(){return a.students},behaviours:function(){return a.behaviours}}}).closed.then(function(){j.log("close modal"),a.getUsersBehavior(),a.pickedStudents=[],c.get(d.link+"/class/"+p+"/behavior?date="+o).success(function(b){a.students=b.data,a.generalInfo=a.createGeneralInfoBehaviours(b.data),j.log(a.students)})})}},a.addNegativeBehavior=function(b){var f=!1;j.info("add Negative");for(var g=0;g<a.students.length;g++)a.students[g].state===!0&&(f=!0);if(f){e.open({templateUrl:"components/class/dashboard/behaviour/behaviourModal/behaviourModal.html",controller:"behaviourModalInstanceCtrl",controllerAs:"$ctrl",resolve:{positive:!1,type:function(){return a.type},selectedDate:function(){return o},pickedStudents:function(){return a.pickedStudents},students:function(){return a.students},behaviours:function(){return a.behaviours}}}).closed.then(function(){j.log("close modal"),a.getUsersBehavior(),a.pickedStudents=[],c.get(d.link+"/class/"+p+"/behavior?date="+o).success(function(b){a.students=b.data,a.generalInfo=a.createGeneralInfoBehaviours(b.data),j.log(a.students)})})}},a.addMessaging=function(){j.info("add Messaging"),m.path("/message")};$(document).ready(function(){$(document).on("mouseenter",".button-inside",function(){$(this).find(".img-hover").show()}).on("mouseleave",".button-inside",function(){$(this).find(".img-hover").hide()})}),a.data={items:[{img:"images/custom-button/button-message_3x.png",imgHover:"images/hover_img/message.png",text:"Messaging",click:a.addMessaging,params:"message"},{img:"images/custom-button/button-bonus_3x.png",imgHover:"images/hover_img/bonus.png",text:"Add bonus",click:a.addBonus,params:"bonus"},{img:"images/custom-button/button-negative_3x.png",imgHover:"images/hover_img/need-work.png",text:"Need work",click:a.addNegativeBehavior,params:"negative"},{img:"images/custom-button/button-positive_3x.png",imgHover:"images/hover_img/positive.png",text:"Positive",click:a.addPositiveBehavior,params:"positive"}]},b.$on("student-was-selected-in-behaviour",function s(){a.getUsersBehavior(),a.studentsInfoFiltered=a.studentsInfo.filter(function(b){for(var c=0;c<a.pickedStudents.length;c++)if(b.user_id===a.pickedStudents[c].id)return!0;return!1}),b.$$listeners["student-was-selected-in-behaviour"]=[s]}),a.getUsersBehavior=function(){c.get(d.link+"/class/"+p+"/behavior/report?from="+a.dateFrom+"&to="+a.dateTo).success(function(b){a.studentsInfo=a.addMissingStudents(b.data),a.studentsInfo=a.updateListBehaviours(a.studentsInfo),a.studentsInfo=a.addColorBehaviours(a.studentsInfo)}).error(function(){j.info("Code: "+data.status_code+"; Message: "+data.message)})},a.prepareDataBehavior=function(b){return 1==b?{data:[],labels:a.configChart.positiveLabels,key:"positive"}:{data:[],labels:a.configChart.negativeLabels,key:"negative"}},a.addMissingStudents=function(b){for(var c=l.generateTemplate(a.behaviours),d=0;d<a.students.length;d++){var e=b.find(function(b){return b.user_id===a.students[d].id});e?(e.behavior[1]=Object.assign({},c[1],e.behavior[1]),e.behavior[2]=Object.assign({},c[2],e.behavior[2])):(a.students[d].behavior=c,a.students[d].user_id=a.students[d].id,b.push(a.students[d]))}return b},a.updateListBehaviours=function(b){for(var c=!1,d=0;d<b.length;d++){var e=b[d].behavior;for(var f in e){for(var g=a.prepareDataBehavior(f),h=0;h<g.labels.length;h++){c=!1;for(var i in e[f])if(i===g.labels[h]){g.data[h]=b[d].behavior[f][i].count,c=!0;break}c||(g.data[h]=0)}b[d].behavior[f][g.key]=g.data}}return b},a.addColorBehaviours=function(b){for(var c=0;c<b.length;c++){for(var d=!1,e=0;e<a.configChart.positiveLabels.length;e++){d=!1;for(var f in b[c].behavior[1])if(f===a.configChart.positiveLabels[e]){b[c].behavior[1][f].color=a.configChart.positiveBackgroundColor[e],d=!0;break}}for(var e=0;e<a.configChart.negativeLabels.length;e++){d=!1;for(var f in b[c].behavior[2])if(f===a.configChart.negativeLabels[e]){b[c].behavior[2][f].color=a.configChart.negativeBackgroundColor[e],d=!0;break}}}return b},a.createGeneralInfoBehaviours=function(a){for(var b={positive:{},negative:{}},c=0;c<a.length;c++)if(1===a[c].behavior_type){if(a[c].behavior_description in b.positive){var d={photo:a[c].photo};b.positive[a[c].behavior_description].users.push(d)}else b.positive[a[c].behavior_description]={users:[]},d={photo:a[c].photo},b.positive[a[c].behavior_description].users.push(d);b.positive[a[c].behavior_description].image=n(a[c].behavior_description)}else if(2===a[c].behavior_type)if(a[c].behavior_description in b.negative){var d={photo:a[c].photo};b.negative[a[c].behavior_description].users.push(d)}else b.negative[a[c].behavior_description]={users:[]},d={photo:a[c].photo},b.negative[a[c].behavior_description].users.push(d),b.negative[a[c].behavior_description].image=n(a[c].behavior_description);return b},a.getListAllBehavior=function(){c.get(d.link+"behavior/"+b.user.classData.owner).success(function(b){j.info("behaviors",b),a.behaviours=b.data,a.configChart=l.createConfigObj(a.behaviours),a.$watch("datatime",function(b){angular.element(document.getElementById("dropdown-controller")).removeClass("open"),angular.element(document.querySelector(".dropdown-backdrop")).removeClass("dropdown-backdrop"),$("#dLabel").attr("aria-expanded",!1),a.pickedStudents=[],o=moment(b).format(a.requestDateFormat),a.dateFrom=moment(o).format("YYYY/MM")+"/01",a.dateTo=moment(a.dateFrom,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat),a.slectedMonth=moment(b).format("MMMM"),a.slectedDay=moment(b).format("dddd"),o>moment(new Date).format(a.requestDateFormat)?a.dateIsAhead=!0:a.dateIsAhead=!1,c.get(d.link+"/class/"+p+"/behavior?date="+o).success(function(b){a.students=b.data,j.log("response on behaviour request",a.students),a.generalInfo=a.createGeneralInfoBehaviours(b.data),a.getUsersBehavior()})})}).error(function(a){j.info("Code: "+a.status_code+"; Message: "+a.message)})},"parent"==a.role?(a.parseDate=function(b,c){if(!b||!c||b.id||c.id)a.lastFromDate?(a.fromDate=moment(a.lastFromDate).format("YYYY/MM")+"/01",a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)):(a.fromDate=moment(new Date).format("YYYY/MM")+"/01",a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat));else{var d=moment(b).format("MM"),e=moment(b).format("DD"),f=moment(c).format("MM");1!=e&&+f-+d!=1?(a.fromDate=moment(moment(b).format("YYYY")+"/"+(+d+1)+"/01").format(a.requestDateFormat),a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)):(a.fromDate=moment(b).format(a.requestDateFormat),a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat))}a.lastFromDate=a.fromDate,a.lastToDate=a.toDate,a.slectedMonth=moment(a.fromDate,a.requestDateFormat).format("MMMM")},a.getChildAttendance=function(b){c.get(d.link+"/class/"+p+"/user/"+a.pickedChild.id+"/behavior/report?from="+a.fromDate+"&to="+a.toDate).success(function(a){b(a.data)})},a.prepareEvents=function(b,c){var d=[];a.behaviourData=b,a.currentStudent={},a.currentStudent.first_name=a.pickedChild.first_name,a.currentStudent.last_name=a.pickedChild.last_name,a.currentStudent.photo=a.pickedChild.image;var e=angular.copy(l.generateTemplate(a.behaviours));e[1].positive=[],e[2].negative=[];for(var f=0;f<a.behaviourData.length;f++)if(d.push({start:new Date(a.behaviourData[f].date),allDay:!0,type:a.behaviourData[f].type}),1===a.behaviourData[f].type){e[1][a.behaviourData[f].description].count++;var g=a.configChart.positiveLabels.indexOf(a.behaviourData[f].description);e[1].positive[g]?e[1].positive[g]++:e[1].positive[g]=1}else if(2===a.behaviourData[f].type){e[2][a.behaviourData[f].description].count++;var g=a.configChart.negativeLabels.indexOf(a.behaviourData[f].description);e[2].negative[g]?e[2].negative[g]++:e[2].negative[g]=1}for(f=0;f<d.length;f++)1==d[f].type?d[f].className="present":2==d[f].type&&(d[f].className="absent");a.currentStudent.behaviour=e,a.requestInProgress=!1,c(d)},a.events=function(a,b,c,d){d([])},a.$on("picked-child-behaviour",function(){a.events2=function(b,c,d,e){a.parseDate(b,c),a.getChildAttendance(function(b){a.prepareEvents(b,function(a){e(a)})})},a.eventSources[1]=a.events2})):(a.requestInProgress=!0,a.parseDate=function(b,c){var d=moment(b).format("MM"),e=moment(b).format("DD"),f=moment(c).format("MM");1!=e&&+f-+d!=1?(a.fromDate=moment(moment(b).format("YYYY")+"/"+(+d+1)+"/01").format(a.requestDateFormat),a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)):(a.fromDate=moment(b).format(a.requestDateFormat),a.toDate=moment(a.fromDate,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)),a.slectedMonth=moment(a.fromDate,a.requestDateFormat).format("MMMM")},a.getChildAttendance=function(b){c.get(d.link+"/class/"+p+"/user/"+q+"/behavior/report?from="+a.fromDate+"&to="+a.toDate).success(function(a){b(a.data)})},a.prepareEvents=function(c,d){var e=[];a.behaviourData=c,a.currentStudent={},a.currentStudent.first_name=b.user.data.details.data.first_name,a.currentStudent.last_name=b.user.data.details.data.last_name,a.currentStudent.photo=b.user.data.details.data.photo;var f=angular.copy(l.generateTemplate(a.behaviours));f[1].positive=[],f[2].negative=[];for(var g=0;g<a.behaviourData.length;g++)if(e.push({start:new Date(a.behaviourData[g].date),allDay:!0,type:a.behaviourData[g].type}),1===a.behaviourData[g].type){f[1][a.behaviourData[g].description].count++;var h=a.configChart.positiveLabels.indexOf(a.behaviourData[g].description);f[1].positive[h]?f[1].positive[h]++:f[1].positive[h]=1}else if(2===a.behaviourData[g].type){f[2][a.behaviourData[g].description].count++;var h=a.configChart.negativeLabels.indexOf(a.behaviourData[g].description);f[2].negative[h]?f[2].negative[h]++:f[2].negative[h]=1}for(g=0;g<e.length;g++)1==e[g].type?e[g].className="present":2==e[g].type&&(e[g].className="absent");a.currentStudent.behaviour=f,a.requestInProgress=!1,d(e)},a.events=function(b,c,d,e){a.parseDate(b,c),a.getChildAttendance(function(b){a.behaviours?a.prepareEvents(b,function(a){e(a)}):a.$watch("behaviours",function(){a.prepareEvents(b,function(a){e(a)})})})}),a.uiConfig={calendar:{height:"auto",editable:!1,header:{left:"prev",center:"title",right:"next"},eventClick:a.alertOnEventClick,eventDrop:a.alertOnDrop,eventResize:a.alertOnResize,eventRender:a.eventRender}},a.eventSources=[a.events]}]),angular.module("classDigApp").controller("pollsController",["$scope","$rootScope","$uibModal","$log","$document","appSettings","$http","$routeParams","Poll","$timeout",function(a,b,c,d,e,f,g,h,i,j){var k=this;b.activeClassItem=9,b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+".png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+".png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",pollBorder:b.user.data.role+"-poll-border",iconAddButton:"images/modal/icon-add-button-"+b.user.data.role+".png",iconClock:"images/poll/icon-clock.png",
iconExit:"images/poll/icon-exit.png",iconFlash:"images/poll/icon-flash.png",iconClockActive:"images/poll/icon-clock-"+b.user.data.role+".png",iconExitActive:"images/poll/icon-exit-"+b.user.data.role+".png",iconFlashActive:"images/poll/icon-flash-"+b.user.data.role+".png",userListBorder:b.user.data.role+"-userListBorder"},a.selection={selectedItems:[],currentItem:[]},a.hideCustomButton=!0,b.$on("class-data-was-received",function(){if(b.user.classData.classInArchived||(a.hideCustomButton=!1),b.user.classData.owner===b.user.data.id)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].active=!0}),a.data={items:[],onGlobalButtonClick:function(){}},a.contextMenu={items:[{img:"images/context_menu/icon-edit-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-edit-default_3x.png",imgHover:"images/context_menu/icon-edit-hover_3x.png",state:!1,active:!1,text:"Edit",multiSelect:!1,click:a.editPoll},{img:"images/context_menu/icon-delete-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,active:!1,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"],click:a.deleteArrayOfPolls}]},a.pollsExist=!1,a.pollsNotExist=!1,a.pollList=new i,g.get(f.link+"poll?search=class_id:"+h.classId).success(function(b){0!==b.data.length?(console.log("--->",b.data),a.pollsExist=!0,$("#poll-loader").hide()):(a.pollsNotExist=!0,$("#poll-loader").hide())}).error(function(b){$("#poll-loader").hide(),a.pollsNotExist=!0}),a.$on("changePoll",function(b,c){for(var d=0;d<c.data.data.poll.questions.length;d++)c.data.data.poll.questions[d].userAnswers=[];a.pollList.items.unshift(c.data.data),a.pollsExist=!0,a.pollsNotExist=!1}),a.$on("updatePoll",function(b,c){d.log("update poll:",c);for(var e=0;e<c.poll.questions.length;e++)c.poll.questions[e].userAnswers=[];for(var f=0;f<a.pollList.items.length;f++)a.pollList.items[f].poll.id==c.poll.id&&(a.pollList.items[f]=c);a.pollsExist=!0,a.pollsNotExist=!1,a.selection={selectedItems:[],currentItem:[]}}),a.$on("DeletePollFromList",function(b,c){for(var d=0;d<a.pollList.items.length;d++)a.pollList.items[d].poll.id===c&&a.pollList.items.splice(a.pollList.items[d],1);a.selection={selectedItems:[],currentItem:[]},a.selectionWasChanged()}),a.userVoted=function(a){for(var c=!1,d=0;d<a.length;d++){var e=a[d];if(e.user_id==b.user.data.id){c=!0;break}}return c},a.formatDataCreate=function(a){var b=moment.utc(a.date).toDate();return moment(b).format("D MMM  H.mm")},a.getFinishTime=function(a){var b=0,c=moment(new Date),d=moment.unix(a);return d.diff(c,"weeks")>0?b=d.diff(c,"weeks")+" weeks":d.diff(c,"days")>0?b=d.diff(c,"days")+" days"+d.diff(c,"hours")%24+" hours":d.diff(c,"hours")>0?b=d.diff(c,"hours")+" hours"+d.diff(c,"minutes")%60+" minutes":d.diff(c,"minutes")>0&&(b=d.diff(c,"minutes")+" minutes"),b},a.userAnswers=[],a.returnAnswerArray=function(a){return angular.copy(a)},a.VoteButton=function(a,c){for(var d=!0,e=0;e<a.length;e++)for(var f=a[e].answers,g=0;g<f.length;g++)f[g].userVoted&&(d=!1);return c===b.user.data.id&&(d=!1),d},a.pushVoteToServer=function(b,c,d){a.pushVote={},a.pushVote.poll_id=b,a.pushVote.user_id=a.user.data.id,a.pushVote.answers=c.poll.questions;for(var e=[],h=0;h<c.poll.questions.length;h++){if(0===c.poll.questions[h].userAnswers.length)return;e=e.concat(c.poll.questions[h].userAnswers)}a.pushVote.answers=e,g({url:f.link+"poll/vote",method:"POST",data:a.pushVote}).then(function(b){for(var c=0;c<b.data.data.poll.questions.length;c++)b.data.data.poll.questions[c].userAnswers=[];a.pollList.items[d]=b.data.data},function(a){})},a.deleteArrayOfPolls=function(c){d.log("deletePoll",c),a.modalContext={action:"deleteFiles",actionTitle:"delete",selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("deleteFiles",function(){d.log("selectedItems",c);for(var e=0;e<c.length;e++)a.curenItemDeleteId=c[e],d.log("selectedItems",c[e]),g({method:"DELETE",url:f.link+"poll/"+c[e],headers:{"Content-Type":"application/json"},data:{id:c[e]}}).success(function(c){d.log("all good",c),b.$broadcast("DeletePollFromList",a.curenItemDeleteId)}).error(function(){})})},k.animationsEnabled=!0,k.openModal=function(a,b){var d=b?angular.element(e[0].querySelector(".modal-demo "+b)):void 0;c.open({animation:k.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/polls/pollsModal/pollsModal.html",controller:"pollModalInstanceCtrl",controllerAs:"$ctrl",size:a,appendTo:d,resolve:{items:function(){return k.items}}})},a.openAreUSureModal=function(b){c.open({animation:k.animationsEnabled,templateUrl:"components/class/dashboard/polls/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.editPoll=function(a){c.open({templateUrl:"components/class/dashboard/polls/pollsModal/pollsModal.html",controller:"pollModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a}}})},a.selectionWasChanged=function(c,d){d.poll.user_id===b.user.data.id&&j(function(){if(a.contextMenu.items[1].context=a.selection.selectedItems,1===a.selection.selectedItems.length)for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].state=!0,0===a.selection.currentItem[0].voted.length||0===a.selection.currentItem[0].voted?a.contextMenu.items[0].state=!0:a.contextMenu.items[0].state=!1,a.contextMenu.items[0].context=a.selection.currentItem[0];else if(0===a.selection.selectedItems.length)for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].state=!1;else a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!0}),c="#"+c,$(".poll-list").removeClass(b.userData.pollBorder),$(c).addClass(b.userData.pollBorder),a.activePoll=d,a.activePoll.voters="Voters",a.users.items=a.activePoll.poll.participants,b.$broadcast("arrayOfSelectedUsers",a.activePoll.poll)}}]).factory("Poll",["$http","appSettings","$routeParams",function(a,b,c){var d=function(){this.items=[],this.busy=!1,this.after=""};return d.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var d=b.link+"poll?search=class_id:"+c.classId+"&page="+this.after;a.get(d).success(function(a){if(0!==a.data.length){for(var b=a.data,c=0;c<b.length;c++){for(var d=b[c],e=0;e<d.poll.questions.length;e++)d.poll.questions[e].userAnswers=[];this.items.push(b[c])}if(this.after=a.meta.pagination.current_page+1,a.meta.pagination.total_pages===a.meta.pagination.current_page)return void $("#user-loader").hide();this.busy=!1,$("#user-loader").hide()}}.bind(this))}},d}]),angular.module("classDigApp").controller("pollModalInstanceCtrl",["$uibModalInstance","$scope","$routeParams","$rootScope","Upload","appSettings","$http","$timeout","$log","items",function(a,b,c,d,e,f,g,h,i,j){d.userData={role:d.user.data.role,iconPlus:"images/modal/icon-plus-"+d.user.data.role+".png",iconCamera:"images/modal/icon-camera-"+d.user.data.role+".png",background:d.user.data.role+"-background",color:d.user.data.role+"-color",border:d.user.data.role+"-border",pollBorder:d.user.data.role+"-poll-border",iconAddButton:"images/modal/icon-add-button-"+d.user.data.role+".png",iconClock:"images/poll/icon-clock.png",iconExit:"images/poll/icon-exit.png",iconFlash:"images/poll/icon-flash.png",iconClockActive:"images/poll/icon-clock-"+d.user.data.role+".png",iconExitActive:"images/poll/icon-exit-"+d.user.data.role+".png",iconFlashActive:"images/poll/icon-flash-"+d.user.data.role+".png",userListBorder:d.user.data.role+"-userListBorder"};var k=this;h(function(){$(".datetimepickerDate").datetimepicker({format:"LL",minDate:new Date}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .active").addClass("bg-"+b.role).css({border:"none",color:"white"}),$(".bootstrap-datetimepicker-widget .today").toggleClass(""+b.role)}).val(b.startDate),$(".datetimepickerTime").datetimepicker({format:"LT"}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .btn-primary").addClass("bg-"+b.role).css({border:"none"}),$(".bootstrap-datetimepicker-widget .btn :not(.btn-primary)").addClass("c-"+b.role)}).val(b.startTime)}),b.startDate=moment().format("LL"),b.startTime=moment().format("LT");var l=new Date;if(b.createPollModal=!0,b.addVoters=!1,b.anonim="anonim",b.multiSelect="multiSelect",b.votersOptions=[{id:12,option:"Students",val:-1},{id:22,option:"Only Students",val:0},{id:32,option:"Parents",val:0}],void 0===j)this.modalConstant={header:"Create Poll",buttonSubmit:"ADD POLL"},b.newPoll={poll:{}},b.newPoll.poll.user_id=b.user.data.id,b.newPoll.poll.class_id=c.classId,b.newPoll.poll.multi_select=1,b.newPoll.poll.time_frame=l,b.newPoll.poll.see_result_id="1",b.newPoll.voters=[],b.newPoll.anonim=1,b.newPoll.attachments=[],b.newPoll.poll.time_frame=moment(b.newPoll.time_frame).format("LL"),b.timeFrame=b.newPoll.poll.time_frame,b.timeFrameTime=moment(b.newPoll.time_frame).format("LT"),b.newPoll.blocks=[],b.newPoll.blocks[0]={answers:[{},{}],question:""};else{b.newPoll={poll:{}},this.modalConstant={header:"Update Poll",buttonSubmit:"UPDATE POLL"},b.newPoll.poll=angular.copy(j),b.newPoll.blocks=angular.copy(j.questions),b.newPoll.poll.see_result_id=""+b.newPoll.poll.see_result_id,i.log("newPoll",b.newPoll);var m=moment.unix(b.newPoll.poll.time_frame);i.log(m._d),b.startDate=moment(m._d).format("LL"),b.startTime=moment(m._d).format("LT"),b.timeFrame=b.startDate,b.timeFrameTime=b.startTime}b.addNewQuestion=function(){b.newPoll.blocks.length>=14&&angular.element(".add-new-qwe").css("display","none"),b.newPoll.blocks.push({answers:[{},{}],question:""})},setTimeout(function(){if(b.newPoll.poll.time_frame)$(".voitingTimeFrame .form-control").val(b.newPoll.poll.time_frame);else{var a=new Date;$(".voitingTimeFrame .form-control").val(moment(a).format("YYYY-MM-DD"))}},300),b.onTimeSet=function(a,c){b.newPoll.poll.time_frame=a},b.addVoteParticipants=function(){b.createPollModal=!0,b.addVoters=!1;var a=$.map(b.selectedUsers,function(a,b){return[a.id]});b.newPoll.voters=a},b.cancelVoteParticipants=function(){b.createPollModal=!0,b.addVoters=!1},b.showParticipantsList=function(){b.createPollModal=!1,b.addVoters=!0,b.userRole="users",d.$broadcast("userRoleChanged",b.userRole)},b.userRole="users",k.cancel=function(){a.dismiss("cancel")},k.ok=function(){if(void 0===j){b.newPoll.anonim=+!b.newPoll.anonim,b.newPoll.poll.multi_select=+!b.newPoll.poll.multi_select;var c=moment(new Date(b.timeFrame+" "+b.timeFrameTime)).utc().unix();b.newPoll.poll.time_frame=c,g({url:f.link+"poll",method:"POST",data:b.newPoll}).then(function(b){a.close(),d.$broadcast("changePoll",b),a.close()},function(a){b.formSubmitted=!0})}else{b.newPoll.anonim=+!b.newPoll.anonim,b.newPoll.poll.multi_select=+!b.newPoll.poll.multi_select;var c=moment(new Date(b.timeFrame+" "+b.timeFrameTime)).utc().unix();b.newPoll.poll.time_frame=c,b.newPoll.poll.due_date=c;for(var e=0;e<b.newPoll.blocks.length;e++)null!=b.newPoll.blocks[e].image&&(b.newPoll.blocks[e].image=b.newPoll.blocks[e].image.id);g({url:f.link+"poll/"+b.newPoll.poll.id,method:"PUT",data:b.newPoll}).then(function(b){a.close(),d.$broadcast("updatePoll",b.data.data),a.close()},function(a){b.formSubmitted=!0})}}}]),angular.module("classDigApp").controller("behaviourModalInstanceCtrl",["$scope","$rootScope","$http","$log","$routeParams","$uibModalInstance","appSettings","positive","type","selectedDate","pickedStudents","students","behaviours","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this,p=e.classId;a.indexBehaviour=0,a.behaviors=m,a.pickedStudents=k,a.students=l,a.positive=h,a.selectedDate=j,a.type=i,a.selectedStudentList=[],a.item={type:a.positive?1:2,name:a.positive?"Positive":"Need work"},a.prepareButtons=function(b){a.preButtons=[],a.buttons=[],a.preButtons=b.filter(function(b){return a.positive?1===b.type:2===b.type}),b[4].image="images/behavior/bad_behaviour_13@2x.png",b[5].image="images/behavior/bad_behaviour_12@2x.png",b[6].image="images/behavior/bad_behaviour_11@2x.png",b[7].image="images/behavior/bad_behaviour_10@2x.png",console.log("elem",b[0],b[1],b[2],b[3]);var c=a.preButtons.slice(0,4),d=a.preButtons.slice(4,a.preButtons.length);console.log(c,d),c.forEach(function(b){a.buttons.push(b)}),console.log(a.buttons),a.preButtons.length<=6?a.buttons.push({image:a.positive?"images/classes/modal/modal-behaviour_3x.png":"images/behavior/plus_red@2x.png",description:"Add behavior",id:-1}):a.buttons.push({image:"images/classes/modal/new-behavior-type-not-allowed.png",description:"Add behavior",id:-2}),d.forEach(function(b){a.buttons.push(b)})},a.prepareButtons(a.behaviors),a.insertToSelectedStudentList=function(b){for(var c=0;c<a.pickedStudents.length;c++){var e={user_id:a.pickedStudents[c].id,date:j,behavior_id:b};if(a.selectedStudentList.length)for(var f=0;f<a.selectedStudentList.length;f++)a.pickedStudents[c].id===a.selectedStudentList[f].user_id&&a.selectedStudentList.splice(f,1);d.log(e),a.selectedStudentList[c]=e}},a.checkIconForStudent=function(b){switch(b){case"positive":a.pickedStudents.forEach(function(a){a.behavior_type=1});break;case"negative":a.pickedStudents.forEach(function(a){a.behavior_type=2})}for(var c=0;c<a.students.length;c++)for(var d=0;d<a.pickedStudents.length;d++)a.students[c].id===a.pickedStudents[d].id&&(a.students[c].behavior_type=a.pickedStudents[d].behavior_type)},a.$on("new-category-created",function(){c.get(g.link+"behavior/"+b.user.classData.owner).success(function(b){d.info("behaviors",b),a.behaviours=b.data,a.prepareButtons(b.data)})}),o.cancel=function(){f.close()},o.setBehaviour=function(b){if(-1===b.id){n.open({templateUrl:"components/class/dashboard/behaviour/newBehaviorTypeModal/newBehaviorTypeModal.html",controller:"newBehaviorTypeModal",controllerAs:"$ctrl",resolve:{items:a.item}});return void d.log("Add behaviour")}if(-2!==b.id){a.checkIconForStudent(i),a.insertToSelectedStudentList(b.id),c.post(g.link+"class/"+p+"/behavior",{users:a.selectedStudentList}).success(function(){d.log("POST SUCCES")}).error(function(a){d.log("Code: "+a.status_code+"; Message: "+a.message)});for(var e=0;e<a.students.length;e++)a.students[e].state=!1;a.pickedStudents.splice(0,a.pickedStudents.length),f.close()}}}]),angular.module("classDigApp").controller("newBehaviorTypeModal",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams",function(a,b,c,d,e,f,g,h,i,j){b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},h.newBehaviorType=angular.copy(c),console.log(c),h.images=[];for(var k=1;9>=k;k++){if(1===c.type)var l="images/behavior/good_behaviour_"+k+"@2x.png";else l="images/behavior/bad_behaviour_"+k+"@2x.png";h.images.push({img:l,id:4455+k,type:c.type,active:!1})}h.selectIcon=function(a,b){h.images.forEach(function(a){a.active=!1}),b.active=!0,1===b.type?h.newBehaviorType.name="Positive":h.newBehaviorType.name="Need work",h.newBehaviorType.id=b.id},c.image&&(h.editing=!0),delete h.newBehaviorType.image,h.cancel=function(){a.dismiss("cancel")},h.ok=function(){return g.log("new",h.newBehaviorType),h.CreateBehaviorModal.$invalid?!1:void(c.image?e.put(f.link+"/behavior/"+h.newBehaviorType.id,h.newBehaviorType).success(function(){b.$broadcast("new-category-created",h.newBehaviorType),a.close()}):(g.log("valid",h.newBehaviorType),e.post(f.link+"/behavior",h.newBehaviorType).success(function(){b.$broadcast("new-category-created",h.newBehaviorType),a.close()})))}}]),app.controller("distinguishedController",["$scope","$rootScope","$uibModal","$http","appSettings","$timeout","classData","$routeParams",function(a,b,c,d,e,f,g,h){b.activeClassItem=12,a.animationsEnabled=!0,a.students=[],a.pickedStudents=[];var i=h.classId,j="YYYY-MM-DD",k=b.user.data.role;a.semester={},a.months=[],a.weeks=[],a.whatToDisplay=0,a.currentState={},a.currentState.name=a.semester.name,a.currentState.start=a.semester.start,a.currentState.end=a.semester.end,a.items=a.currentState,a.items["class"]=a.currentClass,a.distinguishedIcon="images/distinguished/distinguished.svg",a.hideCustomButton=!0,a.distingushedViewIsActive=!0,b.$on("student-was-selected-in-distinguished-all",function(b,c){a.selectedUser=a.pickedStudents[0],a.studentInformation=a.pickedStudents[0]}),a.request=function(b,c,f){d.get(e.link+"/distinguished?class_id="+b+"&week_start="+c+"&week_end="+f).success(function(b){if(a.students=b.data,a.items.students=a.students,a.students)for(var d=0;d<a.students.length;d++)a.students[d].distinguished=!0;a.currentState.start=c,a.currentState.end=f})},a.iconArrow="../images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png",g.getClassById(i,function(c){function d(b,c){var d=moment(b,j).format("MM"),e=moment(c,j).format("MM");for(d;e>=d;d++){var f=moment(b,j).format("YYYY")+"-"+d+"-01",g=moment(f,j).add(1,"month").format(j);g=moment(g,j).add(-1,"day").format(j);var h={name:moment(f,j).format("MMMM"),year:moment(f,j).format("YYYY"),start:f,end:g};a.months.push(h)}}a.currentClassObj=c,a.currentClass=a.currentClassObj.id,a.items["class"]=a.currentClass,a.semester.start=c.semester.from,a.semester.end=c.semester.to,a.currentClassObj.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&a.currentClassObj.owner!==b.user.data.id&&(a.hideCustomButton=!0),"0000-00-00"!=a.semester.start||"0000-00-00"!=a.semester.end?(a.request(a.currentClass,a.semester.start,a.semester.end),function(){"01"==moment(a.semester.start,j).format("MM")||"02"==moment(a.semester.start,j).format("MM")||"12"==moment(a.semester.start,j).format("MM")?a.semester.name="winter":"03"==moment(a.semester.start,j).format("MM")||"04"==moment(a.semester.start,j).format("MM")||"05"==moment(a.semester.start,j).format("MM")?a.semester.name="spring":"06"==moment(a.semester.start,j).format("MM")||"07"==moment(a.semester.start,j).format("MM")||"08"==moment(a.semester.start,j).format("MM")?a.semester.name="summer":("09"==moment(a.semester.start,j).format("MM")||"10"==moment(a.semester.start,j).format("MM")||"11"==moment(a.semester.start,j).format("MM"))&&(a.semester.name="autumn"),a.semester.year=moment(a.semester.start,j).format("YYYY")}(),function(){moment(a.semester.start,j).format("YYYY")!=moment(a.semester.end,j).format("YYYY")?(d(a.semester.start,moment(a.semester.start,j).format("YYYY")+"14-12"),d(moment(a.semester.end,j).format("YYYY")+"-01-01",a.semester.end)):d(a.semester.start,a.semester.end)}(),function(){for(var b=1,c=moment(a.semester.start,j).format(j);"Monday"!=moment(c,j).format("dddd");)c=moment(c,j).add(-1,"day"),moment(c).format(j);for(c;c<=moment(a.semester.end,j);c=moment(c,j).add(1,"week")){var d=moment(c,j).add(1,"week");d=moment(d,j).add(-1,"day");var e={subName:moment(c,j).format(j)+"-"+moment(d,j).format(j),name:"week",year:b++,start:moment(c,j).format(j),end:moment(d,j).format(j)};a.weeks.push(e)}}()):a.whatToDisplay=3}),a.openModal=function(b,d){c.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/distinguished/distinguishedModal/distinguishedModal.html",controller:"distinguishedModalInstanceCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.items}}})},a.data={items:[],hide:["student","parent"]},b.$on("need-to-be-reloaded",function(b,c,d,e){a.request(e,c,d)}),a.choseOption=function(b){a.pickedStudents=[];for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].itemPicked=3;a.contextMenu.items[b].itemPicked=2,a.whatToDisplay=b,0==b?(a.currentState.name="semester",a.request(a.currentClass,a.semester.start,a.semester.end)):1==b?(a.currentState.name=a.months[0].name,a.request(a.currentClass,a.months[0].start,a.months[0].end)):(a.currentState.name=a.weeks[0].year,a.request(a.currentClass,a.weeks[0].start,a.weeks[0].end))},a.contextMenu={items:[{img:"images/distinguished/icon-semester-"+k+"_3x.png",imgHover:"images/distinguished/icon-semester-hover_3x.png",text:"Semester",distinguished:!0,state:!0,active:!0,click:a.choseOption,itemPicked:2,context:0},{img:"images/distinguished/icon-month-"+k+"_3x.png",imgHover:"images/distinguished/icon-month-hover_3x.png",text:"Month",distinguished:!0,state:!0,active:!0,click:a.choseOption,itemPicked:3,context:1},{img:"images/distinguished/icon-week-"+k+"_3x.png",imgHover:"images/distinguished/icon-week-hover_3x.png",text:"Week",distinguished:!0,state:!0,active:!0,click:a.choseOption,itemPicked:3,context:2}]},$(".slider").slick({arrows:!1}),$(".left").click(function(){$(".slider").slick("slickPrev")}),$(".right").click(function(){$(".slider").slick("slickNext")}),a.sendRequest=function(b){if(1==a.whatToDisplay)for(var c=0;c<a.months.length;c++)a.months[c].name==b&&a.request(a.currentClass,a.months[c].start,a.months[c].end);else if(2==a.whatToDisplay)for(var c=0;c<a.weeks.length;c++)a.weeks[c].year==b&&a.request(a.currentClass,a.weeks[c].start,a.weeks[c].end)},a.next=function(){f(function(){a.currentState.name=document.querySelector(".slick-current").firstElementChild.innerHTML,a.sendRequest(a.currentState.name)})},a.prev=function(){f(function(){a.currentState.name=document.querySelector(".slick-current").firstElementChild.innerHTML,a.sendRequest(a.currentState.name)})}}]),app.controller("eventsController",["$scope","$rootScope","$uibModal","$compile","uiCalendarConfig","$http","appSettings","$routeParams","$timeout",function(a,b,c,d,e,f,g,h,i){b.activeClassItem=7,b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},$(document).ready(function(){$(document).on("mouseenter",".controll-button",function(){$(this).find(".inside-menu").show()}).on("mouseleave",".controll-button",function(){$(this).find(".inside-menu").hide()})}),a.activeCalendarView="month";var j=b.user.data.role,k=this;a.requestDateFormat="YYYY/MM/DD",k.animationsEnabled=!0,k.openModal=function(b,d){a.clear(),a.editing||(a.event=void 0),a.editing=!1;var e=d?angular.element($document[0].querySelector(".modal-demo "+d)):void 0;c.open({animation:k.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/events/eventsModal/eventsModal.html",controller:"eventModalInstanceCtrl",controllerAs:"$ctrl",size:b,appendTo:e,resolve:{items:function(){return a.event}}})},a.data={items:[],onGlobalButtonClick:k.openModal},b.$broadcast("should-be-reloaded"),a.hideCustomButton=!0,b.$on("class-data-was-received",function(){b.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&b.user.classData.owner!==b.user.data.id&&(a.hideCustomButton=!0)});var l=[];a.alertOnDayClick=function(c,d,e){if("month"===e.type){a.eventsListByDateIsActive=!0,a.eventListDay=moment(c).format(a.requestDateFormat),a.eventsList=[];for(var f=0;f<a.eventsListOriginal.length;f++)moment(a.eventsListOriginal[f].due_date).format(a.requestDateFormat)===a.eventListDay&&a.eventsList.push(a.eventsListOriginal[f]);for(var f=0;f<l.length;f++)$(l[f]).css("background-color","#FFFFFF"),$(l[f]).css("opacity","1");"student"==b.user.data.role?$(this).css("background-color","#357C69"):"teacher"==b.user.data.role?$(this).css("background-color","#4785D6"):"parent"==b.user.data.role&&$(this).css("background-color","#A8434E"),$(this).css("opacity","0.8"),l.push(this),l.length>2&&l.shift()}},a.clear=function(){a.eventsListByDateIsActive=!1,a.eventsList=a.eventsListOriginal;for(var b=0;b<l.length;b++)$(l[b]).css("background-color","#FFFFFF"),$(l[b]).css("opacity","1")},a.changeView=function(b,c){a.activeCalendarView=b,e.calendars.myCalendar?e.calendars.myCalendar.fullCalendar("changeView",b):e.calendars[c].fullCalendar("changeView",b)},a.parseEventsData=function(c){c.map(function(a){a.owner=!1,a.future=!0,new Date(a.due_date)<new Date&&(a.future=!1),a.owner_id===b.user.data.id&&(a.owner=!0)});var d=[];a.eventsListOriginal=c,a.eventsList=c;for(var e=0;e<a.eventsList.length;e++)a.eventsList[e].color.length>7&&(a.eventsList[e].color="#"+a.eventsList[e].color.slice(3)),a.eventsList[e].startEventDate=moment(a.eventsList[e].due_date+" "+a.eventsList[e].time_start_24,"YYYY/MM/DD HH:mm:ss").toDate(),a.eventsList[e].endEventDate=moment(a.eventsList[e].due_date+" "+a.eventsList[e].time_end_24,"YYYY/MM/DD HH:mm:ss").toDate(),d.push({start:a.eventsList[e].startEventDate,end:a.eventsList[e].endEventDate,allDay:!1,title:a.eventsList[e].title,id:a.eventsList[e].id,color:a.eventsList[e].color,date:a.eventsList[e].due_date});a.eventsList.map(function(b){b.date_number=moment(b.due_date,a.requestDateFormat).format("DD"),b.date_month=moment(b.due_date,a.requestDateFormat).format("MMM")}),"month"===a.activeCalendarView&&(d=_.uniq(d,function(a){return a.date})),a.requestInProgress=!1,a.events=d,a.eventSources[0]=a.events},a.viewChanged=function(b,c){a.eventsListByDateIsActive=!1,a.currentView=b,a.eventSources[0]=[],a.requestInProgress=!0;var d=moment(b.start).format(a.requestDateFormat),e=moment(b.end).format(a.requestDateFormat);if("month"===a.activeCalendarView){var i=moment(d).format("MM"),j=moment(d).format("DD"),k=moment(e).format("MM");if(1!=j&&+k-+i!=1)var l=moment(moment(d).format("YYYY")+"/"+(+i+1)+"/01").format(a.requestDateFormat),m=moment(l,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat);else l=moment(d).format(a.requestDateFormat),m=moment(l,a.requestDateFormat).add(1,"month").add(-1,"day").format(a.requestDateFormat)}else"agendaWeek"===a.activeCalendarView&&(l=moment(b.start).format(a.requestDateFormat),m=moment(l).add(1,"week").format(a.requestDateFormat));f.get(g.link+"event?class_id="+h.classId+"&start_date="+l+"&end_date="+m).success(function(b){a.parseEventsData(b.data)})},a.markImportantItem=function(c,d,e,h){h===b.user.data.id&&f({url:g.link+"event/"+d+"/mark",method:"POST",data:{status:c,id:d}}).then(function(b){a.eventsList[a.eventsList.length-1-e].important=c},function(a){})},a.openAreUSureModal=function(b){c.open({animation:k.animationsEnabled,templateUrl:"components/class/dashboard/events/areUSureModal/areUSureModal.html",controller:"areUSureModalEventsCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.eventToDelete}}})},b.$on("createEvent",function(b,c){a.viewChanged(a.currentView)}),b.$on("delete-was-approved",function(b,c){f({method:"delete",url:g.link+"/event/"+c.id,headers:{"Content-Type":"application/json"}}).success(function(b){a.clear(),a.viewChanged(a.currentView)}).error(function(){})}),a.editEvent=function(b){a.editing=!0,a.event=b,k.openModal()},a.deleteEvent=function(b){a.eventToDelete=b,a.openAreUSureModal("sm")},a.eventRender=function(b,c,e){c.attr({"uib-tooltip-html":"'<p>"+b.title+"</p>'","tooltip-append-to-body":!0}),d(c)(a)},a.uiConfig={calendar:{height:"auto",editable:!1,header:{left:"prev",center:"title",right:"next"},eventClick:a.alertOnEventClick,dayClick:a.alertOnDayClick,eventDrop:a.alertOnDrop,eventResize:a.alertOnResize,eventRender:a.eventRender,viewRender:a.viewChanged}},a.events=[],a.eventSources=[a.events],a.choseOption=function(b){for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].itemPicked=3;a.contextMenu.items[b].itemPicked=2,0==b?(a.changeView("month","cdCalendar"),a.activeCalendarView="month"):1==b&&(a.changeView("agendaWeek","cdCalendar"),a.activeCalendarView="agendaWeek")},a.contextMenu={items:[{img:"images/distinguished/icon-semester-"+j+"_3x.png",imgHover:"images/distinguished/icon-semester-hover_3x.png",text:"Month",distinguished:!0,state:!0,active:!0,click:a.choseOption,itemPicked:2,context:0},{img:"images/distinguished/icon-month-"+j+"_3x.png",imgHover:"images/distinguished/icon-month-hover_3x.png",text:"Week",distinguished:!0,state:!0,active:!0,click:a.choseOption,itemPicked:3,context:1}]}}]),angular.module("classDigApp").controller("eventModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){b.ExamServerError=!1,i(function(){$(".datetimepickerDate").datetimepicker({format:"LL",minDate:new Date}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .active").addClass("bg-"+b.role).css({border:"none",color:"white"}),$(".bootstrap-datetimepicker-widget .today").toggleClass(""+b.role)}).val(b.startDate),$(".datetimepickerTimeFrom , .datetimepickerTimeTo").datetimepicker({format:"LT"}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .btn-primary").addClass("bg-"+b.role).css({border:"none"}),$(".bootstrap-datetimepicker-widget .btn :not(.btn-primary)").addClass("c-"+b.role)})}),b.format="MMMM Do YYYY",b.startDate=moment().format("LL"),void 0===g?(b.event={},b.event.color="#a7687f",b.event.reminder=-1,b.event.time_start=new Date,b.event.time_end=new Date,b.event.due_date=new Date,b.event.class_id=f.classId,b.event.user_id=c.user.data.id,b.event.attachments=[],b.ArrayOfUploadFiles=[],b.event.time_start=moment(b.event.time_start).format("LT"),b.event.time_end=moment(b.event.time_end).format("LT"),this.modalConstant={header:"Add new event",buttonSubmit:"ADD EVENT"}):(b.event=angular.copy(g),b.event.color=g.color,b.event.time_start=moment(b.event.time_start,"hh:mm:ss").format("LT"),b.event.time_end=moment(b.event.time_end,"hh:mm:ss").format("LT"),b.ArrayOfUploadFiles=g.attachments.map(function(a){var b={};return b.name=a.filename,b.id=a.id,b}),b.event.attachments=k.pluck(g.attachments,"id"),this.modalConstant={header:"Update Event",buttonSubmit:"UPDATE EVENT"},i(function(){b.event.due_date=moment(b.event.due_date).format("LL"),b.monthDate=b.event.due_date})),b.options=[{id:0,option:"Never",val:-1},{id:1,option:"At time of event",val:0},{id:2,option:"5 minutes before",val:5},{id:3,option:"10 minutes before",val:10},{id:4,option:"15 minutes before",val:15},{id:5,option:"30 minutes before",val:30},{id:6,option:"1 hour before",val:60},{id:7,option:"2 hours before",val:120},{id:8,option:"1 day before",val:1440},{id:9,option:"2 days before",val:2880},{id:10,option:"1 week before",val:10080},{id:11,option:"2 weeks before",val:20160}],b.UploadFileHeight=-20,b.$watch("UploadFile",function(){b.UploadFile&&(b.uploadFile(b.UploadFile),b.UploadFileHeight+=10)}),b.$watch("event",function(){b.ExamServerError=!1}),b.uploadFile=function(a){a.upload=h.upload({url:e.link+"upload",data:{file:a}}),a.upload.then(function(c){a.result=c.data;var d={};d.id=c.data.data.id,d.name=a.name,b.ArrayOfUploadFiles[0]=d,b.event.attachments[0]=d.id},function(a){a.status>0&&(b.errorMsg=a.status+": "+a.data,b.ExamServerError=!0,setTimeout(function(){b.ExamServerError=!1},5e3))},function(c){a.progress=Math.min(100,parseInt(100*c.loaded/c.total)),b.progressNumber=a.progress})},b.arrayOfFilesToDelete=[],b.DeleteFileFromSyllabus=function(a){var c=$(a.target).parent().attr("id");b.arrayOfFilesToDelete.push(+c),b.event.attachments=k.filter(b.event.attachments,function(a){return a!=c}),b.ArrayOfUploadFiles=k.filter(b.ArrayOfUploadFiles,function(a){return a.id!=c}),$(a.target).parent().remove()},b.cancel=function(){a.dismiss("cancel")},b.ok=function(h){h||(b.event.due_date=moment(b.monthDate,b.format).format("YYYY-MM-DD"),b.event.note||(b.event.note="no notes"),void 0===g?d({url:e.link+"event",method:"POST",data:b.event}).then(function(b){a.close(),c.$broadcast("createEvent",b.data.data)},function(a){b.ExamServerError=!0}):(b.event.class_id=f.classId,b.event.user_id=f.studentId,
void 0==b.event.class_id&&(b.event.class_id=b.event["class"].id,b.event.user_id=b.event.owner_id),d({url:e.link+"event/"+b.event.id,method:"PUT",data:b.event}).then(function(b){a.close(),c.$broadcast("createEvent",b.data.data)},function(a){b.ExamServerError=!0})))}}]),angular.module("classDigApp").controller("examsController",["$scope","$rootScope","$uibModal","$log","$document","$http","appSettings","$routeParams","$timeout",function(a,b,c,d,e,f,g,h,i){function j(){f({url:g.link+"exams?search=class_id:"+h.classId,method:"GET"}).then(function(b){a.listOfExams=b.data.data,$("#user-loader").hide(),0!==b.data.data.length?a.examExist=!0:a.examNotExist=!0},function(a){})}var k=this;b.activeClassItem=6,a.examExist=!1,a.examNotExist=!1,a.role=b.user.data.role,a.showButton="parent"!==a.role,$("#user-loader").show(),j(),a.hideCustomButton=!0,b.$on("class-data-was-received",function(){if(b.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&b.user.classData.owner!==b.user.data.id&&(a.hideCustomButton=!0),b.user.classData.owner===b.user.data.id)for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].active=!0}),a.changeDateFormat=function(a,b){var c=moment(a,"YYYY-MM-DD").format("D MMM"),d=moment(b,"hh:mm:ss").format("HH:mm");return c+" "+d},b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},a.selection={selectedItems:[],currentItem:[]},a.data={items:[],onGlobalButtonClick:function(){}},a.$on("createExam",function(b,c){a.listOfExams.length>0?a.listOfExams.unshift(c):(a.listOfExams=[],a.listOfExams[0]=c,a.examExist=!0,a.examNotExist=!1)}),a.$on("updateExam",function(b,c){d.log("update exam:",c),a.listOfExams=c}),a.$on("DeleteExamFromList",function(){j()}),a.openAreUSureModal=function(b){c.open({animation:k.animationsEnabled,templateUrl:"components/class/dashboard/exams/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.editExam=function(a){c.open({templateUrl:"components/class/dashboard/exams/examsModal/examsModal.html",controller:"examModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a}}})},a.deleteArrayOfExams=function(c){d.log("deleteExam",c),a.modalContext={action:"deleteFiles",actionTitle:"delete",selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("deleteFiles",function(){d.log("selectedItems",c);for(var a=0;a<c.length;a++)d.log("selectedItems",c[a]),f({method:"DELETE",url:g.link+"exams/"+c[a],headers:{"Content-Type":"application/json"},data:{id:c[a]}}).success(function(a){b.$broadcast("DeleteExamFromList")}).error(function(){})})},k.animationsEnabled=!0,k.openModal=function(a,b){var d=b?angular.element(e[0].querySelector(".modal-demo "+b)):void 0;c.open({animation:k.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/exams/examsModal/examsModal.html",controller:"examModalInstanceCtrl",controllerAs:"$ctrl",size:a,appendTo:d,resolve:{items:function(){return k.items}}})},a.contextMenu={items:[{img:"images/context_menu/icon-edit-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-edit-default_3x.png",imgHover:"images/context_menu/icon-edit-hover_3x.png",state:!1,active:!1,text:"Edit",multiSelect:!1,click:a.editExam},{img:"images/context_menu/icon-delete-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,active:!1,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"],click:a.deleteArrayOfExams,context:a.selection.selectedItems}]},a.selectionWasChanged=function(){i(function(){if(1===a.selection.selectedItems.length){a.hideButton=!0;for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].state=!0,a.contextMenu.items[0].context=a.selection.currentItem[0]}else if(0===a.selection.selectedItems.length){a.hideButton=!1;for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].state=!1}else a.hideButton=!0,a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!0})}}]),angular.module("classDigApp").controller("examModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){for(var c=0;c<a.length;c++)d({url:e.link+"upload/"+a[c],method:"DELETE"}).then(function(a){},function(a){b.ExamServerError=!0})}b.ExamServerError=!1,i(function(){$(".datetimepickerDate").datetimepicker({format:"LL",minDate:new Date}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .active").addClass("bg-"+b.role).css({border:"none",color:"white"}),$(".bootstrap-datetimepicker-widget .today").toggleClass(""+b.role)}).val(b.startDate),$(".datetimepickerTimeFrom , .datetimepickerTimeTo").datetimepicker({format:"LT"}).on("dp.change",function(a){$(this).change()}).on("dp.show",function(a){$(".bootstrap-datetimepicker-widget .btn-primary").addClass("bg-"+b.role).css({border:"none"}),$(".bootstrap-datetimepicker-widget .btn :not(.btn-primary)").addClass("c-"+b.role)})}),b.format="MMMM Do YYYY",b.startDate=moment().format("LL"),void 0===g?(b.exam={},b.exam.color="#a7687f",b.exam.reminder=-1,b.exam.time_start=new Date,b.exam.time_end=new Date,b.exam.date=new Date,b.exam.class_id=f.classId,b.exam.attachments=[],b.ArrayOfUploadFiles=[],b.exam.time_start=moment(b.exam.time_start).format("LT"),b.exam.time_end=moment(b.exam.time_end).format("LT"),this.modalConstant={header:"Add new exam",buttonSubmit:"ADD EXAM"}):(b.exam=angular.copy(g),b.exam.time_start=moment(b.exam.time_start,"hh:mm:ss").format("LT"),b.exam.time_end=moment(b.exam.time_end,"hh:mm:ss").format("LT"),b.monthDate=moment(b.exam.date).format("LL"),b.startDate=b.monthDate,j.log("date",b.exam.date,b.startDate),g.attachments?b.ArrayOfUploadFiles=g.attachments.map(function(a){var b={};return b.name=a.filename,b.id=a.id,b}):b.ArrayOfUploadFiles=[],b.exam.attachments=k.pluck(g.attachments,"id"),this.modalConstant={header:"Update Exam",buttonSubmit:"UPDATE EXAM"}),b.options=[{id:0,option:"Never",val:-1},{id:1,option:"At time of exam",val:0},{id:2,option:"5 minutes before",val:5},{id:3,option:"10 minutes before",val:10},{id:4,option:"15 minutes before",val:15},{id:5,option:"30 minutes before",val:30},{id:6,option:"1 hour before",val:60},{id:7,option:"2 hours before",val:120},{id:8,option:"1 day before",val:1440},{id:9,option:"2 days before",val:2880},{id:10,option:"1 week before",val:10080},{id:11,option:"2 weeks before",val:20160}],b.exam.date=moment(b.exam.date).format("LL"),b.monthDate=b.exam.date,b.UploadFileHeight=-20,b.$watch("UploadFile",function(){b.UploadFile&&(b.uploadFile(b.UploadFile),b.UploadFileHeight+=10)}),b.$watch("exam",function(){b.ExamServerError=!1}),b.uploadFile=function(a){a.upload=h.upload({url:e.link+"upload",data:{file:a}}),a.upload.then(function(c){a.result=c.data;var d={};d.id=c.data.data.id,d.name=a.name,b.ArrayOfUploadFiles[0]=d,b.exam.attachments[0]=d.id},function(a){a.status>0&&(b.errorMsg=a.status+": "+a.data,b.ExamServerError=!0,setTimeout(function(){b.ExamServerError=!1},5e3))},function(c){a.progress=Math.min(100,parseInt(100*c.loaded/c.total)),b.progressNumber=a.progress})},b.arrayOfFilesToDelete=[],b.DeleteFileFromSyllabus=function(a){var c=$(a.target).parent().attr("id");b.arrayOfFilesToDelete.push(+c),b.exam.attachments=k.filter(b.exam.attachments,function(a){return a!=c}),b.ArrayOfUploadFiles=k.filter(b.ArrayOfUploadFiles,function(a){return a.id!=c}),$(a.target).parent().remove()},b.cancel=function(){a.dismiss("cancel")},b.ok=function(h){h||(b.exam.date=moment(b.monthDate,b.format).format("YYYY-MM-DD"),b.exam.note||(b.exam.note="no notes"),void 0===g?d({url:e.link+"exams",method:"POST",data:b.exam}).then(function(b){a.close(),c.$broadcast("createExam",b.data.data)},function(a){b.ExamServerError=!0}):d({url:e.link+"exams/"+b.exam.id,method:"PUT",data:b.exam}).then(function(g){l(b.arrayOfFilesToDelete),d({url:e.link+"exams?search=class_id:"+f.classId,method:"GET"}).then(function(d){b.listOfExams=d.data.data,c.$broadcast("updateExam",b.listOfExams),a.close()},function(a){b.ExamServerError=!0})},function(a){b.ExamServerError=!0}))}}]),app.controller("filesController",["$scope","$rootScope","$uibModal","$log","$document","$http","appSettings","$routeParams","$timeout",function(a,b,c,d,e,f,g,h,i){function j(a){return 1===a.type}function k(a){return a.owner!==b.user.data.id}function l(a){return a.owner===b.user.data.id}function m(){f({url:g.link+"class/"+h.classId+"/library/"+b.parentFolderId,method:"GET"}).then(function(c){if(a.allFiles=c.data.data,console.log("-->",a.allFiles),a.listOfFiles=c.data.data,"student"===b.user.data.role){var d=a.listOfFiles.filter(k);a.listOfFiles=d,a.showTeacherFiles=!0;var e=a.allFiles.filter(l);a.listOfStudentFiles=e,0!==a.listOfStudentFiles.length?(a.arrayOfStudentFolders=a.listOfStudentFiles.filter(j),console.log(a.arrayOfStudentFolders),a.numberOfStudentFolders=a.arrayOfStudentFolders.length,a.numberOfStudentFiles=a.listOfStudentFiles.length-a.numberOfStudentFolders,a.examExist=!0,a.examNotExist=!1,$("#user-loader").hide()):a.examNotExist=!0}0!==c.data.data.length?(a.arrayOfFolders=a.listOfFiles.filter(j),a.numberOfFolders=a.arrayOfFolders.length,a.numberOfFiles=a.listOfFiles.length-a.numberOfFolders,a.examExist=!0,a.examNotExist=!1,$("#user-loader").hide()):(a.examNotExist=!0,a.examExist=!1,$("#user-loader").hide())},function(a){$("#user-loader").hide()})}if(b.activeClassItem=8,a.hideCustomButton=!0,b.$on("class-data-was-received",function(){b.user.classData.classInArchived||(a.hideCustomButton=!1)}),a.role=b.user.data.role,b.userData={iconAddFile:"images/files-library/icon-addfile-"+b.user.data.role+".svg",iconCreateFolder:"images/files-library/icon-createfolder-"+b.user.data.role+".svg",iconFolder:"images/files-library/icon-folder-"+b.user.data.role+".svg",iconArrowBack:"images/files-library/icon-arrow-back-"+b.user.data.role+".svg",color:b.user.data.role+"-color",border:b.user.data.role+"-border",background:b.user.data.role+"-background",iconPlus:"images/modal/icon-plus-"+b.user.data.role+".png"},a.showButton="parent"!==a.role,a.selection={selectedItems:[],currentItem:[]},a.arrayOfFoldersId=[0],b.parentFolderId=0,a.arrayOfStudentFoldersId=[0],b.parentFolderStudentId=0,a.iconFolderImage="images/files-library/icon-folder-"+b.user.data.role+".svg",m(),a.chooseFileType=function(a){if(a){var b=a.split(".");return"images/files-library/icon-file-"+b[1]+".svg"}return"images/files-library/icon-file-txt.svg"},a.folderIcon=function(){return b.userData.iconFolder},a.iconArrowBack=function(){return b.userData.iconArrowBack},a.downloadImgName=function(a){return a.name},a.functionSaveFile=function(a){var b=$("#"+a.id);b.attr("href",a.link),b.attr("download",a.filename),b[0].click(),b.removeAttr("href"),b.removeAttr("download")},a.functionOpenReference=function(a){var b=$("#"+a.id),c=new RegExp("^(http|https)://","i"),d=c.test(a.reference);d?a.reference=a.reference:a.reference="http://"+a.reference,b.attr("href",a.reference),b[0].click(),b.removeAttr("href")},a.createdByTeacher=function(){a.showTeacherFiles=!0,a.showStudentFiles=!1,0!==a.listOfFiles.length?(a.examNotExist=!1,a.examExist=!0):(a.examNotExist=!0,a.examExist=!1),$(".files-subheader-item").css("border-bottom","2px solid white"),$("#itemCreatedByStudent").css("border-bottom","2px solid #3d8e78");for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].active=!1},a.createdByStudent=function(){a.showTeacherFiles=!1,a.showStudentFiles=!0,0!==a.listOfStudentFiles.length?(a.examNotExist=!1,a.examExist=!0):(a.examNotExist=!0,a.examExist=!1),$(".files-subheader-item").css("border-bottom","2px solid white"),$("#itemCreatedByTeacher").css("border-bottom","2px solid #3d8e78");for(var b=0;b<a.contextMenu.items.length;b++)a.contextMenu.items[b].active=!0},b.$watch("parentFolderId",function(a,b){console.log(a,b)}),b.folderChain=[],b.studentFolderChain=[],a.openFolder=function(c){b.folderChain.push(c.id),a.selection={selectedItems:[],currentItem:[]},a.examExist=!1,a.examNotExist=!1,$("#user-loader").show(),a.arrayOfFoldersId.push(c.id),b.parentFolderId=c.id,f({url:g.link+"class/"+h.classId+"/library/"+c.id,method:"GET"}).then(function(b){a.allFiles=b.data.data,a.listOfFiles=b.data.data,0!==b.data.data.length?(a.arrayOfFolders=a.listOfFiles.filter(j),a.numberOfFolders=a.arrayOfFolders.length,a.numberOfFiles=a.listOfFiles.length-a.numberOfFolders,a.examExist=!0,a.examNotExist=!1,$("#user-loader").hide()):(a.numberOfFolders=0,a.numberOfFiles=0,a.examNotExist=!0,a.examExist=!1,$("#user-loader").hide())},function(a){$("#user-loader").hide()})},a.openStudentFolder=function(c){b.studentFolderChain.push(c.id),a.selection={selectedItems:[],currentItem:[]},a.examExist=!1,a.examNotExist=!1,$("#user-loader").show(),a.arrayOfStudentFoldersId.push(c.id),b.parentFolderStudentId=c.id,f({url:g.link+"class/"+h.classId+"/library/"+c.id,method:"GET"}).then(function(b){a.listOfStudentFiles=b.data.data,0!==a.listOfStudentFiles.length?(a.arrayOfStudentFolders=a.listOfStudentFiles.filter(j),a.numberOfStudentFolders=a.arrayOfStudentFolders.length,a.numberOfStudentFiles=a.listOfStudentFiles.length-a.numberOfStudentFolders,a.examExist=!0,a.examNotExist=!1,$("#user-loader").hide()):(a.examNotExist=!0,a.examExist=!1,$("#user-loader").hide())},function(a){$("#user-loader").hide()})},a.backToParentFolder=function(){b.folderChain.pop(),a.selection={selectedItems:[],currentItem:[]};for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!1;a.examExist=!1,a.examNotExist=!1,$("#user-loader").show(),b.parentFolderId=a.arrayOfFoldersId[a.arrayOfFoldersId.length-2],f({url:g.link+"class/"+h.classId+"/library/"+b.parentFolderId,method:"GET"}).then(function(c){a.allFiles=c.data.data,a.listOfFiles=c.data.data,0===b.parentFolderId&&"student"===b.user.data.role&&(a.listOfFiles=a.allFiles.filter(k)),0!==a.listOfFiles.length?(a.arrayOfFolders=a.listOfFiles.filter(j),a.numberOfFolders=a.arrayOfFolders.length,a.numberOfFiles=a.listOfFiles.length-a.numberOfFolders,a.examExist=!0,a.examNotExist=!1,$("#user-loader").hide()):(a.examNotExist=!0,a.examExist=!1,$("#user-loader").hide())},function(a){$("#user-loader").hide()}),a.arrayOfFoldersId.pop()},a.backToParentStudentFolder=function(){b.studentFolderChain.pop(),a.selection={selectedItems:[],currentItem:[]};for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!1;a.examExist=!1,a.examNotExist=!1,$("#user-loader").show(),b.parentFolderStudentId=a.arrayOfStudentFoldersId[a.arrayOfStudentFoldersId.length-2],f({url:g.link+"class/"+h.classId+"/library/"+b.parentFolderStudentId,method:"GET"}).then(function(c){if(a.allFiles=c.data.data,"student"===b.user.data.role){var d=(a.allFiles.filter(k),a.allFiles.filter(l));a.listOfStudentFiles=d}0!==a.listOfStudentFiles.length?(a.arrayOfStudentFolders=a.listOfStudentFiles.filter(j),a.numberOfStudentFolders=a.arrayOfStudentFolders.length,a.numberOfStudentFiles=a.listOfStudentFiles.length-a.numberOfStudentFolders,a.examExist=!0,a.examNotExist=!1,$("#user-loader").hide()):(a.examNotExist=!0,a.examExist=!1,$("#user-loader").hide())},function(a){$("#user-loader").hide()}),a.arrayOfStudentFoldersId.pop()},a.$on("createFile",function(c,e){d.log("New file:",e),"student"===b.user.data.role&&a.showStudentFiles?a.listOfStudentFiles.length>0?(a.listOfStudentFiles.push(e),a.examExist=!0,a.examNotExist=!1):(a.listOfStudentFiles=[],a.listOfStudentFiles[0]=e,a.examExist=!0,a.examNotExist=!1):a.listOfFiles.length>0?(a.listOfFiles.push(e),a.examExist=!0,a.examNotExist=!1):(a.listOfFiles=[],a.listOfFiles[0]=e,a.examExist=!0,a.examNotExist=!1)}),a.animationsEnabled=!0,a.openModalCreateFile=function(b,d){var f=d?angular.element(e[0].querySelector(".modal-demo "+d)):void 0;c.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/files/filesModal/filesModal.html",controller:"fileModalInstanceCtrl",controllerAs:"$ctrl",size:b,appendTo:f,resolve:{items:function(){return a.items}}})},a.openModalEditFile=function(b,d,f){var g=f?angular.element(e[0].querySelector(".modal-demo "+f)):void 0;c.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/files/filesModal/filesModal.html",controller:"fileModalInstanceCtrl",controllerAs:"$ctrl",size:d,appendTo:g,resolve:{items:function(){return b}}})},a.openModalCreateFolder=function(b,d){var f=d?angular.element(e[0].querySelector(".modal-demo "+d)):void 0;c.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/files/folderModal/folderModal.html",controller:"folderModalInstanceCtrl",controllerAs:"$ctrl",size:b,appendTo:f,resolve:{items:function(){return a.items}}})},a.openModalEditFolder=function(b,d,f){var g=f?angular.element(e[0].querySelector(".modal-demo "+f)):void 0;c.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/files/folderModal/folderModal.html",controller:"folderModalInstanceCtrl",controllerAs:"$ctrl",size:d,appendTo:g,resolve:{items:function(){return b}}})},a.openAreUSureModal=function(b){c.open({animation:a.animationsEnabled,templateUrl:"components/class/dashboard/files/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.openMoveModal=function(b){c.open({animation:a.animationsEnabled,templateUrl:"components/class/dashboard/files/moveModal/moveModal.html",controller:"moveFilesModalCtrl",size:b,resolve:{files:function(){return a.selection.selectedItems},studentFolders:function(){return a.arrayOfStudentFolders},folders:function(){return a.listOfFiles.filter(j)}}})},$(document).ready(function(){$(document).on("mouseenter",".button-inside",function(){$(this).find(".img-hover").show()}).on("mouseleave",".button-inside",function(){$(this).find(".img-hover").hide()})}),a.data={items:[{img:b.userData.iconCreateFolder,imgHover:"images/hover_img/create-folder.png",text:"Create Folder",click:a.openModalCreateFolder},{img:b.userData.iconAddFile,imgHover:"images/hover_img/add-file.png",text:"Add File",click:a.openModalCreateFile}],onGlobalButtonClick:""},a.contextMenu={items:[{img:"images/context_menu/icon-edit-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-edit-default_3x.png",imgHover:"images/context_menu/icon-edit-hover_3x.png",state:!1,active:!1,text:"Edit",multiSelect:!1},{img:"images/context_menu/icon-share-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-share-default_3x.png",imgHover:"images/context_menu/icon-share-hover_3x.png",state:!1,active:!1,text:"Move",multiSelect:["teacher","student","parents"],singleSelect:["teacher","student","parents"],click:a.openMoveModal},{img:"images/context_menu/icon-delete-"+b.user.data.role+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,active:!1,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"]}]},"teacher"===b.user.data.role||"student"===b.user.data.role&&a.showStudentFiles)for(var n=0;n<a.contextMenu.items.length;n++)a.contextMenu.items[n].active=!0;a.selectionWasChanged=function(){i(function(){if("teacher"===b.user.data.role||"student"===b.user.data.role&&a.showStudentFiles)if(1===a.selection.selectedItems.length){a.hidePlusButton=!0;for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!0;a.contextMenu.items[2].click=a.deleteArrayOfFiles,a.contextMenu.items[2].context=a.selection.selectedItems,1===a.selection.currentItem[0].type&&(a.contextMenu.items[0].click=a.openModalEditFolder,a.contextMenu.items[0].context=a.selection.currentItem[0]),0===a.selection.currentItem[0].type&&(a.contextMenu.items[0].click=a.openModalEditFile,a.contextMenu.items[0].context=a.selection.currentItem[0])}else if(0===a.selection.selectedItems.length){a.hidePlusButton=!1;for(var c=0;c<a.contextMenu.items.length;c++)a.contextMenu.items[c].state=!1}else a.hidePlusButton=!0,a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!0,a.contextMenu.items[2].state=!0})},a.InsertLibraryEntries=function(c){a.moveParentId,b.$broadcast("ChangeInsertStateTrue"),"teacher"===b.user.data.role&&(a.moveParentId=b.parentFolderId),"student"===b.user.data.role&&(a.moveParentId=b.parentFolderStudentId),f({method:"POST",url:g.link+"class/"+h.classId+"/library/move",headers:{"Content-Type":"application/json"},data:{entries_id:c,parent_id:a.moveParentId,id:+h.classId}}).success(function(a){"teacher"===b.user.data.role&&b.$broadcast("DeleteFileFromTeacherList"),"student"===b.user.data.role&&b.$broadcast("DeleteFileFromStudentList"),b.$broadcast("ChangeInsertState")}).error(function(){})},a.$on("ChangeInsertState",function(a,b){}),a.$on("DeleteFileFromTeacherList",function(b,c){m(),a.selection={selectedItems:[],currentItem:[]},a.selectionWasChanged()}),a.$on("DeleteFileFromStudentList",function(c,d){f({url:g.link+"class/"+h.classId+"/library/"+b.parentFolderStudentId,method:"GET"}).then(function(b){a.listOfStudentFiles=b.data.data;var c=a.listOfStudentFiles.filter(l);a.listOfStudentFiles=c,0!==a.listOfStudentFiles.length?(a.arrayOfStudentFolders=a.listOfStudentFiles.filter(j),a.numberOfStudentFolders=a.arrayOfStudentFolders.length,a.numberOfStudentFiles=a.listOfStudentFiles.length-a.numberOfStudentFolders,a.examExist=!0,a.examNotExist=!1,$("#user-loader").hide()):(a.examNotExist=!0,a.examExist=!1,$("#user-loader").hide())},function(a){$("#user-loader").hide()}),a.selection={selectedItems:[],currentItem:[]}}),a.deleteArrayOfFiles=function(c){a.modalContext={action:"deleteFiles",actionTitle:"delete",selection:a.selection.selectedItems,current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("deleteFiles",function(){f({method:"DELETE",url:g.link+"library",headers:{"Content-Type":"application/json"},data:{entries_folder_id:c,entries_file_id:[],entries_filename:[]}}).success(function(a){"teacher"===b.user.data.role&&b.$broadcast("DeleteFileFromTeacherList"),"student"===b.user.data.role&&b.$broadcast("DeleteFileFromStudentList")}).error(function(){})})}}]).filter("nameLengthFilter",function(){return function(a){return a.length>10?a.slice(0,10)+"...":a}}),angular.module("classDigApp").controller("fileModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){b.ExamServerError=!1,b.showAddFile=!0,void 0===g?(b.file={},b.file.color="#a7687f",b.file.parent_id=c.parentFolderId,b.file.id=f.classId,"student"===c.user.data.role&&(b.file.parent_id=c.parentFolderStudentId),this.modalConstant={header:"Create file",buttonSubmit:"CREATE FILE"}):(b.showAddFile=!1,b.file=angular.copy(g),this.modalConstant={header:"Update File",buttonSubmit:"UPDATE FILE"}),b.ArrayOfUploadFiles=[],b.uploadFile=function(a){a.upload=h.upload({url:e.link+"upload",data:{file:a}}),a.upload.then(function(c){a.result=c.data;var d={};d.id=c.data.data.id,d.name=a.name,b.ArrayOfUploadFiles[0]=d},function(a){a.status>0&&(b.errorMsg=a.status+": "+a.data,b.ExamServerError=!0,setTimeout(function(){b.ExamServerError=!1},5e3))},function(c){a.progress=Math.min(100,parseInt(100*c.loaded/c.total)),b.progressNumber=a.progress})},b.arrayOfFilesToDelete=[],b.DeleteFileFromSyllabus=function(a){var c=$(a.target).parent().attr("id");b.arrayOfFilesToDelete.push(+c),b.ArrayOfUploadFiles=k.filter(b.ArrayOfUploadFiles,function(a){return a.id!=c}),$(a.target).parent().remove()},b.$watch("UploadFile",function(){b.UploadFile&&b.uploadFile(b.UploadFile)}),b.cancel=function(){a.dismiss("cancel")},b.ok=function(h){if(!h)if(void 0===g){if(b.ArrayOfUploadFiles[0]&&b.file.reference)return void(b.ExamServerError=!0);b.ArrayOfUploadFiles[0]&&(b.file.file_entry_id=b.ArrayOfUploadFiles[0].id),d({url:e.link+"class/"+f.classId+"/library/file",method:"POST",data:b.file}).then(function(b){c.$broadcast("createFile",b.data.data),a.close()},function(a){b.ExamServerError=!0})}else d({url:e.link+"library/file/"+b.file.id,method:"PUT",data:b.file}).then(function(b){"teacher"===c.user.data.role&&c.$broadcast("DeleteFileFromTeacherList"),"student"===c.user.data.role&&c.$broadcast("DeleteFileFromStudentList"),a.close()},function(a){b.ExamServerError=!0})}}]),angular.module("classDigApp").controller("folderModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){b.ExamServerError=!1,void 0===g?(b.folder={},b.folder.color="#a7687f",b.folder.parent_id=c.parentFolderId,b.folder.id=f.classId,"student"===c.user.data.role&&(b.folder.parent_id=c.parentFolderStudentId),this.modalConstant={header:"Add Folder",buttonSubmit:"ADD FOLDER"}):(b.folder=angular.copy(g),this.modalConstant={header:"Update Folder",buttonSubmit:"UPDATE FOLDER"}),b.cancel=function(){a.dismiss("cancel")},b.ok=function(h){h||(void 0===g?d({url:e.link+"class/"+f.classId+"/library/folder",method:"POST",data:b.folder}).then(function(b){a.close(),c.$broadcast("createFile",b.data.data)},function(a){b.ExamServerError=!0}):d({url:e.link+"library/folder/"+b.folder.id,method:"PUT",data:b.folder}).then(function(b){"teacher"===c.user.data.role&&c.$broadcast("DeleteFileFromTeacherList"),"student"===c.user.data.role&&c.$broadcast("DeleteFileFromStudentList"),a.close()},function(a){b.ExamServerError=!0}))}}]),angular.module("classDigApp").controller("moveFilesModalCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","Upload","$timeout","$log","_","files","folders","studentFolders",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){a.forEach(function(a){-1===k.indexOf(a.id)&&b.folders.push(a)})}console.log(k,l,m),b.iconFolderImage="images/files-library/icon-folder-"+c.user.data.role+".svg",b.folders=[],b.moveBackDisabled=!1,b.moveDisabled=!0,"teacher"===c.user.data.role?n(l):"student"===c.user.data.role&&n(m),0===c.parentFolderId&&(b.moveBackDisabled=!0),b.folders.length||(b.moveDisabled=!0),b.selectionWasChanged=function(a){b.selectedFolder===a.id?b.selectedFolder=void 0:b.selectedFolder=a.id,b.selectedFolder?(b.moveBackDisabled=!0,b.moveDisabled=!1):(b.moveBackDisabled=!1,b.moveDisabled=!0),0===c.parentFolderId&&(b.moveBackDisabled=!0),b.folders.length||(b.moveDisabled=!0)},b.cancel=function(){a.dismiss("cancel")},b.InsertLibraryEntries=function(a,b){c.$broadcast("ChangeInsertStateTrue"),d({method:"POST",url:e.link+"class/"+f.classId+"/library/move",headers:{"Content-Type":"application/json"},data:{entries_id:a,parent_id:b,id:+f.classId}}).success(function(a){"teacher"===c.user.data.role&&c.$broadcast("DeleteFileFromTeacherList"),"student"===c.user.data.role&&c.$broadcast("DeleteFileFromStudentList"),c.$broadcast("ChangeInsertState")}).error(function(){})},b.ok=function(d){(d||!b.moveBackDisabled)&&(d&&b.moveDisabled||(d&&b.InsertLibraryEntries(k,b.selectedFolder),d||(1===c.folderChain.length&&b.InsertLibraryEntries(k,0),c.folderChain.length>=2&&"teacher"===c.user.data.role&&b.InsertLibraryEntries(k,c.folderChain[c.folderChain.length-2]),c.folderChain.length>=2&&"student"===c.user.data.role&&b.InsertLibraryEntries(k,c.studentFolderChain[c.studentFolderChain.length-2])),a.close()))}}]),app.controller("gradesController",["$scope","$rootScope","$uibModal","$routeParams","$log","$http","appSettings","$timeout",function(a,b,c,d,e,f,g,h){function i(){f.get(g.link+"class/"+d.classId+"/list/users").success(function(b){a.listOfStudents=b.data}).error(function(a){})}function j(){f({url:g.link+"category",method:"GET"}).then(function(b){a.optionsList=[];for(var c=0;c<b.data.data.length;c++)a.optionsList[c]={},a.optionsList[c].id=b.data.data[c].id,a.optionsList[c].option=b.data.data[c].name,a.optionsList[c].val=b.data.data[c].id},function(a){})}function k(){f({url:g.link+"gradable/item?search=class_id:"+d.classId,method:"GET"}).then(function(b){e.log(b.data),a.listOfGradableItems=b.data.data,$("#user-loader").hide(),0!==b.data.data.length?(a.examExist=!0,a.listOfGradableItems.length&&$(".add-gradable-items-button").hover(function(){$(".grades-hint").css("display","block")},function(){$(".grades-hint").css("display","none")})):a.examNotExist=!0,a.hideLoader=!0},function(b){a.hideLoader=!0})}function l(){f({url:g.link+"class/"+d.classId+"/grades",method:"GET"}).then(function(c){e.log("listOfGrades",c),a.listOfGrades=c.data.data;for(var d=0;d<a.listOfGrades.length;d++)a.listOfGrades[d].total=Math.round(a.listOfGrades[d].total);if("student"===a.userData.role)for(var f=0;f<a.listOfGrades.length;f++)a.listOfGrades[f].user.id===b.user.data.id&&(e.log("current list",a.listOfGrades[f]),a.currentUserListOfGrades=a.listOfGrades[f]);$("#user-loader").hide(),0!==c.data.data.length?a.examExist=!0:a.examNotExist=!0,a.categoryIndex=0;var g=_.keys(a.listOfGrades[0].items);a.itemKey=g[a.categoryIndex],a.calcmainSectionWidth=68*a.listOfGrades[0].items[a.itemKey].length,a.calcmainContainerWidth=772,$(".mainContainerWidth").css("width",a.calcmainContainerWidth),a.hideLoader=!0},function(b){a.hideLoader=!0})}var m=this;a.role=b.user.data.role,m.animationsEnabled=!0,b.activeClassItem=4,a.hideCustomButton=!0,b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},b.$on("class-data-was-received",function(){if(b.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&b.user.classData.owner!==b.user.data.id&&(a.hideCustomButton=!0),Array.isArray(b.user.classData.members)){a.arrayOfChildrenId=[];var c=b.user.classData.members[0].first_name;a.pickedChildId=b.user.classData.members[0].id;for(var d=0;d<b.user.classData.members.length;d++)a.arrayOfChildrenId.push(b.user.classData.members[d].first_name);h(function(){a.childName=c,a.changeChildren(a.childName)})}}),b.$on("createNewGradableItem",function(b,c){a.listOfGradableItems.unshift(c),l()}),b.$on("updateGradableItem",function(b,c){for(var d=0;d<a.listOfGradableItems.length;d++)a.listOfGradableItems[d].id===c.id&&(a.listOfGradableItems[d]=c)}),a.data={items:[],onGlobalButtonClick:function(){}},a.mouseOverItem=function(){this.grade["class"]="grey-td-background",console.log(this)},a.mouseOverItem=function(){this.grade["class"]=!0},a.mouseLeaveItem=function(){this.grade["class"]=!1},a.calculateTotalMark=function(a){var b=a.total;return a.bonus_mark&&(b+=a.bonus_mark,b>100&&(b=100)),b},i(),l(),j(),k(),l(),a.functionNextCategory=function(b){var c=_.keys(b);a.categoryIndex<c.length-1&&(a.categoryIndex++,a.itemKey=c[a.categoryIndex],a.calcmainSectionWidth=68*a.listOfGrades[0].items[a.itemKey].length)},a.functionPreviousCategory=function(b){if(a.categoryIndex>0){var c=_.keys(b);a.categoryIndex--,a.itemKey=c[a.categoryIndex],a.calcmainSectionWidth=68*a.listOfGrades[0].items[a.itemKey].length}},a.checkSumItemWeight=function(){var b=0,c=!0;if(a.listOfGradableItems){for(var d=0;d<a.listOfGradableItems.length;d++)b+=a.listOfGradableItems[d].weight;100===b&&(c=!1)}return c},a.createGradableItem=function(){c.open({animation:m.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",
templateUrl:"components/class/dashboard/grades/createGradableItem/createGradableItem.html",controller:"createGradableItemCtrl",controllerAs:"$ctrl",resolve:{items:function(){return m.items},category:function(){return a.optionsList}}})},a.updateGradableItem=function(b){c.open({animation:m.animationsEnabled,templateUrl:"components/class/dashboard/grades/createGradableItem/createGradableItem.html",controller:"createGradableItemCtrl",controllerAs:"$ctrl",resolve:{items:function(){return b},category:function(){return a.optionsList}}})},a.CreateNewGrade=function(b,c,h){if(a.maxGrade=h.max_grade,null===this.grade.mark){if(a.newGrade=this.grade,"-"!==$("#"+b).html())return;var i='<input type="number" min="0" id="newMark">';$("#"+b).html(i),$("#newMark").attr("placeholder",a.maxGrade),$("#newMark").focus(),$("#newMark").blur(function(){var b=$(this).val();return""===b?void $(this).parent().empty().html("-"):($(this).parent().empty().html(b),a.newGrade.mark=b,a.newGrade.class_id=d.classId,a.newGrade.user_id=c,void f({url:g.link+"grade",method:"POST",data:a.newGrade}).then(function(a){l()},function(a){e.log(a)}))})}else{if(a.updateGrade=this.grade,NaN==+$("#"+b).html())return;var i='<input type="number" min="0" id="newMark">';$("#"+b).html(i),$("#newMark").attr("placeholder",a.maxGrade),$("#newMark").focus(),$("#newMark").blur(function(){var b=$(this).val();return""===b?($(this).parent().empty().html("-"),void f({url:g.link+"grade/"+a.updateGrade.grade_id,method:"DELETE",data:a.updateGrade.grade_id}).then(function(a){l()},function(a){})):($(this).parent().empty().html(b),a.updateGrade.mark=b,a.updateGrade.class_id=d.classId,a.updateGrade.user_id=c,void f({url:g.link+"grade/"+a.updateGrade.grade_id,method:"PUT",data:a.updateGrade}).then(function(a){l()},function(a){}))})}},a.changeChildren=function(c){a.childName=c,a.countClass=0,angular.element(".children").css("border-bottom","2px solid white"),angular.element("#"+c).css("border-bottom","2px solid rgb(207, 81, 93)");for(var d=0;d<b.user.classData.members.length;d++)if(b.user.classData.members[d].first_name==a.childName){a.childName;a.pickedChildId=b.user.classData.members[d].id,a.pickedChild=b.user.classData.members[d];for(var d=0;d<a.listOfGrades.length;d++)a.listOfGrades[d].user.id===a.pickedChildId&&(e.log("current list",a.listOfGrades[d]),a.currentUserListOfGrades=a.listOfGrades[d])}},a.fixedHeight=$(".class-menu-item-block-center").outerHeight()-$(".table-fixed-header").outerHeight()+"px";var n=$(".container"),o=$(".topscroll"),p=$(".centerscroll");o.scroll(function(a){return n.addClass("hideScroll"),n.scrollTop($(this).scrollTop()),p.scrollTop($(this).scrollTop()),!1}),n.scroll(function(a){return n.addClass("hideScroll"),o.scrollTop($(this).scrollTop()),p.scrollTop($(this).scrollTop()),!1}),p.scroll(function(a){return n.addClass("hideScroll"),o.scrollTop($(this).scrollTop()),n.scrollTop($(this).scrollTop()),!1});var q=$(".headerGradeScroll"),r=$(".tableGradeScroll");q.scroll(function(a){return r.scrollLeft($(this).scrollLeft()),n.hasClass("hideScroll")&&n.deleteClass("hideScroll"),!1}),r.scroll(function(a){return q.scrollLeft($(this).scrollLeft()),n.hasClass("hideScroll")&&n.deleteClass("hideScroll"),!1}),a.gradeExport=function(){c.open({animation:m.animationsEnabled,templateUrl:"components/class/dashboard/grades/gradeExport/gradeExport.html",controller:"gradeExportCtrl",controllerAs:"$ctrl"})},a.restoreChanges=function(){f({url:g.link+"grade-restore/"+d.classId,method:"PUT"}).then(function(a){l()},function(a){e.log(a)})},$(document).ready(function(){$(document).on("mouseenter",".button-inside",function(){$(this).find(".img-hover").show()}).on("mouseleave",".button-inside",function(){$(this).find(".img-hover").hide()})}),a.checkSumItemWeight()&&(a.data={items:[{img:"images/feed/icon-export.svg ",imgHover:"images/hover_img/restore.png",text:"Restore changes",click:a.restoreChanges},{img:"images/feed/icon-restore-changes.svg",imgHover:"images/hover_img/export.png",text:"Export",click:a.gradeExport}],onGlobalButtonClick:""})}]),app.controller("parentsController",["$scope","$rootScope","$http","$routeParams","appSettings","classData","$timeout","$uibModal",function(a,b,c,d,e,f,g,h){b.activeClassItem=13,this.classId=d.classId;a.list=!1,a.studentsViewIsActive=!0,a.students=[],a.pickedStudents=[],a.sortBy="First Name",a.sort=["First Name","Last Name"],b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"},a.currentUser={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},a.changeSortBy=function(c){a.sortBy=c,"First Name"==a.sortBy?b.$broadcast("sort-by-changed","first_name"):"Last Name"==a.sortBy&&b.$broadcast("sort-by-changed","second_name")},a.hideCustomButton=!0,b.$on("class-data-was-received",function(){b.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&b.user.classData.owner!==b.user.data.id&&(a.hideCustomButton=!0)}),a.getParents=function(){c.get(e.link+"class/"+d.classId+"/list/parents").success(function(b){a.students=b.data}).error(function(a){})},a.getParents(),b.$on("parent-added-to-class",function(){a.getParents()}),c.get(e.link+"class/"+this.classId+"/list/users/withoutparents").success(function(b){a.studentsWithoutParents=b.data,a.studentsWithoutParents.length>0?a.inviteParent=!0:(a.inviteParent=!1,a.requestToJoinParent=!0)}).error(function(a){}),a.addNewParent=function(){h.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/parents/addNewParentModal/addNewParentModal.html",controller:"addNewParentModalInstanceCtrl",resolve:{items:function(){return!1}}})},a.data={items:[],onGlobalButtonClick:a.addNewParent},a.displayChanged=function(a){b.$broadcast("display-mode-changed",a)},b.$on("student-was-selected-in-students",function(a,b){}),a.openModalInviteClass=function(a,b,c){angular.element(".modal-content").addClass("joinClass");var d=c?angular.element($document[0].querySelector(".modal-demo "+c)):void 0;h.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/parents/inviteParent/inviteParent.html",controller:"inviteParentModalInstanceCtrl",size:"sm",appendTo:d,resolve:{items:function(){return a}}})},a.seeRequestToJoin=function(){a.inviteParent=!1,a.requestToJoinParent=!0},a.seeParentsToInvite=function(){a.inviteParent=!0,a.requestToJoinParent=!1},a.aceptReject=function(b,f){var g=a.requestedParents.indexOf(b);a.requestedParents.splice(g,1),c.post(e.link+"class/"+d.classId+"/user/request",{status:f,user_id:b.id}).success(function(b){a.getParents(),a.requestedParents.length||a.seeParentsToInvite()}).error(function(a){})},c.get(e.link+"class/"+d.classId+"/list/parents/request").success(function(b){a.requestedParents=b.data}).error(function(a){})}]),app.controller("reportsController",["$scope","$rootScope","$timeout","$routeParams","$http","appSettings","behaviorPreParser","$q",function(a,b,c,d,e,f,g,h){function i(a,b){for(var c=[],d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}function j(){"All"===a.sortBySpecific?"Ascending"===a.orderByValue?a.marksList.sort(function(b,c){return b[a.category]>c[a.category]?1:-1}):a.marksList.sort(function(b,c){return b[a.category]<c[a.category]?1:-1}):"Ascending"===a.orderByValue?a.marksList.sort(function(b,c){return b.items[a.category][a.sub_category]>c.items[a.category][a.sub_category]?1:-1}):a.marksList.sort(function(b,c){return b.items[a.category][a.sub_category]<c.items[a.category][a.sub_category]?1:-1})}function k(){"All"===a.sortBySpecific?a.marksList=a.marksList.filter(function(b){return b[a.category]?b[a.category]>=a.marksRangeSlider.minValue&&b[a.category]<=a.marksRangeSlider.maxValue?b:void 0:b}):a.marksList=a.marksList.filter(function(b){return b.items[a.category][a.sub_category]>=a.marksRangeSlider.minValue&&b.items[a.category][a.sub_category]<=a.marksRangeSlider.maxValue?b:void 0})}b.activeClassItem=10,a.role=b.user.data.role;var l=d.classId;a.initedAlready=!1,a.configChartAttendance={attendanceLabels:["Present","Late","Absent"],attendanceBackgroundColor:["#1ea66d","#ffc600","#f93640"],options:{tooltips:{enabled:!1},animation:{duration:0},legend:{display:!1},line:{borderWidth:0},elements:{arc:{borderWidth:0}}}},a.configDiagramMarks={chart:{type:"discreteBarChart",height:220,tooltip:{contentGenerator:function(a){return a.data.id},fixedTop:!0,classes:"toltip-for-nvd3"},duration:500,margin:{top:20,right:40,bottom:20,left:40},xAxis:{axisLabel:"",margin:{top:20}},yAxis:{axisLabel:""},valueFormat:function(a){return d3.format(",.0f")(a)},x:function(a){return a.label},y:function(a){return a.value+1e-10}}},a.configDiagram={chart:{type:"discreteBarChart",height:$(".class-menu-item-for-behavior").height()-$(".diagram-bottom-bar").height()-a.headerHeight,showValues:!0,duration:500,showXAxis:!1,margin:{top:5,right:20,bottom:10,left:20},tooltip:{enabled:!1},xAxis:{axisLabel:""},yAxis:{axisLabel:""},valueFormat:function(a){return d3.format(",.0f")(a)},x:function(a){return a.label},y:function(a){return a.value+1e-10}}},a.configDoughnutBehavior={labels:["Positive","Need work"],data:[25,60],colors:["#1ea66d","#f93640"],options:{tooltips:{enabled:!1},animation:{duration:0},legend:{display:!1},line:{borderWidth:0},elements:{arc:{borderWidth:0}}}},b.$on("class-data-was-received",function(){if(Array.isArray(b.user.classData.members)){a.arrayOfChildrenId=[];var d=b.user.classData.members[0].first_name;a.pickedChildId=b.user.classData.members[0].id;for(var e=0;e<b.user.classData.members.length;e++)a.arrayOfChildrenId.push(b.user.classData.members[e].first_name);c(function(){a.childName=d,a.changeChildren(a.childName)})}a.initedAlready||a.init()}),a.changeChildren=function(c){a.childName=c,a.countClass=0,angular.element(".children").css("border-bottom","2px solid white"),angular.element("#"+c).css("border-bottom","2px solid rgb(207, 81, 93)");for(var d=0;d<b.user.classData.members.length;d++)if(b.user.classData.members[d].first_name==a.childName){a.childName;a.pickedChildId=b.user.classData.members[d].id,a.pickedChild=b.user.classData.members[d],a.$broadcast("picked-child-attendance",a.pickedChild)}a.getAttendanceDataByStudent(),a.getBehaviorDataByStudent(),a.getMarksDataByStudent()},a.userInfo={iconAddFile:"images/files-library/icon-addfile-"+b.user.data.role+".svg",iconCreateFolder:"images/files-library/icon-createfolder-"+b.user.data.role+".svg",iconFolder:"images/files-library/icon-folder-"+b.user.data.role+".svg",iconArrowBack:"images/files-library/icon-arrow-back-"+b.user.data.role+".svg",color:b.user.data.role+"-color",border:b.user.data.role+"-border",background:b.user.data.role+"-background",iconPlus:"images/modal/icon-plus-"+b.user.data.role+".png"},a.init=function(){a.initedAlready=!0,a.changeReportsOption("Marks"),a.getAttendanceData(),a.getBehaviorAllData(),a.getMarksData(),a.getAttendanceDataByStudent(),a.getBehaviorDataByStudent(),a.getMarksDataByStudent(),c(function(){a.changeSortBy("Total"),a.orderByValue="Descending",a.attendanceFilterValue="Present",a.behaviorFilterValue="Positive"})},a.changeReportsOption=function(b){angular.element(".option").css("border-bottom","2px solid white"),angular.element("#"+b).css("border-bottom","2px solid"),a.currentOption=b,a.loading=!0,c(function(){a.loading=!1})},a.getAttendanceData=function(){e.get(f.link+"class/"+l+"/attendance/report").success(function(b){a.parseAttendanceData(b.data)})},a.parseAttendanceData=function(b){b.map(function(a){a.attendanceChartInfo=[],a.attendanceChartInfo[0]=a.present||0,a.attendanceChartInfo[1]=a.late||0,a.attendanceChartInfo[2]=a.absent||0}),a.attendanceList=b,a.attendanceListOrigin=b,a.attendanceParsed=!0},a.getBehaviorAllData=function(){h.all([e.get(f.link+"class/"+l+"/behavior/report"),e.get(f.link+"behavior/"+b.user.classData.owner)]).then(function(b){a.behaviours=b[1].data.data,a.configChartBehavior=g.createConfigObj(a.behaviours),a.behaviorObj=g.generateTemplate(a.behaviours),a.dataForDiagramPositive=g.generateDataForDiagram(a.behaviours,1),a.dataForDiagramNegative=g.generateDataForDiagram(a.behaviours,2),a.behaviorSpecificValues=a.configChartBehavior.positiveLabels,a.behaviorFilterSpecificValue=a.configChartBehavior.positiveLabels[0],a.parseBehaviorData(b[0].data.data)})},a.parseBehaviorData=function(b){b.map(function(b){b.behavior[1]=Object.assign({},a.behaviorObj[1],b.behavior[1]),b.behavior[2]=Object.assign({},a.behaviorObj[2],b.behavior[2]),b.behavior[1].positive=[],b.behavior[2].negative=[]}),b.map(function(b){for(var c in b.behavior[1]){var d=a.dataForDiagramPositive[0].values.find(function(a){return a.label===c});d&&(d.value+=b.behavior[1][c].count);var e=a.configChartBehavior.positiveLabels.indexOf(c);b.behavior[1].positive[e]=b.behavior[1][c].count}for(var c in b.behavior[2]){d=a.dataForDiagramNegative[0].values.find(function(a){return a.label===c}),d&&(d.value+=b.behavior[2][c].count);var e=a.configChartBehavior.negativeLabels.indexOf(c);b.behavior[2].negative[e]=b.behavior[2][c].count}}),a.behaviorList=b,a.behaviorListOrigin=b,a.behaviorParsed=!0},e.get(f.link+"category").success(function(b){a.sort=[],a.sortSubCategorys={},b.data.forEach(function(b){a.sort.push(b.name),a.sortSubCategorys[b.name]=[]})}),a.getMarksData=function(){h.all([e.get(f.link+"class/"+l+"/grades"),e.get(f.link+"category")]).then(function(b){a.sort=[],a.sortSubCategorys={},b[1].data.data.forEach(function(b){a.sort.push(b.name),a.sortSubCategorys[b.name]=[]}),a.parseMarksData(b[0].data.data)})},a.orderByValues=["Descending","Ascending"],a.parseMarksSpecific=function(b,c){var d={};return c[b]&&(c[b].length>=2&&-1===a.sortSubCategorys[b].indexOf("All")&&a.sortSubCategorys[b].push("All"),c[b].forEach(function(c){d[c.name]=c.mark;var e=a.sortSubCategorys[b].indexOf(c.name);-1===e&&a.sortSubCategorys[b].push(c.name)})),d},a.parseMarksData=function(b){a.marksList=[],a.marksListOrigin=[];for(var c=0,d=0,e=0;e<b.length;e++){var f={first_name:b[e].user.first_name,last_name:b[e].user.last_name,photo:b[e].user.photo,Total:b[e].total,items:{}};a.sort.forEach(function(c){f[c]=b[e]["total"+c],f.items[c]=a.parseMarksSpecific(c,b[e].items)}),c+=b[e].total,b[e].total&&d++,a.marksList.push(f),a.marksListOrigin.push(f)}a.averageMark=0,d&&(a.averageMark=(c/d).toFixed(2)),a.applyFilters(),a.marksParsed=!0},a.getAttendanceDataByStudent=function(){if("student"===a.role)var c=b.user.data.id;else"parent"===a.role&&a.pickedChildId&&(c=a.pickedChildId);c&&e.get(f.link+"attendance/report/user/"+c).success(function(b){a.parseAttendanceDataByStudent(b.data)})},a.parseAttendanceDataByStudent=function(b){b.map(function(a){a.general=[],a.general[0]=+a.present,a.general[1]=+a.absent,a.general[2]=+a.late}),a.attendanceDataByStudent=b},a.getBehaviorDataByStudent=function(){if("student"===a.role)var c=b.user.data.id;else"parent"===a.role&&a.pickedChildId&&(c=a.pickedChildId);c&&e.get(f.link+"report-behavior/user/"+c).success(function(b){a.parseBehaviorDataByStudent(b.data)})},a.parseBehaviorDataByStudent=function(b){b.map(function(a){a.general=[],a.general[0]=+a.positive,a.general[1]=+a.negative}),a.behaviorDataByStudent=b},a.getMarksDataByStudent=function(){if("student"===a.role)var c=b.user.data.id;else"parent"===a.role&&a.pickedChildId&&(c=a.pickedChildId);c&&e.get(f.link+"class/report-marks/user/"+c).success(function(b){a.parseMarksDataByStudent(b.data)})},a.parseMarksDataByStudent=function(b){for(var c=[{values:[]}],d=0;d<b.length;d++){b[d].color.length>7&&(b[d].color="#"+b[d].color.slice(3));var e={label:+b[d].averageMark,id:b[d]["class"],value:+b[d].averageMark,color:b[d].color};c[0].values.push(e)}a.dataForDiagramMarks=c;for(var d=0;d<a.dataForDiagramMarks[0].values.length;d++)for(var f=0;d>f;f++)a.dataForDiagramMarks[0].values[d].label+=" ";a.chunkedData=i(a.dataForDiagramMarks[0].values,4)},a.changeSortBy=function(b){a.sortBy=b,a.sortBySpecific="All"},a.changeSortBySpecific=function(b){a.sortBySpecific=b},a.changeOrderBy=function(b){a.orderByValue=b},a.changeOrderByAttendance=function(b){a.attendanceFilterValue=b},a.changeSortByBehavior=function(b){a.behaviorFilterValue=b,"Positive"===a.behaviorFilterValue?(a.behaviorSpecificValues=a.configChartBehavior.positiveLabels,a.behaviorFilterSpecificValue=a.configChartBehavior.positiveLabels[0]):(a.behaviorSpecificValues=a.configChartBehavior.negativeLabels,a.behaviorFilterSpecificValue=a.configChartBehavior.negativeLabels[0])},a.changeSortBySpecificBehavior=function(b){a.behaviorFilterSpecificValue=b},a.marksRangeSlider={minValue:0,maxValue:100,options:{floor:0,ceil:100,step:1,hideLimitLabels:!0,translate:function(b){return 0===b||b===a.marksRangeSlider.minValue||b+1===a.marksRangeSlider.minValue||b-1===a.marksRangeSlider.minValue||b-a.marksRangeSlider.minValue<a.marksRangeSlider.maxValue-b?"MIN"+b:100===b||b===a.marksRangeSlider.maxValue||b+1===a.marksRangeSlider.maxValue||b-1===a.marksRangeSlider.maxValue||b-a.marksRangeSlider.minValue>a.marksRangeSlider.maxValue-b?"MAX"+b:void 0}}},a.attendanceRangeSlider={minValue:0,maxValue:100,options:{floor:0,ceil:100,step:1,hideLimitLabels:!0,translate:function(b){return 0===b||b===a.marksRangeSlider.minValue||b+1===a.marksRangeSlider.minValue||b-1===a.marksRangeSlider.minValue||b-a.marksRangeSlider.minValue<a.marksRangeSlider.maxValue-b?"MIN"+b:100===b||b===a.marksRangeSlider.maxValue||b+1===a.marksRangeSlider.maxValue||b-1===a.marksRangeSlider.maxValue||b-a.marksRangeSlider.minValue>a.marksRangeSlider.maxValue-b?"MAX"+b:void 0}}},a.behaviorRangeSlider={minValue:0,maxValue:100,options:{floor:0,ceil:100,step:1,hideLimitLabels:!0,translate:function(b){return 0===b||b===a.marksRangeSlider.minValue||b+1===a.marksRangeSlider.minValue||b-1===a.marksRangeSlider.minValue||b-a.marksRangeSlider.minValue<a.marksRangeSlider.maxValue-b?"MIN"+b:100===b||b===a.marksRangeSlider.maxValue||b+1===a.marksRangeSlider.maxValue||b-1===a.marksRangeSlider.maxValue||b-a.marksRangeSlider.minValue>a.marksRangeSlider.maxValue-b?"MAX"+b:void 0}}},a.applyFiltersAttendance=function(){a.attendanceList=a.attendanceListOrigin,a.attendanceList=a.attendanceList.filter(function(b){return b[a.attendanceFilterValue.toLowerCase()]>=a.attendanceRangeSlider.minValue&&b[a.attendanceFilterValue.toLowerCase()]<=a.attendanceRangeSlider.maxValue?b:void 0}),a.attendanceList.sort(function(b,c){return b[a.attendanceFilterValue.toLowerCase()]<c[a.attendanceFilterValue.toLowerCase()]?1:-1})},a.applyFiltersBehavior=function(){a.behaviorList=a.behaviorListOrigin,"Positive"===a.behaviorFilterValue?(a.behaviorList=a.behaviorList.filter(function(b){return b.behavior[1][a.behaviorFilterSpecificValue].count>=a.behaviorRangeSlider.minValue&&b.behavior[1][a.behaviorFilterSpecificValue].count<=a.behaviorRangeSlider.maxValue?b:void 0}),a.behaviorList.sort(function(b,c){return b.behavior[1][a.behaviorFilterSpecificValue].count<c.behavior[1][a.behaviorFilterSpecificValue].count?1:-1})):(a.behaviorList=a.behaviorList.filter(function(b){return b.behavior[2][a.behaviorFilterSpecificValue].count>=a.behaviorRangeSlider.minValue&&b.behavior[2][a.behaviorFilterSpecificValue].count<=a.behaviorRangeSlider.maxValue?b:void 0}),a.behaviorList.sort(function(b,c){return b.behavior[2][a.behaviorFilterSpecificValue].count<c.behavior[2][a.behaviorFilterSpecificValue].count?1:-1}))},a.resetFilterBehavior=function(){a.behaviorList=a.behaviorListOrigin,a.behaviorRangeSlider.minValue=0,a.behaviorRangeSlider.maxValue=100,a.behaviorFilterValue="Positive",a.behaviorSpecificValues=a.configChartBehavior.positiveLabels,a.behaviorFilterSpecificValue="Working hard"},a.resetFiltersAttendance=function(){a.attendanceList=a.attendanceListOrigin,a.attendanceRangeSlider.minValue=0,a.attendanceRangeSlider.maxValue=100,a.attendanceFilterValue="Present"},a.applyFilters=function(){a.marksList=a.marksListOrigin,a.category=a.sortBy,a.sub_category=a.sortBySpecific,j(),k()},a.resetFilters=function(){a.marksList=a.marksListOrigin,a.marksRangeSlider.minValue=0,a.marksRangeSlider.maxValue=100,a.sortBy="Total",a.sortBySpecific="All",a.orderByValue="Descending",a.applyFilters()}}]).directive("lebalesDir",["$rootScope",function(a){return function(a,b,c){a.$last&&(a.headerHeight=$(".diagram-title").height(),a.bottomHeight=$(".diagram-bottom-bar").height(),a.allBlockHeight=$(".class-menu-item-for-behavior").height(),a.configDiagram.chart.height=a.allBlockHeight-a.bottomHeight-a.headerHeight)}}]),app.controller("studentsController",["$scope","$rootScope","$http","$routeParams","appSettings","classData","$timeout","$uibModal",function(a,b,c,d,e,f,g,h){b.activeClassItem=1,a.list=!1,a.studentsViewIsActive=!0,a.students=[],a.pickedStudents=[],a.sortBy="First Name",a.sort=["First Name","Last Name"," Highest Grade","Lowest Grade"];var i=b.user.data.role;a.hideCustomButton=!0,b.$on("class-data-was-received",function(){b.user.classData.classInArchived||(a.hideCustomButton=!1),"student"===b.role&&b.user.classData.owner!==b.user.data.id&&(a.hideCustomButton=!0),Array.isArray(b.user.classData.members)?(a.students=b.user.classData.members,a.asTeacher=!0):a.asTeacher=!1,b.user.data.id!==b.user.classData.owner&&a.contextMenu.items.forEach(function(a){a.active=!1})}),a.currentUser={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},a.init=function(){a.getStudents(),a.getRequestStudents()},b.$on("student-added-to-class",function(b){a.getStudents()}),a.changeSortBy=function(c){a.sortBy=c,"First Name"==a.sortBy?b.$broadcast("sort-by-changed","first_name"):"Last Name"==a.sortBy?b.$broadcast("sort-by-changed","second_name"):" Highest Grade"==a.sortBy?b.$broadcast("sort-by-changed","total_mark",1):"Lowest Grade"==a.sortBy&&b.$broadcast("sort-by-changed","total_mark",0)},a.getRequestStudents=function(){c.get(e.link+"class/"+d.classId+"/list/users/request").success(function(b){a.requestedStudents=b.data}).error(function(a){})},a.getStudents=function(){c.get(e.link+"class/"+d.classId+"/list/users").success(function(c){c&&(a.asTeacher?a.students=b.user.classData.members:a.students=c.data)}).error(function(a){})},a.aceptReject=function(b,f){var g=a.requestedStudents.indexOf(b);a.requestedStudents.splice(g,1),c.post(e.link+"class/"+d.classId+"/user/request",{status:f,user_id:b.id}).success(function(b){a.getStudents()}).error(function(a){})},a.displayChanged=function(a){b.$broadcast("display-mode-changed",a)},b.$on("student-was-selected-in-students-all",function(b,c){a.pickedStudents.length?(a.contextMenu.items.forEach(function(a){a.state=!0}),1!==a.pickedStudents.length&&(a.contextMenu.items[0].state=!1)):a.contextMenu.items.forEach(function(a){a.state=!1}),a.selectedUser=a.pickedStudents[0],a.studentInformation=a.pickedStudents[0]}),a.addExistingStudent=function(b,c){h.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/students/addExistingStudentModal/addExistingStudentModal.html",controller:"addExistingStudentsModalInstanceCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.students}}})},a.addStudentsFromPhoto=function(b,c){h.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/students/addStudentsFromPhotoModal/addStudentsFromPhotoModal.html",controller:"addStudentsFromPhotoModalInstanceCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.items}}})},a.addNewStudent=function(b,c){h.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/students/addNewStudentModal/addNewStudentModal.html",controller:"addNewStudentModalInstanceCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.items},fromPhoto:function(){return!1}}})},$(document).ready(function(){$(document).on("mouseenter",".button-inside",function(){$(this).find(".img-hover").show()}).on("mouseleave",".button-inside",function(){$(this).find(".img-hover").hide()})}),a.data={items:[{img:"images/students/student-from-photo_3x.png",imgHover:"images/hover_img/student-from-photo.png",text:"Add student from photo",click:a.addStudentsFromPhoto},{img:"images/students/existing-student_3x.png",imgHover:"images/hover_img/existing-student.png",text:"Add existing student",click:a.addExistingStudent},{img:"images/students/new-student_3x.png",imgHover:"images/hover_img/new-student.png",text:"Add new student",click:a.addNewStudent}]},a.clear=function(){a.contextMenu.items.forEach(function(a){a.state=!1}),a.pickedStudents=[],a.students.forEach(function(a){a.state=!1})},a.openAreUSureModal=function(b){h.open({templateUrl:"components/classes/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.editStudent=function(){h.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/students/addNewStudentModal/addNewStudentModal.html",controller:"addNewStudentModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a.pickedStudents[0].id},fromPhoto:function(){return!1}}});b.$on("user-was-updated",function(b){a.getStudents(),a.clear()})},a.shareStudent=function(){a.shareS=!1,h.open({templateUrl:"components/class/dashboard/students/shareStudentsModal/shareStudents.html",controller:"shareStudentsController",size:"sm",resolve:{items:function(){return!1}}}),b.$on("share-students",function d(e,f){var g=[];a.pickedStudents.forEach(function(a){g.push(a.id)}),a.shareS||(a.shareS=!0,c.post("http://api.classdig.oyihost.com/class/share-students",{users:g,email:f}).success(function(b){h.open({templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"Students were successfully shared."}}}),a.clear()}).error(function(b){h.open({templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"No such e-mail in our system."}}}),a.clear()})),b.$$listeners["share-students"]=[d],b.$$listeners["share-students"].splice(0,1)})},a.moveStudent=function(){a.moveS=!1,a.modalInstance=h.open({templateUrl:"components/class/dashboard/students/choseClass/choseClass.html",controller:"ModalMessageInstanceCtrl",controllerAs:"$ctrl",scope:a,resolve:{items:function(){return a.pickedStudents}}}),a.$on("can-move-students",function d(e,f){var g=[];a.pickedStudents.forEach(function(a){g.push(a.id)}),a.moveS||(a.moveS=!0,c.post("http://api.classdig.oyihost.com/class/move-students",{users:g,class_id:f}).success(function(b){h.open({templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"Students were successfully moved."}}}),g.forEach(function(b){var c=a.students.find(function(a){return a.id===b}),d=a.students.indexOf(c);a.students.splice(d,1)}),a.clear()}).error(function(b){h.open({templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"Students are already in picked class."}}}),a.clear()})),b.$$listeners["can-move-students"]=[d],b.$$listeners["can-move-students"].splice(0,1)})},a.deleteStudent=function(){a.modalContext={action:"deleteStudent",actionTitle:"delete",students:a.pickedStudents,fromStudents:!0},a.openAreUSureModal("sm"),b.$on("deleteStudent",function f(){var g=[];a.pickedStudents.forEach(function(a){g.push(a.id)}),c({method:"delete",url:e.link+"class/remove-users",headers:{"Content-Type":"application/json"},data:{class_id:d.classId,users:g}}).success(function(b){var c=a.students.filter(function(a){return a.state===!1||!a.state});a.students=c,a.clear()}).error(function(){}),b.$$listeners.deleteStudent=[f],b.$$listeners.deleteStudent.splice(0,1)})},b.$on("action-was-not-approved",function(){a.clear()}),a.contextMenu={items:[{img:"images/context_menu/icon-edit-"+i+"_3x.png",imgDisabled:"images/context_menu/icon-edit-default_3x.png",imgHover:"images/context_menu/icon-edit-hover_3x.png",state:!1,active:!0,text:"Edit",multiSelect:!1,click:a.editStudent},{img:"images/context_menu/icon-recover-"+i+"_3x.png",imgDisabled:"images/context_menu/icon-recover-default_3x.png",imgHover:"images/context_menu/icon-recover-hover_3x.png",state:!1,active:!0,text:"Share",multiSelect:["teacher","student","parents"],singleSelect:["teacher","student","parents"],click:a.shareStudent},{img:"images/context_menu/icon-share-"+i+"_3x.png",imgDisabled:"images/context_menu/icon-share-default_3x.png",imgHover:"images/context_menu/icon-share-hover_3x.png",state:!1,active:!0,text:"Move",multiSelect:["teacher","student","parents"],singleSelect:["teacher","student","parents"],click:a.moveStudent},{img:"images/context_menu/icon-delete-"+i+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,active:!0,text:"Delete",multiSelect:["teacher","student"],singleSelect:["teacher","student"],click:a.deleteStudent}]}}]).filter("filterBySearch",function(){return function(a,b){return b&&b.length?a.filter(function(a){return-1!==a.first_name.toLowerCase().indexOf(b)||-1!==a.last_name.toLowerCase().indexOf(b)?a:void 0}):a}}),angular.module("classDigApp").controller("addExistingStudentsModalInstanceCtrl",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log",function(a,b,c,d,e,f,g){var h=this;b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"},e.get(f.link+"user/classes").success(function(a){h.sort=a.data,h.sortBy=h.sort[0].name,b.$broadcast("picked-another-class",h.sort[0])}),h.changeSortBy=function(a){h.sortBy=a.name,b.$broadcast("picked-another-class",a,c)},a.opened.then(function(){d(function(){b.$broadcast("modal-opened-in-srudents",c)})}),h.cancel=function(){a.dismiss("cancel")},h.ok=function(){b.$broadcast("add-students-to-class"),a.close()}}]),angular.module("classDigApp").controller("addStudentsFromPhotoModalInstanceCtrl",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","$uibModal",function(a,b,c,d,e,f,g,h,i){function j(a,b,c){if(console.log(a,b,c),c)var d=b.width,e=b.height,f=b.x,g=b.y;else d=b.width+.5*b.width,e=b.height+.5*b.height,f=b.x-.25*b.width,g=b.y-.25*b.height;var h=document.createElement("div");return h.id="drawn-face-"+b.id,h.style.position="absolute",h.style.border="2px solid #4b93eb",h.style.borderRadius="50%",h.style.width=d+"px",h.style.height=e+"px",h.style.left=a.offsetLeft+f+"px",h.style.top=a.offsetTop+g+"px",document.getElementById("UploadedPictureContainer").appendChild(h),h}function k(a){for(var b=a.split(","),c=b[0].match(/:(.*?);/)[1],d=atob(b[1]),e=d.length,f=new Uint8Array(e);e--;)f[e]=d.charCodeAt(e);
return new Blob([f],{type:c,name:"test.jpg"})}function l(a,b,c){if(console.log(a,b,c),c)var d=b.width,e=b.height,f=b.x,g=b.y;else d=b.width+.5*b.width,e=b.height+.5*b.height,f=b.x-.25*b.width,g=b.y-.25*b.height;var i=document.createElement("canvas");i.width=d,i.height=e;var j=i.getContext("2d"),l=a.width/a.naturalWidth,m=a.height/a.naturalHeight;j.drawImage(a,f/l,g/m,d/l,e/m,0,0,d,e);var n=k(i.toDataURL("image/jpeg")),o=new File([n],"file_"+Math.random().toString(36).substring(7)+".jpg"),p={id:b.id,photo:i.toDataURL("image/jpeg"),blob:o};h.faces.push(p)}function m(a,b,c,d){var e=Math.pow(a-c,2),f=Math.pow(b-d,2);return Math.sqrt(e+f)}function n(a,b,c,d){var e=m(a,b,c,d),f={id:h.counter,x:a-e,y:b-e,width:2*e,height:2*e};return console.log(f),h.counter++,f}function o(){function a(){d.clearRect(0,0,b.width,b.height);var a=m(f.x,f.y,e.x,e.y);console.log("RADIUS",a),d.beginPath(),d.arc(f.x,f.y,a,0,2*Math.PI,!1),d.fillStyle="green",d.lineWidth=2,d.strokeStyle="#4b93eb",d.stroke()}var b=$("#canvas-over-img")[0],c=$("#uploadedPicture")[0];b.width=c.width,b.height=c.height;var d=b.getContext("2d"),e={x:0,y:0},f={x:0,y:0};b.addEventListener("mousemove",function(a){var c=$(b).offset();e.x=a.pageX-c.left,e.y=a.pageY-c.top},!1),b.addEventListener("mousedown",function(c){f.x=e.x,f.y=e.y,b.addEventListener("mousemove",a,!1)},!1),b.addEventListener("mouseup",function(){b.removeEventListener("mousemove",a,!1),d.clearRect(0,0,b.width,b.height);var c=n(f.x,f.y,e.x,e.y);l(h.image,c,!0),j(h.image,c,!0)},!1)}var p=this;h.loading=!1,h.counter=0,b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"},h.uploaded=function(){h.loading=!0,h.faces=[],h.count=0,h.image=document.getElementById("uploadedPicture"),h.image.onload=function(){h.$apply(function(){h.loading=!1}),o(),console.log("The image has loaded!");var a=new tracking.ObjectTracker("face");tracking.track(h.image,a),a.on("track",function(a){a.data.forEach(function(a){a.id=h.counter,h.counter++,console.log("rect",a),l(h.image,a),j(h.image,a),h.count++}),h.facesParsed=!0,h.$apply()})}},h.addNewStudentWithPhoto=function(a,b){i.open({animation:h.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/class/dashboard/students/addNewStudentModal/addNewStudentModal.html",controller:"addNewStudentModalInstanceCtrl",controllerAs:"$ctrl",size:a,resolve:{items:function(){return h.studentToAdd},fromPhoto:function(){return!0}}})},h.addNewStudent=function(a){console.log(a),h.studentToAdd=a,h.addNewStudentWithPhoto()},h.deleteStudent=function(c){$("#drawn-face-"+c.id).remove();var d=h.faces.indexOf(c);h.faces.splice(d,1),h.faces.length||(b.$broadcast("student-added-to-class"),a.close())},b.$on("student-from-photo-added-successful",function(a,b){h.deleteStudent(b)}),p.cancel=function(){a.dismiss("cancel")},p.ok=function(){a.close()}}]),angular.module("classDigApp").controller("addNewStudentModalInstanceCtrl",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams","fromPhoto","$q",function(a,b,c,d,e,f,g,h,i,j,k,l){b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"};var m=j.classId;h.newStudent={},h.newStudent.tags={},h.newStudent.parents=[{},{}],h.createStudentClicked=!1,h.setEditedStudentInfo=function(a){h.newStudent.email=a.email,h.newStudent.first_name=a.details.data.first_name,h.newStudent.last_name=a.details.data.last_name,h.newStudent.middle_name=a.details.data.middle_name,h.newStudent.gender=a.details.data.gender+1,h.newStudent.id=a.id,h.newStudent.tags.concern=a.details.data.concern?!0:!1,h.newStudent.tags.need_aid=a.details.data.need_aid?!0:!1,h.newStudent.parents=a.parents.data,h.newStudent.parents.length>1&&(h.showContinue=!0),h.studentImage=a.details.data.photo,h.newStudent.parents[0]&&(h.parentOneImage=a.parents.data[0].photo),h.newStudent.parents[1]&&(h.parentTwoImage=a.parents.data[1].photo)},c&&!k?(h.editing=!0,h.studentImage=!0,h.parentOneImage=!0,h.parentTwoImage=!0,e.get(f.link+"current-user/"+c).then(function(a){h.userInformation=a.data.data,console.log(h.userInformation),h.setEditedStudentInfo(h.userInformation)},function(a){console.log("error")})):(h.newStudent.tags.need_aid=!0,h.newStudent.tags.concern=!0,h.newStudent.gender=1,h.newStudent.parents[0].gender=1,h.newStudent.parents[1].gender=2),h.uploadPic=function(a,b){a.upload=i.upload({url:f.link+"upload",data:{file:a}}),a.upload.then(function(a){0===b?h.newStudent.image_id=a.data.data.id:1===b?h.newStudent.parents[0].image_id=a.data.data.id:2===b&&(h.newStudent.parents[1].image_id=a.data.data.id)},function(a){})},c&&k&&(h.studentImage=c.photo,h.uploadPic(c.blob,0)),h.uploaded=function(a,b){h.uploadPic(a[0],b)},h.onOffTag=function(a){h.newStudent.tags[a]=!h.newStudent.tags[a]},h.setGender=function(a,b){0===b?h.newStudent.gender=a:1===b?h.newStudent.parents[0].gender=a:2===b&&(h.newStudent.parents[1].gender=a)},h.addNewStudent=function(){console.log([h.newStudent]),e.post(f.link+"class/"+m+"/add/new/user",{users:[h.newStudent]}).success(function(d){c&&k?b.$broadcast("student-from-photo-added-successful",c):b.$broadcast("student-added-to-class"),a.close()}).error(function(){})},h.cancel=function(){a.dismiss("cancel")},h.ok=function(){return h.CreateStudentModal.$invalid?!1:void(h.CreateStudentModal.$invalid||h.editing?!h.CreateStudentModal.$invalid&&h.editing&&(b.$broadcast("user-was-updated"),a.close()):(h.showContinue||2!==h.newStudent.parents.length||h.newStudent.parents.pop(),h.addNewStudent()))}}]),angular.module("classDigApp").controller("addNewParentModalInstanceCtrl",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams",function(a,b,c,d,e,f,g,h,i,j){b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"};j.classId;h.newParent={},h.newParent.gender=1,h.createParentClicked=!1,h.uploadPic=function(a){a.upload=i.upload({url:f.link+"upload",data:{file:a}}),a.upload.then(function(a){h.newParent.image_id=a.data.data.id},function(a){})},h.uploaded=function(a){h.uploadPic(a[0])},h.setGender=function(a){h.newParent.gender=a},h.addNewParent=function(){console.log([h.newParent]),b.$broadcast("parent-added-to-class"),a.close()},h.cancel=function(){a.dismiss("cancel")},h.ok=function(){return h.CreateParentModal.$invalid?!1:void h.addNewParent()}}]),angular.module("classDigApp").controller("shareStudentsController",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams","localStorageService",function(a,b,c,d,e,f,g,h,i,j,k){b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"},h.cancel=function(){a.dismiss("cancel"),b.$broadcast("action-was-not-approved")},h.shareStudents=function(){b.$broadcast("share-students",h.mail),a.close()}}]),angular.module("classDigApp").controller("areUSureModalCtrl",["$scope","$rootScope","$http","$log","$routeParams","$uibModalInstance","appSettings","items",function(a,b,c,d,e,f,g,h){var i=this;i.items=h,i.approveStatus=!1,f.closed.then(function(){i.approveStatus?b.$broadcast(i.items.action):b.$broadcast("action-was-not-approved")}),i.approve=function(){i.approveStatus=!0,f.close()},i.cancel=function(){i.approveStatus=!1,f.close()}}]),angular.module("classDigApp").controller("confirmationModalController",["$uibModalInstance","$scope","items",function(a,b,c){c&&(b.message=c),b.cancel=function(){a.dismiss("cancel")}}]),angular.module("classDigApp").controller("areUSureModalEventsCtrl",["$scope","$rootScope","$http","$log","$routeParams","$uibModalInstance","appSettings","items",function(a,b,c,d,e,f,g,h){var i=this;i.items=h,i.approveStatus=!1,f.closed.then(function(){i.approveStatus?b.$broadcast("delete-was-approved",i.items):b.$broadcast("delete-was-not-approved")}),i.approve=function(){i.approveStatus=!0,f.close()},i.cancel=function(){i.approveStatus=!1,f.close()}}]),angular.module("classDigApp").controller("inviteParentModalInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){b.ExamServerError=!1,b.currentUser=g,b.cancel=function(){a.dismiss("cancel")},b.ok=function(g){g||(b.inviteParent={id:f.classId,email:b.inviteParentEmail,code:c.user.classData.code,class_name:c.user.classData.name,student_id:b.currentUser.id},d({url:e.link+"class/"+f.classId+"/parent/invitation",method:"POST",data:b.inviteParent}).then(function(b){a.close()},function(a){b.ExamServerError=!0}))}}]),angular.module("classDigApp").controller("createGradableItemCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","$log","_","category",function(a,b,c,d,e,f,g,h,i,j){b.ExamServerError=!1,void 0===g?this.modalConstant={header:"Create gradable item",buttonSubmit:"CREATE GRADABLE ITEM"}:(b.newGradableItem=angular.copy(g),this.modalConstant={header:"Update gradable item",buttonSubmit:"UPDATE GRADABLE ITEM"}),b.options=j,b.createCategory=function(){b.newCategory&&d({url:e.link+"category",method:"POST",data:{name:b.newCategory}}).then(function(a){function c(){d({url:e.link+"category",method:"GET"}).then(function(a){h.log("category!!!!",a.data.data),b.optionsList=[];for(var c=0;c<a.data.data.length;c++)b.optionsList[c]={},b.optionsList[c].id=a.data.data[c].id,b.optionsList[c].option=a.data.data[c].name,b.optionsList[c].val=a.data.data[c].id;b.options=b.optionsList},function(a){})}c(),b.newCategory=void 0},function(a){a.data.errors.weight[0]&&$("#server-error-create-item").html(a.data.errors.weight[0]).css({width:"210px",left:"280px",top:"10px"}),h.log(a.data.errors.weight[0]),b.ExamServerError=!0})},b.cancel=function(){a.dismiss("cancel")},b.ok=function(i){return i?void 0:isNaN(+b.newGradableItem.max_grade)?void(b.maxGradeIsNumb=!0):isNaN(+b.newGradableItem.weight)?void(b.weightIsNumb=!0):void(void 0===g?(b.newGradableItem.class_id=f.classId,b.newGradableItem.max_grade=+b.newGradableItem.max_grade,b.newGradableItem.weight=+b.newGradableItem.weight,d({url:e.link+"gradable/item",method:"POST",data:b.newGradableItem}).then(function(b){a.close(),c.$broadcast("createNewGradableItem",b.data.data)},function(a){var c=a.data.errors,d=c[Object.keys(c)[0]];$("#server-error-create-item").html(d).css({width:"210px",left:"280px",top:"10px"}),h.log(a.data.errors.weight[0]),b.ExamServerError=!0})):(b.newGradableItem.max_grade=+b.newGradableItem.max_grade,b.newGradableItem.weight=+b.newGradableItem.weight,d({url:e.link+"gradable/item/"+b.newGradableItem.id,method:"PUT",data:b.newGradableItem}).then(function(b){a.close(),c.$broadcast("updateGradableItem",b.data.data)},function(a){a.data.errors.weight[0]&&$("#server-error-create-item").html(a.data.errors.weight[0]).css({width:"210px",left:"280px",top:"10px"}),h.log(a.data.errors.weight[0]),b.ExamServerError=!0})))}}]),angular.module("classDigApp").controller("gradeExportCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","$log","_","$uibModal",function(a,b,c,d,e,f,g,h,i){function j(){d({url:e.link+"category",method:"GET"}).then(function(a){b.optionsList=[];for(var c=0;c<a.data.data.length;c++)b.optionsList[c]={},b.optionsList[c].id=a.data.data[c].id,b.optionsList[c].option=a.data.data[c].name,b.optionsList[c].val=a.data.data[c].id;console.log(a.data)},function(a){})}function k(){d({url:e.link+"gradable/item?search=class_id:"+f.classId,method:"GET"}).then(function(a){g.log(a.data),b.listOfGradableItems=a.data.data,$("#user-loader").hide(),0!==a.data.data.length?b.examExist=!0:b.examNotExist=!0,b.hideLoader=!0,console.log("gradable.items",a.data),b.listOfGradableItems=a.data.data;for(var c=0;c<b.listOfGradableItems.length;c++)console.log(b.listOfGradableItems[c].category),"Projects"==b.listOfGradableItems[c].category&&(b.showProjects=!0,b.projectsId=b.listOfGradableItems[c].id),"Exam"==b.listOfGradableItems[c].category&&(b.showExam=!0,b.examId=b.listOfGradableItems[c].id),"Assignment"==b.listOfGradableItems[c].category&&(b.showAssignment=!0,b.assignmentId=b.listOfGradableItems[c].id);b.exportItems=[{img:"images/grades/icon-grade-export-all.svg",imgActive:"images/grades/icon-grade-export-all-active.svg",imgNotActive:"images/grades/icon-grade-export-all-grey.svg",id:4,show:b.showAssignment&&b.showExam||b.showAssignment&&b.showProjects||b.showExam&&b.showProjects},{img:"images/grades/icon-grade-export-assignments.svg",imgActive:"images/grades/icon-grade-export-assignments-active.svg",imgNotActive:"images/grades/icon-grade-export-assignments-grey.svg",id:b.assignmentId,show:b.showAssignment},{img:"images/grades/icon-grade-export-exams.svg",imgActive:"images/grades/icon-grade-export-exams-active.svg",imgNotActive:"images/grades/icon-grade-export-exams-grey.svg",id:b.examId,show:b.showExam},{img:"images/grades/icon-grade-export-project.svg",imgActive:"images/grades/icon-grade-export-projects-active.svg",imgNotActive:"images/grades/icon-grade-export-projects-grey.svg",active:"-active",ext:".svg",title:"Grades",id:b.projectsId,show:b.showProjects}]},function(a){b.hideLoader=!0})}var l=this;b.ExamServerError=!1,b.selection={selectedItems:[],currentItem:[]},j(),k(),b.cancel=function(){a.dismiss("cancel")},b.hoverIn=function(){this.hoverEdit=!0,console.log(this.hoverEdit)},b.hoverOut=function(){this.hoverEdit=!1},b.ok=function(){b.exportGrades={},b.exportGrades.types=[],b.exportGrades.classes=[f.classId];for(var a=0;a<b.selection.currentItem.length;a++)console.log(b.selection.currentItem[a]),b.exportGrades.types.push(b.selection.currentItem[a].id),4===b.selection.currentItem[a].id&&(b.exportGrades.types=[1,2,3]);if(b.exportGrades.types.length>0){i.open({animation:l.animationsEnabled,templateUrl:"components/class/dashboard/grades/gradeExport/enterEmail/enterEmail.html",controller:"enterEmailGradeCtrl",controllerAs:"$ctrl",size:"sm",resolve:{items:function(){return b.exportGrades}}})}else b.typeError=!0},b.hideError=function(){b.typeError=!1}}]),angular.module("classDigApp").controller("enterEmailGradeCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){b.ExamServerError=!1,b.exportGrade=g,b.cancel=function(){a.dismiss("cancel")},b.ok=function(a){a||d({url:e.link+"class/export-grades",method:"POST",data:b.exportGrade}).then(function(a){b.codeWasSend=!0},function(a){b.showErrorMessage=!0,b.errorMessage=a.data.message})}}]),app.controller("groupsController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","classData","$timeout","DeletedClasses","CurrentClasses","$q","_","Upload","Feed","$log","Groups","groupsPaginator",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){$ctrl=this;var u=b.user.data.role,v=b.user.data.id;switch(u){case"student":a.roleColor="#429c87";break;case"parent":a.roleColor="#cf515d";break;case"teacher":a.roleColor="#4785d6"}a.paginatorCreated=new t("groups/owner?page="),a.paginatorJoined=new t("groups/member?page="),a.selection={selectedItems:[],currentItem:[]},b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},a.openModalJoinClass=function(){f.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/groups/joinGroup/joinGroup.html",controller:"joinGroupByCodeModalInstance",controllerAs:"$ctrl",size:"sm",resolve:{items:function(){return a.items}}})},a.openModalCreateGroup=function(){f.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/groups/createGroup/createGroup.html",controller:"createStudentModalInstance",controllerAs:"$ctrl",resolve:{items:function(){return a.items}}})},a.openAreUSureModal=function(b){f.open({animation:$ctrl.animationsEnabled,templateUrl:"components/classes/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.data={items:[{img:"images/groups/users-group-"+u+".svg",text:"Create new group",click:a.openModalCreateGroup},{img:"images/groups/join-group-"+u+".svg",text:"Join group",click:a.openModalJoinClass}]},a.changeView=function(b){a.activeSubtitleTab=b,angular.element(".classes-subheader-item").css("border-bottom","2px solid white"),angular.element("#"+b).css("border-bottom","2px solid"+a.roleColor),a.selection.currentItem=[],a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!1},a.selectionWasChanged=function(b){-1!==a.selection.currentItem.indexOf(b)?(a.selection.currentItem=[],a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!1):(a.selection.currentItem=[b],a.contextMenu.items[0].state=!0,a.contextMenu.items[1].state=!0)},a.deleteGroup=function(){a.modalContext={action:"deleteGroup",actionTitle:"delete",current:a.selection.currentItem},a.openAreUSureModal("sm"),b.$on("deleteGroup",function d(){c({method:"delete",url:i.link+"groups/"+a.selection.currentItem[0].id,headers:{"Content-Type":"application/json"}}).success(function(b){if(r.log("group deleted good",b),a.selection.currentItem[0]){var c=a.paginatorCreated.items.find(function(b){return b.id===a.selection.currentItem[0].id}),d=a.paginatorCreated.items.indexOf(c);a.paginatorCreated.items.splice(d,1),a.paginatorCreated.items.length||a.paginatorJoined.items.length?a.paginatorJoined.items.length&&(a.changeView("joined"),a.groupsLists.allTypes=!1):a.noGroups=!0,a.selection.currentItem=[]}}).error(function(){r.log("error")}),b.$$listeners.deleteGroup=[d]})},a.editGroup=function(){f.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/groups/createGroup/createGroup.html",controller:"createStudentModalInstance",controllerAs:"$ctrl",resolve:{items:function(){return a.selection.currentItem[0]}}})},a.contextMenu={items:[{img:"images/context_menu/icon-edit-"+u+"_3x.png",imgDisabled:"images/context_menu/icon-edit-default_3x.png",imgHover:"images/context_menu/icon-edit-hover_3x.png",state:!1,text:"Edit",active:!0,distinguished:!1,click:a.editGroup},{img:"images/context_menu/icon-delete-"+u+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",imgHover:"images/context_menu/icon-delete-hover_3x.png",state:!1,text:"Delete",active:!0,distinguished:!1,click:a.deleteGroup}]},a.init=function(){b.groupDiscussions&&(b.groupDiscussions.activeGroupId=-1),s.getGroups().then(function(b){var c={};c.created=b[0].data.data,c.joined=b[1].data.data,a.noGroups=!1,c.created.length&&c.joined.length?(c.allTypes=!0,a.changeView("created")):c.created.length&&!c.joined.length?(c.allTypes=!1,a.changeView("created")):!c.created.length&&c.joined.length?(c.allTypes=!1,a.changeView("joined")):a.noGroups=!0,a.groupsLists=c})},a.openGroup=function(a){s.setPickedGroup(a),e.path("/group/"+a.id+"/user/"+v+"/discussions")},b.$on("action-was-not-approved",function(){a.selection.currentItem=[],a.contextMenu.items[0].state=!1,a.contextMenu.items[1].state=!1}),a.$on("groups-have-to-be-reloaded-added",function(b,c){a.paginatorCreated.catName(c),a.paginatorCreated.items.unshift(c),a.init()}),a.$on("groups-have-to-be-reloaded-updated",function(b,c){a.paginatorCreated.catName(c);var d=a.paginatorCreated.items.find(function(a){return a.id===c.id}),e=a.paginatorCreated.items.indexOf(d);a.paginatorCreated.items[e]=c})}]).factory("groupsPaginator",["$http","appSettings","$routeParams","AuthenticationService","$rootScope",function(a,b,c,d,e){var f=function(a){this.items=[],this.busy=!1,this.after="",this.url=a};return f.prototype.catName=function(a){a.name.length>12?a.cated_name=a.name.substring(0,13)+"...":a.cated_name=a.name},f.prototype.nextPage=function(){this.busy||(this.busy=!0,a.get(b.link+this.url+this.after).success(function(a){if(0!==a.data.length){for(var b=a.data,c=0;c<b.length;c++){this.catName(b[c]);var d=this.items.find(function(a){return a.id===b[c].id});d||this.items.push(b[c])}this.after=a.meta.pagination.current_page+1,a.meta.pagination.total_pages!==a.meta.pagination.current_page&&(this.busy=!1,$("#user-loader").hide())}}.bind(this)))},f}]),angular.module("classDigServices").factory("Groups",["$http","AuthenticationService","appSettings","$routeParams","$rootScope","$q","_","$log",function(a,b,c,d,e,f,g,h){var i={};return i.pickedGroup={},i.init=function(){i.pickedGroup={}},i.setPickedGroup=function(a){i.pickedGroup=a,e.user.pickedGroup=a},i.getGroups=function(){return f.all([a.get(c.link+"groups/owner"),a.get(c.link+"groups/member")])},i.getGroupById=function(b,d){g.isEmpty(i.pickedGroup)?a.get(c.link+"group/"+b).success(function(a){i.pickedGroup=a.data,d(i.pickedGroup)}).error(function(a){h.log("Code: "+a.status_code+"; Message: "+a.message)}):d(i.pickedGroup)},i}]).factory("groupDiscussions",["$http","appSettings","$rootScope","chatTitle","$timeout","ChatGroups",function(a,b,c,d,e,f){var g=function(){this.activeRoom=-1,this.activeGroupId=-1,this.items=[],this.busy=!1,this.after=1,this.lastPage=!1};return g.prototype.setActiveGroup=function(a){this.activeGroupId=+a},g.prototype.updateItem=function(a){var b=this.items.find(function(b){return b.chat_room===a.room});b&&(b.last_message=a.content,b.sender=a.sender,this.activeRoom!==a.room&&b.unread_count++,b.last_activity=a.data_time,b.chat.items.push(a),c.$broadcast("new-massage-in-discussions",b))},g.prototype.nextPageGroups=function(d){if(!(this.busy||this.lastPage||!d&&1==this.after)){var e=$("#dialog-loader");if(e.show(),this.items>=10){var g=$("#dialog-list"),h=g[0].scrollHeight;g.scrollTop(h)}this.busy=!0;var i=this,j=b.link+"group/"+this.activeGroupId+"/discussion?page="+i.after;a.get(j).success(function(a){for(var b=a.data,d=0;d<b.length;d++)b[d].chat=new f,b[d].seen=!1,""===b[d].last_message&&(b[d].last_message="Empty discussion"),i.items.push(b[d]);a.meta.pagination.total_pages>1&&a.meta.pagination.total_pages>i.after?++i.after:i.lastPage=!0,e.hide(),i.busy=!1,c.$broadcast("groups-discussions-received",i.items.length)}.bind(this))}},g.prototype.markRead=function(c){c.chat_count>0&&(this.activeRoom!=c.chat_room||c.chat_count>0)&&a.put(b.link+"chat",{status:"read",id:c.chat_room}).success(function(a){c.unread_count=0})},g}]).factory("ChatGroups",["$http","appSettings","$log","$rootScope","$timeout",function(a,b,c,d,e){function f(a){for(var b=a.content.split("\n"),c=b.length-1;c>=0;c--)""===b[c]&&b.splice(c,1);return b.join("<br>")}var g=function(){this.items=[],this.busy=!1,this.after=1,this.lastPage=!1};return g.prototype.sendMessage=function(e,g){c.info("appendMess:",e),e.contentR=f(e),a.post(b.link+"chat/message",e).success(function(a){c.log(a),d.$broadcast("groups-message-sent",e)}).error(function(a){c.error(a)})},g.prototype.setInputMessageState=function(){e(function(){var a=$("#type-message");a.focus(),a.trigger("keyup")},0)},g.prototype.nextPage=function(c){if(!(this.busy||this.lastPage||this.items.length&&1===this.after||0!==$("#chat").scrollTop())){var d=this;this.busy=!0,$("#chat-loader").show(),a.get(b.link+"chat/room/"+c+"/messages?page="+d.after).success(function(a){for(var b=a.data,c=b.length,e=0;e<b.length;e++)b[e].contentR=f(b[e]),d.items.unshift(b[e]);a.meta.pagination.total_pages>1&&a.meta.pagination.total_pages>d.after?++d.after:d.lastPage=!0,d.busy=!1,$("#chat-loader").hide(),(2==d.after||1==d.after)&&d.setInputMessageState();for(var g=document.querySelectorAll("#container-chat > .message-container"),h=0,e=0;e<g.length;e++)c>=e&&(h+=g[e].scrollHeight);$("#chat").scrollTop(h)}.bind(this))}},g}]),angular.module("classDigApp").controller("joinGroupByCodeModalInstance",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams",function(a,b,c,d,e,f,g,h,i,j){a.opened.then(function(){b.$broadcast("action-was-not-approved")}),h.cancel=function(){a.dismiss("cancel")},h.join=function(){g.log(h.code),e({url:"http://api.classdig.oyihost.com/group/join/"+h.code,method:"GET"}).then(function(a){g.log(a.data),h.codeWasSend=!0},function(a){h.errorMessage=a.data.message,h.showErrorMessage=!0,g.log(a.data.message)})}}]),angular.module("classDigApp").controller("createStudentModalInstance",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams",function(a,b,c,d,e,f,g,h,i,j){h.newGroup={},h.haveImg=!0,a.opened.then(function(){c?(h.editing=!0,h.haveImg=!0,h.picFile=c.image.link,h.newGroup.name=c.name,h.newGroup.code=c.code,h.newGroup.image_id=c.image.id,h.newGroup.participants=[],c.participants.forEach(function(a){h.newGroup.participants.push(a.id)})):e.get(f.link+"group/code").success(function(a){h.newGroup.code=a.code}).error(function(a){g.log("Code: "+a.status_code+"; Message: "+a.message)}),b.$broadcast("action-was-not-approved")}),h.$watch("picFile",function(){return h.haveImg?void(h.haveImg=!1):void(h.picFile&&h.uploadPic(h.picFile))}),h.uploadPic=function(a){a.upload=i.upload({url:f.link+"upload",data:{file:a}}),a.upload.then(function(b){a.result=b.data,h.uploadPictureId=b.data.data.id,h.newGroup.image_id=h.uploadPictureId},function(a){a.status>0&&(h.errorMsg=a.status+": "+a.data)},function(b){a.progress=Math.min(100,parseInt(100*b.loaded/b.total)),h.progressNumber=a.progress})},h.addNewGroup=function(){e.post(f.link+"groups",h.newGroup).success(function(a){b.$broadcast("groups-have-to-be-reloaded-added",a.data)}).error(function(a){})},h.updateGroup=function(){e.put(f.link+"groups/"+c.id,h.newGroup).success(function(a){g.log(a),b.$broadcast("groups-have-to-be-reloaded-updated",a.data)}).error(function(a){g.log("Code: "+a.status_code+"; Message: "+a.message)})},h.cancel=function(){a.dismiss("cancel"),g.log(h.newGroup)},h.ok=function(){return g.log(h.newGroup),h.CreateGroupModal.$invalid?!1:(g.log("valid",h.newGroup),c?h.updateGroup():h.addNewGroup(),a.close(),void 0)}}]),angular.module("classDigApp").controller("confirmationModalCroupsController",["$uibModalInstance","$scope","items","$rootScope",function(a,b,c,d){b.userData={iconAddFile:"images/files-library/icon-addfile-"+d.user.data.role+".svg",iconCreateFolder:"images/files-library/icon-createfolder-"+d.user.data.role+".svg",iconFolder:"images/files-library/icon-folder-"+d.user.data.role+".svg",iconArrowBack:"images/files-library/icon-arrow-back-"+d.user.data.role+".svg",color:d.user.data.role+"-color",border:d.user.data.role+"-border",background:d.user.data.role+"-background",iconPlus:"images/modal/icon-plus-"+d.user.data.role+".png"},b.items=c,b.cancel=function(){a.dismiss("cancel")}}]);var app=angular.module("classDigApp");app.controller("MenuGroupController",["$scope","$http","$routeParams","$rootScope","classData","$timeout","Groups","$log",function(a,b,c,d,e,f,g,h){a.activeItem=d.activeGroupItem;var i=c.studentId,j=c.groupId,k="",l="-"+d.user.data.role;g.getGroupById(j,function(b){if(d.user.pickedGroup=b,a.mydata={image:b.image.link,name:b.name},b.user_id===+i){a.menuLinks=[{Id:1,icon:"images/menu_class/students/icon-students",role:k,exte:"_3x.png",title:"Discussions",href:"#/group/"+j+"/user/"+i+"/discussions"},{Id:2,icon:"images/menu_class/assignment/icon-assignment",role:k,exte:"_3x.png",title:"Members",href:"#/group/"+j+"/user/"+i+"/members"},{Id:3,icon:"images/menu_class/exams/icon-exams",role:k,exte:"_3x.png",title:"Invite member",href:"#/group/"+j+"/user/"+i+"/invite"}];for(var c=0;c<a.menuLinks.length;c++)a.menuLinks[c].Id===a.activeItem&&(a.menuLinks[c].role=l)}else{a.menuLinks=[{Id:1,icon:"images/menu_class/students/icon-students",role:k,exte:"_3x.png",title:"Discussions",href:"#/group/"+j+"/user/"+i+"/discussions"},{Id:2,icon:"images/menu_class/assignment/icon-assignment",role:k,exte:"_3x.png",title:"Members",href:"#/group/"+j+"/user/"+i+"/members"}];for(var c=0;c<a.menuLinks.length;c++)a.menuLinks[c].Id===a.activeItem&&(a.menuLinks[c].role=l)}d.$broadcast("group-data-received",b)})}]);var app=angular.module("classDigApp");app.controller("groupMembersController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","$timeout","$q","_","Upload","$log","Groups","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.activeGroupItem=2;var q=p.groupId;a.role=b.user.data.role,a.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",userListBorder:b.user.data.role+"-userListBorder"},a.students=[],a.selectedStudent=[],b.$on("group-data-received",function(){b.user.pickedGroup.user_id===b.user.data.id&&(a.admin=!0),a.students=b.user.pickedGroup.participants}),a.$watch("selectedStudent",function(){a.selectedStudent.length&&n.log("change")}),a.pickStudent=function(b){-1!==a.selectedStudent.indexOf(b)?a.selectedStudent=[]:a.selectedStudent=[b]},a.confirmAction=function(){f.open({templateUrl:"components/groups/confirmationModalGroups/confirmationModalGroups.html",controller:"confirmationModalCroupsController",size:"sm",resolve:{items:function(){return a.action}}})},a.accept=function(b){a.action="accept",a.confirmAction(),c.post(i.link+"group/accept",{user_id:b.id,group_id:q}).success(function(a){n.log(a),b.status=1}).error(function(){n.log("error")})},a.rejectRemove=function(b,d){a.action="reject",d||a.confirmAction(),c({method:"delete",url:i.link+"group/reject",headers:{"Content-Type":"application/json"},data:{user_id:b.id,group_id:q}}).success(function(){n.log("rejected good"),d&&e.path("/groups");var c=a.students.indexOf(b);a.students.splice(c,1)}).error(function(){n.log("error")})}}]);var app=angular.module("classDigApp");app.controller("groupInviteController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","$timeout","$q","_","Upload","$log","Groups","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.activeGroupItem=3,b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+".png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+".png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",pollBorder:b.user.data.role+"-poll-border",
iconAddButton:"images/modal/icon-add-button-"+b.user.data.role+".png",iconClock:"images/poll/icon-clock.png",iconExit:"images/poll/icon-exit.png",iconFlash:"images/poll/icon-flash.png",iconClockActive:"images/poll/icon-clock-"+b.user.data.role+".png",iconExitActive:"images/poll/icon-exit-"+b.user.data.role+".png",iconFlashActive:"images/poll/icon-flash-"+b.user.data.role+".png",userListBorder:b.user.data.role+"-userListBorder"},a.role=b.user.data.role,"teacher"==b.userData.role?a.roles=[{id:"student",description:"Students",url:"users"},{id:"parent",description:"Parents",url:"parents"}]:a.roles=[{id:"student",description:"Students",url:"users"}],k.all([c.get(i.link+"group/"+p.groupId),c.get(i.link+"user/classes")]).then(function(c){a.exception=c[0].data.data.participants,a.sort=c[1].data.data,a.sortBy=a.sort[0].name,a.classForRequest=a.sort[0],a.selectedRole="users",a.userRole="users",b.$broadcast("invite-members-for-groups",a.sort[0],a.userRole,a.exception)}),a.changeSortBy=function(c){a.classForRequest=c,n.log(a.classForRequest,a.userRole,b.user.pickedGroup.participants),a.sortBy=c.name,b.$broadcast("invite-members-for-groups",a.classForRequest,a.userRole,b.user.pickedGroup.participants)},a.selectRole=function(c){n.log(a.classForRequest,a.userRole,b.user.pickedGroup.participants),a.selectedRole=c,a.userRole=c,b.$broadcast("invite-members-for-groups",a.classForRequest,a.userRole,b.user.pickedGroup.participants)},a.ok=function(){b.$broadcast("invite-students-to-group",b.user.pickedGroup.id)}}]);var app=angular.module("classDigApp");app.controller("groupDiscussionsController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","$timeout","$q","_","Upload","$log","Groups","chatTitle","$routeParams","groupDiscussions","Chat","ChatGroups",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){if(b.groupDiscussions)if(b.groupDiscussions.items.length){if(q.room){$("#dialog-loader").hide(),a.active=q.room;var c=b.groupDiscussions.items.find(function(a){return a.chat_room===q.room});a.changeRoom(c)}}else $("#dialog-loader").hide();else $("#dialog-loader").show()}b.activeGroupItem=1,b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png"},a.role=b.user.data.role,a.user=b.user.data,a.content="",a.message={content:"",sender:{id:b.user.data.id,first_name:b.user.data.details.data.first_name,last_name:b.user.data.details.data.last_name,image:b.user.data.details.data.photo},date_time:{},attachments:[]},a.inited=!0,a.init=function(){b.groupDiscussions&&-1!==b.groupDiscussions.activeGroupId||(b.groupDiscussions=new r,b.groupDiscussions.setActiveGroup(q.groupId),b.groupDiscussions.nextPageGroups(!0)),a.dicussionsCount=b.groupDiscussions.items.length,q.room?(a.active=q.room,b.groupDiscussions.activeRoom=q.room):a.active=-1},a.openAreUSureModal=function(b){f.open({templateUrl:"components/classes/areUSureModal/areUSureModal.html",controller:"areUSureModalCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.modalContext}}})},a.deleteMessages=function(){a.modalContext={action:"deleteMessage",actionTitle:"delete",students:a.selectedMessages,fromStudents:!1},a.openAreUSureModal("sm"),b.$on("deleteMessage",function d(){var e=[];a.selectedMessages.forEach(function(a){e.push(a.id)}),c({method:"delete",url:i.link+"chat/messages",headers:{"Content-Type":"application/json"},data:{messages:e}}).success(function(a){var c=b.groupDiscussions.items.find(function(a){return a.chat_room===b.groupDiscussions.activeRoom});e.forEach(function(a){var b=c.chat.items.find(function(b){return b.id===a}),d=c.chat.items.indexOf(b);c.chat.items.splice(d,1)}),c.chat.items.length?(c.last_message=c.chat.items[c.chat.items.length-1].content,c.last_activity=c.chat.items[c.chat.items.length-1].date_time,c.sender=c.chat.items[c.chat.items.length-1].sender):c.last_message="Empty discussion"}),a.selectedMessages=[],b.$$listeners.deleteMessage=[d],b.$$listeners.deleteMessage.splice(0,1)})},a.contextMenu={items:[{img:"images/context_menu/icon-delete-"+a.role+"_3x.png",imgDisabled:"images/context_menu/icon-delete-default_3x.png",state:!1,active:!0,text:"Delete",click:a.deleteMessages}]},a.selectedMessages=[],a.selectMessage=function(b){var c=a.selectedMessages.find(function(a){return a.id===b.id});if(c){var d=a.selectedMessages.indexOf(c);a.selectedMessages.splice(d,1)}else a.selectedMessages.push(b);a.selectedMessages.length?a.contextMenu.items[0].state=!0:a.contextMenu.items[0].state=!1},a.$on("groups-discussions-received",function(b,c){a.dicussionsCount=c}),a.$on("entered-room-scroll-event",function(){a.justEntered=!1}),b.$on("group-data-received",function v(a,c){b.$$listeners["group-data-received"]=[v]}),a.changeRoom=function(c){a.selectedMessages=[],a.contextMenu.items[0].state=!1,a.justEntered=!0,a.currentRoom=c,b.groupDiscussions.activeRoom=c.chat_room,a.active=c.chat_room,c.seen||c.chat.nextPage(c.chat_room,!0),b.groupDiscussions.markRead(c),c.seen=!0,a.chatTitle=c.name,j(function(){var b=$("#chat"),c=b[0].scrollHeight;b.scrollTop(c),a.inited=!1})},u(),scrollEventHendler=function(){0===$("#chat").scrollTop()&&a.currentRoom.chat.nextPage(a.active)},a.sendMessage=function(){(""!==a.content||a.upload)&&(a.upload&&(a.message.attachments[0]=a.upload.id),a.message.date_time.date=moment(moment().format()).utc().format("YYYY-MM-DD H:m:ss"),a.message.content=a.content,a.message.room=a.active,a.message.type=2,a.currentRoom.chat.sendMessage(a.message,a.upload),a.currentRoom.chat.setInputMessageState(),a.content="",a.newMessageSent=!0,a.picFile=void 0,a.upload=void 0)},a.$on("new-message-sent-scroll-event",function(){a.newMessageSent=!1}),a.$on("groups-message-sent",function(c,d){var e=b.groupDiscussions.items.indexOf(a.currentRoom);b.groupDiscussions.items.splice(e,1),b.groupDiscussions.items.unshift(a.currentRoom),a.currentRoom.last_message=d.content,a.message.attachments=[]}),a.$on("new-discussion-created",function(a,c){c.seen=!1,c.chat=new t,c.last_message="Empty discussion",c.sender={},c.sender.image=b.user.data.details.data.photo,c.last_message="Empty discussion",b.groupDiscussions.items.unshift(c)}),a.$watch("picFile",function(){a.picFile&&(a.loadingImg=!0,a.uploadPic(a.picFile))}),a.uploadPic=function(b){b.upload=m.upload({url:i.link+"upload",data:{file:b}}),b.upload.then(function(c){b.result=c.data,a.upload=c.data.data,a.loadingImg=!1},function(b){b.status>0&&(a.errorMsg=b.status+": "+b.data)})},a.createNewDiscussion=function(){a.modalInstance=f.open({templateUrl:"components/groups/group/dashboard/discussions/newDiscussionModal/newDiscussionModal.html",controller:"createNewDiscussion",controllerAs:"$ctrl",size:"sm",resolve:{items:function(){return a.items}}})},a.data={items:[],onGlobalButtonClick:a.createNewDiscussion},a.resizeArea=function(a){var b=angular.element(".type-message")[0],c=a.currentTarget;if(c.scrollHeight<100){c.style.height=0,c.style.height=c.scrollHeight+"px";var d=34+c.scrollHeight;$(b).css({height:d+"px"});var e=$("#chat"),f=e[0].scrollHeight;e.scrollTop()+e.innerHeight()>=e[0].scrollHeight-250&&$(e).scrollTop(f)}},a.$on("new-massage-in-discussions",function(c,d){a.newMessageReceived=!0;var e=b.groupDiscussions.items.indexOf(d);b.groupDiscussions.items.splice(e,1),b.groupDiscussions.items.unshift(d)}),a.$on("new-message-received-scroll",function(){a.newMessageReceived=!1})}]).directive("myRepeatDirective",["$rootScope",function(a){return function(b,c,d){if(b.$last){var e=$("#chat"),f=e[0].scrollHeight;if(b.newMessageReceived)return e.scrollTop()+e.innerHeight()<=e[0].scrollHeight-250?void a.$broadcast("new-message-received-scroll"):(a.$broadcast("new-message-received-scroll"),f=e[0].scrollHeight,void $(e).scrollTop(f));b.currentRoom.chat.after<=2&&$(e).scrollTop(f),b.justEntered&&b.currentRoom.seen&&($(e).scrollTop(f),a.$broadcast("entered-room-scroll-event")),b.newMessageSent&&($(e).scrollTop(f),a.$broadcast("new-message-sent-scroll-event"))}}}]),angular.module("classDigApp").controller("createNewDiscussion",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams",function(a,b,c,d,e,f,g,h,i,j){h.newDiscussion={group_id:j.groupId},b.user.pickedGroup.participants.length<=2?h.notEnoughusers=!0:h.notEnoughUsers=!1,h.cancel=function(){a.dismiss("cancel")},h.createDiscussion=function(){e.post("http://api.classdig.oyihost.com/group/discussion",h.newDiscussion).success(function(c){g.log(c.data),h.discussionCreated=!0,b.$broadcast("new-discussion-created",c.data),a.dismiss("cancel")},function(a){h.errorMessage=a.data.message,h.showErrorMessage=!0,g.log(a.data.message)})}}]),angular.module("classDigApp").controller("addBonusSussesController",["$uibModalInstance","$scope","$rootScope","information",function(a,b,c,d){b.information=angular.copy(d),b.userData={iconAddFile:"images/files-library/icon-addfile-"+c.user.data.role+".svg",iconCreateFolder:"images/files-library/icon-createfolder-"+c.user.data.role+".svg",iconFolder:"images/files-library/icon-folder-"+c.user.data.role+".svg",iconArrowBack:"images/files-library/icon-arrow-back-"+c.user.data.role+".svg",color:c.user.data.role+"-color",border:c.user.data.role+"-border",background:c.user.data.role+"-background",iconPlus:"images/modal/icon-plus-"+c.user.data.role+".png"},b.cancel=function(){a.dismiss("cancel")}}]),angular.module("classDigApp").directive("arrayQuestions",["$timeout",function(a){return{scope:{questionsArray:"=",formSubmitted:"=",questionId:"="},templateUrl:"components/class/dashboard/polls/pollsModal/CreatePollsDirectives/arrayOfQuestions.html",controller:["$scope","$rootScope","Upload","appSettings",function(a,b,c,d){a.color=b.userData.color,a.border=b.userData.border,a.background=b.userData.background,a.iconCamera=b.userData.iconCamera,a.questionsArray.title&&(a.questionsArray.question=a.questionsArray.title),a.questionsArray.image&&(a.picFile=a.questionsArray.image.link),a.addNewAnswerInputField=function(){a.questionsArray.answers.length>=4&&angular.element("#"+a.questionId).css("display","none"),a.questionsArray.answers.length>=5||a.questionsArray.answers.push({})},a.deleteChoice=function(b){a.questionsArray.answers.splice(b,1)},a.uploadPicture=function(b){b.upload=c.upload({url:d.link+"upload",data:{file:b}}),b.upload.then(function(c){b.result=c.data,a.uploadPictureId=c.data.data.id,a.questionsArray.image=a.uploadPictureId},function(b){b.status>0&&(a.errorMsg=b.status+": "+b.data)},function(c){b.progress=Math.min(100,parseInt(100*c.loaded/c.total)),a.progressNumber=b.progress})},a.$watch("picFile",function(){a.picFile&&a.uploadPicture(a.picFile)}),a.$watch("questionsArray",function(){})}]}}]),angular.module("classDigApp").directive("seeResults",["$timeout",function(a){return{scope:{resultId:"="},templateUrl:"components/class/dashboard/polls/pollsModal/CreatePollsDirectives/seeVoterResults/seeVoterResults.html",controller:["$scope","$rootScope",function(b,c){b.see_result_id=["1","2","3"],b.color=c.userData.color,b.border=c.userData.border,b.background=c.userData.background,b.iconFlash=c.userData.iconFlash,b.iconClock=c.userData.iconClock,b.iconExit=c.userData.iconExit,b.FlashActive=c.userData.iconFlashActive,b.iconClockActive=c.userData.iconClockActive,b.iconExitActive=c.userData.iconExitActive,b.initPictures=function(a){switch($("#img-1").attr("src",b.iconFlash),$("#img-2").attr("src",b.iconClock),$("#img-3").attr("src",b.iconExit),$("#img-1-text").removeClass(b.color),$("#img-2-text").removeClass(b.color),$("#img-3-text").removeClass(b.color),b.resultId=a,a){case"1":$("#img-1").attr("src",b.FlashActive),$("#img-1-text").addClass(b.color);break;case"2":$("#img-2").attr("src",b.iconClockActive),$("#img-2-text").addClass(b.color);break;case"3":$("#img-3").attr("src",b.iconExitActive),$("#img-3-text").addClass(b.color);break;default:$("#img-1").attr("src",b.iconFlashActive),$("#img-1-text").addClass(b.color)}},a(function(){b.initPictures(b.resultId)})}]}}]),angular.module("classDigApp").directive("whenseeResults",["$timeout",function(a){return{scope:{resultId:"="},templateUrl:"components/class/dashboard/polls/pollsModal/CreatePollsDirectives/whenSeeVoterResults/whenSeeVoterResults.html",controller:["$scope","$rootScope",function(a,b){a.iconFlash="images/poll/icon-flash.png",a.iconClock="images/poll/icon-clock.png",a.iconExit="images/poll/icon-exit.png"}]}}]),angular.module("classDigApp").directive("checkQuestion",["$timeout",function(a){return{scope:{questionTitle:"=",questionQuestions:"=",questionMultiselect:"=",commonClass:"=",userAnswers:"=",pollItem:"=",timeEnd:"=",tittleId:"="},templateUrl:"components/class/dashboard/polls/pollsModal/CreatePollsDirectives/checkQuestionBlock/checkQuestionBlock.html",controller:["$scope","$rootScope",function(b,c){function d(a,b){for(var c=0;c<b.length;c++)if(b[c].answer_id===a)return c}b.classChecker=b.pollItem,b.border=c.userData.border,b.color=c.userData.color,b.background=c.userData.background;var e=b.userAnswers.length;b.progressNumberGenerator=function(a){var c;return c=1==b.questionMultiselect?Math.round(a/b.pollItem.poll.participants.length*100):b.pollItem.poll.voted.length>0?Math.round(a/b.pollItem.poll.voted.length*100):Math.round(a/b.pollItem.poll.voted*100)},b.checkPollAnswer=function(a,c){if(b.CheckAnswers())return!1;var f="#"+a;if(1==b.questionMultiselect)if($(f).hasClass(b.background)){$(f).removeClass(b.background);var g=d(a,b.userAnswers);b.userAnswers.splice(g,1),e--}else $(f).addClass(b.background),b.userAnswers[e]={},b.userAnswers[e].answer_id=a,e++;else{var h=b.tittleId;$("."+h).removeClass(b.background),$(f).addClass(b.background),b.userAnswers[0]={},b.userAnswers[0].answer_id=a}},a(function(){b.CheckAnswers()}),b.checkOwner=function(){var a=!1;return b.pollItem.poll.user_id===c.user.data.id&&(a=!0),a},b.CheckAnswers=function(){for(var a,d=0;d<b.questionQuestions.length;d++)b.questionQuestions[d].userVoted&&($("#"+b.questionQuestions[d].id).addClass(b.background),a=!0);return b.pollItem.poll.user_id===c.user.data.id&&(a=!0),b.timeEnd<=0&&(a=!0),a}}]}}]),angular.module("classDigApp").controller("distinguishedModalInstanceCtrl",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log",function(a,b,c,d,e,f,g){var h=this;b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"},h.cancel=function(){a.dismiss("cancel")},h.ok=function(){b.$broadcast("add-to-distinguished-list",c.start,c.end,c["class"]),a.close()}}]),app.controller("FeedController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","classData","$timeout","DeletedClasses","CurrentClasses","$q","_","Upload","Feed",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;b.user.data.role;a.newFeed={},a.parseFileType=function(b){var c=["jpeg","svg","jpg","png"],d=["mp4","avi","3gp"],e=b.split(".");e=e[e.length-1];for(var f=0;f<c.length;f++)if(e===c[f])return void(a.newFeed.type_file=1);for(var g=0;g<d.length;g++)if(e===d[g])return void(a.newFeed.type_file=2);a.newFeed.type_file=3},a.userAva=b.user.data.details.data.photo,a.userId=b.user.data.id,b.userData={iconAddLink:"images/modal/icon-clip-"+b.user.data.role+".svg",iconAddPhoto:"images/modal/icon-camera-"+b.user.data.role+".svg",placeholder:b.user.data.role+"-placeholder"},a.addPhotoText="Add photo",a.placeholder=b.user.data.role+"-placeholder",r.animationsEnabled=!0,a.iconAddLink="images/modal/icon-clip-"+b.user.data.role+".svg",a.$watch("newFeed.picFile",function(b){a.newFeed.picFile.$ngfName?(a.newFeed.link=void 0,a.parseFileType(a.newFeed.picFile.$ngfName),a.addPhotoText=a.newFeed.picFile.$ngfName):a.newFeed.picFile.name&&(a.newFeed.link=void 0,a.parseFileType(a.newFeed.picFile.name),a.addPhotoText=a.newFeed.picFile.name)},!0),a.$watch("newFeed.link",function(b){void 0!==a.newFeed.link&&(delete a.newFeed.file_id,delete a.newFeed.type_file,delete a.newFeed.picFile,a.addPhotoText="Attach photo")}),a.uploadPic=function(d,e){d.upload=p.upload({url:i.link+"upload",data:{file:d}}),d.upload.then(function(f){d.result=f.data,a.newFeed.file_id=f.data.data.id,console.log("post feed from img"),c({url:i.link+e,method:"POST",data:a.newFeed}).then(function(c){a.listOfFeeds.unshift(c.data.data),a.feeds.items.unshift(c.data.data),b.$emit("addNewPost",c.data.data),a.newFeed={},a.addPhotoText="Attach file"},function(a){})},function(b){b.status>0&&(a.errorMsg=b.status+": "+b.data)})},a.a=function(){console.log(b.activitiesContainer)},a.postFeedFunction=function(){return a.newFeed.content||a.newFeed.link||a.newFeed.picFile?void(a.newFeed.picFile?"class"===a.feedType?(a.url="class-story",a.newFeed.picFile&&a.uploadPic(a.newFeed.picFile,a.url)):(a.url="story",a.newFeed.picFile&&a.uploadPic(a.newFeed.picFile,a.url)):("class"===a.feedType?a.url="class-story":a.url="story",c({url:i.link+a.url,method:"POST",data:a.newFeed}).then(function(c){a.listOfFeeds.unshift(c.data.data),b.$emit("addNewPost",c.data.data),a.feeds.items.unshift(c.data.data),a.newFeed={}},function(a){}))):!1},a.listOfFeeds=[],b.$on("communityFeed",function(b,c){a.feedUrl=i.link+"story?search=category:"+c,a.createNewFeed=!0,a.feedType="community",a.newFeed={},a.newFeed.category=c,a.feeds=new q,a.feeds.nextPage(a.feedUrl)}),b.$on("classFeed",function(b,c){a.feedUrl=i.link+"story?search=class_id:"+c,a.createNewFeed=!0,a.feedType="class",a.newFeed={},a.newFeed.class_id=c,a.feeds=new q,a.feeds.nextPage(a.feedUrl)})}]);var app=angular.module("classDigApp");app.controller("MenuFeedController",["$scope","$http","$routeParams","$rootScope","classData","$timeout","CurrentClasses","appSettings",function(a,b,c,d,e,f,g,h){d.userData={role:d.user.data.role,iconPlus:"images/modal/icon-plus-"+d.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+d.user.data.role+"_3x.png",background:d.user.data.role+"-background",color:d.user.data.role+"-color",border:d.user.data.role+"-border",iconAddButton:"images/modal/icon-add-button-"+d.user.data.role+"_3x.png"},a.menuFeedHeight=$("#menuClass").outerHeight()-2*$(".subject-menu-link").outerHeight()-288+"px",a.activeItem=d.activeFeedItem;var i=(c.studentId,"");"-"+d.user.data.role;a.showListOfClasses=!1,a.showListOfComunity=!1,a.classesList=new g,$(document).ready(function(){b({url:h.link+"class?user_id="+d.user.data.id+"&status=1&page=",method:"GET"}).then(function(b){0!==b.data.data.length&&(a.functionShowListOfClassses(),a.functionShowListOfCommunity(),a.displayClassFeedFunction(b.data.data[0]))},function(a){})}),a.functionShowListOfClassses=function(){a.showListOfClasses?this.ClassStory.arrow="images/icon-arrow.svg":this.ClassStory.arrow="images/icon-arrow-down.svg",a.showListOfClasses=!a.showListOfClasses},a.functionShowListOfCommunity=function(){a.showListOfComunity?this.CommunityStory.arrow="images/icon-arrow.svg":this.CommunityStory.arrow="images/icon-arrow-down.svg",a.showListOfComunity=!a.showListOfComunity},a.displayClassFeedFunction=function(a){$(".feedData").removeClass(d.userData.color),$("#"+a.id).addClass(d.userData.color),d.$broadcast("classFeed",a.id)},a.catClassName=function(a){var b;return b=a.length>12?a.substring(0,13)+"...":a},a.displayCommunityFeedFunction=function(a){$(".feedData").removeClass(d.userData.color),$("#"+a.id).addClass(d.userData.color),d.$broadcast("communityFeed",a.id)},a.ClassStory={Id:1,icon:"images/menu_class/students/icon-students",role:i,exte:"_3x.png",title:"Class Story",arrow:"images/icon-arrow.svg"},a.CommunityStory={Id:2,icon:"images/menu_class/attendance/icon-attendance",role:i,exte:"_3x.png",title:"Community Story",arrow:"images/icon-arrow.svg"},a.communityList=[{id:3,title:"News"},{id:4,title:"Buy & sell"},{id:5,title:"Lost & found"},{id:6,title:"Books exchange"},{id:7,title:"Other"}],a.classesList.nextPage(),a.ListOfClasses=a.classesList.items}]),angular.module("classDigApp").controller("sendCommentController",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_",function(a,b,c,d,e,f,g,h,i,j,k){b.cancel=function(){a.dismiss("cancel")},b.sendComment=function(){d({url:e.link+"comment",method:"POST",data:{story_id:g.id,content:b.comment}}).then(function(b){a.close(),c.$broadcast("commentAdded",b.data),g.comments_count++,g.is_comment=!0,g.comments.data.push(b.data.data)},function(a){b.ExamServerError=!0})}}]),angular.module("classDigApp").controller("areUSureModalCommentCtrl",["$scope","$rootScope","$http","$log","$routeParams","$uibModalInstance","appSettings","items",function(a,b,c,d,e,f,g,h){var i=this;i.items=h,i.approveStatus=!1,f.closed.then(function(){i.approveStatus?b.$broadcast("delete-comment-was-approved",i.items):b.$broadcast("delete-comment-was-not-approved")}),i.approve=function(){i.approveStatus=!0,f.close()},i.cancel=function(){i.approveStatus=!1,f.close()}}]),angular.module("classDigApp").controller("classExportCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","$log","_","items","$uibModal",function(a,b,c,d,e,f,g,h,i,j){var k=this;b.ExamServerError=!1,b.selection={selectedItems:[],currentItem:[]},b.exportItems=[{img:"images/classExport/icon-export-students-",imgActive:"images/classExport/icon-export-students-active-",active:"-active",ext:".jpg",title:"Students",id:1},{img:"images/classExport/icon-export-attendance-",imgActive:"images/classExport/icon-export-attendance-active-",active:"-active",ext:".svg",title:"Attendance",id:2},{img:"images/classExport/icon-export-behaviour-",imgActive:"images/classExport/icon-export-behaviour-active-",active:"-active",ext:".svg",title:"Behaviour",id:3},{img:"images/classExport/icon-export-grades-",imgActive:"images/classExport/icon-export-grades-active-",active:"-active",ext:".svg",title:"Grades",id:4}],b.$on("class-was-exported",function(){a.dismiss("cancel")}),b.cancel=function(){a.dismiss("cancel")},b.ok=function(){b.exportClass={},b.exportClass.classes=i,b.exportClass.types=[];for(var a=0;a<b.selection.currentItem.length;a++)b.exportClass.types.push(b.selection.currentItem[a].id);if(b.exportClass.types.length>0){j.open({animation:k.animationsEnabled,templateUrl:"components/classes/classExport/enterEmail/enterEmail.html",controller:"enterEmailCtrl",controllerAs:"$ctrl",size:"sm",resolve:{items:function(){return b.exportClass},classId:function(){return i}}})}else b.typeError=!0},b.hideError=function(){b.typeError=!1}}]),angular.module("classDigApp").controller("enterEmailCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_","classId",function(a,b,c,d,e,f,g,h,i,j,k,l){b.ExamServerError=!1,b.exportClass=g,b.cancel=function(){a.dismiss("cancel")},b.ok=function(a){a||(b.codeWasSend=!0,d({url:e.link+"class/export",method:"POST",data:b.exportClass}).then(function(a){c.$broadcast("class-was-exported")},function(a){scope.showErrorMessage=!0,b.errorMessage=a.data.message}))}}]),app.controller("PremiumController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","classData","$timeout","DeletedClasses","CurrentClasses","$q","_","Upload","Feed",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;b.user.data.role;b.userData={role:b.user.data.role,background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border"},a.showDiscount=!0,a.functionShowDiscount=function(){a.showDiscount=!1},a.functionHideDiscount=function(){a.showDiscount=!0},a.functionEnterClassCode=function(){f.open({animation:r.animationsEnabled,templateUrl:"components/premium/EnterCodeModal/EnterCode.html",controller:"enterCodeInstanceCtrl",controllerAs:"$ctrl",size:"sm",resolve:{items:function(){return"enter"}}})},a.openPaymentModal=function(a){f.open({animation:r.animationsEnabled,templateUrl:"components/premium/paymentModal/paymentModal.html",controller:"paymentModalCtrl",controllerAs:"$ctrl",resolve:{items:function(){return a}}})}}]),angular.module("classDigApp").controller("paymentModalCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","$log","_","items","$uibModal",function(a,b,c,d,e,f,g,h,i,j){function k(a,c){var d=$("#payment-form");if(c.error)d.find(".payment-errors").text(c.error.message),d.find(".submit").prop("disabled",!1),$("#user-loader").hide(),$("#payment-form").css("opacity",1);else{var e=c.id;b.sendDataToServer={},b.sendDataToServer.token=e,b.paymentData.cummon?(b.sendDataToServer.period=2,b.sendDataToServer.price=b.price,b.sendDataToServer.discount=b.paymentData.discount,b.sendDataToServer.school_name=b.schoolName,b.sendDataToServer.persons=b.amountOfTeacher):(b.sendDataToServer.period=b.paymentData.period,b.sendDataToServer.price=b.paymentData.money),l(b.sendDataToServer)}}function l(a){d({url:e.link+"stripe/pay",method:"POST",headers:{"Content-Type":"application/json"},data:a}).then(function(a){b.premiumCode=a.data.data.code,b.showPaymentCode=!0,$("#user-loader").hide(),$("#payment-form").css("opacity",1),$("#congratulation-form").animate({opacity:"1"},"slow")},function(a){b.premiumCode="fail",$("#user-loader").hide(),$("#payment-form").css("opacity",1)})}b.ExamServerError=!1,b.afterDiscount="$$$",b.paymentData=angular.copy(i),b.showPaymentCode=!1,b.$watch("amountOfTeacher",function(){b.amountOfTeacher=+b.amountOfTeacher,b.amountOfTeacher>40?(b.afterDiscount=Math.round(29.99*b.amountOfTeacher*50)/100,b.price=b.afterDiscount,b.afterDiscount="$"+b.afterDiscount):b.amountOfTeacher>30?(b.afterDiscount=Math.round(29.99*b.amountOfTeacher*60)/100,b.price=b.afterDiscount,b.afterDiscount="$"+b.afterDiscount):b.amountOfTeacher>24?(b.afterDiscount=Math.round(29.99*b.amountOfTeacher*70)/100,b.price=b.afterDiscount,b.afterDiscount="$"+b.afterDiscount):b.amountOfTeacher>0&&(b.afterDiscount=Math.round(29.99*b.amountOfTeacher*100)/100,b.price=b.afterDiscount,b.afterDiscount="$"+b.afterDiscount)}),b.cancel=function(){a.dismiss("cancel")},b.ok=function(a){var c=$("#payment-form");return isNaN(b.amountOfTeacher)&&b.paymentData.cummon?void c.find(".payment-errors").text("Please enter amount of teacher"):void 0===b.schoolName&&b.paymentData.cummon?void c.find(".payment-errors").text("Please enter school name"):($("#payment-form").css("opacity",.6),$("#user-loader").show(),void Stripe.card.createToken(c,k))},b.hideError=function(){b.typeError=!1}}]),angular.module("classDigApp").controller("enterCodeInstanceCtrl",["$uibModalInstance","$scope","$rootScope","$http","appSettings","$routeParams","items","Upload","$timeout","$log","_","$location",function(a,b,c,d,e,f,g,h,i,j,k,l){b.cancel=function(){a.dismiss("cancel")},b.ok=function(c){return c?!1:void d({url:e.link+"payments/check-code",method:"POST",data:{code:b.premiumCode}}).then(function(b){a.dismiss("cancel"),l.path("/classes")},function(a){b.showErrorMessage=!0,b.errorMessage="The selected code is invalid."})}}]),app.controller("ProfileController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","classData","$timeout","DeletedClasses","CurrentClasses","$q","_","Upload","Feed","uiCalendarConfig","$compile",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){c({url:i.link+"follow/potential-followers",method:"GET",headers:{"Content-Type":"application/json"}}).then(function(b){a.requestedUsers=b.data.data},function(a){})}function u(){var b=moment().format("YYYY-MM-DD"),d=moment(b).add(1,"month").format("YYYY-MM-DD");c({url:i.link+"event/upcoming?start_date="+b+"&end_date="+d,method:"GET"}).then(function(b){a.requestUpcomingInProgress=!1,a.listOfUpcomingEvents=[];for(var c=0;c<b.data.data.length;c++)"lesson"!==b.data.data[c].parent_type&&a.listOfUpcomingEvents.push(b.data.data[c])},function(a){})}function v(){if(!a.listOfScheduleEvents){a.requestInProgress=!0;var b=moment().format("YYYY-MM-DD"),d=moment(b).add(1,"week").format("YYYY-MM-DD");b=moment(b).subtract(1,"week").format("YYYY-MM-DD"),c({url:i.link+"event/upcoming?start_date="+b+"&end_date="+d,method:"GET"}).then(function(b){a.requestInProgress=!1,a.listOfUpcomingEvents1=[];for(var c=0;c<b.data.data.length;c++)"lesson"===b.data.data[c].parent_type&&a.listOfUpcomingEvents1.push(b.data.data[c]);a.listOfScheduleEvents=a.listOfUpcomingEvents1,a.parseEventsData(a.listOfScheduleEvents),$(".fc-scroller").attr("id","profileCalendar"),$(".fc-day-header").addClass("profileCalendarDayHeader"),$(".fc-widget-content").addClass("profileCalendarDayHeader"),$(".fc-toolbar").hide()},function(a){})}}var w=this;a.eventSources=[],a.showProfile=!0,w.animationsEnabled=!0;b.user.data.role;b.userData={role:b.user.data.role,background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border"},a.userProfile=b.user.data,b.activeUser,b.showActivities,a.showUpcoming=!0,a.seeRequestToFollow=function(){a.showProfile=!1},a.seeProfile=function(){a.showProfile=!0},a.feedUrl=i.link+"story/"+b.user.data.id,$(document).ready(function(){$(".fc-toolbar").hide(),$(".fc-scroller").attr("id","profileCalendar"),$(document).on("mouseenter",".controll-button",function(){$(this).find(".inside-menu").show()}).on("mouseleave",".controll-button",function(){$(this).find(".inside-menu").hide()})}),"teacher"===b.userData.role&&(a.colorB="#4b93eb"),"parent"===b.userData.role&&(a.colorB="#cf515d"),"student"===b.userData.role&&(a.colorB="#3d8e78"),a.switchUpcoming=function(){$(".profile-subheader-item").css("border-bottom","3px solid #fff"),$(".profile-subheader-item").css("color","#797a7b"),$("#Upcoming").css("border-bottom","3px solid "+a.colorB),$("#Upcoming").css("color","#333c48"),a.showUpcoming=!0,a.showSchedule=!1,b.showActivities=!1,a.showUser=!1},a.switchSchedule=function(){$(".profile-subheader-item").css("border-bottom","3px solid #fff"),$(".profile-subheader-item").css("color","#797a7b"),$("#Schedule").css("border-bottom","3px solid "+a.colorB),$("#Schedule").css("color","#333c48"),a.showUpcoming=!1,b.showActivities=!1,v(),a.showSchedule=!0,a.showUser=!1},a.switchActivities=function(){$(".profile-subheader-item").css("border-bottom","3px solid #fff"),$(".profile-subheader-item").css("color","#797a7b"),$("#Activities").css("border-bottom","3px solid "+a.colorB),$("#Activities").css("color","#333c48"),a.showUpcoming=!1,a.showSchedule=!1,b.showActivities=!0,a.showUser=!1},b.$on("switchActivities",function(){a.switchActivities()}),b.showUser=!1,a.switchUser=function(){$(".profile-subheader-item").css("border-bottom","3px solid #fff"),$(".profile-subheader-item").css("color","#797a7b"),a.showUpcoming=!1,a.showSchedule=!1,b.showActivities=!1,a.showUser=!0},b.$on("switchUser",function(){a.switchUser()}),a.switchUpcoming(),a.openAreUSureModal=function(b){f.open({animation:w.animationsEnabled,templateUrl:"components/class/dashboard/events/areUSureModal/areUSureModal.html",controller:"areUSureModalEventsCtrl",controllerAs:"$ctrl",size:b,resolve:{items:function(){return a.eventToDelete}}})},a.deleteEvent=function(d,e){a.eventToDelete=d,a.openAreUSureModal("sm"),b.$on("delete-was-approved",function(b,d){c({method:"delete",url:i.link+"/event/"+d.id,headers:{"Content-Type":"application/json"}}).success(function(b){a.listOfUpcomingEvents.splice(e,1)}).error(function(){})})},a.editEvent=function(c,d){c.class_id=c["class"].id;f.open({animation:w.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",
templateUrl:"components/class/dashboard/events/eventsModal/eventsModal.html",controller:"eventModalInstanceCtrl",controllerAs:"$ctrl",resolve:{items:function(){return c}}});b.$on("createEvent",function(b,c){a.listOfUpcomingEvents[d]=c})},a.markImportantItem=function(d,e,f,g){g===b.user.data.id&&c({url:i.link+"event/"+e+"/mark",method:"POST",data:{status:d,id:e}}).then(function(b){a.listOfUpcomingEvents[f].important=d},function(a){})},a.functionGetEventTime=function(a){return moment(a).format("DD")},a.functionGetEventTimeMonth=function(a){return moment(a).format("MMM")},a.userInformation=b.user.data,b.$on("updateUserProfile",function(c,d){a.updateUserProfile=b.user.data}),a.editProfile=function(c,d){f.open({animation:a.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/profile/editProfileModal/editProfileModal.html",controller:"editProfileModalInstanceCtrl",controllerAs:"$ctrl",size:c,resolve:{items:function(){return b.user.data.details.data}}})},t(),a.approveReject=function(b,d){var e=a.requestedUsers.indexOf(b);a.requestedUsers.splice(e,1),c.post(i.link+"follow/approve/"+b.user.id,{status:d,user_id:b.user.id}).success(function(a){}).error(function(a){}),a.showProfile=!1},a.requestUpcomingInProgress=!0,a.showUpcoming=!1,u(),a.showUpcoming=!0,a.parseEventsData=function(b){var c=[];a.eventsListOriginal=b,a.eventsList=b;for(var d=0;d<a.eventsList.length;d++)a.eventsList[d].color.length>7&&(a.eventsList[d].color="#"+a.eventsList[d].color.slice(3)),a.eventsList[d].startEventDate=moment(a.eventsList[d].due_date+" "+a.eventsList[d].time_start_24,"yyyy-MM-DD HH:mm:ss").toDate(),a.eventsList[d].endEventDate=moment(a.eventsList[d].due_date+" "+a.eventsList[d].time_end_24,"yyyy-MM-DD HH:mm:ss").toDate(),c.push({start:a.eventsList[d].startEventDate,end:a.eventsList[d].endEventDate,allDay:!1,title:a.eventsList[d].title,id:a.eventsList[d].id,color:a.eventsList[d].color,date:a.eventsList[d].due_date});a.eventsList.map(function(a){a.date_number=moment(a.due_date,"YYYY-MM-DD").format("DD"),a.date_month=moment(a.due_date,"YYYY-MM-DD").format("MMM")}),a.events=c,a.eventSources[0]=a.events,r.calendars.cdCalendar.fullCalendar("changeView","agendaWeek"),a.requestInProgress=!1},a.eventRender=function(b,c,d){c.attr({"uib-tooltip-html":"'<p>"+b.title+"</p>'","tooltip-append-to-body":!0}),s(c)(a)},a.uiConfig={calendar:{minTime:"07:00",maxTime:"24:00",firstDay:0,height:"auto",titleFormat:"MMM",editable:!1,header:{left:"prev",center:"title",right:"next"},eventClick:a.alertOnEventClick,dayClick:a.alertOnDayClick,eventDrop:a.alertOnDrop,eventResize:a.alertOnResize,eventRender:a.eventRender,viewRender:a.viewChanged,timeFormat:"HH:mm"}},a.events=[],a.eventSources=[a.events],a.getFinishTime=function(a){var b=0,c=moment(new Date),d=moment.utc(a).toDate();return c.diff(d,"weeks")>0?b=c.diff(d,"weeks")+" w. ":c.diff(d,"days")>0?b=c.diff(d,"days")+" d. "+c.diff(d,"hours")%24+" h. ":c.diff(d,"hours")>0?b=c.diff(d,"hours")+" h. "+c.diff(d,"minutes")%60+" min. ":c.diff(d,"minutes")>0&&(b=c.diff(d,"minutes")+" min. "),b},a.activitiesAnnouncementsArr=[],a.activitiesPostArr=[],a.followsArr=[],a.followersArr=[],a.user=b.user.data.details.data,a.userId=b.user.data.id,b.activities=[],a.fillActivitiesAnnouncement=function(){c({url:i.link+"user/announcements/"+b.user.data.id,method:"GET"}).then(function(c){a.announcementArr=c.data.announcements;for(var d=0;d<a.announcementArr.length;d++)a.announcementArr[d].type="announcement",a.activitiesAnnouncementsArr.push(a.announcementArr[d]),b.activities.push(a.announcementArr[d])},function(a){})},a.fillActivitiesStory=function(){c({url:i.link+"story/"+b.user.data.id,method:"GET"}).then(function(c){a.storytArr=c.data.data,a.feeds=new q,b.$emit("addNewPost",c.data.data),a.feeds.items.unshift(c.data.data);for(var d=0;d<a.storytArr.length;d++)a.storytArr[d].type="story",a.activitiesPostArr.push(a.storytArr[d]),b.activities.push(a.storytArr[d])},function(a){})},a.fillActivitiesFollows=function(){c({url:i.link+"users/follows/"+b.user.data.id,method:"GET"}).then(function(c){a.listUsers=c.data.follows;for(var d=0;d<a.listUsers.length;d++)a.listUsers[d].type="follows",a.followsArr.push(a.listUsers[d]),b.activities.push(a.listUsers[d])},function(a){})},a.fillActivitiesFollowers=function(){c({url:i.link+"users/followers/"+b.user.data.id,method:"GET"}).then(function(c){a.listUsersFoolowers=c.data.followers;for(var d=0;d<a.listUsersFoolowers.length;d++)a.listUsersFoolowers[d].type="followers",a.followersArr.push(a.listUsersFoolowers[d]),b.activities.push(a.listUsersFoolowers[d])},function(a){})},a.fillActivities=function(a){setTimeout(function(){for(var c=0;c<a.length;c++)"announcement"!==a[c].type&&(a[c].hasOwnProperty("updated_at")?a[c].updated_at=a[c].updated_at.date:(a[c].updated_at=a[c].created_at,a[c].updated_at=a[c].updated_at.date));a.sort(function(a,b){var c=new Date(a.updated_at),d=new Date(b.updated_at);return d.getTime()-c.getTime()}),b.$emit("activities",a)},2e3)},a.fillActivitiesAnnouncement(),a.fillActivitiesStory(),a.fillActivitiesFollows(),a.fillActivitiesFollowers(),a.fillActivities(b.activities),c({url:i.link+"user/classes",method:"GET"}).then(function(b){var c=b.data.data;a.classId=c[0].id},function(a){})}]),angular.module("classDigApp").controller("editProfileModalInstanceCtrl",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams","localStorageService","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k,l){b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"},"object"==typeof c?h.selfEdit=!0:(h.selfEdit=!1,e.get(f.link+"current-user/"+c).success(function(a){h.user=angular.copy(a.data.details.data),h.studentImage=h.user.photo}));j.classId;h.selfEdit&&(h.user=angular.copy(c),h.user.email=b.user.data.email),h.uploadPic=function(a){a.upload=i.upload({url:f.link+"upload",data:{file:a}}),a.upload.then(function(a){h.user.image_id=a.data.data.id,window.localStorage.last_update=new Date},function(a){})},c&&h.selfEdit&&(h.studentImage=c.photo),h.uploaded=function(a){h.uploadPic(a[0])},h.setGender=function(a){h.user.gender=a},h.cancel=function(){a.dismiss("cancel")},h.ok=function(){return h.CreateStudentModal.$invalid?!1:void(h.selfEdit?(h.user.phone=+h.user.phone,e({url:f.link+"user/"+b.user.data.id+"/details",method:"PUT",data:h.user,headers:{"Content-Type":"application/json"}}).then(function(c){b.user.data.details=c.data,b.user.data.details.data.type="changeprofile",b.$broadcast("updateUserProfile",c.data),a.close(),h.localStorageData=localStorage.getItem("ls.storage"),h.localStorageData=JSON.parse(h.localStorageData),h.localStorageData.data.details=c.data,k.set("storage",h.localStorageData)},function(a){})):h.selfEdit||(h.user.phone&&(h.user.phone=+h.user.phone),e({url:f.link+"user/"+c+"/details",method:"PUT",data:h.user,headers:{"Content-Type":"application/json"}}).then(function(c){b.$broadcast("user-was-updated"),l.open({templateUrl:"components/classes/confirmationModal/confirmationModal.html",controller:"confirmationModalController",size:"sm",resolve:{items:function(){return"Student profile was successfully updated."}}}),a.close()},function(a){})))}}]),app.controller("findPeopleController",["$scope","$rootScope","$http","$resource","$location","$uibModal","AuthenticationService","ClassFactory","appSettings","classData","$timeout","DeletedClasses","CurrentClasses","$q","_","Upload","Feed","uiCalendarConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;s.animationsEnabled=!0;var t=b.user.data.role;a.userData={color:t+"-color",border:t+"-border",background:t+"-background",userPhotoBorder:b.user.data.role+"-userPhotoBorder"},c({url:i.link+"users/school",method:"GET"}).then(function(b){a.listOfTheSameSchoolPeople=b.data.data,a.list_title="PEOPLE IN THE SAME SCHOOL"},function(a){}),b.activeUserId,b.activeUser,b.feedUrl,b.activitiesBlock=!1,a.activateUser=function(c){console.log(c.id),a.activeUserId===c.id?b.activeUserId=void 0:(b.activeUserId=c.id,b.activeUser=c,b.feedUrl=i.link+"story/"+c.id,c.hasOwnProperty("id")&&(b.refreshFollowersList(c.id),b.refreshFollowList(c.id)),c.hasOwnProperty("user_id")&&(b.refreshFollowersList(c.user_id),b.refreshFollowList(c.user_id)))},b.$on("activateUser",function(){a.activateUser()}),a.followUser=function(b,d,e){c({url:i.link+"follow/"+d.id,method:b,headers:{"Content-Type":"application/json"}}).then(function(b){a.listOfTheSameSchoolPeople[e].is_follow=!a.listOfTheSameSchoolPeople[e].is_follow},function(a){})},b.$on("detailedSearch",function(b,c){a.listOfTheSameSchoolPeople=c,a.activeUserId=void 0,a.list_title="SEARCH RESULT"}),a.openFindModal=function(){f.open({animation:a.animationsEnabled,templateUrl:"components/findPeople/findPeopleModal/findPeopleModal.html",controller:"findPeopleModalInstanceCtrl",controllerAs:"$ctrl",size:"sm",resolve:{items:function(){return b.user.data.details.data}}})};var u=window.location.href,v=u.split("/");v.length>0?"findPeople"==v[4]&&angular.element(document).find(".class-menu-item-block-right-profile").addClass("profilepage"):console.log("href error")}]),angular.module("classDigApp").controller("findPeopleModalInstanceCtrl",["$uibModalInstance","$rootScope","items","$timeout","$http","appSettings","$log","$scope","Upload","$routeParams","localStorageService",function(a,b,c,d,e,f,g,h,i,j,k){b.userData={role:b.user.data.role,iconPlus:"images/modal/icon-plus-"+b.user.data.role+"_3x.png",iconCamera:"images/modal/icon-camera-"+b.user.data.role+"_3x.png",background:b.user.data.role+"-background",color:b.user.data.role+"-color",border:b.user.data.role+"-border",iconAddButton:"../images/modal/icon-add-button-"+b.user.data.role+"_3x.png",arrow:"images/distinguished/icon-arrow-"+b.user.data.role+"_3x.png"},h.$watchGroup(["search.username","search.city","search.country","search.school"],function(){h.SearchNotValid=!1}),h.search={},h.cancel=function(){a.dismiss("cancel")},h.ok=function(){return h.search.username||h.search.country||h.search.city||h.search.school?void e({url:f.link+"detailed-search",method:"POST",data:h.search,headers:{"Content-Type":"application/json"}}).then(function(c){b.$broadcast("detailedSearch",c.data.data),a.close()},function(a){}):(h.SearchNotValid=!0,!1)}}]),angular.module("classDigApp").run(["$templateCache",function(a){"use strict";a.put("components/class/class.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div class="row"> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'" class="col-md-3"></div> <div class="container col-md-9"> <div ng-controller="myCtrl"> <create-class create-class-time="createClassTime"> </create-class> <p>{{createClassTime}}</p> </div> <progress-bar></progress-bar> <color-picker selected-color="selectedcolor" function-select-color="functionSelectColor"></color-picker> <!--<div ng-controller="ModalDemoCtrl as $ctrl" class="modal-demo">--> <!--<button type="button" class="btn btn-default" ng-click="$ctrl.openModal()">Open me!</button>--> <!--</div>--> <div ng-controller="mySelectorController" style="width:300px"> <custom-button></custom-button> <custom-selector></custom-selector> </div> </div> </div> <!-- build:section recursive views --> <!-- /build --> <!-- Footer --> <!--<div id="footer" ng-include="\'../components/footer/footer.html\'"></div>-->'),a.put("components/classes/classes.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div ng-model="role" class="classes {{role}}" ng-controller="ClassesController" ng-init="init()"> <!--DEPENDS ON: countClass   and  selection--> <div class="classes-header"> <div ng-show="!selection.selectedItems.length" class="col-md-7 col-sm-7 col-xs-6 classes-main-header"> <h3 class="{{\'c-\'+role}}">Classes</h3> <div class="classes-count" ng-show="countClass===0">No classes</div> <div class="classes-count" ng-show="countClass===1">{{countClass}} class</div> <div class="classes-count" ng-show="countClass>1">{{countClass}} classes</div> </div> <div ng-show="selection.selectedItems.length" class="col-md-7 col-sm-7 col-xs-6 classes-main-header classes-main-header-selection"> <div style="display: flex"> <i class="{{\'c-\'+role}} glyphicon glyphicon-arrow-left" ng-click="clear()"></i> <div class="{{\'c-\'+role}} back" ng-click="clear()">BACK</div> <div class="selection-number">{{selection.selectedItems.length}} files selected</div> </div> </div> <div class="col-md-5 col-sm-5 col-xs-6 classes-context-menu" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div class="classes-subheader-children" style="display: flex; background-color: white; padding:0px 20px"> <div ng-repeat="child in childrenArray" id="{{child.first_name}}" class="children" ng-click="changeChildren(child)" style="font-size: 14px;\r\n         font-weight: 500;\r\n         font-style: normal;\r\n         font-stretch: normal;\r\n         letter-spacing: 0.5px;\r\n         text-align: center;\r\n         padding: 15px 10px;\r\n         color: #cf515d">{{child.first_name}}</div> </div> <div class="shadow"> <div ng-if="deletedClasses.length || !_.isEmpty(archivedClasses)" class="classes-subheader"> <div id="current" class="classes-subheader-item" ng-click="changeView(\'current\')">CURRENT</div> <div id="archived" ng-hide="hideArchived" class="classes-subheader-item" ng-click="changeView(\'archived\')">ARCHIVED</div> <div id="deleted" ng-show="deletedClasses.length" ng-hide="hideDeleted  || userData.role !== \'teacher\'" class="classes-subheader-item" ng-click="changeView(\'deleted\')">DELETED</div> </div> </div> <div class="classes-block"> <div class="classes-block-list" ng-if="currentView === \'current\'" ng-class="{\'height-when-not-parent\' : role !== \'parent\', \'height-when-parent\' : role === \'parent\' }"> <div class="classes-block-list-main-container" id="currentCont" ng-class="{\'height-when-not-parent\' : role !== \'parent\', \'height-when-parent\' : role === \'parent\' }"> <div class="classes-add-class modal-demo" ng-show="!selection.selectedItems.length" ng-controller="ModalDemoController as $ctrl"> <custom-button></custom-button> </div> <div ng-show="classesNotExist" class="classes-not-exists"> <div class="class-background"><img href="#" src="images/classes/class_3x.png"></div> <div class="classes-info">There are no classes added yet</div> <div class="no-classes"> <div class="hint"> <div class="hint-text" ng-show="userData.role !==\'parent\'"><span>Tap here to create your first class</span></div> <div class="hint-text" ng-show="userData.role ===\'parent\'"><span>Tap here to join/br> your first class</span></div> <img src="images/classes/brush_arrow.png"> </div> </div> </div> <div ng-show="!classesNotExist" class="classes-exists" infinite-scroll="cur.nextPage()" infinite-scroll-container="&quot;#currentCont&quot;" infinite-scroll-disabled="cur.busy" infinite-scroll-distance="0"> <div class="class-item" ng-repeat="currentClass in currentClasses" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(currentClass.id) != -1}" multi-select multi-select-item="currentClass" multi-select-selection="selection" ng-dblclick="openClass(currentClass)" ng-click="selectionWasChanged(currentClass)"> <div class="class-item-block"> <div class="class-image"> <div class="class-cover"> <img src="{{currentClass.image}}"> </div> </div> <div class="class-description"> <div class="class-name" style="color: {{currentClass.color | colorParse}}">{{currentClass.cated_name}}</div> <div ng-show="!showChildren" class="class-members">{{currentClass.members}} members</div> <div ng-show="showChildren" class="class-members"> <div style="display: flex;margin-left: 10px"> <div ng-repeat="member in currentClass.members" style="width:20px; height: 20px; border-radius: 50%;margin-left: -8px"> <img ng-src="{{member.image}}" style="width: 100%;height: inherit;border-radius: inherit"> </div> <div class="two-children-sign" style="display: flex" ng-repeat="member in currentClass.members">{{ member.first_name }} <span ng-show="currentClass.members.length>1 && $index<currentClass.members.length-1"> & </span></div> </div> </div> </div> </div> </div> <div style="clear: both"></div> </div> <div id="classes-loader" class="loader" style="display: none"></div> </div> </div> <div ng-class="{\'height-when-not-parent\' : role !== \'parent\', \'height-when-parent\' : role === \'parent\'}" class="classes-block-stattistic" ng-if="!selection.currentItem.length && currentView === \'current\' && sharedUsers.length && role === \'teacher\'"> <div class="statistic-title c-{{role}}"> <span>STUDENTS SHARED WITH YOU</span> </div> <div class="student-info" style="overflow: auto; height: calc(100% - 9vh)"> <div class="student-in-requests-container" ng-repeat="student in sharedUsers"> <div class="student-in-requests"> <div class="container-flex"> <div class="student-img" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}"></div> <div class="student-name"> <div> {{student.first_name}} {{student.last_name}} </div> </div> <div class="buttons"> <div> <button class="btn {{userInfo.color}} {{userInfo.border}}" ng-click="reject(student)">Reject</button> </div> </div> <div style="clear: both"></div> </div> </div> </div> <div class="shared-students-controls"> <div class="buttons"> <div class="holder"> <button class="btn {{userInfo.background}} white-color" ng-click="accept()">Accept All</button> <!--<button class="btn {{userInfo.color}} {{userInfo.border}}"  ng-click="acceptReject(2)">Reject All</button>--> </div> </div> </div> </div> </div> <div ng-class="{\'height-when-not-parent\' : role !== \'parent\', \'height-when-parent\' : role === \'parent\'}" ng-if="selection.currentItem.length >= 1 && currentView === \'current\'" class="classes-block-stattistic"> <div class="statistic-title c-{{role}}"> <span>CLASS STATISTIC</span> </div> <div style="overflow: auto; height: calc(100vh - 18vh - 150px)"> <div ng-repeat="class in selection.currentItem" class="class-right-menu"> <div class="class-name" style="color: {{class.color | colorParse}}">{{class.name}}</div> <div class="average-mark-block" ng-if="class.reports.grade"> <div class="average-mark-title">CLASS AVERAGE MARK</div> <div class="class-average-mark"> <div class="progress"> <div class="progress-bar {{userInfo.background}}" role="progressbar" aria-valuenow="99" aria-valuemin="0" aria-valuemax="100" style="width: {{class.reports.grade}}%"> {{class.reports.grade}} </div> </div> </div> </div> <div class="attendance-block" ng-if="class.reports.attendance[0] || class.reports.attendance[1] || class.reports.attendance[2]"> <div class="attendance-title">CLASS ATTENDANCE</div> <div class="main-data"> <div class="holder"> <div class="diagram-holder"> <div class="first-layer"></div> <div class="second-layer"></div> <div class="third-layer"></div> <div class="fourth-layer"></div> <canvas class="chart chart-pie" chart-data="class.reports.attendance" chart-labels="configChart.attendanceLabels" chart-options="configChart.options" chart-colors="configChart.attendanceBackgroundColor"> </canvas> </div> </div> <div class="holder"> <div class="student-attendance-items"> <div class="student-attendance-item" ng-show="class.reports.attendance[0]>0"> <span class="attendance-color attendance-present">{{class.reports.attendance[0]}}</span> <span class="attendance-text"> Present</span> </div> <div class="student-attendance-item" ng-show="class.reports.attendance[1]>0"> <span class="attendance-color attendance-late">{{class.reports.attendance[1]}}</span> <span class="attendance-text"> Late</span> </div> <div class="student-attendance-item" ng-show="class.reports.attendance[2]"> <span class="attendance-color attendance-absent">{{class.reports.attendance[2]}}</span> <span class="attendance-text"> Absent</span> </div> </div> </div> </div> </div> <div class="positive-block" ng-if="class.reports.positiveBehavior"> <div class="positive-title">POSITIVE</div> <div class="attendance-block"> <div class="diagram-behavior"> <nvd3 options="configDiagram" data="class.reports.positiveBehavior" class="diagram-positive"></nvd3> <div class="diagram-bottom-bar"> <div style="max-width: calc(100% / {{class.reports.positiveBehavior[0].values.length}}); min-width: calc(100% / {{class.reports.positiveBehavior[0].values.length}})" ng-repeat="value in class.reports.positiveBehavior[0].values" class="label-for-diagram">{{value.label}}</div> </div> </div> </div> </div> <div class="need-to-woork-block" ng-if="class.reports.positiveBehavior"> <div class="need-to-woork-title">NEED TO WORK</div> <div class="attendance-block"> <div class="diagram-behavior"> <nvd3 options="configDiagram" data="class.reports.negativeBehavior" class="diagram-negative"></nvd3> <div class="diagram-bottom-bar"> <div style="max-width: calc(100% / {{class.reports.negativeBehavior[0].values.length}}); min-width: calc(100% / {{class.reports.negativeBehavior[0].values.length}})" ng-repeat="value in class.reports.negativeBehavior[0].values" class="label-for-diagram">{{value.label}}</div> </div> </div> </div> </div> <div class="average-mark-block" ng-if="!class.reports.positiveBehavior && !class.reports.attendance[0] && !class.reports.attendance[1] && !class.reports.attendance[2] && !class.reports.grade"> <div class="average-mark-title">There is no statistic information by this class</div> </div> </div> </div> </div> </div> <div class="classes-block"> <div class="classes-block-list" ng-if="currentView === \'deleted\' && deletedClasses.length" ng-class="{\'height-when-not-parent\' : role !== \'parent\', \'height-when-parent\' : role === \'parent\' }"> <div class="classes-block-list-main-container" id="deletedCont" ng-class="{\'height-when-not-parent\' : role !== \'parent\', \'height-when-parent\' : role === \'parent\' }"> <div class="classes-exists" infinite-scroll="del.nextPage()" infinite-scroll-container="&quot;#deletedCont&quot;" infinite-scroll-disabled="del.busy" infinite-scroll-distance="0"> <div class="class-item" ng-repeat="currentClass in deletedClasses" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(currentClass.id) != -1}" multi-select multi-select-item="currentClass" multi-select-selection="selection" ng-dblclick="openClass(currentClass)" ng-click="selectionWasChanged(currentClass)"> <div class="class-item-block"> <div class="class-image"> <div class="class-cover"> <img src="{{currentClass.image}}"> </div> </div> <div class="class-description"> <div class="class-name" style="color: {{currentClass.color | colorParse}}">{{currentClass.cated_name}}</div> <div ng-show="!showChildren" class="class-members">{{currentClass.members}} members</div> <div ng-show="showChildren" class="class-members"> <div style="display: flex;margin-left: 10px"> <div ng-repeat="member in currentClass.members" style="width:20px; height: 20px; border-radius: 50%;margin-left: -8px"> <img ng-src="{{member.image}}" style="width: 100%;height: inherit;border-radius: inherit"> </div> <div class="two-children-sign" style="display: flex" ng-repeat="member in currentClass.members">{{ member.first_name }} <span ng-show="currentClass.members.length>1 && $index<currentClass.members.length-1"> & </span></div> </div> </div> </div> </div> </div> <div style="clear: both"></div> </div> <div id="classes-del-loader" class="loader" style="display: none"></div> </div> </div> </div> <div class="classes-block classes-block-archived" ng-if="currentView === \'archived\'" ng-class="{\'height-archived-when-not-parent\' : role !== \'parent\', \'height-archived-when-parent\' : role === \'parent\' }"> <div class="classes-block-list-archived" ng-repeat="(semesterName, classes) in archivedClasses" ng-if="classes.length"> <div class="chapter" ng-click="chapterIsOpen = !chapterIsOpen"> <div> <div class="chapter-title {{\'c-\'+role}}"> <span style="text-transform: uppercase">{{semesterName || \'Unnamed semester\'}} </span> <span>({{classes.length}} classes)</span> </div> <div class="chapter-control"> <i ng-show="chapterIsOpen" class="glyphicon glyphicon-chevron-up {{\'c-\'+role}} icon"></i> <i ng-show="!chapterIsOpen" class="glyphicon glyphicon-chevron-down {{\'c-\'+role}} icon"></i> </div> </div> </div> <div class="list-holder" ng-show="chapterIsOpen"> <div class="class-item" ng-repeat="currentClass in classes" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(currentClass.id) != -1}" multi-select multi-select-item="currentClass" multi-select-selection="selection" ng-dblclick="openClass(currentClass)" ng-click="selectionWasChanged(currentClass)"> <div class="class-item-block"> <div class="class-image"> <div class="class-cover"> <img src="{{currentClass.image}}"> </div> </div> <div class="class-description"> <div class="class-name" style="color: {{currentClass.color | colorParse}}">{{currentClass.cated_name}}</div> <div ng-show="!showChildren" class="class-members">{{currentClass.members}} members</div> <div ng-show="showChildren" class="class-members"> <div style="display: flex;margin-left: 10px"> <div ng-repeat="member in currentClass.members" style="width:20px; height: 20px; border-radius: 50%;margin-left: -8px"> <img ng-src="{{member.image}}" style="width: 100%;height: inherit;border-radius: inherit"> </div> <div class="two-children-sign" style="display: flex" ng-repeat="member in currentClass.members">{{ member.first_name }} <span ng-show="currentClass.members.length>1 && $index<currentClass.members.length-1"> & </span></div> </div> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("components/classes/joinClassByCode.html",'<div class="joinClass"> <form name="CreateClassModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}" ng-show="!codeWasSend"> <h3 class="modal-title" id="modal-title">Enter class code</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="colorcover" ng-show="!codeWasSend"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <input id="className" class="{{userData.color}} class-name" ng-model="classCode.code" name="ClassName" ng-minlength="2" ng-maxlength="10" placeholder="Class code" required> </div> <hr> <p ng-show="submitted && CreateClassModal.ClassName.$error.required" class="help-block">Class code is required.</p> </div> </div> </div> <div class="modal-footer" ng-show="!codeWasSend"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" type="submit" ng-click="submitted = true; joinClass()">Join </button> <p ng-show="showErrorMessage" class="error-message">{{errorMessage}}</p> </div> <div ng-show="codeWasSend" class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <!--<h3 class="modal-title" id="modal-title">Enter class code</h3>--> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text">Your request has been sent.</div> </div> </form> </div>'),a.put("components/feed/feed.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/feed/menuFeed/menuFeed.html\'" class="col-md-3" style="padding: 0 ;background: white"></div> <div ng-controller="FeedController" class="feedMainContainer"> <!------------- Create new feed -----------------> <div ng-if="user.data.role !==\'parent\'" class="create-new-feed-container"> <div class="create-new-feed" ng-show="createNewFeed"> <div class="create-new-feed-header"> <div class="ava-container" style="background-image: url({{userAva}})"> <!--<img ng-src="{{userAva}}">--> </div> <div class="feed-story"> <textarea placeholder="Write your story" maxlength="200" minlength="2" ng-model="newFeed.content" id="post"></textarea> </div> </div> <div class="create-new-feed-footer" style="position:relative"> <div class="add-more-container {{userData.color}}"> <div class="add-feed-photo cursorPointer"> <div ngf-select ng-model="newFeed.picFile" ngf-validate="{size: {max: \'25MB\'}, height: {max: 12000}, width: {max: 12000}, duration: {max: \'30h\'}}" accept="/*" valid-file> <div ng-click="attachFeedFileFunction()" style="display: flex"> <div class="add-more-img-container"> <img ng-src="{{userData.iconAddPhoto}}" style="margin-top: -3px"> </div> <div>{{addPhotoText}}</div> </div> </div> <!-- ngf-resize="{width: 240, height: 160, centerCrop: true}"--> <div class="add-feed-link {{placeholder}}"> <div class="add-more-img-container"> <img ng-src="{{userData.iconAddLink}}"> </div> <input placeholder="Attach file, link" ng-model="newFeed.link"> </div> </div> </div> <div> <button class="post-feed-button {{userData.background}}" ng-click="postFeedFunction()">POST</button> </div> </div> </div> </div> <!------------- End Create new feed -----------------> <!------------- Feed List ---------------------------> <div class="feed-list-container" id="feedList" ng-class="{\'parentFeedView\': user.data.role===\'parent\'}"> <feed-list feed-url="feedUrl+\'&page=\'"></feed-list> </div> <!------------- End Feed List ---------------------------> </div>'),a.put("components/findPeople/findPeople.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div class="class-menu"> <div class="premium-header"> <div class="premium-header-title {{userData.color}}">Find people</div> </div> <div class="class-menu-item-container findPeople-class-menu-item-container"> <div class="class-menu-item-block-center-container findPeople-center-container"> <div class="class-menu-item-block-center"> <h2 class="{{userData.color}} find-people-title">{{list_title}}</h2> <div class="find-people-list-container"> <div class="find-people-list"> <div ng-repeat="userdata in listOfTheSameSchoolPeople" data-id="{{userdata.user.id}}" class="find-people-item" ng-class="{\'find-people-active-item\': userdata.user.id===activeUserId}"> <div class="user-information" ng-click="activateUser(userdata.user)"> <div ng-class="{\'{{userData.userPhotoBorder}}\': userdata.user.id===activeUserId} " class="photo-container" style="background-image: url({{userdata.user.image}})"></div> <div class="text-container">{{userdata.user.first_name+\' \'+ userdata.user.last_name}}</div> </div> <div class="button-follow"> <button ng-if="userdata.is_follow===false" class="follow-user {{userData.background}}" ng-click="followUser(\'POST\',userdata.user, $index)">Follow</button> <button ng-if="userdata.is_follow===true" class="unfollow-user {{userData.color}} {{userData.border}}" ng-click="followUser(\'DELETE\',userdata.user, $index)">Unfollow</button> </div> </div> </div> <div ng-if="listOfTheSameSchoolPeople.length===0" class="no-results-massage"> There are no results </div> <div class="hide-scroll"></div> </div> <div class="find-people-button" ng-click="openFindModal()"> <img src="images/icon-search.svg"> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-show="activeUserId"> <div class="class-menu-item-block-right class-menu-item-block-right-profile"> <user-info selected-user="activeUser" show-additional-info="false"></user-info> <div class="user-feeds-container" ng-show="activitiesBlock"> <feed-list feed-url="feedUrl+\'&page=\'"></feed-list> </div> </div> </div> </div> </div>'),a.put("components/footer/footer.html",'<div class="container"> <footer class="text-left"> <div class="row"> <div class="col-md-6"> <ul class="footer-links"> <li><a href="#/help">Help</a></li> </ul> </div> <div id="feedback" class="col-md-6"> <div class="row disclaimers"> <p>Copyright 2016 </p> </div> </div> </div> </footer> </div>'),
a.put("components/groups/groups.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div ng-model="role" class="classes groups {{role}}" ng-init="init()"> <div class="classes-header"> <div class="col-md-7 col-sm-7 col-xs-6 classes-main-header"> <h3 class="{{\'c-\'+role}}">Groups</h3> <div ng-if="activeSubtitleTab === \'created\'"> <div class="classes-count" ng-show="paginatorCreated.items.length===0">No groups available</div> <div class="classes-count" ng-show="paginatorCreated.items.length===1">{{paginatorCreated.items.length}} group</div> <div class="classes-count" ng-show="paginatorCreated.items.length>1">{{paginatorCreated.items.length}} groups</div> </div> <div ng-if="activeSubtitleTab === \'joined\'"> <div class="classes-count" ng-show="paginatorJoined.items.length===0">No groups available</div> <div class="classes-count" ng-show="paginatorJoined.items.length===1">{{paginatorJoined.items.length}} group</div> <div class="classes-count" ng-show="paginatorJoined.items.length>1">{{paginatorJoined.items.length}} groups</div> </div> </div> <div class="col-md-5 col-sm-5 col-xs-6 classes-context-menu" ng-if="activeSubtitleTab === \'created\'"> <context-menu></context-menu> </div> </div> <div class="shadow" ng-show="groupsLists.allTypes"> <div class="classes-subheader"> <div id="created" class="classes-subheader-item {{\'c-\'+role}}" ng-click="changeView(\'created\')">CREATED BY ME</div> <div id="joined" class="classes-subheader-item {{\'c-\'+role}}" ng-click="changeView(\'joined\')">JOINED</div> </div> </div> <div class="classes-block"> <div class="classes-block-list height-when-not-parent"> <div class="classes-block-list-main-container height-when-not-parent" style="overflow: hidden"> <div class="classes-add-class modal-demo" ng-if="!selection.currentItem.length"> <custom-button></custom-button> </div> <div ng-show="noGroups" class="classes-not-exists"> <div class="class-background"><img href="#" src="images/groups/users-group.svg"></div> <div class="classes-info">You have no group created</div> <div class="no-classes"> <div class="hint" ng-show="userData.role !==\'parent\'"> <div class="hint-text"><span>Tap here to join your first group</span></div> <img src="images/classes/brush_arrow.png"> </div> </div> </div> <div ng-if="!noGroups && activeSubtitleTab === \'created\'" id="createdCont" style="height: 100%; overflow: auto"> <div class="classes-exists" infinite-scroll="paginatorCreated.nextPage()" infinite-scroll-container="&quot;#createdCont&quot;" infinite-scroll-disabled="paginatorCreated.busy" infinite-scroll-distance="0"> <div class="class-item" ng-repeat="currentGroup in paginatorCreated.items" ng-dblclick="openGroup(currentGroup)" ng-class="{\'active border-{{role}}\': selection.currentItem.indexOf(currentGroup) != -1}" ng-click="selectionWasChanged(currentGroup)"> <div class="class-item-block"> <div class="class-image"> <div class="class-cover"> <img src="{{currentGroup.image.link}}"> </div> </div> <div class="class-description group-description"> <div class="class-name group-name">{{currentGroup.cated_name}}</div> <div class="class-members" ng-if="currentGroup.participants.length === 1"> <img src="{{\'images/groups/users-\' + role + \'.svg\'}}"> <span>{{currentGroup.participants.length}} member</span> </div> <div class="class-members" ng-if="currentGroup.participants.length > 1 || currentGroup.participants.length === 0"> <img src="{{\'images/groups/users-\' + role + \'.svg\'}}"> <span>{{currentGroup.participants.length}} members</span> </div> </div> </div> </div> <div style="clear: both"></div> </div> </div> <div ng-if="!noGroups && activeSubtitleTab === \'joined\'" id="joinedCont" style="height: 100%; overflow: auto"> <div class="classes-exists" infinite-scroll="paginatorJoined.nextPage()" infinite-scroll-container="&quot;#joinedCont&quot;" infinite-scroll-disabled="paginatorJoined.busy" infinite-scroll-distance="0"> <div class="class-item" ng-repeat="currentGroup in paginatorJoined.items" ng-dblclick="openGroup(currentGroup)" style="cursor: pointer"> <div class="class-item-block"> <div class="class-image"> <div class="class-cover"> <img src="{{currentGroup.image.link}}"> </div> </div> <div class="class-description group-description"> <div class="class-name group-name">{{currentGroup.name}}</div> <div class="class-members" ng-if="currentGroup.participants.length === 1"> <img> <span>{{currentGroup.participants.length}} member</span> </div> <div class="class-members" ng-if="currentGroup.participants.length > 1"> <img> <span>{{currentGroup.participants.length}} members</span> </div> </div> </div> </div> <div style="clear: both"></div> </div> </div> </div> </div> <!--<div class="classes-block-stattistic groups-block-statistic">--> <!--<div class="title c-{{role}}">Join open groups</div>--> <!--</div>--> </div> </div>'),a.put("components/header/header.html",'<!-- Add your site or application content here --> <header ng-controller="HeaderController"> <div class="header"> <div ng-model="bgClass" class="navbar navbar-default {{bgClass}} navbar-fixed-top" role="navigation"> <!--<div class="container">--> <div ng-model="bgIcon" class="navbar-header {{bgIcon}}"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">ClassDig </span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand classdig-logo" href="#/"><span class="icon-logo"></span></a> </div> <div class="collapse navbar-collapse" id="js-navbar-collapse" ng-model="username"> <ul class="nav navbar-nav"> <li><a href="#/classes" class="active-nav-menu" id="nav-menu-classes" ng-class="{\'active-nav-menu-active\':activeTab===\'class\'}"><span class="nav-menu-icon icon-classes"></span><span class="nav-menu-text">CLASSES</span></a></li> <li><a ng-href="#/feed" class="active-nav-menu" ng-class="{\'active-nav-menu-active\':activeTab===\'feed\'}"><span class="nav-menu-icon icon-story"></span><span class="nav-menu-text">STORY</span></a></li> <li><a ng-href="#/groups" class="active-nav-menu" ng-class="{\'active-nav-menu-active\':activeTab===\'groups\'}"><span class="nav-menu-icon icon-groups"></span><span class="nav-menu-text">GROUPS</span></a></li> <li ng-show="user.data.role===\'teacher\'"><a ng-href="#/premium" class="active-nav-menu" ng-class="{\'active-nav-menu-active\':activeTab===\'premium\'}"><span class="nav-menu-icon icon-prem"></span><span class="nav-menu-text">PREMIUM</span></a></li> </ul> <ul class="nav navbar-nav navbar-right"> <li class="dropdown bg-{{role}}" ng-if="notificationsEnabled" ng-class="{\'active-icon\':activeTab===\'notifications\'}"> <a href="#" id="not" ng-click="onMessageClick($event, \'n\'); notifClicked($event, \'n\')" class="btn-lg icon-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" ng-class="{\'active-mes-notif\' : notificationsActive === true}"> <span class="nav-menu-icon" style="pointer-events: none"> <img src="images/nav_menu_icon/notif/notif.png" style="pointer-events: none"> <span class="unread_count notifications-unread-count" style="pointer-events: none" ng-if="newNotifications.length">{{newNotifications.length}}</span> </span> </a> <div class="dropdown-menu"> <notifications-popup></notifications-popup> </div> </li> <!--<li class="dropdown {{bgClass}}">--> <li class="dropdown bg-{{role}}" ng-class="{\'active-icon\': activeTab===\'messages\'}"> <a href="#" id="mes" ng-click="onMessageClick($event, \'m\'); notifClicked($event, \'m\')" class="btn-lg icon-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" ng-class="{\'active-mes-notif\' : messagesActive === true}"> <span class="nav-menu-icon icon-messages" style="pointer-events: none"> <span ng-show="(unread !== -1 && unread !==0)" class="unread_count" style="pointer-events: none">{{unread}}</span> </span> </a> <div class="dropdown-menu"> <message-popup></message-popup> </div> </li> <li class="dropdown bg-{{role}}"> <a class="btn-lg profile dropdown-toggle ava-container-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="ava-container"> <span class="user-header-img" ng-style="{\'background-image\':\'url({{user.data.details.data.photo}})\'}"></span> </span> <span class="nav-menu-text-profile">{{user.data.details.data.first_name}} {{user.data.details.data.last_name}}</span><span class="caret"></span></a> <ul class="dropdown-menu {{bgClass}}"> <li class="bg-grey"><a href="#/profile" class="dropdown-menu-text"><img src="images/nav_menu_icon/icon-dropdown-profile.svg">My profile</a></li> <li class="bg-grey"><a href="#/settings" class="dropdown-menu-text"><img src="images/nav_menu_icon/icon-dropdown-setting.svg">Setting</a></li> <li class="bg-grey"><a href="#/findPeople" class="dropdown-menu-text"><img src="images/nav_menu_icon/icon-dropdown-search.svg">Find people</a></li> <li class="bg-grey" style="overflow: hidden"><a href="#/logout" ng-click="logout()" class="dropdown-menu-text"><img src="images/nav_menu_icon/icon-dropdown-logout.svg">Logout</a></li> </ul> </li> </ul> </div> </div> <!--</div>--> </div> </header>'),a.put("components/login/login.html",'<!--<div class="login-wrapper"  >--><!--<form class="" ng-submit="submit()">--><!--<div class="login-error"></div>--><!--<div class="login-label"><label> &lt;!&ndash;for="username"&ndash;&gt;Username:</label></div>--><!--<div class="login-element"><input type="text" ng-model="username" name="username" placeholder="username"--><!--required/></div>--><!--<div class="login-label"><label> &lt;!&ndash;for="password"&ndash;&gt;Password:</label></div>--><!--<div class="login-element"><input type="password" ng-model="password" name="password" placeholder="password"--><!--required/></div>--><!--<div class="login-button">--><!--<button type="submit" class="form-button">Sign in</button>--><!--</div>--><!--</form>--><!--</div>--> <div> <div> <div class="login-label"><label> <!--for="username"-->Username:</label></div> <input placeholder="Login (ex. admin/user)" ng-model="login"> </div> <div> <div class="login-label"><label> <!--for="password"-->Password:</label></div> <input placeholder="Pass (ex. 123456)" type="password" ng-model="pass"> </div> <button ng-click="loginClick()">And press me slowly</button> </div>'),a.put("components/login/logout.html","<h3> TMP</h3>"),a.put("components/menuClass/menuClass.html",'<div class="container"> <div class="row"> <!--<div class="col-md-3">--> <ul class="menu-links"> <li><a href="/#">Item 1</a></li> <li><a href="/#">Item 2</a></li> <li><a href="/#">Item 3</a></li> <li><a href="/#">Item 4</a></li> <li><a href="/#">Item 5</a></li> <li><a href="/#">Item 6</a></li> <li><a href="/#">Item 7</a></li> <li><a href="/#">Item 8</a></li> <li><a href="/#">Item 9</a></li> <li><a href="/#">Item 0</a></li> </ul> <!--</div>--> </div> </div>'),a.put("components/message/message-popup.html",'<div class="message-popup"> <div class="popup-block"> <div class="dialog-list"> <div class="dialog-wrapper"> <div ng-click="selectRoom(last.room, last)" ng-repeat="last in dialog.items | orderObjectBy:&quot;date_time.date&quot;:true" class="dialog-last-mess"> <div class="mess-container"> <div ng-if="last.unread_count" class="{{\'unread bg-\' + role }}"> <span>{{last.unread_count}}</span> </div> <img class="{{\'border-bg-\' + role}}" ng-src="{{last.sender.image}}" alt=""> <div class="content-block"> <div class="sender-name"> {{last.sender.first_name + \' \' + last.sender.last_name}} <span class="mess-date">{{last.date_time.date | datechat}}</span> </div> <div class="mes-content"> {{last.content}} </div> </div> </div> </div> </div> <div class="all-message {{\'border-top-\' + role}}"> <a class="{{\'c-\' + role}}" ng-href="#/message">See all messages</a> </div> </div> </div> </div>'),a.put("components/message/message.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div class="mess-block"> <div class="message-block-header {{\'c-\' + role}}"> <div class="col-md-5 col-sm-5 col-xs-6"> <span class="title"> Messages </span> <span class="unread-messages" ng-show="unread !== -1"> {{unread == 1? unread +\' unread message\': unread + \' unread messages\'}} </span> </div> <div class="col-md-7 col-sm-7 col-xs-6 class-menu-item-context-menu" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div class="container"> <div class="row"> <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 padding"> <div class="dialog-list"> <div class="dialog-wrapper" id="dialog-list"> <div infinite-scroll-container="\'#dialog-list\'" infinite-scroll="dialog.nextPage()" infinite-scroll-disabled="dialog.busy" infinite-scroll-distance="0"> <div ng-click="changeRoom(last)" ng-class="{\'mess-active {{\'border-bg-\' + role }}\': active == last.room}" ng-repeat="(id, last) in dialog.items | orderObjectBy:&quot;date_time.date&quot;:true" class="dialog-last-mess"> <div ng-class="{\'active-mess\': active == last.room}" class="mess-container"> <div class="h {{\'c-\' + role }}" ng-show="last.newRoom"> <p ng-show="last.newRoom.type === \'group\'"> GROUP MESSAGE <br> <span class="text"> {{last.newRoom.text}}</span> </p> <p ng-show="last.newRoom.type ===\'direct\'"> CHAT WITH {{last.newRoom.text}} </p> </div> <div ng-hide="last.newRoom"> <div ng-show="last.unread_count > 0" class="{{\'unread bg-\' + role }}"> <span>{{last.unread_count}}</span> </div> <div class="last-mess-user-img {{\'border-bg-\' + role }}" ng-style="{\'background-image\':\'url({{last.sender.image}})\'}"></div> <!--<img class="{{\'border-bg-\'+ role}}" ng-src="{{last.sender.image}}" alt="">--> <div class="content-block"> <div class="sender-name"> {{last.sender.first_name + \' \' + last.sender.last_name}} <span class="mess-date">{{last.date_time.date | datechat}}</span> </div> <div class="mes-content"> {{last.content}} </div> </div> </div> </div> </div> </div> <div id="dialog-loader" class="loader" style="display: none"></div> </div> <div style="position: relative"> <custom-button style="position: absolute; bottom: 20px; right: 20px"></custom-button> </div> </div> </div> <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 padding pl-15"> <div class="chat-container"> <div ng-if="active!==-1" class="chat-header" ng-hide="startRequest"> <div class="h {{\'c-\' + role }}"> <p ng-show="chatTitle.type === \'group\'"> GROUP MESSAGE <br> <span class="text"> {{chatTitle.text}}</span> </p> <p ng-show="chatTitle.type ===\'direct\'"> CHAT WITH {{chatTitle.text}} </p> </div> <div> </div> </div> <div id="chat" class="chat" onscroll="scrollEventHendlerChat()"> <div ng-show="active!==-1" id="container-chat"> <div id="chat-loader" class="loader" style="display: none"></div> <div class="message-container" ng-repeat="(id, message) in currentRoom.chat.items track by id" chat-scrol-dir> <div ng-class="{\'rtl\': message.sender.id === user.id}" class="message" ng-click=" message.sender.id === user.id && selectMessage(message)"> <div ng-class="{\'selected-message\': selectedMessages.indexOf(message) != -1}"> <div class="img-with-date"> <div class="last-mess-user-img" ng-style="{\'background-image\':\'url({{message.sender.image}})\'}"></div> <span class="date">{{message.date_time.date | datemessage}}</span> </div> <div ng-class="{\'message-me {{\'bg-\' + role }}\': message.sender.id === user.id}" class="message-content"> <div class="holder-flex"> <p ng-bind-html="message.contentR"> <!--{{message.contentR}}--> </p> <img ng-if="message.attachments.length" class="chat-img" src="{{message.attachments[0].link}}"> </div> </div> </div> </div> </div> </div> </div> <!--<div  onscroll="scrollEventHendler()" id=\'chat\' class="chat">--> <!--<div ng-show=\'active!==-1\' id="container-chat">--> <!--<div id="chat-loader" class="loader" style="display: none"></div>--> <!--<div class="message-container" ng-repeat=\'(id, message) in currentRoom.chat.items track by id\' my-repeat-directive>--> <!--<div ng-class="{\'rtl\': message.sender.id === user.id}" class="message">--> <!--<div class="img-with-date">--> <!--<img ng-src="{{message.sender.image}}" alt="">--> <!--<span class="date">{{message.date_time.date | datemessage}}</span>--> <!--</div>--> <!--<div ng-class="{\'message-me {{\'bg-\' + role }}\': message.sender.id === user.id}" class="message-content ">--> <!--<div class="holder-flex">--> <!--<p ng-bind-html="message.contentR">--> <!--&lt;!&ndash;{{message.contentR}}&ndash;&gt;--> <!--</p>--> <!--<img ng-if="message.attachments.length" class="chat-img"--> <!--src="{{message.attachments[0].link}}">--> <!--</div>--> <!--</div>--> <!--</div>--> <!--</div>--> <!--</div>--> <!--</div>--> <div ng-show="active!==-1" class="type-message"> <div class="type-message-container height"> <div class="row height margin"> <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 height padding"> <div class="photo-container height"> <div class="photo {{ role }}" ng-show="!picFile" name="pictureUpload" ngf-select ng-model="picFile" ngf-min-widht="240" ngf-min-height="160" ngf-max-size="5MB" ngf-resize="{width: 240, height: 160, centerCrop: true}" ngf-accept="\'image/*\'" valid-file> </div> <div ng-show="picFile" class="UploadedPicture" ngf-select ng-model="picFile" ngf-accept="\'image/*\'"> <img class="thumb" ngf-thumbnail="picFile"> </div> </div> </div> <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 height padding"> <div class="message-input-container height width"> <div class="scroll-hider"></div> <textarea autofocus maxlength="200" id="type-message" ng-keyup="resizeArea($event)" class="message-input width" name="Message" cols="40" rows="1" ng-model="content" placeholder="Type your message…"></textarea> </div> </div> <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 height relative padding"> <div ng-if="!loadingImg" ng-click="sendMessage()" class="send {{\'c-\' + role }}"> Send </div> <div ng-if="loadingImg" class="loading--message-image"> Loading image... </div> </div> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("components/message/selectPeople.html",'<div class="select-people"> <div class="modal-header {{\'bg-\' + role }} classdig-people-header"> <h3 class="modal-title classdig-modal-title">Select people to message</h3> <button ng-click="$ctrl.close()" type="button" class="close classdig-close-button" data-dismiss="modal">&times;</button> </div> <div class="modal-body padding" style="min-height: 500px"> <div ng-if="!$ctrl.hasClass && !$ctrl.noClasses"> <div id="add-people-loader" class="loader"></div> </div> <h2 style="text-align: center" ng-show="$ctrl.noClasses"> You are not a member of any classes yet. </h2> <div ng-if="$ctrl.hasClass" class="modal-section"> <div class="modal-section-header"> <p>SELECT CLASS</p> <div style="margin-left: 15px" class="modal-section-title"> <div style="display: flex; margin-left: 4px;\r\n    width: 324px;border-bottom: 1px solid #d9d9d9" class="select-class-container"> <div style="flex: 1"> Class </div> <div style="width: 200px; position: relative" class="{{\'c-\' + role}}"> <custom-selector class="{{role + \'-color\'}}" options="$ctrl.options" selected-option="$ctrl.selectedOption.opt"></custom-selector> </div> </div> <div class="user-role outline" ng-if="userRole === \'teacher\'"> <div ng-click="$ctrl.selectRole(r.url)" ng-repeat="r in $ctrl.roles" class="{{r.id}} outline" ng-class="{\'active {{\'role-\' + role}} {{\'c-\' + role}}\': $ctrl.selectedRole == r.url}"> {{r.description}} </div> </div> <!--<div class="user" ng-click=\'$ctrl.selectUser($ctrl.teacher)\'>123</div>--> <div class="user-list" style="padding: 12px 0 0 0; height: auto; overflow: hidden" ng-if="$ctrl.teacher"> <div ng-click="$ctrl.selectUser($ctrl.teacher)" class="user"> <div class="row margin padding"> <div class="padding col-lg-4 col-md-4 col-sm-4 col-xs-4"> <p class="name">Teacher :</p> </div> <div class="padding col-lg-2 col-md-2 col-sm-2 col-xs-2"> <img ng-class="{\'{{\'border-bg-\'+role}}\': $ctrl.selectedUsers[$ctrl.teacher.id]}" class="user-image" ng-src="{{$ctrl.teacher.details.data.photo}}"> </div> <div class="padding col-lg-6 col-md-6 col-sm-6 col-xs-6"> <p class="name">{{$ctrl.teacher.details.data.first_name + \' \' + $ctrl.teacher.details.data.last_name}} <span ng-show="$ctrl.selectedUsers[$ctrl.teacher.id]" style="float: right" class="glyphicon glyphicon-ok {{ \'c-\' + role}}"></span> </p> </div> </div> </div> </div> </div> </div> </div> <div ng-if="$ctrl.hasClass" class="modal-section"> <div class="modal-section-header"> <p>SELECT {{$ctrl.selectedRole == \'users\'? \'STUDENT\': \'PARENT\'}}</p> </div> <div id="user-list" class="user-list" infinite-scroll-container="\'#user-list\'" infinite-scroll="$ctrl.users.nextPage($ctrl.selectedOption.opt, $ctrl.selectedRole)" infinite-scroll-disabled="users.busy" infinite-scroll-distance="1" infinite-scroll-listen-for-event="list:filtered"> <div ng-click="$ctrl.selectUser(user)" class="user" ng-repeat="user in filteredItems = ($ctrl.users.items | filter: {type: $ctrl.selectedRole, class: $ctrl.selectedOption.opt})"> <div class="row margin padding"> <div class="padding col-lg-2 col-md-2 col-sm-2 col-xs-2"> <img ng-class="{\'{{\'border-bg-\'+role}}\': $ctrl.selectedUsers[user.id]}" class="user-image" ng-src="{{user.image}}"> </div> <div class="padding col-lg-10 col-md-10 col-sm-10 col-xs-10"> <p class="name">{{user.first_name + \' \' + user.last_name}} <span ng-show="$ctrl.selectedUsers[user.id]" style="float: right" class="glyphicon glyphicon-ok {{ \'c-\' + role}}"></span> </p> </div> </div> </div> <div ng-hide="filteredItems.length || $ctrl.users.busy" style="text-align: center">no results</div> <div id="user-loader" class="loader" style="display: none"></div> </div> </div> </div> <div ng-if="$ctrl.hasClass" class="modal-footer classdig-modal-footer"> <button class="btn classdig-cancel-button {{\'c-\' + role }}" type="button" ng-click="$ctrl.cancel() ">CANCEL </button> <button class="btn {{\'bg-\' + role }} classdig-ok-button" type="button" ng-click="$ctrl.ok()">START CHAT</button> </div> </div>'),a.put("components/notifications/notifications-popup.html",'<div class="message-popup"> <div class="popup-block"> <div class="dialog-list"> <div class="dialog-wrapper" style="overflow: hidden"> <div ng-repeat="notification in newNotifications" class="dialog-last-mess" style="height: auto"> <div class="mess-container" ng-click="readNotification(notification)"> <div ng-if="notification.status === 0" class="{{\'unread bg-\' + role }}" style="bottom: 10px"> <span>NEW!</span> </div> <div class="content-block" style="padding: 0"> <div class="sender-name"> <span class="mess-date">{{notification.created_at | datechat}}</span> </div> <div class="mes-content" style="height: auto; margin-top: 20px"> {{notification.title}} </div> </div> </div> </div> <div ng-if="!newNotifications.length" class="dialog-last-mess" style="height: auto"> <div class="mess-container" ng-click="readNotification(notification)"> <div class="content-block" style="padding: 0"> <div class="mes-content" style="height: auto"> You have no new notifications. </div> </div> </div> </div> </div> <div class="notif-controls {{\'border-top-\' + role}}"> <a class="{{\'c-\' + role}} control-left" ng-href="#" ng-click="onMessageClick($event); readAllNotifications()">Mark as read</a> <a class="{{\'c-\' + role}} control-right" ng-href="#/notifications">See all notifications</a> </div> </div> </div> </div>'),a.put("components/notifications/notifications.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div class="mess-block" ng-init="init()"> <div class="message-block-header {{\'c-\' + role}}"> <span class="title"> Notifications <br> <!--<span class="unread-messages" ng-show="unread !== -1">--> <!--{{unread == 1? unread +\' unread message\':  unread + \' unread messages\'}}--> <!--</span>--> </span> </div> <div class="container"> <div class="row"> <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 padding"></div> <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 padding"> <div class="dialog-list"> <div ng-if="!notifications.length"> <div class="loader"></div> </div> <div class="dialog-wrapper" id="dialog-list" ng-if="notifications.length"> <div ng-repeat="notification in notifications" class="dialog-last-mess" style="height: auto" ng-click="readNotification(notification)"> <div class="mess-container"> <div ng-if="notification.status === 0" class="{{\'unread bg-\' + role }}" style="bottom: 10px"> <span>NEW!</span> </div> <div class="content-block" style="padding: 0"> <div class="sender-name"> <span class="mess-date">{{notification.created_at | datechat}}</span> </div> <div class="mes-content" style="height: auto; margin-top: 20px"> {{notification.title}} </div> </div> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("components/premium/premium.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div class="class-menu"> <div class="premium-header"> <div class="premium-header-title" ng-show="showDiscount">Premium</div> <div class="premium-header-back" ng-click="functionHideDiscount()" ng-show="!showDiscount"><img src="images/files-library/icon-arrow-back-teacher.svg"><span> Back</span> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center-premium"> <div class="premium-logo-container"> <img src="images/logos/logo-login.png"> </div> <div class="premium-information-container" ng-show="showDiscount"> <div class="subscribe-header">Subscribe now to enjoy best features of ClassDig</div> <div class="premium-button-container"> <button ng-click="openPaymentModal({\'period\': 1,\'money\':2.99, \'cummon\':false})"><span class="cost">$2.99</span><br><span class="time">monthly</span></button> <button ng-click="openPaymentModal({\'period\': 2,\'money\':29.99, \'cummon\':false})"><span class="cost">$29.99</span><br><span class="time">yearly</span></button> </div> <div class="subscribe-header"> <div class="promo-code">GO WITH PROMOTION CODE</div> <div class="promo-code-sub">huge discount for school package</div> </div> <div class="premium-button-container premium-button-container-code"> <button ng-click="functionShowDiscount()"><span class="code">GET A CODE</span></button> <button ng-click="functionEnterClassCode()"><span class="code">I HAVE A CODE</span></button> </div> </div> <div class="premium-discount-container" ng-show="!showDiscount"> <div class="discount-table-container"> <table> <tr> <td class="discount-data discount-table-data"> <span class="discount-percent"> 30%</span> <span> discount</span> </td> <td class="discount-data discount-table-data"> <span class="discount-percent"> 40%</span> <span> discount</span> </td> <td class="discount-data discount-table-data"> <span class="discount-percent"> 50%</span> <span> discount</span> </td> </tr> <tr> <td class="discount-information discount-table-data"> <div>School package for up <br> to 30 teachers.</div> <button class="buy-discount-button" ng-click="openPaymentModal({\'period\': 2,\'money\':2.99, \'cummon\': true, \'discount\': 30})">BUY</button> </td> <td class="discount-information discount-table-data"> <div>School package for up <br> to 40 teachers.</div> <button class="buy-discount-button" ng-click="openPaymentModal({\'period\': 2,\'money\':2.99, \'cummon\': true,\'discount\': 40})">BUY</button> </td> <td class="discount-information discount-table-data"> <div>School package for up <br> to 50 teachers.</div> <button class="buy-discount-button" ng-click="openPaymentModal({\'period\': 2,\'money\':2.99, \'cummon\': true,\'discount\': 50})">BUY</button> </td> </tr> </table> </div> </div> </div> </div> <div class="class-menu-item-block-right-container"> </div> </div> </div>'),a.put("components/profile/profile.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div class="class-menu"> <div class="premium-header"> <div class="premium-header-title {{userData.color}}"> My Profile</div> </div> <div class="class-menu-item-container profile-menu-item-container"> <div class="class-menu-item-block-right-container profile-right-container" style="position : relative"> <div class="class-menu-item-block-right class-menu-item-block-right-profile refreshProfile" style="overflow-y: auto !important; overflow-x: hidden"> <user-info show-additional-info="true" selected-user="updateUserProfile" ng-show="showProfile"></user-info> <!--show followers list button--> <div class="parent-request-button" ng-click="seeRequestToFollow()" ng-show="requestedUsers.length>0 && showProfile"> <img src="../images/parents/icon-invite-parent.svg"> <span ng-show="requestedUsers.length===1"> {{requestedUsers.length}} REQUEST TO FOLLOW</span> <span ng-show="requestedUsers.length>1"> {{requestedUsers.length}} REQUESTS TO FOLLOW</span> </div> <!------------------------------> <!--list of followers--> <!--<div class="student-info">--> <div class="student-in-requests-container" ng-repeat="user in requestedUsers" ng-show="!showProfile"> <div class="student-in-requests"> <div class="container-flex container-button-flex"> <div class="container-flex container-button-flex"> <div class="student-img" ng-style="{\'background-image\':\'url({{user.user.photo || user.user.image}})\'}"></div> <div class="student-name"> <div> {{user.user.first_name}} {{user.user.last_name}} </div> </div> </div> <div class="buttons"> <div> <button class="btn approve-btn {{userData.background}} white-color" ng-click="approveReject(user, 1)">Accept</button> <button class="btn approve-btn {{userData.color}} {{userData.border}}" ng-click="approveReject(user, 2)">Reject</button> </div> </div> </div> </div> <!--</div>--> <!--end followers list--> </div> <div ng-show="requestedUsers.length===0 && !showProfile" class="no-results-massage">There are no followers </div> <div class="parent-request-button" ng-click="seeProfile()" ng-show="!showProfile"> BACK </div> </div> <div class="edit-profile-button-container" ng-click="editProfile()"> <img src="images/profile/edit_button.png" style="width: 78px; height: 78px"> </div> </div> <div class="class-menu-item-block-center-container profile-block-center-container"> <div class="class-menu-item-block-center profile-center-container"> <div class="profile-subheader"> <div class="profile-subheader-item" id="Upcoming" ng-click="switchUpcoming()">Upcoming </div> <div class="profile-subheader-item" id="Schedule" ng-click="switchSchedule()">Schedule</div> <div class="profile-subheader-item" id="Activities" ng-click="switchActivities()">Activities</div> <div class="profile-subheader-item" id="Users" ng-click="switchUser(user)"></div> </div> <div class="upcomingContainer" ng-show="showUpcoming"> <div class="upcomingList"> <div ng-repeat="upcomingEvent in listOfUpcomingEvents" class="upcoming-item"> <div class="upcoming-item-left"> <div class="upcoming-item-date" style="background-color: {{upcomingEvent.color | colorParse}}"> <span>{{functionGetEventTime(upcomingEvent.due_date)}}</span> {{functionGetEventTimeMonth(upcomingEvent.due_date)}} </div> <div class="upcoming-item-star-container"> <img class="active-star" ng-class="{\'mark-active-star\': upcomingEvent.owner_id===user.data.id}" src="images/profile/icon-star-important.svg" ng-if="upcomingEvent.important" ng-click="markImportantItem(0,upcomingEvent.id ,$index,upcomingEvent.owner_id)"> <img class="star" ng-class="{\'mark-star\': upcomingEvent.owner_id===user.data.id}" src="images/profile/icon-star.svg" ng-if="!upcomingEvent.important" ng-click="markImportantItem(1,upcomingEvent.id,$index,upcomingEvent.owner_id)"> </div> <div class="upcoming-item-title">{{upcomingEvent.title}}<br> <span class="upcoming-item-time">{{upcomingEvent.time_start}}</span></div> </div> <div class="upcoming-item-right"> <div class="upcoming-item-class-data"> <div class="upcoming-item-class">{{upcomingEvent.class.name}}</div> <div class="upcoming-item-location" ng-show="upcomingEvent.location"><img src="images/modal/location-grey.svg">{{upcomingEvent.location}}</div> </div> <div class="controll-button" ng-if="upcomingEvent.owner_id===user.data.id"> <button class="btn-default btn"><img src="images/events/controll-button.svg"></button> <div class="inside-menu dropdown-menu"> <div class="menu-option" ng-click="editEvent(upcomingEvent,$index)">Edit</div> <div class="menu-option" ng-click="deleteEvent(upcomingEvent,$index)">Delete</div> </div> </div> </div> </div> </div> <div ng-show="requestUpcomingInProgress" class="loader"></div> </div> <div class="scheduleContainer" ng-show="showSchedule" style="position: relative"> <div class="schedule-time-header" ng-show="!requestInProgress">Time</div> <div class="events-calendar"> <div id="calendar" class="arrow-color-{{role}}" ui-calendar="uiConfig.calendar" ng-model="eventSources" calendar="cdCalendar" data-calendar="myCalendar"></div> <div ng-show="requestInProgress" class="loader"></div> </div> </div> <div class="activitiesContainer" id="feedList" ng-if="showActivities"> <ul id="activitieslist"> <li ng-repeat="activity in activities track by $index"> <div class="current-feed" ng-if="activity.type===\'announcement\'"> <div class="follow-header"> <div class="follow-header-info"> <div class="follow-header-img-container" style="background-image: url({{user.photo}})"></div> <div> <div class="follow-header-name">{{user.first_name}}{{user.last_name}} <span> @{{user.first_name}}</span> </div> <div class="feed-header-date">{{getFinishTime(activity.created_at)}} ago</div> </div> </div> <div class="follow-header-action">has posted <a ng-href="#/class/{{classId}}/user/{{userId}}/announcments"> a new announcement</a></div> </div> </div> <div class="current-feed" ng-if="activity.type===\'follows\'"> <div class="follow-header"> <div class="follow-header-info"> <div class="follow-header-img-container" style="background-image: url({{user.photo}})"></div> <div> <div class="follow-header-name">{{user.first_name}}{{user.last_name}} <span> @{{user.first_name}}</span> </div> <div class="feed-header-date">{{getFinishTime(activity.updated_at)}} ago</div> </div> </div> <div class="follow-header-action">has followed</div> <div class="follow-header-info follow-user"> <div class="follow-header-img-container" style="background-image: url({{activity.image}})"></div> <div> <div class="follow-header-name">{{activity.first_name}} {{activity.last_name}} <span> @{{activity.first_name}}</span></div> <div class="feed-header-date tohide">{{activity.updated_at}} ago</div> </div> </div> </div> </div> <div class="current-feed" ng-if="activity.type===\'followers\'"> <div class="follow-header"> <div class="follow-header-info"> <div class="follow-header-img-container" style="background-image: url({{activity.image}})"></div> <div> <div class="follow-header-name">{{activity.first_name}}{{activity.last_name}} <span> @{{activity.first_name}}</span></div> <div class="feed-header-date">{{getFinishTime(activity.updated_at)}} ago</div> </div> </div> <div class="follow-header-action">has followed</div> <div class="follow-header-info follow-user"> <div class="follow-header-img-container" style="background-image: url({{user.photo}})"></div> <div> <div class="follow-header-name">{{user.first_name}} {{user.last_name}} <span> @{{user.first_name}}</span></div> <div class="feed-header-date tohide">{{activity.updated_at}} ago</div> </div> </div> </div> </div> <div class="current-feed story" ng-if="activity.type===\'story\'"> <!------------- Feed header ------------------> <div class="feed-header"> <div class="feed-header-info"> <div class="feed-header-img-container" style="background-image: url({{user.photo}})"> </div> <div> <!-- <a data-id="{{feed.owner.id}}" href="#/findPeople" class="followItem-left" ng-click="showprofile(feed.owner)">--> <div class="feed-header-name">{{user.first_name}} {{user.last_name}} <span> @{{user.first_name}}</span></div> <div class="feed-header-date">{{getFinishTime(activity.created_at.date )}} ago</div> <!-- </a>--> </div> </div> <div class="controll-button" ng-show="user.user_id===userId"> <button class="btn-default btn"><img src="images/events/controll-button.svg"></button> <div class="inside-menu dropdown-menu"> <!--<div class="menu-option" ng-click="editFeed()" >Edit</div>--> <div class="menu-option" ng-click="deleteFeed(feed)">Delete</div> </div> </div> </div> <!------------- End Feed header ------------------> <!------------- Feed content ------------------> <div class="feed-content"> <div class="feed-content-data" ng-if="activity.file"> <div class="feed-content-data-img" ng-if="feed.type_file===1"> <img ng-src="{{activity.file.link}}" width="100%" height="auto"> </div> <div class="feed-content-data-video" ng-if="activity.type_file===2"> <video width="100%" height="auto" controls> <source ng-src="{{activity.file.link}}"> Your browser does not support the video. </source></video> </div> <div class="feed-content-data-link" ng-if="activity.type_file===3"> <a class="{{userData.color}}" target="_self" href="{{activity.file.link}}" download="activity.file.filename"> <img ng-src="{{iconAddLink}}"> {{activity.file.filename}} </a> </div> </div> <div class="feed-content-link" ng-if="activity.link && !activity.youtube"> <a ng-href="{{showFeedLinkFunction(activity.link)}}" target="_blank" class="{{userData.color}}">{{activity.link}}</a> </div> <div class="feed-content-link" ng-if="activity.link && activity.youtube" style="display: flex; justify-content: center"> <youtube-video video-id="activity.link"></youtube-video> </div> <div class="feed-content-text">{{activity.content}}</div> </div> <!------------- End Feed content ------------------> <div class="feed-feedback"> <div class="feed-likes"> <img ng-if="!activity.is_liked" src="images/feed/icon-likes.svg" ng-click="addLikeFunction(activity)"> <img ng-if="activity.is_liked" src="images/feed/icon-liked.svg" ng-click="addLikeFunction(activity)"> {{activity.likes}} </div> <div class="feed-comment" ng-click="openModalAddComment(activity)"> <img ng-if="!activity.is_comment || activity.comments.data.length===0" src="images/feed/icon-comments.svg"> <img ng-if="activity.is_comment  && activity.comments.data.length>0 " src="images/feed/icon-commented.svg"> {{activity.comments.data.length}}</div> </div> <div class="feed-comments"> <div class="comment" ng-repeat="comment in activity.comments.data" ng-if="$index<2 || showComment"> <div class="comment-info"> <div class="comment-owner">{{comment.owner.first_name}} {{comment.owner.last_name}} </div> <div class="comment-content">{{comment.content}}</div> </div> <div class="del-comment-button" ng-click="deleteFeedComment(comment,activity.comments.data, activity.comments_count )" ng-show="comment.owner.id===userId">x</div> </div> <div class="showComments" ng-click="showCommentsFunction()" ng-if="!showComment && activity.comments.data.length>2">Show more comments</div> <div class="showComments" ng-click="hideCommentsFunction()" ng-if="showComment && activity.comments.data.length>2 ">Hide comments</div> </div> </div> <!--<div class="current-feed" ng-if="activity.type===\'changeprofile\'">\r\n              <div class="follow-header">\r\n                <div class="follow-header-info">\r\n                  <div class="follow-header-img-container" style="background-image: url({{activity.photo}})"></div>\r\n                  <div>\r\n                    <div class = \'follow-header-name\'>{{activity.first_name}}{{activity.last_name}} <span> @{{activity.first_name}}</span></div>\r\n                    <div class = \'feed-header-date\'>{{getFinishTime(activity.updated_at)}} ago</div>\r\n                  </div>\r\n                </div>\r\n                <div class="follow-header-action">has changed {{activity.gender}} profile</div>\r\n              </div>\r\n            </div>--> </li> <!--<li><feed-list feed-url="feedUrl+\'?page=\'"></feed-list></li>    --> </ul> </div> <div class="usersProfileContainer" ng-show="showUser"> <div class="class-menu-item-block-right-container"> <div class="class-menu-item-block-right class-menu-item-block-right-profile"> <user-info selected-user="activeUser" show-additional-info="false"></user-info> <div class="user-feeds-container"> <feed-list feed-url="feedUrl+\'&page=\'"></feed-list> </div> </div> </div> </div> </div> </div> </div> </div>'),
a.put("components/settings/settings.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div class="mess-block" ng-init="init()" style="height: calc(100vh - 64px); overflow: hidden"> <div class="message-block-header {{\'c-\' + role}}"> <span class="title">Settings</span> </div> <div class="container"> <div class="row"> <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 padding"></div> <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 padding classes {{role}} holder-settings"> <div class="classes-block classes-block-archived settings-block"> <div class="classes-block-list-archived settings-title"> <div class="chapter" ng-click="chapterIsOpen1 = !chapterIsOpen1"> <div> <div class="chapter-title {{\'c-\'+role}}"> <span style="text-transform: uppercase">Languages</span> </div> <div class="chapter-control"> <i ng-show="chapterIsOpen1" class="glyphicon glyphicon-chevron-up {{\'c-\'+role}} icon"></i> <i ng-show="!chapterIsOpen1" class="glyphicon glyphicon-chevron-down {{\'c-\'+role}} icon"></i> </div> </div> </div> <div class="list-holder" ng-show="chapterIsOpen1"> <div class="settings-chapter {{\'c-\'+role}}"> <div class="custom-toggle"> <input ng-click="selectLanguage(\'EN\')" type="checkbox" ng-model="selectedEN" id="languageEN"> <label for="languageEN"><span class="{{\'c-\' + role}}" style="top: -3px; position: relative; padding-right: 30px;margin-right: -30px">English</span></label> </div> </div> <div class="settings-chapter {{\'c-\'+role}}"> <div class="custom-toggle"> <input ng-click="selectLanguage(\'AR\')" type="checkbox" ng-model="selectedAR" id="languageAR"> <label for="languageAR"><span class="{{\'c-\' + role}}" style="top: -3px; position: relative; padding-right: 30px;margin-right: -30px">Arabic</span></label> </div> </div> </div> </div> <div class="classes-block-list-archived settings-title"> <div class="chapter"> <div> <div class="chapter-title {{\'c-\'+role}}"> <span style="text-transform: uppercase">Notifications</span> </div> <div class="chapter-control"> <div class="onoffswitch"> <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch"> <label class="onoffswitch-label" for="myonoffswitch" ng-click="notificationsEnable()"> <span class="onoffswitch-inner {{userData.background}}"></span> <span class="onoffswitch-switch"></span> </label> </div> </div> </div> </div> </div> <div class="classes-block-list-archived settings-title"> <div class="chapter"> <div> <div class="chapter-title {{\'c-\'+role}}"> <span style="text-transform: uppercase">Protected</span> </div> <div class="chapter-control"> <div class="onoffswitch"> <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch1"> <label class="onoffswitch-label" for="myonoffswitch1" ng-click="protectedEnable()"> <span class="onoffswitch-inner {{userData.background}}"></span> <span class="onoffswitch-switch"></span> </label> </div> </div> </div> </div> </div> <div class="classes-block-list-archived settings-title" ng-if="role === \'teacher\'"> <div class="chapter" ng-click="chapterIsOpen2 = !chapterIsOpen2"> <div> <div class="chapter-title {{\'c-\'+role}}"> <span style="text-transform: uppercase">Behavior Types</span> </div> <div class="chapter-control"> <i ng-show="chapterIsOpen2" class="glyphicon glyphicon-chevron-up {{\'c-\'+role}} icon"></i> <i ng-show="!chapterIsOpen2" class="glyphicon glyphicon-chevron-down {{\'c-\'+role}} icon"></i> </div> </div> </div> <div class="list-holder" ng-show="chapterIsOpen2"> <div class="settings-chapter"> <div class="title" style="padding-left: -22px"> <span style="color: #1ea66d">Positive</span> </div> <div class="beh-list-item" ng-repeat="behavior in behaviours" ng-if="behavior.type === 1"> <div> <span class="behavior-icon"><img src="{{behavior.image}}" style="width: 45px; height: 45px"></span> <span class="beh-name">{{behavior.description}}</span> </div> <div class="controll-button" ng-if="behavior.id > 8"> <button class="btn-default btn"><img src="images/events/controll-button.svg"></button> <div class="inside-menu dropdown-menu"> <div class="menu-option" ng-click="editBehavior(behavior)">Edit</div> <div class="menu-option" ng-click="deleteBehavior(behavior)">Delete</div> </div> </div> </div> </div> <div class="settings-chapter" style="padding-left: 22px"> <div class="title"> <span style="color: #f93640">Need work</span> </div> <div class="beh-list-item" ng-repeat="behavior in behaviours" ng-if="behavior.type === 2"> <div> <span class="behavior-icon"><img src="{{behavior.image}}" style="width: 45px; height: 45px"></span> <span class="beh-name">{{behavior.description}}</span> </div> <div class="controll-button" ng-if="behavior.id > 8"> <button class="btn-default btn"><img src="images/events/controll-button.svg"></button> <div class="inside-menu dropdown-menu"> <div class="menu-option" ng-click="editBehavior(behavior)">Edit</div> <div class="menu-option" ng-click="deleteBehavior(behavior)">Delete</div> </div> </div> </div> </div> </div> </div> <!--<div class="classes-block-list-archived settings-title">--> <!--<div class="chapter" ng-click="chapterIsOpen3 = !chapterIsOpen3">--> <!--<div>--> <!--<div class="chapter-title {{\'c-\'+role}}">--> <!--<span style="text-transform: uppercase;">Attendance Types</span>--> <!--</div>--> <!--<div class="chapter-control">--> <!--<i ng-show="chapterIsOpen3" class="glyphicon glyphicon-chevron-up {{\'c-\'+role}} icon"></i>--> <!--<i ng-show="!chapterIsOpen3" class="glyphicon glyphicon-chevron-down {{\'c-\'+role}} icon"></i>--> <!--</div>--> <!--</div>--> <!--</div>--> <!--<div class="list-holder" ng-show="chapterIsOpen3">--> <!--<div class="settings-chapter">--> <!--<div class="beh-list-item">--> <!--<div>--> <!--<span class="behavior-icon attendance-icon" ></span>--> <!--<span class="beh-name">Present</span>--> <!--</div>--> <!--</div>--> <!--<div class="beh-list-item">--> <!--<div>--> <!--<span class="behavior-icon attendance-icon" ></span>--> <!--<span class="beh-name">Absent</span>--> <!--</div>--> <!--</div>--> <!--<div class="beh-list-item">--> <!--<div>--> <!--<span class="behavior-icon attendance-icon" ></span>--> <!--<span class="beh-name">Late</span>--> <!--</div>--> <!--</div>--> <!--</div>--> <!--</div>--> <!--</div>--> <div class="classes-block-list-archived settings-title"> <div class="chapter" ng-click="chapterIsOpen4 = !chapterIsOpen4"> <div> <div class="chapter-title {{\'c-\'+role}}"> <span style="text-transform: uppercase">Privacy</span> </div> <div class="chapter-control"> <i ng-show="chapterIsOpen4" class="glyphicon glyphicon-chevron-up {{\'c-\'+role}} icon"></i> <i ng-show="!chapterIsOpen4" class="glyphicon glyphicon-chevron-down {{\'c-\'+role}} icon"></i> </div> </div> </div> <div class="list-holder" ng-show="chapterIsOpen4"> <div class="settings-chapter"></div> </div> </div> <div class="classes-block-list-archived settings-title" ng-show="role === \'teacher\'"> <div class="chapter" ng-click="chapterIsOpen5 = !chapterIsOpen5"> <div> <div class="chapter-title {{\'c-\'+role}}"> <span style="text-transform: uppercase">Gradable Items</span> </div> <div class="chapter-control"> <i ng-show="chapterIsOpen5" class="glyphicon glyphicon-chevron-up {{\'c-\'+role}} icon"></i> <i ng-show="!chapterIsOpen5" class="glyphicon glyphicon-chevron-down {{\'c-\'+role}} icon"></i> </div> </div> </div> <div class="list-holder" ng-show="chapterIsOpen5"> <settings-class-list class-list="listOfClasses" class-id-for-gradable-items="classIdForGradableItems" ng-show="showListOfClasses"> ></settings-class-list> <div class="{{\'c-\'+role}} SettingsBackArrow" ng-click="backToListOfClasses()" ng-show="showListOfGradableItems"><img ng-src="{{iconArrowBack}}"> <span class="back-folder-button">Back</span> </div> <list-of-gradable-items class-id="selectedClassId" ng-show="showListOfGradableItems"></list-of-gradable-items> </div> </div> <div class="classes-block-list-archived settings-title"> <div class="chapter" ng-click="chapterIsOpen6 = !chapterIsOpen6"> <div> <div class="chapter-title {{\'c-\'+role}}"> <span style="text-transform: uppercase">Support</span> </div> <div class="chapter-control"> <i ng-show="chapterIsOpen6" class="glyphicon glyphicon-chevron-up {{\'c-\'+role}} icon"></i> <i ng-show="!chapterIsOpen6" class="glyphicon glyphicon-chevron-down {{\'c-\'+role}} icon"></i> </div> </div> </div> <div class="list-holder" ng-show="chapterIsOpen6"> <div class="settings-chapter"></div> </div> </div> </div> </div> </div> </div> </div>'),a.put("components/usersList/userList.html",'<!--<div class="attendance">--> <div ng-class="displayMode === true ? \'attendance-list-users-list-mode\' : \'attendance-list-users\'"> <div class="student" ng-repeat="student in students | orderBy:propertyName : sorting | filterBySearch : searchBy" ng-click="pickStudent(student);"> <div class="image" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}" ng-class="{\'atendance-list-user-active {{userData.color}} {{userData.userListBorder}}\': student.state === true}"> <div class="name"> {{student.first_name}} {{student.last_name}} </div> </div> <div class="student-status"> <img ng-if="student.type === 3" ng-src="{{lateIcon}}"> <img ng-if="student.type === 2" ng-src="{{absentIcon}}"> <img ng-if="student.type === 1" ng-src="{{presentIcon}}"> <img ng-if="student.distinguished" ng-src="{{distinguishedIcon}}"> <img ng-if="student.behavior_type === 1" ng-src="{{positiveIcon}}"> <img ng-if="student.behavior_type === 2" ng-src="{{negativeIcon}}"> </div> </div> </div> <!--\r\n    <div class="pieContainer">\r\n        <div class="pieBackground"></div>\r\n        <div class="pieBackground2"></div>\r\n        <div class="pieBackground3"></div>\r\n        <div class="pieBackground4"></div>\r\n        <div id="pieSliceRed" class="hold"><div class="pie"></div></div>\r\n        <div id="pieSliceYellow" class="hold"><div class="pie"></div></div>\r\n    </div>\r\n--> <!--</div>--> <!--\r\neyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjczLCJpc3MiOiJodHRwOlwvXC9hcGkuY2xhc3NkaWcuY29tXC9sb2dpbiIsImlhdCI6MTQ3OTM3NDI0MywiZXhwIjoxNDgyMDAyMjQzLCJuYmYiOjE0NzkzNzQyNDMsImp0aSI6ImEzNzA2OWQxMThjMmE0YTQxZGNiYTdjZDI0YThkYzRhIn0.JIC7JGQUZ3T8FlUw3GycW32bAMrMU6XQQcKaxYeW3yY\r\n--> <!--eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMyLCJpc3MiOiJodHRwOlwvXC9hcGkuY2xhc3NkaWcuY29tXC9sb2dpbiIsImlhdCI6MTQ3OTM4NDUxMiwiZXhwIjoxNDgyMDEyNTEyLCJuYmYiOjE0NzkzODQ1MTIsImp0aSI6IjlmMzZmZmJkOTExOGMzOTA2NTdmYWI1ZWE4MDU5MWUwIn0.wcrMKBy0c6z6m322s6vCz6aErqDX0tq95aNHnxxmS8Q-->'),a.put("components/authentication/change-password/change-password.html",'<div class="auth row password password-background"> <div class="change-wrapper centered"> <div ng-show="error" class="alert alert-danger">{{error}}</div> <div class="change-container"> <h2>Change password</h2> <h3>Please pick a new password to complete the reset process.</h3> <h3>You will use this new password to sign in to the site from now on.</h3> </div> <form class="change-form" name="form" ng-submit="changePassword()" role="form"> <div class="form-group input-form"> <img id="login-icon-password" src="../images/auth/icon-password_3x.png"> <input type="password" name="password" id="password" class="form-control" ng-model="data.password" placeholder="New password" autocomplete="off" ng-minlength="6" ng-maxlength="15" pw-check="password_confirmation" required> <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Password is required</span> <!--<span class="help-block" ng-show="(form.password.$error.pwmatch || form.password_confirmation.$error.pwmatch)--> <!--&& form.password.$dirty" >Password does not match.</span>--> <span class="help-block" ng-show="form.password.$dirty && form.password.$error.minlength">Password is too short.</span> <span class="help-block" ng-show="form.password.$dirty && form.password.$error.maxlength">Password is too long.</span> </div> <div class="form-group input-form"> <img id="login-icon-password" src="../images/auth/icon-password_3x.png"> <input type="password" name="password_confirmation" id="password_confirmation" class="form-control" ng-model="data.password_confirmation" placeholder="Confirm new password" autocomplete="off" pw-check="password" required> <span ng-show="form.password_confirmation.$dirty && form.password_confirmation.$error.required" class="help-block">Password confirmation is required</span> <span class="help-block" ng-show="(form.password.$error.pwmatch || form.password_confirmation.$error.pwmatch)\r\n         && form.password_confirmation.$dirty && !(form.password_confirmation.$dirty && form.password_confirmation.$error.required)">Password does not match.</span> <span class="help-block" ng-show="serverMessage.error">{{serverMessage.message}}</span> </div> <div class="form-actions"> <button type="submit" class="btn button-login">CHANGE PASSWORD</button> <!--<img ng-if="dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>--> </div> </form> </div> </div>'),a.put("components/authentication/forgot-password/forgot-password.html",'<div class="row auth auth-background forgot"> <div ng-if="successReset" class="centered"> <div class="reset-container"> <p class="p-element forgot-title"> Password reset link has been sent to your email. </p> </div> </div> <div ng-if="!successReset" class="reset-container centered"> <p class="p-element forgot-title"> Forgot your password? </p> <p class="p-element forgot-desc">Please enter the email address your account was registered with.</p> <form class="forgot-password-form" name="forgotPasswordForm" ng-submit="forgotPassword()" role="form" novalidate> <div class="reset-wrapper"> <input type="text" name="email" id="email" class="form-control reset-input" placeholder="E-mail" ng-model="data.email" ng-maxlength="40" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" autocomplete="off" required> <!--<div ng-messages="forgotPasswordForm.registrationData.email.$error">--> <!--<div ng-message="pattern" class="help-text">Please enter a valid email address!</div>--> <!--</div>--> <p class="validation-error" ng-show="forgotPasswordForm.email.$dirty && forgotPasswordForm.email.$invalid && !registerForm.email.$pristine && !(forgotPasswordForm.email.$dirty && forgotPasswordForm.email.$error.required)"> Enter a valid email.</p> <p class="validation-error" ng-show="forgotPasswordForm.email.$dirty && forgotPasswordForm.email.$error.maxlength">E-mail is too long.</p> <p class="validation-error" ng-show="forgotPasswordForm.email.$dirty && forgotPasswordForm.email.$error.required">Your E-mail is required.</p> <p class="validation-error" ng-show="serverMessage.error && !(forgotPasswordForm.email.$dirty && forgotPasswordForm.email.$invalid && !registerForm.email.$pristine && !(forgotPasswordForm.email.$dirty && forgotPasswordForm.email.$error.required))  && !(forgotPasswordForm.email.$dirty && forgotPasswordForm.email.$error.required)">{{serverMessage.message}}</p> </div> <div class="form-actions"> <button type="submit" class="btn button-reset"> <div id="login-loader" class="loader" style="display: none"></div> <span id="login-button" style="display: block">Reset Password</span> </button> </div> </form> </div> </div>'),a.put("components/authentication/login/login.html",'<div class="row auth auth-background"> <div class="auth-form"> <img src="images/logos/logo-login_3x.png"> <div ng-show="error" class="alert alert-danger">{{error}}</div> <form class="login-form" name="loginForm" role="form" novalidate> <div class="form-group input-form"> <img id="login-icon-username" src="images/auth/icon-email_3x.png"> <input type="text" name="username" id="username" class="form-control" ng-model="username" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" placeholder="Email" required> <div ng-messages="loginForm.username.$error"> <div ng-message="pattern" class="help-text">Please enter a valid email address!</div> </div> <!-- \'required|email|unique:users|max:40\',--> <!--<span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">Username is required</span>--> </div> <div class="form-group input-form password-margin-top"> <img id="login-icon-password" src="images/auth/icon-password_3x.png"> <input type="password" name="password" id="password" class="form-control" ng-model="password" placeholder="Password" required> </div> <div class="error-block" ng-model="loginError"> {{loginError}}</div> <div class="forgot-center"><a ng-href="#/auth/forgot"><span class="help-text">Forgot password?</span></a></div> <div class="form-actions"> <button type="submit" ng-disabled="form.$invalid" ng-click="login()" class="btn button-login"> <div id="login-loader" class="loader" style="display: none"></div> <span id="login-button" style="display: block">Login</span> </button> </div> <div class="block-sign-in"> <div class="sign-line"> <div class="group-lines"> <span id="left-line"></span><span class="login-choose">Or sign in with</span><span id="right-line"></span> </div> </div> <div class="form-actions"> <button ng-click="checkLoginState()" class="btn button-facebook" ng-style="fixedStyle">Facebook</button> <div class="error-block" ng-if="facebookNotLogged" style="margin: 0 0 25px 0">Please log into your facebook profile</div> <!--<img ng-if="dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>--> </div> </div> <div class="have-accout">Don\'t have an account? <a href="#/signup" ng-click="clear()"><span class="help-text">Sign up</span></a> </div> </form> </div> </div>'),a.put("components/authentication/registration/confirm-registration.html",'<div class="row registration auth-background"> <h2 ng-show="showSuccess"> Congratulations! You have been successfully registered! Try to log in with your credentials </h2> <h2> <a href="#/login"><span class="help-text">Login</span></a> </h2> <h2 ng-show="showError"> Sorry! The confirmation link has expired... </h2> </div>'),a.put("components/authentication/registration/registration.html",'<div class="row registration auth-background" ng-controller="RegistrationController"> <div ng-show="!registrationSuccess"> <div class="registration-form"> <form name="registerForm" ng-submit="createAccount(registrationData)" ng-init="initForm()"> <div class="row"> <div class="col-md-2 col-sm-2"></div> <div class="col-md-4 col-sm-4 registration-input-form"> <!-- Form Upload Photo --> <div class="upload-form"> <button id="btn-add-photo" type="image" name="file" accept="image/*" ng-model="registrationData.image" ngf-select ngf-max-size="5MB" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-resize="{width: 200, height: 200}" required> <img class="add-photo clip-circle" ng-hide="registrationData.image" src="images/auth/add-photo_3x.png"> <img class="thumb profile-file clip-circle" ng-show="uploadForm.file.$valid" ngf-thumbnail="registrationData.image"> </button> <p ng-show="registerForm.file.$error.maxSize " class="validation-error">File exceeds allowed size </p> <p ng-show="registerForm.file.$error.minWidth " class="validation-error">File invalid min width </p> <p ng-show="registerForm.file.$error.minHeight " class="validation-error">File invalid min height </p> </div> <!-- First Name --> <div class="form-group input-form"> <img id="registration-icon-fistname" src="images/auth/icon-fullname_3x.png"> <input type="text" name="firstname" id="firstname" class="form-control" ng-model="registrationData.first_name" ng-minlength="2" ng-maxlength="25" placeholder="First Name" required ng-pattern="/^[a-zA-Z]*$/"> <p class="validation-error" ng-show="registerForm.firstname.$dirty && registerForm.firstname.$error.minlength">First Name is too short.</p> <p class="validation-error" ng-show="registerForm.firstname.$dirty && registerForm.firstname.$error.maxlength">First Name is too long.</p> <p class="validation-error" ng-show="registerForm.firstname.$dirty && registerForm.firstname.$error.required">Your First Name is required.</p> <p class="validation-error" ng-show=" registerForm.firstname.$dirty && registerForm.firstname.$error.pattern ">Please, enter First Name without spaces.</p> </div> <!-- Last Name --> <div class="form-group input-form"> <img id="registration-icon-lastname" src="images/auth/icon-fullname_3x.png"> <input type="text" name="lastname" id="lastname" class="form-control" ng-model="registrationData.last_name" ng-minlength="2" ng-maxlength="25" placeholder="Last Name" required ng-pattern="/^[a-zA-Z]*$/"> <p class="validation-error" ng-show="registerForm.lastname.$dirty && registerForm.lastname.$error.minlength">Last Name is too short.</p> <p class="validation-error" ng-show="registerForm.lastname.$dirty && registerForm.lastname.$error.maxlength">Last Name is too long.</p> <p class="validation-error" ng-show="registerForm.lastname.$dirty && registerForm.lastname.$error.required">Your Last Name is required.</p> <p class="validation-error" ng-show=" registerForm.lastname.$dirty && registerForm.firstname.$error.pattern ">Please, enter Last Name without spaces.</p> </div> <!-- Username --> <div class="form-group input-form"> <img id="registration-icon-username" src="images/auth/icon-username_3x.png"> <input type="text" name="username" id="username" class="form-control" ng-model="registrationData.username" ng-minlength="4" ng-maxlength="20" placeholder="Username" required ng-pattern="/^[a-zA-Z0-9]*$/"> <div class="error-block" ng-model="data.errors.username"> {{data.errors.username}}</div> <p class="validation-error" ng-show="registerForm.username.$dirty && registerForm.username.$error.minlength">Username is too short.</p> <p class="validation-error" ng-show="registerForm.username.$dirty && registerForm.username.$error.maxlength">Username is too long.</p> <p class="validation-error" ng-show="registerForm.username.$dirty && registerForm.username.$error.required">Username is required.</p> <p class="validation-error" ng-show="serverErrorUsername && !registerForm.username.$error.email&& !registerForm.username.$error.required">{{serverErrorUsername}}</p> <p class="validation-error" ng-show=" registerForm.username.$dirty && registerForm.firstname.$error.pattern ">Please, enter Username without spaces..</p> </div> <!-- E-mail --> <div class="form-group input-form"> <img id="registration-icon-email" src="images/auth/icon-email_3x.png"> <input type="text" name="email" id="email" class="form-control" placeholder="E-mail" ng-model="registrationData.email" ng-maxlength="40" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" required> <div ng-messages="registrationForm.registrationData.email.$error"> <div ng-message="pattern" class="help-text">Please enter a valid email address!</div> </div> <p class="validation-error" ng-show="registerForm.email.$dirty && registerForm.email.$invalid && !registerForm.email.$pristine">Enter a valid email.</p> <p class="validation-error" ng-show="registerForm.email.$dirty && registerForm.email.$error.maxlength">E-mail is too long.</p> <p class="validation-error" ng-show="registerForm.email.$dirty && registerForm.email.$error.required">Your E-mail is required.</p> <p class="validation-error" ng-show="serverErrorEmail && !registerForm.email.$error.email && !registerForm.email.$error.required">{{serverErrorEmail}}</p> </div> <!-- Password --> <div class="form-group input-form" ng-if="!fbInfo"> <img id="registration-icon-password" src="images/auth/icon-password_3x.png"> <input type="password" name="password" id="password" class="form-control" ng-model="registrationData.password" ng-minlength="6" ng-maxlength="15" placeholder="Password" required> <p class="validation-error" ng-show="registerForm.password.$dirty && registerForm.password.$error.minlength">Password is too short.</p> <p class="validation-error" ng-show="registerForm.password.$dirty && registerForm.password.$error.maxlength">Password is too long.</p> <p class="validation-error" ng-show="registerForm.password.$dirty && registerForm.password.$error.required">Your password is required.</p> </div> <!-- Gender--> <div class="select-sex"> <form name="formGender"> <div class="sex"><input type="radio" name="gender" value="0" id="check1" ng-model="registrationData.gender" ng-required="!registrationData.gender" ng-true-value="0"><label for="check1">Male</label> </div> <div class="sex"><input type="radio" name="gender" value="1" id="check2" ng-model="registrationData.gender" ng-required="!registrationData.gender" ng-true-value="1"><label for="check2">Female</label> </div> <div class="sex"><input type="radio" name="gender" value="2" id="check3" ng-model="registrationData.gender" ng-required="!registrationData.gender" ng-true-value="2"><label for="check3">Other</label> </div> <p class="validation-error" ng-show="formGender.gender.$dirty && formGender.gender.$invalid">Your gender is required </p> </form> </div> </div> <div class="col-md-4 col-sm-4 registration-input-form" style="margin-top: -14px"> <!-- Role --> <form name="formRole"> <div class="images-choose"> <div class="group-images-choose"> <!-- Student --> <div class="image-student clip-romb choose-img-container"> <img class="clip-romb" ng-model="registrationData.role" ng-init="imageStudent = false" ng-hide="imageStudent" src="images/auth/student_3x.png"> </div> <div class="image-student clip-romb choose-img-container"> <img class="clip-romb" name="student" ng-model="registrationData.role" ng-value="student" ng-hide="!imageStudent" src="images/auth/student-active_3x.png"> </div> <div class="image-student clip-romb choose-img-container" id="click-img-container-student" ng-click="changeRole(\'student\')"> </div> <!-- Teacher --> <div class="image-teacher clip-romb choose-img-container"> <img class="clip-romb" ng-model="registrationData.role" ng-init="imageTeacher = false" ng-hide="imageTeacher" src="images/auth/teacher_3x.png"> </div> <div class="image-teacher clip-romb choose-img-container"> <img class="clip-romb" name="teacher" ng-model="registrationData.role" ng-value="teacher" ng-hide="!imageTeacher" src="images/auth/teacher-active_3x.png"> </div> <div class="image-teacher clip-romb choose-img-container" id="click-img-container-teacher" ng-click="changeRole(\'teacher\')"> </div> <!-- Parent --> <div class="image-parent clip-romb choose-img-container"> <img class="clip-romb" ng-model="registrationData.role" ng-init="imageParent = false" ng-hide="imageParent" src="images/auth/parent_3x.png"> </div> <div class="image-parent clip-romb choose-img-container"> <img class="clip-romb" ng-model="registrationData.role" ng-value="parent" name="parent" ng-hide="!imageParent" src="images/auth/parent-active_3x.png"> </div> <div class="image-parent clip-romb choose-img-container" id="click-img-container-parent" ng-click="changeRole(\'parent\')"> </div> <img id="oval-center" class="clip-circle" src="images/auth/oval-active_3x.png"> </div> </div> </form> <p class="validation-error" ng-show="!registrationData.role && registrationData.role.$dirty">Your role is required.</p> <h3 class="question">Where are you?</h3> <!-- School Name --> <div class="form-group input-form"> <img id="registration-icon-school" src="images/auth/icon-school-name_3x.png"> <input type="text" name="school" id="school" class="form-control" ng-model="registrationData.school_name" ng-minlength="2" ng-maxlength="50" placeholder="School Name" required> <p class="validation-error" ng-show="registerForm.school.$dirty && registerForm.school.$error.minlength">School Name is too short.</p> <p class="validation-error" ng-show="registerForm.school.$dirty && registerForm.school.$error.maxlength">School Name is too long.</p> <p class="validation-error" ng-show="registerForm.school.$dirty && registerForm.school.$error.required">Your School Name is required.</p> </div> <!-- City --> <div class="form-group input-form"> <img id="registration-icon-city" src="images/auth/icon-city_3x.png"> <input type="text" name="city" id="city" class="form-control" ng-model="registrationData.city" ng-minlength="2" ng-maxlength="50" placeholder="City" required> <p class="validation-error" ng-show="registerForm.city.$dirty && registerForm.city.$error.minlength">City is too short.</p> <p class="validation-error" ng-show="registerForm.city.$dirty && registerForm.city.$error.maxlength">City is too long.</p> <p class="validation-error" ng-show="registerForm.city.$dirty && registerForm.city.$error.required">Your City is required.</p> </div> <!-- Country --> <div class="form-group input-form"> <img id="registration-icon-country" src="images/auth/icon-country_3x.png"> <input type="text" name="country" id="country" class="form-control" ng-model="registrationData.country" ng-minlength="2" ng-maxlength="50" placeholder="Country" required> <p class="validation-error" ng-show="registerForm.country.$dirty && registerForm.country.$error.minlength">Country is too short.</p> <p class="validation-error" ng-show="registerForm.country.$dirty && registerForm.country.$error.maxlength">Country is too long.</p> <p class="validation-error" ng-show="registerForm.country.$dirty && registerForm.country.$error.required">Your Country is required.</p> </div> </div> <div class="col-md-2 col-sm-2"></div> </div> <!-- --> <div class="row form-footer"> <div class="col-md-2 col-sm-2"></div> <div class="col-md-8 col-sm-8 form-actions"> <div class="registration-form-footer">By joining you agree to our <a href="#"><span class="help-text">Terms of use</span></a> and <a href="#"><span class="help-text">Privacy policy</span></a> </div> <div style="text-align: center; width: 50%; margin-left: 15px"> <button type="submit" id="createAccount" class="btn button-create" ng-disabled="registerForm.$invalid || dataLoading" ng-click="createAccount(registrationData)"> <div id="registration-loader" class="loader" style="display: none"></div> <span id="registration-button" style="display: block">CREATE ACCOUNT</span> </button> </div> </div> </div> </form> </div> </div> <div ng-show="registrationSuccess"> <div class="container"> <h2> Confirmation message has been sent to <b>{{registrationData.email}}</b> </h2> </div> </div> </div>'),a.put("components/class/dashboard/announcments/announcementsModal/announcementsModal.html",'<form name="CreatePollModal" ng-submit="submitCreatePollModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="$ctrl.cancel()">+</button> </div> <div ng-show="createPollModal"> <div class="sub-header"> <h3>ANNOUNCEMENT DESCRIPTION</h3> </div> <div class="poll-modal-create-question"> <div class="question"> <input id="poll-question" ng-model="newAnnouncement.title" class="{{userData.color}}" type="text" placeholder="Announcement Title" style="font-size: 22px" name="PollTittle" ng-minlength="2" ng-maxlength="250" required> <p ng-show="CreatePollModal.PollTittle.$dirty && CreatePollModal.PollTittle.$error.minlength" class="help-block red-help-block">Announcement tittle is too short.</p> <p ng-show="CreatePollModal.PollTittle.$dirty && CreatePollModal.PollTittle.$error.maxlength" class="help-block red-help-block">Announcement tittle is too long.</p> <p ng-show="submitted && CreatePollModal.PollTittle.$error.required" class="help-block red-help-block">Announcement tittle is required.</p> </div> <div class="add-img-to-question colorcover"> </div> </div> <div class="sub-header"> <h3>DESCRIPTION</h3> </div> <div class="poll-modal-create-question poll-modal-details"> <div class="question"> <!-- ===== Date ===== --> <div class="poll-answears"> <div class="poll-answears details"> <div class="answear details-section anonymouslyVoteCtrl" style="border-bottom: 1px solid #d9d9d9"> <input class="{{userData.color}}" style="border: none; outline: none; font-size:16px" placeholder="Write details" ng-model="newAnnouncement.description"> </div> </div> </div> </div> <!-- ===== See result Id ===== --> </div> <div class="sub-header"> <h3>WHO CAN SEE</h3> </div> <div class="poll-modal-create-question poll-modal-details"> <div class="question"> <div class="poll-answears"> <div class="answear details-section votersCtrl"> <h4>Announcement for</h4> <span class="{{userData.color}}" ng-click="showParticipantsList()" ng-show="userData.role ===\'student\'" style="padding-top: 9px">Only Students</span> <span class="{{userData.color}}" ng-click="showParticipantsList()" ng-show="userData.role ===\'teacher\'" style="padding-top: 9px">Students and Parents</span> <!--<div><custom-selector class ={{userData.color}} options="votersOptions" ></custom-selector></div>--> </div> </div> <hr> </div> </div> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="$ctrl.cancel()">Cancel </button> <button class="btn-createClass add-poll {{userData.background}}" type="submit" style="width:auto" ng-click="submitted=true; $ctrl.ok() ">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </div> <div ng-show="addVoters"> <div class="sub-header"> <h3>Choose role</h3> </div> <choose-user-role></choose-user-role> <select-users></select-users> </div> <div class="modal-footer" ng-show="addVoters"> <!--<div class="modal-footer">--> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancelVoteParticipants()">Cancel </button> <button class="btn-createClass add-poll {{userData.background}}" ng-click="addVoteParticipants()">Add </button> <!--</div>--> </div> </form>'),
a.put("components/class/dashboard/announcments/announcments.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}" ng-controller="announcmentsController"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <!--<div>--> <div class="{{\'c-\'+role}}">Announcements</div> <!--</div>--> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0" ng-hide="hideCustomButton || role === \'parent\'"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center" style="position: relative"> <div class="polls-main-container" style="position: static; height: 74vh ; overflow: auto" id="announcementList"> <!----> <!----> <!----> <div class="no-polls" ng-show="pollsNotExist"> <div class="no-polls-img" style="margin: 0"> <img src="images/announcements.svg" style="float: left"> <div class="no-polls-title" style=""><span>You have no <br> announcements.</span></div> </div> <div class="polls-hint" ng-hide="hideCustomButton || role === \'parent\'"> <div class="polls-hint-text"><span>Tap here to create announcement</span></div> <img src="images/brush_arrow.png"> </div> </div> <div class="class-menu-item-add" ng-controller="announcmentsController as $ctrl" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button ng-click="$ctrl.openModal()" ng-hide="showButtonSelection"></custom-button> </div> <div class="exist-polls" infinite-scroll="announcementList.nextPage()" infinite-scroll-container="&quot;#announcementList&quot;" infinite-scroll-disabled="announcementList.busy" infinite-scroll-listen-for-event="list:filtered" infinite-scroll-distance="1" ng-show="pollsExist"> <div> <ul> <li ng-repeat="item in announcementList.items" class="poll-list" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(item.id) != -1}" multi-select multi-select-item="item" multi-select-selection="selection" ng-click="selectionWasChanged(); activateAnnouncement($index, item)" id="{{$index}}" style="border-bottom-right-radius: 31px"> <form> <div class="poll-header"> <div class="poll-name"> <h3><img src="images/announcement-icon.svg" class="announcement-icon">{{item.title}}</h3> <p>Date: {{formatDataCreate(item.creation_date.date)}}</p> <!--<div class = "poll-img" ng-show = "pollItem.poll.attachments[0]"><img ng-src = "{{pollItem.poll.attachments[0].link}}"></div>--> </div> <div class="poll-participant"> <h6> Seen by: </h6> <arrayof-members members-array="item.seen_by"></arrayof-members> </div> </div> <div class="poll-choices" style="border:none"> <p class="announcement-description">{{item.description}}</p> </div> <div class="announcement-page {{announcementPage}}"></div> <div class="announcement-page {{announcementPage}}"></div> <div style=""></div> </form> </li> <div style="clear: both"></div> </ul> </div> <!----> <!----> <!----> </div> <div id="announcement-loader" class="loader more-menu-loader"></div> </div> </div> </div> <div class="class-menu-item-block-right-container"> <div class="class-menu-item-block-right" ng-show="selection.selectedItems.length === 1"> <div class="class-menu-item-block-right-header"> <div class="active-poll-tittle"> {{activeAnnouncement.title}} </div> <div class="active-announcement-subtitle">{{activeAnnouncement.seem_by}}</div> </div> <div class="active-poll-voters-list"> <select-users ng-show="activeAnnouncement.title"></select-users> </div> <div class="student-info"></div> </div> </div> </div> </div> <!--\r\n<div class="classes-add-class" ng-controller="ModalDemoController as $ctrl" class="modal-demo">\r\n        <custom-button ng-click="$ctrl.openModal()"></custom-button>\r\n</div>-->'),a.put("components/class/dashboard/announcments/areUSureModal/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <span>Do you really want to {{$ctrl.items.actionTitle}}</span> <span ng-show="$ctrl.items.current.length === 1">{{$ctrl.items.current[0].name}} announcement?</span> <span ng-show="$ctrl.items.current.length !== 1">selected announcements?</span> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">{{$ctrl.items.actionTitle}}</button> </div> </div> </div>'),a.put("components/class/dashboard/assignment/areUSureModal/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <span>Do you really want to {{$ctrl.items.actionTitle}}</span> <span ng-show="$ctrl.items.current.length === 1">{{$ctrl.items.current[0].name}} assignment?</span> <span ng-show="$ctrl.items.current.length !== 1">selected assignment?</span> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">{{$ctrl.items.actionTitle}}</button> </div> </div> </div>'),a.put("components/class/dashboard/assignment/assignment.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}" ng-controller="assignmentController"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Assignments</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0" ng-hide="hideCustomButton || role === \'parent\'"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container" style="height:74vh"> <div class="class-menu-item-block-center" style="position:relative"> <div class="polls-main-container" style="position: static; padding-top: 0; overflow:auto; height: 74vh" id="assignmentList"> <!----> <!----> <!----> <div ng-show="examNotExist" style="margin-top: 10%" class="no-polls no-assignment"> <div class="no-assignment-img"> <img src="images//assignment/no-assignments.png"> </div> <div class="no-polls-title assignment-tittle-text"><span>There are no created assignments.</span></div> <div class="polls-hint" ng-show="role !== \'parent\' && !hideCustomButton"> <div class="hint-text polls-hint-text"><span>Tap here to create your first assignment</span></div> <img src="images/brush_arrow.png"> </div> </div> <div ng-show="examExist" infinite-scroll="assignment.nextPage()" infinite-scroll-container="&quot;#assignmentList&quot;" infinite-scroll-disabled="assignment.busy" infinite-scroll-listen-for-event="list:filtered" infinite-scroll-distance="1" class="no-polls" style="margin-top: 0"> <div ng-repeat="(id,assignment) in assignment.items  track by id" class="exam-li" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(assignment.id) != -1}" multi-select multi-select-item="assignment" multi-select-selection="selection" ng-click="selectionWasChanged(id)"> <div class="exam-header" style="background-color: {{assignment.color | colorParse}}"> <h3 class="assignment-header"> <span class="tittle-name tittle-name-width"> <a ng-show="assignment.attachments.length!==0" target="_self" href="{{assignment.attachments[0].link}}" download="assignment.attachments[0].filename"><img src="images/modal/icon-clip.png"> {{assignment.title}}</a> <span ng-show="assignment.attachments.length===0" class="tittle-name">{{assignment.title}}</span> <span ng-show="assignment.priority ===1" class="tittle-name">!</span> <span ng-show="assignment.priority ===2" class="tittle-name">!!</span> <span ng-show="assignment.priority ===3" class="tittle-name">!!!</span> </span> <!--<span ng-show="assignment.note!==\'no notes\'" class = "cursorPointer" tooltip-placement="bottom-right" uib-tooltip="{{assignment.note}}">Note--> <!--</span>--> <div class="assignmenttooltip cursorPointer" ng-show=" (assignment.note!==\'\' && assignment.note!==\'no notes\') && userData.role===\'teacher\'">Note <span class="tooltiptext">{{assignment.note}}</span> </div> <div ng-show="userData.role===\'student\' && assignment.participants.length>0 "> <student-check-assignment font-color="assignment.color" members-array="assignment.participants" file-array="assignment.participants" style="font-size: 12px"></student-check-assignment> </div> <div ng-show="userData.role===\'parent\'"> <child-check-assignment ng-if="user.classData" members-array="user.classData.members" file-array="assignment.participants" style="font-size: 12px"></child-check-assignment> </div> </h3> <div class="exam-information"> <div ng-class="{\'assignment-due-date-{{role}}\': assignment.participants.length>0}">Due date: {{ changeDateFormat(assignment.due_date ,assignment.due_time)}}</div> <div ng-show="assignment.hand_submission!==0 && userData.role===\'teacher\' " class="cursorPointer" ng-click="checkHandSubmission(assignment)">Check hand submitter</div> </div> </div> <div class="exam-definition" ng-show="userData.role===\'teacher\'"> <h3 class="submit-title">Student\'s submitted</h3> <div class="listOfSubmittedStudents"> <div class="submittedStudentItem" ng-repeat="student in assignment.participants" ng-show="student.submission===1" ng-click="markAssignment(student)" style="position:relative"> <img ng-src="{{student.user.image}}"> <div class="submit-check-mark" ng-show="student.files.length>0"><img src="images/usersList/checked-circle.svg"> </div> </div> </div> </div> <div class="exam-definition" ng-show="userData.role===\'teacher\'"> <h3 class="submit-title">Not submitted yet</h3> <div class="listOfSubmittedStudents"> <div class="submittedStudentItem" ng-repeat="student in assignment.participants" ng-show="student.submission===0"><img ng-src="{{student.user.image}}"></div> </div> </div> <div class="exam-definition" ng-show="userData.role!==\'teacher\'" style="border-bottom: 1px solid #f0f0f0"> <h3 class="student-submit-title-note" ng-show="assignment.note !==\'no notes\' && userData.role!==\'teacher\'">{{assignment.note}}</h3> <div ng-repeat="partic in assignment.participants"> <div ng-show="partic.id === userId"> <a ng-show="partic.files.length>0" target="_self" href="{{partic.files[partic.files.length-1].link}}" download="partic.files[partic.files.length-1].filename" class="students-files"><img src="images/modal/icon-clip.png"> {{partic.files[partic.files.length-1].filename}}</a></div> </div> </div> <div class="assignment-footer" ng-show="userData.role===\'student\'"> <button class="btn-cansel {{userData.color}}" type="button" id="{{assignment.id}}" ng-click="submitAssignment(undefined,assignment.id, $index, assignment)" style="background: white; text-transform: uppercase; border:none">{{getSubmitButtonValue(assignment)}} </button> </div> </div> <div style="clear: both"></div> </div> <div id="user-loader" class="loader more-menu-loader"></div> <div ng-show="!hideButton" class="class-menu-item-add" ng-controller="assignmentController as $ctrl" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button ng-click="$ctrl.openModal()"></custom-button> </div> <!----> <!----> <!----> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-show="false"> <div class="class-menu-item-block-right"> <div class="class-menu-item-block-right-header"> </div> <div class="student-info"></div> </div> </div> </div> </div>'),a.put("components/class/dashboard/assignment/assignmentDirectives/assignmentStudentsList/assignmentStudentsList.html",'<h3 class="submit-title">{{submitTitle}}</h3> <div class="listOfSubmittedStudents"> <div class="submittedStudentItem" ng-repeat="student in studentArray" ng-show="student.submission===1"><img ng-src="{{student.user.image}}"></div> </div>'),a.put("components/class/dashboard/assignment/assignmentDirectives/childCheckAssignment/childCheckAssignment.html",'<div style="display: flex;justify-content: center"> <div ng-if="$index<3" ng-repeat="member in membersArray" class="vote-member" ng-show="checkChildSubmitAssignment(member)"> <img ng-src="{{member.image || member.user.image}}"> </div> <div ng-repeat="member in membersArray" ng-show="!checkChildSubmitAssignment(member)  && role===\'parent\'" class="vote-member number-participants" style="text-align: center;border: 1.5px solid white; padding-top: 2px">!</div> </div>'),a.put("components/class/dashboard/assignment/assignmentDirectives/studentCheckAssignment/studentCheckAssignment.html",'<div style="display: flex; width: 150px;justify-content: space-between"> <div style="display: flex; flex-direction: column"> <p class="submit-student-assignment-subtitle">Submitted</p> <div style="display: flex;justify-content: center"> <div ng-repeat="member in membersArray" class="vote-member" ng-show="member.submission==1 && member.id===currentId"> <img ng-src="{{member.image || member.user.image}}"> </div> <div class="vote-member number-participants" style="color: {{fontColor  | colorParse}}; text-align: center;background: white; padding-top: 2px" ng-show="checkSubmitAssignment()>0">+{{checkSubmitAssignment()}}</div> </div> </div> <div style="display: flex; flex-direction: column"> <p class="submit-student-assignment-subtitle">Not Submitted</p> <div style="display: flex;justify-content: center"> <div ng-repeat="member in membersArray" class="vote-member" ng-show="member.submission===0 && member.id===currentId"> <img ng-src="{{member.image || member.user.image}}"> </div> <div class="vote-member number-participants" style="text-align: center;background:  white; padding-top: 2px; color: {{fontColor  | colorParse}}" ng-show="checkNotSubmitAssignment()>0">+{{checkNotSubmitAssignment()}}</div> </div> </div> </div>'),a.put("components/class/dashboard/assignment/assignmentModal/assignmentModal.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <!-- =============== Class Details =======================--> <div class="sub-header" style="display:flex"> <h3>Assignment Description</h3> <h3 style="margin-left:119px" ng-show="userData.role===\'teacher\'">Hand Submission</h3> </div> <div class="colorcover"> <div class="color"> <div class="choose-semester exams-help-block"> <!-- =====  Assignment Title ===== --> <div class="dig-prop"> <input id="examName" ng-model="assignment.title" name="ExamName" ng-minlength="2" ng-maxlength="50" placeholder="Assignment Title" style="font-size:22px; color: #b2b2b2" required> </div> <hr> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.minlength" class="help-block">Assignment name is too short.</p> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.maxlength" class="help-block">Assignment name is too long.</p> <p ng-show="submitted && CreateExamModal.ExamName.$error.required" class="help-block">Assignment name is required.</p> <!-- =====  Due Date ===== --> <div class="dig-prop"> <label class="dig-label"> Due Date</label> <!-- TODO must be format --> <input ng-model="monthDate" class="{{userData.color}} datetimepickerDate text-right cursorPointer"> </div> <hr> <!-- =====  Time ===== --> <div class="dig-prop"> <label class="dig-label">Time</label> <!-- TODO must be format --> <input ng-model="assignment.due_time" class="{{userData.color}} datetimepickerTimeFrom text-right cursorPointer"> </div> <hr> <!-- ===== Set Reminder ===== --> <div class="dig-prop"> <div class="dig-img"> <img src="images/modal/icon-bell_3x.png"> </div> <label class="dig-label">Set reminder</label> <custom-selector class="{{role + \'-color\'}}" options="options" selected-option="assignment.reminder" bottom="0"> </custom-selector> </div> <hr> </div> </div> <div class="color" ng-show="userData.role===\'teacher\'"> <h4 id="class-code-header">Enabled feature means assignment is handed to the teacher, NOT to be uploaded. Hint, check all student that handed the assignment.</h4> <div class="choose-semester"> <div class="semester-prop"> <h4>Hand submission</h4> <div class="onoffswitch"> <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch"> <label class="onoffswitch-label" for="myonoffswitch" ng-click="functionCheckHandSubmission()"> <span class="onoffswitch-inner {{userData.background}}"></span> <span class="onoffswitch-switch"></span> </label> </div> </div> </div> </div> </div> <div class="sub-header" style="display:flex"> <h3>PRIORITY</h3> </div> <div class="colorcover priority" style="margin-bottom: 20px"> <div class="color" style="display: flex"> <h4>Set priority</h4> <div class="priority-list"> <div class="priority-item priority-item-active {{userData.background}}" id="0" ng-click="functionCheckPriority(0)">NONE</div> <div class="priority-item" id="1" ng-click="functionCheckPriority(1)">!</div> <div class="priority-item" id="2" ng-click="functionCheckPriority(2)">!!</div> <div class="priority-item" id="3" ng-click="functionCheckPriority(3)">!!!</div> </div> </div> </div> <!-- =============== Color=======================--> <div class="sub-header" style="display:flex"> <h3>Color</h3> <h3 style="margin-left:280px">Attachment</h3> </div> <div class="colorcover"> <!-- ===== Class Color ===== --> <div class="color"> <h4>Choose color</h4> <color-picker selected-color="assignment.color" function-select-color="functionSelectColor"></color-picker> </div> <div class="addImg color cursorPointer" id="addImg" style="margin-top:0; margin-left: 24px"> <h4><img src="images/modal/icon-clip.png" style="margin-right:10px; margin-bottom: 4px">Add file</h4> <div class="uploadImg {{userData.color}}"> <div style="margin: 0; !important" class="{{userData.border}}" ngf-select ng-model="UploadFile"> <img ng-src="{{userData.iconPlus}}" style="margin:9px"> <p id="uploadFile"> Upload file</p> </div> <div class="UploadFiles"> <ul id="ListOfUploadFiles"> <li id="{{item.id}}" ng-repeat="item in ArrayOfUploadFiles "> <button ng-click="DeleteFileFromSyllabus($event)">x</button> {{item.name}} </li> <li class="progress" ng-show="UploadFile.progress >= 0 && UploadFile.progress<100" style="margin-top:{{UploadFileHeight+\'px\'}}; position:absolute; width:180px"> <progress-bar progress-number="progressNumber" style="margin:0; padding:0"></progress-bar> </li> </ul> </div> </div> </div> </div> <!-- =============== Note =======================--> <div class="sub-header" style="display:flex"> <h3>Note</h3> </div> <div class="exam-note"> <input id="" ng-model="assignment.note" class="exam-note-input" type="text" name="Exam_note" placeholder="Write your note"> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <div class="exam-server-error help-block" ng-show="AssignmentServerError" style="position: absolute;left: 370px;top: 18px; color:red">Something went wrong</div> <button class="btn-createClass {{userData.background}}" style="width: inherit" type="submit" ng-click="submitted=true; ok()">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </form>'),a.put("components/class/dashboard/assignment/assignmentModal/assignmentNoteModal.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <!-- =============== Class Details =======================--> <div class="colorcover"> <p>assignmentNote: {{assignmentNote}}</p> </div> </form>'),a.put("components/class/dashboard/assignment/assignmentModal/handSubmissionModal/handSubmissionModal.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Check hand submission</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <div> <select-users></select-users> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <div class="exam-server-error help-block" ng-show="AssignmentServerError" style="position: absolute;left: 415px;top: 18px; color:red">Something went wrong</div> <button class="btn-createClass {{userData.background}}" style="width: inherit" type="submit" ng-disabled="CreateExamModal.$invalid" ng-click="ok()">Add Students </button> </div> </form>'),a.put("components/class/dashboard/assignment/assignmentModal/markAssignment/markAssignment.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Assignment received</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <!-- =============== Attachment=======================--> <div class="sub-header" style="display:flex"> <h3>Attachment</h3> </div> <div class="colorcover"> <!-- ===== Class Color ===== --> <div class="addImg color cursorPointer" id="addImg" style="margin-top:24px; margin-left: 24px"> <!--<h4><img src="images/modal/icon-clip.png" style="margin-right:10px; margin-bottom: 4px">Download file</h4>--> <a class="{{userData.color}}" ng-show="currentStudent.files.length!==0" target="_self" href="{{currentStudent.files[currentStudent.files.length-1].link}}" download="currentStudent.files[currentStudent.files.length-1].filename"><img src="images/modal/icon-clip.png"> {{currentStudent.files[currentStudent.files.length-1].filename}}</a> </div> </div> <!-- =============== Note =======================--> <div class="sub-header" style="display:flex"> <h3>Note</h3> </div> <div class="exam-note" style="padding-bottom: 100px"> <p id="" class="exam-note-input {{userData.color}}">{{currentStudent.user_note}}</p> </div> <!--<div class="modal-footer" style = "position:relative">--> <!--<button class="btn-cansel {{userData.color}}"--> <!--type="button"--> <!--ng-click="cancel()">Cancel--> <!--</button>--> <!--<div class = \'exam-server-error help-block\' ng-show = "AssignmentServerError" style = "position: absolute;left: 415px;top: 18px; color:red">Something went wrong</div>--> <!--<button class="btn-createClass {{userData.background}}"--> <!--style = "width: inherit;"--> <!--type="submit"--> <!--ng-disabled="CreateExamModal.$invalid"--> <!--ng-click="ok()">Submit assignment--> <!--</button>--> <!--</div>--> </form>'),a.put("components/class/dashboard/assignment/assignmentModal/submitAssignmentModal.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <!-- =============== Attachment=======================--> <div class="sub-header" style="display:flex"> <h3>Attachment</h3> </div> <div class="colorcover"> <!-- ===== Class Color ===== --> <div class="addImg color cursorPointer" id="addImg" style="margin-top:0; margin-left: 24px"> <h4><img src="images/modal/icon-clip.png" style="margin-right:10px; margin-bottom: 4px">Add file</h4> <div class="uploadImg {{userData.color}}"> <div style="margin: 0; !important" class="{{userData.border}}" ngf-select ng-model="UploadFile"> <img ng-src="{{userData.iconPlus}}" style="margin:9px"> <p id="uploadFile"> Upload file</p> </div> <div class="UploadFiles"> <ul id="ListOfUploadFiles"> <li id="{{item.id}}" ng-repeat="item in ArrayOfUploadFiles "> <button ng-click="DeleteFileFromSyllabus($event)">x</button> {{item.name}} </li> <li class="progress" ng-show="UploadFile.progress >= 0 && UploadFile.progress<100" style="margin-top:{{UploadFileHeight+\'px\'}}; position:absolute; width:180px"> <progress-bar progress-number="progressNumber" style="margin:0; padding:0"></progress-bar> </li> </ul> </div> </div> </div> </div> <!-- =============== Note =======================--> <div class="sub-header" style="display:flex"> <h3>Note</h3> </div> <div class="exam-note" style="padding-bottom: 100px"> <input id="" ng-model="assignmentSubmit.note" class="exam-note-input {{userData.color}}" type="text" name="Exam_note" placeholder="Write your note here"> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <div class="exam-server-error help-block" ng-show="AssignmentServerError" style="position: absolute;left: 360px;top: 18px; color:red">Please attach assignment file</div> <button class="btn-createClass {{userData.background}}" style="width: inherit" type="submit" ng-disabled="CreateExamModal.$invalid" ng-click="ok()">Submit assignment </button> </div> </form>'),a.put("components/class/dashboard/attendance/attendance.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Attendance</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div style="display: flex; background-color: white; padding:0px 20px; box-shadow: 3px 4px 10px -4px rgba(0, 0, 0, 0.4)" ng-show="role == \'parent\'"> <div ng-repeat="childrenName in arrayOfChildrenId" id="{{childrenName}}" class="children" ng-click="changeChildren(childrenName)" style="font-size: 14px;\r\n         font-weight: 500;\r\n         font-style: normal;\r\n         font-stretch: normal;\r\n         letter-spacing: 0.5px;\r\n         text-align: center;\r\n         padding: 15px 10px;\r\n         color: #cf515d">{{childrenName}}</div> </div> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center-header" ng-show="$root.role ==\'teacher\'"> <div class="class-menu-item-date"> <div class="dropdown" id="dropdown-controller"> <a class="dropdown-toggle" id="dLabel" role="button" data-toggle="dropdown" data-target="" href=""> {{ datatime | date:\'dd MMMM yyyy\' }} <i class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></i> </a> <ul class="date-dropmenu dropdown-menu" role="menu"> <datetimepicker data-ng-model="datatime" data-datetimepicker-config="{ dropdownSelector: \'.dropdown-toggle\' ,startView:\'day\', minView:\'day\'}"> </datetimepicker> </ul> </div> </div> </div> <div class="class-menu-item-block-center" ng-style="{height : role === \'parent\' ? \'71vh\' : \'74vh\'}" ng-class="$root.role ==\'teacher\' ? \'has-header\' : \'\'"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist"> <!--{{$root.role}}--> <div class="atendance-picker" ng-show="$root.role ==\'teacher\'"> <div class="class-menu-item"> <div class="class-menu-item-holder"> <div pick-students></div> <div class="control-button" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button ng-hide="dateIsAhead"></custom-button> </div> </div> </div> </div> <div ng-show="user.data.role == \'student\' || user.data.role ==\'parent\'" class="calendar"> <!--<div class="test"></div>--> <div class="events-calendar"> <div id="calendar" class="arrow-color-{{role}}" ui-calendar="uiConfig.calendar" ng-model="eventSources" calendar="cdCalendar" data-calendar="myCalendar"></div> </div> </div> </div> </div> </div> <!----> <!----> <!----> <div class="class-menu-item-block-right-container" ng-show="pickedStudents.length == 0 && role == \'teacher\' "> <div class="class-menu-item-block-right"> <div class="class-menu-item-block-right-header c-{{role}}"> <div>CLASS ATTENDANCE TODAY</div> </div> <div class="attendance-general-block"> <div class="attendance-general-block-chart"> <div class="attendance-pie" ng-show="listAttendance[0]>0 || listAttendance[1]>0 || listAttendance[2]>0"> <div class="diagram-holder"> <div class="first-layer"></div> <div class="second-layer"></div> <div class="third-layer"></div> <div class="fourth-layer"></div> <canvas class="chart chart-pie" chart-data="listAttendance" chart-labels="configChart.attendanceLabels" chart-options="configChart.options" chart-colors="configChart.attendanceBackgroundColor"> </canvas> </div> <div class="student-attendance-items"> <div class="student-attendance-item" ng-show="listAttendance[0]>0"> <span class="attendance-color attendance-present">{{listAttendance[0]}}</span> <span class="attendance-text"> Present</span> </div> <div class="student-attendance-item" ng-show="listAttendance[1]>0"> <span class="attendance-color attendance-late">{{listAttendance[1]}}</span> <span class="attendance-text"> Late</span> </div> <div class="student-attendance-item" ng-show="listAttendance[2]"> <span class="attendance-color attendance-absent">{{listAttendance[2]}}</span> <span class="attendance-text"> Absent</span> </div> </div> </div> <div style="display: flex; flex-direction: column" class="attendance-pie data-absent" ng-show="listAttendance[0]==0 && listAttendance[1]==0 && listAttendance[2]==0"> <div>There is no attendance information by this date.</div> <img style="max-width: 260px; width: 45%; height: auto; opacity: 0.5; text-align: center; margin: 50px auto 0 auto" src="images/no-attendance-img.png"> </div> <div class="small-attendance-list" ng-show="listAttendance[0]>0"> <div class="small-attendance-list-header"> <div class="emblem attendance-present-bg"></div> <div class="text">Present ({{listAttendance[0]}} Students)</div> </div> <div class="actual-list"> <div class="student" ng-repeat="student in presentStudents"> <div class="image" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}"> </div> </div> </div> </div> <div class="small-attendance-list" ng-show="listAttendance[1]>0"> <div class="small-attendance-list-header"> <div class="emblem attendance-late-bg"></div> <div class="text">Late ({{lateStudents.length}} Students)</div> </div> <div class="actual-list"> <div class="student" ng-repeat="student in lateStudents"> <div class="image" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}"> </div> </div> </div> </div> <div class="small-attendance-list" ng-show="listAttendance[2]>0"> <div class="small-attendance-list-header"> <div class="emblem attendance-absent-bg"></div> <div class="text">Absent ({{absentStudents.length}} Students)</div> </div> <div class="actual-list"> <div class="student" ng-repeat="student in absentStudents"> <div class="image" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}"> </div> </div> </div> </div> </div> </div> </div> </div> <!----> <!----> <!----> <!-- =====  Attendance of student when Student or Parents  ===== --> <div class="class-menu-item-block-right-container" ng-show="role == \'student\' || role == \'parent\'"> <div class="class-menu-item-block-right student-teacher" ng-style="{height : role === \'parent\' ? \'71vh\' : \'74vh\'}"> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'teacher\'"> STUDENT INFO by {{slectedMonth}} </div> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'parent\'"> STUDENT INFO </div> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'student\'"> YOUR ATTENDANCE </div> <!--<div ng-repeat="pickedStudent in pickedStudents">--> <div class="attendance-student-info" ng-if="!currentStudent.listAttendance"> <div class="loader loader-fixed"></div> </div> <div class="attendance-student-info" ng-show="currentStudent.listAttendance"> <div class="user-block"> <div class="user-data"> <div class="student-short-info"> <span class="student-short-info-image"> <img src="{{currentStudent.photo}}"> <span class="user-img-right-block" ng-style="{\'background-image\':\'url({{studentInfo.photo || studentInfo.image}})\'}"></span> </span> <span class="student-short-info-username">{{currentStudent.first_name}} {{currentStudent.last_name}}</span> </div> <!--<div class="attendance-short-info">--> <!--<span class="attendance-short-info-image"><img src="{{currentStudent.photo }}"></span>--> <!--</div>--> <!--<div class="attendance-user-username">--> <!--<span class="attendance-short-info-username">{{currentStudent.first_name}} {{currentStudent.last_name}}</span>--> <!--</div>--> </div> <div class="user-diagram no-attendance-information" ng-show="!attendanceData.length"> There is no attendance information by this month. </div> <div class="user-diagram" ng-show="attendanceData.length"> <div class="attendance-pie"> <div class="first-layer"></div> <div class="second-layer"></div> <div class="third-layer"></div> <div class="fourth-layer"></div> <canvas id="studentAttendancePie" class="chart chart-pie" chart-data="currentStudent.listAttendance" chart-hover="none" chart-legend="false" chart-labels="configChart.attendanceLabels" chart-options="configChart.options" chart-colors="configChart.attendanceBackgroundColor"> </canvas> </div> <div class="attendance-chart"> <div class="student-attendance-items"> <div class="student-attendance-item" ng-show="currentStudent.listAttendance[0]>0"> <span class="attendance-color attendance-present">{{currentStudent.listAttendance[0]}}</span> <span class="attendance-text"> Present</span> </div> <div class="student-attendance-item" ng-show="currentStudent.listAttendance[1]>0"> <span class="attendance-color attendance-late">{{currentStudent.listAttendance[1]}}</span> <span class="attendance-text"> Late</span> </div> <div class="student-attendance-item" ng-show="currentStudent.listAttendance[2]>0"> <span class="attendance-color attendance-absent">{{currentStudent.listAttendance[2]}}</span> <span class="attendance-text"> Absent</span> </div> </div> </div> </div> </div> </div> </div> </div> <!-- =====  Attendance of student when Teacher ===== --> <div class="class-menu-item-block-right-container" ng-show="role == \'teacher\' && pickedStudents.length > 0"> <div class="class-menu-item-block-right overflow-fixed"> <div class="class-menu-item-block-right-header c-{{role}}"> STUDENT INFO BY {{slectedMonth}} </div> <div class="attendance-student-info-list-holder"> <div ng-repeat="studentInfo in pickedStudents"> <div class="attendance-student-info" ng-if="!studentInfo.listAttendance"> <div class="loader loader-fixed"></div> </div> <div class="attendance-student-info" ng-show="studentInfo.listAttendance"> <div class="attendance-short-info"> <div class="user-img-right-block" ng-style="{\'background-image\':\'url({{studentInfo.photo || studentInfo.image}})\'}"></div> </div> <div class="attendance-user-username"> <span class="attendance-short-info-username">{{studentInfo.first_name}} {{studentInfo.last_name}}</span> </div> <div class="attendance-pie"> <div class="first-layer"></div> <div class="second-layer"></div> <div class="third-layer"></div> <div class="fourth-layer"></div> <canvas id="attendancePie" class="chart chart-pie" chart-data="studentInfo.listAttendance" chart-labels="configChart.attendanceLabels" chart-options="configChart.options" chart-colors="configChart.attendanceBackgroundColor"> </canvas> </div> <div class="student-attendance-items"> <div class="student-attendance-item" ng-class="{\'number-position-fixed\' : studentInfo.listAttendance[0]>9}"> <span class="attendance-color attendance-present">{{studentInfo.listAttendance[0]}}</span> <span class="attendance-text"> Present</span> </div> <div class="student-attendance-item" ng-class="{\'number-position-fixed\' : studentInfo.listAttendance[1]>9}"> <span class="attendance-color attendance-late">{{studentInfo.listAttendance[1]}}</span> <span class="attendance-text"> Late</span> </div> <div class="student-attendance-item" ng-class="{\'number-position-fixed\' : studentInfo.listAttendance[2]>9}"> <span class="attendance-color attendance-absent">{{studentInfo.listAttendance[2]}}</span> <span class="attendance-text"> Absent</span> </div> </div> </div> </div> </div> </div> </div> </div> </div>'),
a.put("components/class/dashboard/behaviour/addBonusSusses/addBonusSusses.html",'<div class="joinClass"> <form name="CreateClassModal" novalidate> <div class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text">{{information}}</div> </div> </form> </div>'),a.put("components/class/dashboard/behaviour/behaviour.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}" ng-init="init()"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Behavior</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div style="display: flex; background-color: white; padding:0px 20px; box-shadow: 3px 4px 10px -4px rgba(0, 0, 0, 0.4)" ng-show="role == \'parent\'"> <div ng-repeat="childrenName in arrayOfChildrenId" id="{{childrenName}}" class="children" ng-click="changeChildren(childrenName)" style="font-size: 14px;\r\n         font-weight: 500;\r\n         font-style: normal;\r\n         font-stretch: normal;\r\n         letter-spacing: 0.5px;\r\n         text-align: center;\r\n         padding: 15px 10px;\r\n         color: #cf515d">{{childrenName}}</div> </div> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center-header" ng-show="role ==\'teacher\'"> <!--Calendare if  teacher--> <div class="class-menu-item-date"> <div class="dropdown" id="dropdown-controller"> <a class="dropdown-toggle dateLabel" id="dLabel" role="button" data-toggle="dropdown" data-target="" href="">{{ datatime | date:\'dd MMMM yyyy\' }} <i class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></i></a> <ul class="date-dropmenu dropdown-menu" role="menu"> <datetimepicker id="datapickerId" data-ng-model="datatime" data-datetimepicker-config="{ dropdownSelector: \'.dropdown-toggle\' ,startView:\'day\', minView:\'day\'}"> </datetimepicker> </ul> </div> </div> </div> <div class="class-menu-item-block-center" ng-style="{height : role === \'parent\' ? \'71vh\' : \'74vh\'}" ng-class="$root.role ==\'teacher\' ? \'has-header\' : \'\'"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist"> <div class="class-menu-item"> <div ng-show="role === \'teacher\' " class="test"> <div class="class-menu-item-holder"> <div pick-students></div> </div> <div class="class-menu-item-add" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button ng-hide="dateIsAhead"></custom-button> </div> </div> </div> <div ng-show="user.data.role == \'student\' || user.data.role ==\'parent\'" class="calendar"> <div class="events-calendar"> <div id="calendar" class="arrow-color-{{role}}" ui-calendar="uiConfig.calendar" ng-model="eventSources" calendar="cdCalendar" data-calendar="myCalendar"></div> </div> </div> </div> </div> </div> <!-- ====== Right bloct. General info. Behiviour ====== --> <div class="class-menu-item-block-right-container" ng-show="pickedStudents.length == 0 && role == \'teacher\' "> <div class="class-menu-item-block-right overflow-fixed"> <div class="class-menu-item-block-right-header c-{{role}}"> CLASS BEHAVIOR TODAY </div> <div class="attendance-student-info-list-holder"> <div class="behavior-general-block" ng-hide="_.isEmpty(generalInfo.positive);"> <div class="behavior-general-block-title">POSITIVE</div> <div ng-repeat="(key, value) in generalInfo.positive"> <div class="behavior-general-block-detail"> <div class="behavior-general-block-detail-header"> <span class="behavior-icon"> <img src="{{value.image}}" style="width: 15px; height: 15px"> </span> {{key}} <span ng-show="value.users.length > 1">({{value.users.length}} students)</span> <span ng-show="value.users.length == 1">({{value.users.length}} student)</span> </div> <div class="behavior-general-block-detail-content"> <div ng-repeat="user in value.users"> <div class="behavior-general-block-detail-photo"> <div class="user-img-right-block-general-info" ng-style="{\'background-image\':\'url({{user.photo || user.image}})\'}"></div> </div> </div> </div> </div> </div> </div> <div class="behavior-general-block" ng-hide="_.isEmpty(generalInfo.negative);"> <div class="behavior-general-block-title">NEED TO WORK</div> <div ng-repeat="(key, value) in generalInfo.negative"> <div class="behavior-general-block-detail"> <div class="behavior-general-block-detail-header"> <span class="behavior-icon"> <img src="{{value.image}}" style="width: 15px; height: 15px"> </span> {{key}} <span ng-show="value.users.length > 1">({{value.users.length}} students)</span> <span ng-show="value.users.length == 1">({{value.users.length}} student)</span> </div> <div class="behavior-general-block-detail-content"> <div ng-repeat="user in value.users"> <div class="behavior-general-block-detail-photo"> <div class="user-img-right-block-general-info" ng-style="{\'background-image\':\'url({{user.photo || user.image}})\'}"></div> </div> </div> </div> </div> </div> </div> <div class="behavior-general-block" ng-show="_.isEmpty(generalInfo.negative) && _.isEmpty(generalInfo.positive)"> <div class="data-absent" style="display: flex; flex-direction: column"> <div>There is no behavior information by this date.</div> <img style="max-width: 260px; width: 45%; height: auto; opacity: 0.5; text-align: center; margin: 50px auto 0 auto" src="images/no-behaviors.png"> </div> </div> </div> </div> </div> <!-- ====== Right bloct. Student info. Behiviour ===== --> <div class="class-menu-item-block-right-container" ng-show="pickedStudents.length > 0 && role == \'teacher\'"> <div class="class-menu-item-block-right overflow-fixed" ng-style="{height : role === \'parent\' ? \'71vh\' : \'74vh\'}"> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'teacher\'"> STUDENT INFO by {{slectedMonth}} </div> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'parent\'"> STUDENT INFO </div> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'student\'"> YOUR BEHAVIOR </div> <div class="attendance-student-info-list-holder"> <!--<div ng-repeat="pickedStudent in pickedStudents">--> <div class="behaviour-student-info" ng-repeat="studentInfo in studentsInfoFiltered"> <div class="student-short-info student-short-info-flex"> <div class="user-img-right-block" ng-style="{\'background-image\':\'url({{studentInfo.photo || studentInfo.image}})\'}"></div> <!--<span class="student-short-info-image"><img src="{{studentInfo.photo}}"></span>--> <span class="student-short-info-username" style="font-size: 1.3vw">{{studentInfo.first_name}} {{studentInfo.last_name}}</span> </div> <div class="students-positive-and-negative"> <div class="student-list-behiviour" ng-repeat="(key, behaviours) in studentInfo.behavior" ng-class="{positive: key === \'1\'}"> <!-- ===== Positive Behavior ===== --> <div class="student-positive-behiviour" ng-show="key === \'1\'"> <div class="behaviour-pie"> <div class="first-layer"></div> <canvas id="positivePie" class="chart chart-pie" chart-data="behaviours.positive" chart-labels="configChart.labels" chart-options="configChart.options" chart-colors="configChart.positiveBackgroundColor"> </canvas> </div> <div class="student-behiviour-items" ng-repeat="(key, val) in behaviours"> <div class="student-behiviour-item" ng-hide="key === \'positive\' || key === \'negative\'"> <span class="behavior-rectangle" style="background-color: {{val[\'color\']}}"></span> {{val[\'count\']}} {{key}} </div> </div> </div> <!-- ===== End. Positive Behavior ===== --> <!-- ===== Negative Behavior ===== --> <div class="student-negative-behiviour" ng-show="key === \'2\'"> <div class="behaviour-pie"> <div class="first-layer"></div> <canvas id="negativePie" class="chart chart-pie" chart-data="behaviours.negative" chart-labels="configChart.negativeLabels" chart-options="configChart.options" chart-colors="configChart.negativeBackgroundColor"> </canvas> </div> <div class="student-behiviour-items" ng-repeat="(key, val) in behaviours"> <div class="student-behiviour-item" ng-hide="key == \'negative\' || key === \'positive\'"> <span class="behavior-rectangle" style="background-color: {{val[\'color\']}}"></span> {{val[\'count\']}} {{key}} </div> </div> </div> <!-- ===== End. Negative Behavior ===== --> </div> </div> </div> <!--</div>--> </div> </div> </div> <!--////// for student or parent ///////--> <div class="class-menu-item-block-right-container" ng-show="role == \'student\' || role == \'parent\'"> <div class="class-menu-item-block-right overflow-fixed" ng-style="{height : role === \'parent\' ? \'71vh\' : \'74vh\'}"> <!--TODO FIX--> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'teacher\'"> STUDENT INFO by {{slectedMonth}} </div> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'parent\'"> STUDENT INFO </div> <div class="class-menu-item-block-right-header c-{{role}}" ng-show="role === \'student\'"> YOUR BEHAVIOR </div> <div class="attendance-student-info-list-holder"> <!--<div ng-repeat="pickedStudent in pickedStudents">--> <div class="behaviour-student-info" ng-show="!currentStudent.behaviour"> <div class="loader loader-fixed"></div> </div> <div class="behaviour-student-info" ng-show="currentStudent.behaviour"> <div class="student-short-info"> <span class="student-short-info-image"><img src="{{currentStudent.photo}}"></span> <span class="student-short-info-username">{{currentStudent.first_name}} {{currentStudent.last_name}}</span> </div> <div class="students-positive-and-negative no-behaviour-information" ng-show="!behaviourData.length"> There is no behaviour information by this month. </div> <div class="students-positive-and-negative" ng-show="behaviourData.length"> <div class="student-list-behiviour" ng-repeat="(key, behaviours) in currentStudent.behaviour" ng-class="{positive: key === \'1\'}"> <!-- ===== Positive Behavior ===== --> <div class="student-positive-behiviour" ng-show="key === \'1\'"> <div class="behaviour-pie"> <div class="first-layer"></div> <canvas id="positivePiePersonal" class="chart chart-pie" chart-data="behaviours.positive" chart-labels="configChart.labels" chart-options="configChart.options" chart-colors="configChart.positiveBackgroundColor"> </canvas> </div> <div class="student-behiviour-items" ng-repeat="(key, val) in behaviours"> <div class="student-behiviour-item" ng-hide="key === \'positive\' || key === \'negative\'"> <span class="behavior-rectangle" style="background-color: {{val[\'color\']}}"></span> {{val[\'count\']}} {{key}} </div> </div> </div> <!-- ===== End. Positive Behavior ===== --> <!-- ===== Negative Behavior ===== --> <div class="student-negative-behiviour" ng-show="key === \'2\'"> <div class="behaviour-pie"> <div class="first-layer"></div> <canvas id="negativePiePersonal" class="chart chart-pie" chart-data="behaviours.negative" chart-labels="configChart.negativeLabels" chart-options="configChart.options" chart-colors="configChart.negativeBackgroundColor"> </canvas> </div> <div class="student-behiviour-items" ng-repeat="(key, val) in behaviours"> <div class="student-behiviour-item" ng-hide="key == \'negative\' || key === \'positive\'"> <span class="behavior-rectangle" style="background-color: {{val[\'color\']}}"></span> {{val[\'count\']}} {{key}} </div> </div> </div> <!-- ===== End. Negative Behavior ===== --> </div> </div> </div> <!--</div>--> </div> </div> </div> </div> </div>'),a.put("components/class/dashboard/behaviour/behaviourModal/behaviourModal.html",'<form name="createBehaviour"> <div class="modal-behaviour"> <div class="modal-header {{userData.background}}"> <div class="modal-title">Choose {{positive ? \'positive\' : \'negative\'}} feedback</div> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="$ctrl.cancel()">+</button> </div> <div class="modal-body"> <div class="modal-feedback-items"> <div ng-repeat="behaviour in buttons" class="holder" ng-click="$ctrl.setBehaviour(behaviour)"> <div class="img-holder"> <img src="{{behaviour.image}}"> </div> <div class="title-holder"> <span>{{behaviour.description}}</span> </div> </div> </div> </div> </div> </form>'),a.put("components/class/dashboard/behaviour/newBehaviorTypeModal/newBehaviorTypeModal.html",'<form name="CreateBehaviorModal" class="groups-form" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" ng-if="newBehaviorType.type === 1">Create new positive behavior type</h3> <h3 class="modal-title" ng-if="newBehaviorType.type === 2">Create new negative behavior type</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="colorcover custom-behavior-top-block"> <div class="color"> <div class="choose-semester"> <div class="dig-prop"> <input id="behaviorName" class="class-name greyFont" ng-model="newBehaviorType.description" name="behaviorName" ng-minlength="2" ng-maxlength="32" placeholder="Behavior name" required> </div> <hr> <p ng-show="CreateBehaviorModal.behaviorName.$dirty && CreateBehaviorModal.behaviorName.$error.minlength" class="help-block fixed-error-massage">Behavior name is too short.</p> <p ng-show="CreateBehaviorModal.behaviorName.$dirty && CreateBehaviorModal.behaviorName.$error.maxlength" class="help-block fixed-error-massage">Behavior name is too long.</p> <p ng-show="submited && CreateBehaviorModal.behaviorName.$error.required" class="help-block fixed-error-massage">Behavior name is required.</p> <hr> </div> </div> <!--<div class="color">--> <!--<div class="addImg">--> <!--<h4>--> <!--<img src="images/modal/icon-camera_3x.jpg" style="margin-right:10px;width: 16px;--> <!--height: 12px;margin-bottom: 1px">--> <!--Add image--> <!--</h4>--> <!--<div class="uploadImg {{userData.color}}">--> <!--<div class="{{userData.border}} from-disk cursorPointer"--> <!--name = "pictureUpload"--> <!--ngf-select--> <!--ng-model="picFile"--> <!--ngf-min-widht="240"--> <!--ngf-min-height="160"--> <!--ngf-max-size="5MB"--> <!--ngf-resize="{width: 240, height: 160, centerCrop: true}"--> <!--ngf-accept="\'image/*\'" valid-file--> <!--required>--> <!--<img class="upload-pic" ng-src={{userData.iconPlus}} style="margin:9px">--> <!--<p> {{ data.src }}Upload picture</p>--> <!--</div>--> <!--<div ng-show="picFile " class=\'UploadedPicture\'--> <!--ngf-select--> <!--ng-model="picFile"--> <!--ngf-accept="\'image/*\'">--> <!--<img class="thumb" ngf-thumbnail="picFile"/></div>--> <!--</div>--> <!--<div ng-show="picFile.progress >=0 && picFile.progress<100"--> <!--style="position: absolute;width: 82px;">--> <!--<progress-bar progress-number=\'progressNumber\'></progress-bar>--> <!--</div>--> <!--<div class="upload-file-error">--> <!--<p style = "color:red;" class="help-block" ng-show="CreateBehaviorModal.pictureUpload.$error.maxSize">\'Maximum picture size is 5 Mb</p>--> <!--<p style = "color:red;" class="help-block" ng-show="CreateBehaviorModal.pictureUpload.$error.minHeight">Minimum picture size is 240 x 160 pixels</p>--> <!--<p style = "color:red;" class="help-block" ng-show="CreateBehaviorModal.pictureUpload.$error.minWidth">Minimum picture size is 240 x 160 pixels</p>--> <!--<p style = "color:red;" class="help-block" ng-show="submited && CreateBehaviorModal.pictureUpload.$error.required">Behavior image is required</p>--> <!--</div>--> <!--</div>--> <!--</div>--> </div> <div class="sub-header"> <h3>Chose icon</h3> </div> <div class="images-list"> <div class="image-container" ng-repeat="imgObj in images" ng-class="{\'active-image\' : imgObj.active}" style="background-image: url(\'{{imgObj.img}}\')" ng-click="selectIcon($event, imgObj)"> </div> </div> <!-- FOOTER--> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-click="submited = true; ok()"> <span ng-if="!editing">CREATE BEHAVIOR</span> <span ng-if="editing">EDIT BEHAVIOR</span> </button> </div> </form>'),a.put("components/class/dashboard/dashboard.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'" class="col-md-3"></div>'),a.put("components/class/dashboard/distinguished/distinguished.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}" ng-controller="distinguishedController"> <div class="class-item-header"> <div class="col-md-7 col-sm-6 class-menu-item-main-header"> <div class="{{\'c-\'+role}}">Distinguished</div> <div class="amount-of-students" ng-hide="whatToDisplay == 3">{{students.length}} students</div> </div> <div class="col-md-5 col-sm-6 classes-context-menu"> <context-menu ng-hide="whatToDisplay == 3"></context-menu> </div> <div class="class-menu-item-main-subheader"></div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist" style="overflow: hidden"> <div class="slider-container-distinguished"> <button ng-hide="whatToDisplay == 0 || whatToDisplay == 3" type="button" class="slick-prev {{userData.color}}" ng-click="prev()"> <img src="{{iconArrow}}"> </button> <slick ng-if="whatToDisplay == 0"> <div class="slick-item"> <span class="slide-name">{{semester.name}}</span> <span class="slide-year">{{semester.year}}</span> </div> </slick> <slick ng-if="whatToDisplay == 3"> <div class="slick-item"> <span class="slide-name-error">No semester was chosen during the class creation.</span> </div> </slick> <slick ng-if="whatToDisplay == 1" prev-arrow=".slick-prev" next-arrow=".slick-next" infinite="true" draggable="false" slides-to-show="1" slides-to-scroll="1"> <div class="slick-item" ng-repeat="item in months"> <span class="slide-name">{{item.name}}</span> <span class="slide-year">{{item.year}}</span> </div> </slick> <slick ng-if="whatToDisplay == 2" prev-arrow=".slick-prev" next-arrow=".slick-next" infinite="true" draggable="false" slides-to-show="1" slides-to-scroll="1"> <div class="slick-item" ng-repeat="item in weeks"> <span class="slide-year fix">{{item.year}}</span> <span class="slide-name fix2">{{item.name}}</span> <div>{{item.subName}}</div> </div> </slick> <button ng-hide="whatToDisplay == 0 || whatToDisplay == 3" type="button" class="slick-next {{userData.color}}" ng-click="next()"> <img src="{{iconArrow}}"> </button> </div> <div class="class-menu-item class-menu-item-distinguished"> <pick-students ng-hide="whatToDisplay == 3"></pick-students> </div> <div class="class-menu-item-add" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button ng-hide="whatToDisplay == 3" ng-click="openModal()"></custom-button> </div> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-if="pickedStudents.length === 1"> <div class="class-menu-item-block-right" style="overflow-y: auto !important; overflow-x: hidden"> <user-info selected-user="studentInformation" show-distinguished-additional-info="true"></user-info> <!--<div class="class-menu-item-block-right-header">--> <!--</div>--> <!--<div class="student-info"></div>--> </div> </div> </div> </div>'),a.put("components/class/dashboard/distinguished/distinguishedModal/distinguishedModal.html",'<form name="CreateClassModal" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Select students to distinguish</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="$ctrl.cancel()">+</button> </div> <!--<div class="sub-header select-users">--> <!--<h3 class="select-users-modal-subtitle">SELECT STUDENT</h3>--> <!--<div class="select-users-select-all">--> <!--<div class="custom-toggle">--> <!--<input ng-click="$ctrl.selectAll()" type="checkbox" ng-model="$ctrl.allSelected" id="select-all" />--> <!--<label for="select-all"><span class="{{\'c-\' + role}}">Select All</span></label>--> <!--</div>--> <!--</div>--> <!--</div>--> <select-users></select-users> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="$ctrl.cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-disabled="CreateClassModal.$invalid" ng-click="$ctrl.ok()">DISTINGUISH STUDENT </button> </div> </form>'),a.put("components/class/dashboard/events/areUSureModal/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <span>Do you really want to delete </span> <span class="{{\'c-\'+role}}">{{$ctrl.items.title || $ctrl.items.name }}</span> <span>?</span> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">delete</button> </div> </div> </div>'),a.put("components/class/dashboard/events/events.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-7 col-sm-6 col-xs-4" ng-show="!eventsListByDateIsActive"> <div class="{{\'c-\'+role}}">Events</div> </div> <div ng-show="eventsListByDateIsActive" class="col-md-7 col-sm-6 col-xs-4 classes-main-header classes-main-header-selection"> <div style="display: flex"> <i class="{{\'c-\'+role}} glyphicon glyphicon-arrow-left" ng-click="clear()"></i> <div class="{{\'c-\'+role}} back" ng-click="clear()">BACK</div> <!--<div class="selection-number">{{selection.selectedItems.length}} files selected</div>--> </div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-5 col-sm-6 col-xs-8"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist" style="overflow-x: hidden"> <div class="events-calendar"> <div id="calendar" class="arrow-color-{{role}}" ui-calendar="uiConfig.calendar" ng-model="eventSources" calendar="cdCalendar" data-calendar="myCalendar"></div> </div> <div class="class-menu-item-add" ng-hide="hideCustomButton || role === \'parent\'" style="z-index: 1000"> <custom-button ng-hide="eventsListByDateIsActive"></custom-button> </div> </div> </div> </div> <div class="class-menu-item-block-right-container"> <div class="class-menu-item-block-right"> <div class="class-menu-item-block-right-header c-{{role}}" ng-if="!eventsListByDateIsActive && activeCalendarView === \'month\'"> EVENTS LIST BY MONTH </div> <div class="class-menu-item-block-right-header c-{{role}}" ng-if="!eventsListByDateIsActive && activeCalendarView === \'agendaWeek\'"> EVENTS LIST BY WEEK </div> <div class="class-menu-item-block-right-header c-{{role}}" ng-if="eventsListByDateIsActive"> EVENTS LIST BY DAY </div> <div class="attendance-student-info" ng-if="requestInProgress"> <div class="loader loader-fixed"></div> </div> <div class="attendance-pie data-absent" ng-show="!eventsList.length && !requestInProgress">There are no events for this day.</div> <div class="student-info"> <div ng-repeat="event in eventsList | orderBy : due_date : true " ng-if="!requestInProgress"> <div class="event-block"> <div class="event-block-date" style="background-color: {{event.color}}"> <div class="event-block-date-date"> <span class="number">{{event.date_number}}</span> <span class="month">{{event.date_month}}</span> </div> <div class="event-block-date-time"> {{event.time_start}} </div> </div> <div class="upcoming-item-star-container"> <img class="active-star" ng-class="{\'mark-active-star\': event.owner_id===user.data.id}" src="images/profile/icon-star-important.svg" ng-if="event.important" ng-click="markImportantItem(0,event.id ,$index,event.owner_id)"> <img class="star" ng-class="{\'mark-star\': event.owner_id===user.data.id}" src="images/profile/icon-star.svg" ng-if="!event.important" ng-click="markImportantItem(1,event.id,$index,event.owner_id)"> </div> <div class="event-block-title"> <div class="title" style="color: {{event.color}}">{{event.title}}</div> <div class="location" ng-if="event.location"> <img src="images/events/location-red.svg"> {{event.location}} </div> </div> <div class="controll-button" ng-if="event.owner"> <button class="btn-default btn"><img src="images/events/controll-button.svg"></button> <div class="inside-menu dropdown-menu"> <div class="menu-option" ng-click="editEvent(event)" ng-show="event.future">Edit</div> <div class="menu-option-past" ng-show="!event.future">Edit</div> <div class="menu-option" ng-click="deleteEvent(event)">Delete</div> </div> </div> </div> <div> </div> </div> </div> </div> </div> </div> </div>'),a.put("components/class/dashboard/events/eventsModal/eventsModal.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <!-- =============== Event Details =======================--> <div class="sub-header" style="display:flex"> <h3>Event Description</h3> <h3 style="margin-left:178px">Date and Time</h3> </div> <div class="colorcover"> <div class="color"> <div class="choose-semester exams-help-block"> <!-- =====  Event Name ===== --> <div class="dig-prop"> <input id="examName" ng-model="event.title" name="ExamName" ng-minlength="2" ng-maxlength="50" placeholder="Event name" style="font-size:22px; color: #b2b2b2" required> </div> <hr> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.minlength" class="help-block">Event name is too short.</p> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.maxlength" class="help-block">Event name is too long.</p> <p ng-show="submitted && CreateExamModal.ExamName.$error.required" class="help-block">Event name is required.</p> <!-- ===== Location ===== --> <div class="dig-prop" style="justify-content: initial"> <img src="images/modal/location-grey.svg"> <input id="examLocation" class="locationInput greyFont" ng-model="event.location" ng-minlength="2" ng-maxlength="50" placeholder="Location" name="Exam_location" required> </div> <hr> <p ng-show="CreateExamModal.Exam_location.$dirty && CreateExamModal.Exam_location.$error.minlength" class="help-block">Event location is too short.</p> <p ng-show="CreateExamModal.Exam_location.$dirty && CreateExamModal.Exam_location.$error.maxlength" class="help-block">Event location is too long.</p> <p ng-show="submitted && CreateExamModal.Exam_location.$error.required" class="help-block">Event location is required.</p> </div> </div> <div class="color exam-date-time"> <!-- ===== Date ===== --> <div class="dig-prop"> <label class="dig-label">Date</label> <!-- TODO must be format --> <input ng-model="monthDate" class="{{userData.color}} datetimepickerDate text-right cursorPointer"> </div> <hr> <div class="exam-time"> <!-- ===== Starts===== --> <div class="dig-prop"> <label class="dig-label">Starts</label> <!-- TODO must be format --> <input ng-model="event.time_start" class="{{userData.color}} datetimepickerTimeFrom text-right cursorPointer"> </div> <hr> <!-- ===== Ends ===== --> <div class="dig-prop"> <label class="dig-label">Ends</label> <input ng-model="event.time_end" class="{{userData.color}} datetimepickerTimeTo text-right cursorPointer"> </div> <hr> </div> <div class="dig-prop"> <div class="dig-img"> <img src="images/modal/icon-bell_3x.png"> </div> <label class="dig-label">Set reminder</label> <custom-selector class="{{role + \'-color\'}}" options="options" selected-option="event.reminder" bottom="0"> </custom-selector> </div> <hr> </div> </div> <!-- =============== Color=======================--> <div class="sub-header" style="display:flex"> <h3>Color</h3> <h3 style="margin-left:280px">Attachment</h3> </div> <div class="colorcover"> <!-- ===== Class Color ===== --> <div class="color"> <h4>Choose color</h4> <color-picker selected-color="event.color" function-select-color="functionSelectColor"></color-picker> </div> <div class="addImg color" id="addImg" style="margin-top:0; margin-left: 24px"> <h4><img src="images/modal/icon-clip.png" style="margin-right:10px; margin-bottom: 4px; width: 10px">Add file</h4> <div class="uploadImg {{userData.color}}"> <div style="margin: 0; !important" class="{{userData.border}} cursorPointer" ngf-select ng-model="UploadFile"> <img ng-src="{{userData.iconPlus}}" style="margin:9px"> <p id="uploadFile">Upload file</p> </div> <div class="UploadFiles"> <ul id="ListOfUploadFiles"> <li id="{{item.id}}" ng-repeat="item in ArrayOfUploadFiles "> <button ng-click="DeleteFileFromSyllabus($event)">x</button> {{item.name}} </li> <li class="progress" ng-show="UploadFile.progress >= 0 && UploadFile.progress<100" style="margin-top:{{UploadFileHeight+\'px\'}}; position:absolute; width:180px"> <progress-bar progress-number="progressNumber" style="margin:0; padding:0"></progress-bar> </li> </ul> </div> </div> </div> </div> <!-- =============== Note =======================--> <div class="sub-header" style="display:flex"> <h3>Note</h3> </div> <div class="exam-note"> <input id="" ng-model="event.note" class="exam-note-input" type="text" name="Exam_note" placeholder="Write your note"> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()">Cancel </button> <div class="exam-server-error help-block" ng-show="ExamServerError" style="position: absolute;left: 415px;top: 18px; color:red">Something went wrong</div> <button class="btn-createClass {{userData.background}}" style="cursor:pointer" type="submit" ng-click="submitted=true; ok(CreateExamModal.$invalid)">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </form>'),a.put("components/class/dashboard/exams/areUSureModal/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <span>Do you really want to {{$ctrl.items.actionTitle}}</span> <span ng-show="$ctrl.items.current.length === 1">{{$ctrl.items.current[0].name}} exam?</span> <span ng-show="$ctrl.items.current.length !== 1">selected exams?</span> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">{{$ctrl.items.actionTitle}}</button> </div> </div> </div>'),a.put("components/class/dashboard/exams/exams.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}" ng-controller="examsController"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Exams</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0" ng-hide="hideCustomButton || role === \'parent\'"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container" style="height:74vh"> <div class="class-menu-item-block-center"> <div class="polls-main-container" style="padding-top: 0"> <!----> <!----> <!----> <div ng-show="examNotExist" class="no-polls"> <div class="no-polls-img"> <img src="images/no_exams.svg"> </div> <div class="no-polls-title"><span>You have no exams..</span></div> <div class="polls-hint" ng-hide="hideCustomButton || role === \'parent\'"> <div class="polls-hint-text"><span>Tap here to create your first exam</span></div> <img src="images/brush_arrow.png"> </div> </div> <div ng-show="examExist" class="no-polls" style="overflow: auto; margin-top: 0"> <div ng-repeat="exam in listOfExams" class="exam-li" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(exam.id) != -1}" multi-select multi-select-item="exam" multi-select-selection="selection" ng-click="selectionWasChanged()" ng-dblclick="editExam(exam)"> <div class="exam-header" style="background-color: {{exam.color | colorParse}}"> <span class="tittle-name" style="text-transform: uppercase"> <a ng-show="exam.attachments.length!==0" target="_self" href="{{exam.attachments[0].link}}" download="exam.attachments[0].filename"><img src="images/modal/icon-clip.png"> {{exam.title}}</a> <span ng-show="exam.attachments.length===0" class="tittle-name">{{exam.title}}</span> </span> <div class="exam-information"> <div>Date:{{changeDateFormat(exam.date ,exam.time_start)}}</div> <div><img src="images/location.png">{{exam.location}}</div> </div> </div> <div class="exam-definition">{{exam.note}}</div> </div> </div> <div id="user-loader" class="loader more-menu-loader" style=""></div> <div class="custom-button-container" ng-controller="examsController as $ctrl" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button ng-click="$ctrl.openModal()" ng-hide="hideButton"></custom-button> </div> <!----> <!----> <!----> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-show="false"> <div class="class-menu-item-block-right"> <div class="class-menu-item-block-right-header"> </div> <div class="student-info"></div> </div> </div> </div> </div>'),
a.put("components/class/dashboard/exams/examsModal/examsModal.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <!-- =============== Class Details =======================--> <div class="sub-header" style="display:flex"> <h3>Exam Description</h3> <h3 style="margin-left:178px">Date and Time</h3> </div> <div class="colorcover"> <div class="color"> <div class="choose-semester exams-help-block"> <!-- =====  Exam Name ===== --> <div class="dig-prop"> <!--<label class="dig-label" for = "examName">Exam name</label>--> <!--<input--> <!--id = "examName"--> <!--class="{{userData.color}} "--> <!--ng-model=\'exam.title\'--> <!--name=\'ExamName\'--> <!--ng-minlength="2"--> <!--ng-maxlength="50"--> <!--required>--> <input id="examName" ng-model="exam.title" name="ExamName" ng-minlength="2" ng-maxlength="50" placeholder="Exam name" style="font-size:22px; color: #b2b2b2" required> </div> <hr> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.minlength" class="help-block">Exam name is too short.</p> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.maxlength" class="help-block">Exam name is too long.</p> <p ng-show="submitted && CreateExamModal.ExamName.$error.required" class="help-block">Exam name is required.</p> <!-- ===== Location ===== --> <div class="dig-prop" style="justify-content: initial"> <!--<label class="dig-label" for="examLocation"><img src="images/modal/icon-location.png" style="">location</label>--> <!--<input--> <!--id ="examLocation"--> <!--class="{{userData.color}} "--> <!--ng-model=\'exam.location\'--> <!--name=\'Exam_location\'--> <!--ng-minlength="2"--> <!--ng-maxlength="50"--> <!--required>--> <img src="images/modal/location-grey.svg"> <input id="examLocation" class="locationInput greyFont" ng-model="exam.location" ng-minlength="2" ng-maxlength="50" placeholder="Location" name="Exam_location" required> </div> <hr> <p ng-show="CreateExamModal.Exam_location.$dirty && CreateExamModal.Exam_location.$error.minlength" class="help-block">Exam location is too short.</p> <p ng-show="CreateExamModal.Exam_location.$dirty && CreateExamModal.Exam_location.$error.maxlength" class="help-block">Exam location is too long.</p> <p ng-show="submitted && CreateExamModal.Exam_location.$error.required" class="help-block">Exam location is required.</p> </div> </div> <div class="color exam-date-time"> <!-- ===== Date ===== --> <div class="dig-prop"> <label class="dig-label">Date</label> <!-- TODO must be format --> <input ng-model="monthDate" class="{{userData.color}} datetimepickerDate text-right cursorPointer"> </div> <hr> <div class="exam-time"> <!-- ===== Starts===== --> <div class="dig-prop"> <label class="dig-label">Starts</label> <!-- TODO must be format --> <input ng-model="exam.time_start" class="{{userData.color}} datetimepickerTimeFrom text-right cursorPointer"> </div> <hr> <!-- ===== Ends ===== --> <div class="dig-prop"> <label class="dig-label">Ends</label> <input ng-model="exam.time_end" class="{{userData.color}} datetimepickerTimeTo text-right cursorPointer"> </div> <hr> </div> <div class="dig-prop"> <div class="dig-img"> <img src="images/modal/icon-bell_3x.png"> </div> <label class="dig-label">Set reminder</label> <custom-selector class="{{role + \'-color\'}}" options="options" selected-option="exam.reminder" bottom="0"> </custom-selector> </div> <hr> </div> </div> <!-- =============== Color=======================--> <div class="sub-header" style="display:flex"> <h3>Color</h3> <h3 style="margin-left:280px">Attachment</h3> </div> <div class="colorcover"> <!-- ===== Class Color ===== --> <div class="color"> <h4>Choose color</h4> <color-picker selected-color="exam.color" function-select-color="functionSelectColor"></color-picker> </div> <div class="addImg color" id="addImg" style="margin-top:0; margin-left: 24px"> <h4><img src="images/modal/icon-clip.png" style="width: 10px; margin-right:10px; margin-bottom: 4px">Add file</h4> <div class="uploadImg {{userData.color}}"> <div style="margin: 0; !important" class="{{userData.border}} cursorPointer" ngf-select ng-model="UploadFile"> <img ng-src="{{userData.iconPlus}}" style="margin:9px"> <p id="uploadFile">Upload file</p> </div> <div class="UploadFiles"> <ul id="ListOfUploadFiles"> <li id="{{item.id}}" ng-repeat="item in ArrayOfUploadFiles "> <button ng-click="DeleteFileFromSyllabus($event)">x</button> {{item.name}} </li> <li class="progress" ng-show="UploadFile.progress >= 0 && UploadFile.progress<100" style="margin-top:{{UploadFileHeight+\'px\'}}; position:absolute; width:180px"> <progress-bar progress-number="progressNumber" style="margin:0; padding:0"></progress-bar> </li> </ul> </div> </div> </div> </div> <!-- =============== Note =======================--> <div class="sub-header" style="display:flex"> <h3>Note</h3> </div> <div class="exam-note"> <input id="" ng-model="exam.note" class="exam-note-input" type="text" name="Exam_note" placeholder="Write your note"> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()">Cancel </button> <div class="exam-server-error help-block" ng-show="ExamServerError" style="position: absolute;left: 415px;top: 18px; color:red">Something went wrong</div> <button class="btn-createClass {{userData.background}}" style="cursor:pointer" type="submit" ng-click="submitted=true; ok(CreateExamModal.$invalid)">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </form>'),a.put("components/class/dashboard/files/areUSureModal/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <span>Do you really want to {{$ctrl.items.actionTitle}}</span> <span ng-show="$ctrl.items.current.length === 1">{{$ctrl.items.current[0].name}} file?</span> <span ng-show="$ctrl.items.current.length !== 1">selected files?</span> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">{{$ctrl.items.actionTitle}}</button> </div> </div> </div>'),a.put("components/class/dashboard/files/files.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <!--<div>--> <div class="{{\'c-\'+role}}" ng-show="(parentFolderId===0 && userData.role!==\'student\')  || (parentFolderId===0 &&  showTeacherFiles) || (parentFolderStudentId===0  && showStudentFiles)">Files</div> <div class="{{\'c-\'+role}}" ng-click="backToParentFolder()" ng-show="(parentFolderId!==0 && userData.role!==\'student\') || (parentFolderId!==0 && showTeacherFiles)"><img ng-src="{{iconArrowBack()}}"> <span class="back-folder-button">Back</span> </div> <div class="{{\'c-\'+role}}" ng-click="backToParentStudentFolder()" ng-show="(parentFolderStudentId!==0 && showStudentFiles) "><img ng-src="{{iconArrowBack()}}"> <span class="back-folder-button">Back</span> </div> <div class="amount-of-students" ng-show="(listOfFiles.length !== 0 && userData.role!==\'student\') || showTeacherFiles"> <span ng-show="numberOfFolders === 1 ">{{numberOfFolders}} folder </span> <span ng-show="numberOfFolders >1 ">{{numberOfFolders}} folders </span> <span ng-show="numberOfFiles ===1">{{numberOfFiles}} file</span> <span ng-show="numberOfFiles >1">{{numberOfFiles}} files</span> </div> <div class="amount-of-students" ng-show="listOfStudentFiles.length !== 0 && showStudentFiles "> <span ng-show="numberOfStudentFolders === 1 ">{{numberOfStudentFolders}} folder </span> <span ng-show="numberOfStudentFolders >1 ">{{numberOfStudentFolders}} folders </span> <span ng-show="numberOfStudentFiles ===1">{{numberOfStudentFiles}} file</span> <span ng-show="numberOfStudentFiles >1">{{numberOfStudentFiles}} files</span> </div> <!--</div>--> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0" ng-hide="hideCustomButton || role === \'parent\'"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container file-shadow" style="height:74vh"> <div class="shadow" ng-show="userData.role ===\'student\'"> <div class="files-subheader"> <div class="{{userData.color}} files-subheader-item" id="itemCreatedByStudent" style="border-bottom: 2px solid #3d8e78" ng-click="createdByTeacher()">CREATED BY TEACHER </div> <div class="{{userData.color}} files-subheader-item" id="itemCreatedByTeacher" ng-click="createdByStudent()">CREATED BY ME</div> </div> </div> <div class="class-menu-item-block-center" ng-style="{height : role === \'student\' ? \'71vh\' : \'74vh\'}"> <div class="polls-main-container" style="padding-top: 0"> <!----> <!----> <!----> <div ng-show="examNotExist" style="margin-top: 110px" class="no-polls"> <div class="no-polls-img"> <img src="images/no_files.svg"> </div> <div class="no-polls-title"><span>You have no file <br> created yet.</span></div> <div class="polls-hint" ng-show="userData.role ===\'teacher\' || (userData.role ===\'student\'&& showStudentFiles)"> <div class="polls-hint-text"><span>Tap here to create your first file</span></div> <img src="images/brush_arrow.png"> </div> <div class="custom-button-container" ng-show="userData.role ===\'teacher\' || (userData.role ===\'student\'&& showStudentFiles)"> <custom-button ng-hide="hidePlusButton"></custom-button> </div> </div> <div ng-show="examExist" class="no-polls" style="overflow: auto; margin-top: 0"> <div class="files-container" ng-show="userData.role!==\'student\' || showTeacherFiles"> <div ng-repeat="file in listOfFiles" class="files-li {{\'file-li-\'+role}}" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(file.id) != -1}" ng-dblclick="openFolder(file)" ng-if="file.type===1" multi-select multi-select-item="file" multi-select-selection="selection" ng-click="selectionWasChanged()"> <div style="border-bottom: 2px solid {{file.color | colorParse}}" class="active-file-container"> <div class="file-img-container"> <img ng-src="{{iconFolderImage}}"> </div> </div> <div class="active-file-container">{{file.name}} </div> </div> <div ng-repeat="file in listOfFiles" class="files-li {{\'file-li-\'+role}}" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(file.id) != -1}" ng-dblclick="editExam(exam)" ng-if="file.type===0" multi-select multi-select-item="file" multi-select-selection="selection" ng-click="selectionWasChanged()"> <div style="border-bottom: 2px solid {{file.color | colorParse}}" class="active-file-container"> <div class="file-img-container"> <a ng-show="file.file" target="_blank" ng-dblclick="functionSaveFile(file.file)" id="{{file.file.id}}"> <img ng-src="{{chooseFileType(file.file.filename)}}"> </a> <a ng-show="file.reference" target="_blank" ng-dblclick="functionOpenReference(file)" id="{{file.id}}"> <img ng-src="{{chooseFileType(file.file.filename)}}"> </a> </div> </div> <div class="active-file-container">{{file.name | nameLengthFilter}}</div> </div> <div class="custom-button-container" ng-hide="hideCustomButton || role === \'parent\' || showTeacherFiles"> <custom-button ng-click="$ctrl.openModal()" ng-hide="hidePlusButton"></custom-button> </div> </div> <div class="files-container" ng-show="showStudentFiles"> <div ng-repeat="file in listOfStudentFiles" class="files-li {{\'file-li-\'+role}}" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(file.id) != -1}" ng-dblclick="openStudentFolder(file)" ng-if="file.type===1" multi-select multi-select-item="file" multi-select-selection="selection" ng-click="selectionWasChanged()"> <div style="border-bottom: 2px solid {{file.color | colorParse}}" class="active-file-container"> <div class="file-img-container"> <img ng-src="{{folderIcon()}}"> </div> </div> <div class="active-file-container">{{file.name}}</div> </div> <div ng-repeat="file in listOfStudentFiles" class="files-li {{\'file-li-\'+role}}" ng-class="{\'active border-{{role}}\': selection.selectedItems.indexOf(file.id) != -1}" ng-dblclick="editExam(exam)" ng-if="file.type===0" multi-select multi-select-item="file" multi-select-selection="selection" ng-click="selectionWasChanged()"> <div style="border-bottom: 2px solid {{file.color | colorParse}}" class="active-file-container"> <div class="file-img-container"> <a ng-show="file.file" target="_blank" ng-dblclick="functionSaveFile(file.file)" id="{{file.file.id}}"> <img ng-src="{{chooseFileType(file.file.filename)}}"> </a> <a ng-show="file.reference" target="_blank" ng-dblclick="functionOpenReference(file)" id="{{file.id}}"> <img ng-src="{{chooseFileType(file.file.filename)}}"> </a> </div> </div> <div class="active-file-container">{{file.name}}</div> </div> <div class="custom-button-container" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button ng-click="$ctrl.openModal()" ng-hide="hidePlusButton"></custom-button> </div> </div> </div> <div id="user-loader" class="loader more-menu-loader" style=""></div> <!----> <!----> <!----> </div> </div> </div> <!--<div class="class-menu-item-block-right-container">--> <!--<div class="class-menu-item-block-right">--> <!--<div class="class-menu-item-block-right-header">--> <!--</div>--> <!--<div class="student-info"></div>--> <!--</div>--> <!--</div>--> </div> </div>'),a.put("components/class/dashboard/files/filesModal/filesModal.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <!-- =============== Class Details =======================--> <div class="sub-header" style="display:flex"> <h3>Details</h3> </div> <div class="colorcover"> <div class="color"> <div class="choose-semester exams-help-block"> <!-- =====  File  Name ===== --> <div class="dig-prop"> <input id="examName" ng-model="file.name" name="ExamName" ng-minlength="2" ng-maxlength="32" placeholder="File name" style="font-size:22px; color: #b2b2b2" required> </div> <hr> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.minlength" class="help-block">File name is too short.</p> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.maxlength" class="help-block">File name is too long.</p> <p ng-show="submitted && CreateExamModal.ExamName.$error.required" class="help-block">File name is required.</p> <div class="addImg" id="addImg" style="margin-top:0; margin-left: 0" ng-show="showAddFile"> <h4><img src="images/modal/icon-clip-gray.png" style="margin-right:10px; margin-bottom: 4px; width: 12px">Add attachment</h4> <div class="uploadImg {{userData.color}}"> <div style="margin: 0; !important" class="{{userData.border}} cursorPointer" ngf-select ng-model="UploadFile"> <img ng-src="{{userData.iconPlus}}" style="margin:9px"> <p id="uploadFile">Upload file</p> </div> <div class="UploadFiles"> <ul id="ListOfUploadFiles"> <li id="{{item.id}}" ng-repeat="item in ArrayOfUploadFiles "> <button ng-click="DeleteFileFromSyllabus($event)">x</button> {{item.name}} </li> <li class="progress" ng-show="UploadFile.progress >= 0 && UploadFile.progress<100" style="margin-top:{{UploadFileHeight+\'px\'}}; position:absolute; width:180px"> <progress-bar progress-number="progressNumber" style="margin:0; padding:0"></progress-bar> </li> </ul> </div> </div> </div> </div> </div> </div> <!-- =============== Reference =======================--> <div class="sub-header" style="display:flex" ng-show="showAddFile"> <h3>Or Reference</h3> </div> <div class="exam-note colorcover" style="width: 50%" ng-show="showAddFile"> <input id="" ng-model="file.reference" class="exam-note-input" type="text" name="Exam_note" placeholder="Add link"> </div> <!-- =============== Color=======================--> <div class="sub-header" style="display:flex"> <h3>Color</h3> </div> <div class="colorcover"> <!-- ===== Class Color ===== --> <div class="color"> <h4>Choose color</h4> <color-picker selected-color="file.color" function-select-color="functionSelectColor"></color-picker> </div> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()">Cancel </button> <div class="exam-server-error help-block" ng-show="ExamServerError" style="position: absolute;left: 415px;top: 18px; color:red">Something went wrong</div> <button class="btn-createClass {{userData.background}}" style="cursor:pointer" type="submit" ng-click="submitted=true; ok(CreateExamModal.$invalid)">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </form>'),a.put("components/class/dashboard/files/folderModal/folderModal.html",'<form name="CreateExamModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <!-- =============== Folder Details =======================--> <div class="sub-header" style="display:flex"> <h3>Details</h3> </div> <div class="colorcover"> <div class="color"> <div class="choose-semester exams-help-block"> <!-- =====  Folder  Name ===== --> <div class="dig-prop"> <input id="examName" ng-model="folder.name" name="ExamName" ng-minlength="2" ng-maxlength="32" placeholder="Folder name" style="font-size:22px; color: #b2b2b2" required> </div> <hr> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.minlength" class="help-block">Folder name is too short.</p> <p ng-show="CreateExamModal.ExamName.$dirty && CreateExamModal.ExamName.$error.maxlength" class="help-block">Folder name is too long.</p> <p ng-show="submitted && CreateExamModal.ExamName.$error.required" class="help-block">Folder name is required.</p> </div> </div> </div> <!-- =============== Color=======================--> <div class="sub-header" style="display:flex"> <h3>Color</h3> </div> <div class="colorcover"> <!-- ===== Folder Color ===== --> <div class="color"> <h4>Choose color</h4> <color-picker selected-color="folder.color" function-select-color="functionSelectColor"></color-picker> </div> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()">Cancel </button> <div class="exam-server-error help-block" ng-show="ExamServerError" style="position: absolute;left: 415px;top: 18px; color:red">Something went wrong</div> <button class="btn-createClass {{userData.background}}" style="cursor:pointer" type="submit" ng-click="submitted=true; ok(CreateExamModal.$invalid)">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </form>'),a.put("components/class/dashboard/files/moveModal/moveModal.html",'<div> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Select folder</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <div class="files-container"> <div ng-repeat="file in folders" class="files-li" ng-class="{\'active border-{{role}}\': file.id === selectedFolder}" ng-click="selectionWasChanged(file)"> <div style="border-bottom: 2px solid {{file.color | colorParse}}" class="active-file-container"> <div class="file-img-container"> <img ng-src="{{iconFolderImage}}"> </div> </div> <div class="active-file-container">{{file.name}} </div> </div> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}} cursorPointer" ng-click="cancel()">Cancel </button> <button class="btn-createClass cursorPointer" ng-class="{\'{{userData.background}}\' : !moveDisabled}" ng-click="ok(true)">MOVE </button> <button class="btn-createClass cursorPointer" style="margin-right: 10px" ng-class="{\'{{userData.background}}\' : !moveBackDisabled}" ng-click="ok(false)">MOVE BACK </button> </div> </div>'),a.put("components/class/dashboard/grades/createGradableItem/createGradableItem.html",'<form name="CreateGradableItem" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <!-- =============== CreateGradableItem =======================--> <div class="sub-header" style="display:flex"> <h3>GRADABLE ITEM DESCRIPTION</h3> </div> <div class="colorcover"> <div class="color new-grade-property"> <div class="choose-semester exams-help-block"> <!-- ===== Gradable item ===== --> <div class="dig-prop" style="justify-content: initial"> <input id="gradableItem" class="greyFont" ng-model="newGradableItem.name" ng-minlength="2" ng-maxlength="32" placeholder="Gradable item" name="GradableItem" required> </div> <hr> <p ng-show="CreateGradableItem.GradableItem.$dirty && CreateGradableItem.GradableItem.$error.minlength" class="help-block">Gradable item is too short.</p> <p ng-show="CreateGradableItem.GradableItem.$dirty && CreateGradableItem.GradableItem.$error.maxlength" class="help-block">Gradable item is too long.</p> <p ng-show="submitted && CreateGradableItem.GradableItem.$error.required" class="help-block">Gradable item is required.</p> <!-- ===== Max Grade ===== --> <div class="dig-prop" style="justify-content: initial"> <input id="maxGrade" class="greyFont" ng-model="newGradableItem.max_grade" ng-minlength="1" ng-maxlength="3" placeholder="Max Grade" name="MaxGrade" required> </div> <hr> <p ng-show="maxGradeIsNumb" class="help-block">Max Grade must be number.</p> <p ng-show="submitted && CreateGradableItem.MaxGrade.$error.required" class="help-block">Max Grade is required.</p> <!-- ===== Weight of ===== --> <div class="dig-prop" style="justify-content: initial"> <input id="weightOf" class="greyFont" ng-model="newGradableItem.weight" ng-minlength="1" ng-maxlength="3" placeholder="Weight of" name="WeightOf" required> </div> <hr> <p ng-show="weightIsNumb" class="help-block">Weight must be number.</p> <p ng-show="submitted && CreateGradableItem.WeightOf.$error.required" class="help-block">Weight of is required.</p> <!-- ===== Category===== --> <div class="dig-prop"> <label class="dig-label">Category</label> <custom-selector class="{{role + \'-color\'}}" options="options" selected-option="newGradableItem.category_id" bottom="0"> </custom-selector> </div> <hr> <!-- ===== Weight of ===== --> <div class="dig-prop"> <input id="addCategory" ng-model="newCategory" class="greyFont" placeholder="Add category" name="AddCategory"> <button class="addCategory {{userData.background}}" ng-click="createCategory()">Add</button> </div> <hr> </div> </div> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()">Cancel </button> <div class="grade-server-error help-block" ng-show="ExamServerError" id="server-error-create-item">Something went wrong</div> <button class="btn-createClass {{userData.background}}" style="cursor:pointer" type="submit" ng-click="submitted=true; ok(CreateExamModal.$invalid)">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </form>'),a.put("components/class/dashboard/grades/gradeExport/enterEmail/enterEmail.html",'<div class="joinClass"> <form name="CreateClassModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}" ng-show="!codeWasSend"> <h3 class="modal-title" id="modal-title">Export class</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="colorcover" ng-show="!codeWasSend"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <input id="className" class="{{userData.color}} class-name" ng-model="exportGrade.email" name="ClassName" ng-minlength="2" ng-maxlength="50" placeholder="Enter email" type="email" required> </div> <hr> <p ng-show="submitted && CreateClassModal.ClassName.$error.required" class="help-block">Email is required.</p> <p ng-show="!(submitted && CreateClassModal.ClassName.$error.required) && CreateClassModal.ClassName.$dirty && CreateClassModal.ClassName.$invalid" class="help-block">Enter valid email.</p> </div> </div> </div> <div class="modal-footer" ng-show="!codeWasSend"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}} invite-parent-button" type="submit" ng-click="submitted = true; ok()">Send </button> <p ng-show="showErrorMessage" class="error-message">{{errorMessage}}</p> </div> <div ng-show="codeWasSend" class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <!--<h3 class="modal-title" id="modal-title">Enter class code</h3>--> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text" ng-show="codeWasSend">Grades export has been sent.</div> </div> </form> </div>'),a.put("components/class/dashboard/grades/gradeExport/gradeExport.html",'<form name="CreateGradableItem" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Choose export options</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <div class="export-items-list"> <div class="export-item" ng-repeat="item in exportItems" ng-click="hideError()" multi-select multi-select-item="item" multi-select-selection="selection"> <div ng-show="item.show"> <img ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()" ng-src="{{item.img}}" ng-show="!(selection.selectedItems.indexOf(item.id) != -1) && !hoverEdit"> <img ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()" ng-src="{{item.imgActive}}" ng-show="(selection.selectedItems.indexOf(item.id) ) != -1 || hoverEdit"> </div> <div ng-show="!item.show"> <img ng-src="{{item.imgNotActive}}"> </div> </div> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()">Cancel </button> <div class="grade-server-error help-block" ng-show="typeError" id="server-error-create-item">Please choose options</div> <button class="btn-createClass {{userData.background}}" style="cursor:pointer" type="submit" ng-click="submitted=true; ok(CreateExamModal.$invalid)">EXPORT TO EMAIL </button> </div> </form>'),a.put("components/class/dashboard/grades/grades.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}" ng-controller="gradesController"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{userData.color}}">Grades</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div id="user-loader" class="loader more-menu-loader" ng-show="!hideLoader"></div> <div class="class-menu-item-container grades" ng-class="{\'grades-parent-block\':userData.role===\'parent\' }" ng-show="hideLoader"> <!--subheader for parents--> <div style="display: flex; background-color: white; padding:0px 20px; box-shadow: 3px 4px 10px -4px rgba(0, 0, 0, 0.4)" ng-show="role == \'parent\'"> <div ng-repeat="childrenName in arrayOfChildrenId" id="{{childrenName}}" class="children" ng-click="changeChildren(childrenName)" style="font-size: 14px;\r\n         font-weight: 500;\r\n         font-style: normal;\r\n         font-stretch: normal;\r\n         letter-spacing: 0.5px;\r\n         text-align: center;\r\n         padding: 15px 10px;\r\n         color: #cf515d">{{childrenName}}</div> </div> <!-------------------------> <!--create gradable items(for role teacher) --> <div class="class-menu-item-block-right-container" ng-show="userData.role===\'teacher\'"> <div class="class-menu-item-block-right"> <div class="class-menu-item-block-right-header {{userData.color}}" style="height: 9vh"> <h3>GRADABLE ITEMS</h3> </div> <div class="gradable-items-not-exist" ng-show="!listOfGradableItems.length"> <div class="student-info"> <div class="no-gradable-items"> <img src="images/grades/grades.svg" style="max-width: 60%"> <p>You have no gradable items yet.</p> </div> </div> <div class="grades-hint" style="display: block !important"> <div class="grades-hint-text"><span>Tap here to create <br>a gradable item</span></div> <img src="images/brush_arrow.png"> </div> </div> <div class="gradable-items-not-exist" ng-show="listOfGradableItems.length" style="height: 65vh;overflow: auto"> <div ng-repeat="gradableItem in listOfGradableItems"> <div class="gradable-item"> <div class="gradable-item-information"> <div class="gradable-item-name">{{gradableItem.name}}</div> <div class="gradable-item-data"> <div class="gradable-item-category">{{gradableItem.category}}</div> <div class="gradable-item-max-grade">Max Grade {{gradableItem.max_grade}}</div> </div> </div> <div class="gradable-item-weight">{{gradableItem.weight}} % </div> <div><div class="update-gradable-item-arrow" ng-click="updateGradableItem(gradableItem)"><img src="images/grades/update-grade-icon.svg"></div></div> </div> <hr> </div> <div class="grades-hint grades-hint-add" ng-show="checkSumItemWeight()"> <div class="grades-hint-text grades-hint-text-add"><span>Total weight of total items <br> should be equal 100. <br>Please add more <br>gradable items </span></div> <img src="images/brush_arrow.png"> </div> </div> <div class="class-menu-item-add add-gradable-items-button" ng-show="checkSumItemWeight()"> <img src="images/floating-button.png" ng-click="createGradableItem()"> <!--<custom-button ></custom-button>--> </div> </div> </div> <div class="class-menu-item-block-center-container mainContainerWidth"> <div class="class-menu-item-block-center" ng-style="{height : role === \'parent\' ? \'71vh\' : \'74vh\'}" ng-class="{\'{{teacherTableContainer}}\':userData.role===\'teacher\'} "> <div class="class-menu-item-notexist"></div> <!--<div class="class-menu-item-exist no-grades-yet" style = "overflow: hidden" ng-show="userData.role===\'teacher\' && checkSumItemWeight() ">--> <!--You have no grades yet.--> <!--</div>--> <!--================== EDIT GRADES  ===========================================--> <div class="class-menu-item-exist" style="overflow: hidden" ng-show="userData.role===\'teacher\' && listOfGradableItems.length>0 && listOfStudents.length>0"> <div class="table-fixed-header"> <div class="table-fixed-header-section1 hideScroll"> Student </div> <div class="table-fixed-header-section2 headerGradeScroll {{correctMainSectionWith}} hideScroll"> <table style="width:{{calcmainSectionWidth+ \'px\'}}; min-width: 470px;text-align: center; height: 77px; margin-left: -1px"> <tr class="item-grade-list" ng-repeat="(categoryKey, categoryValue) in listOfGrades[0].items" ng-if="$index===categoryIndex"> <td colspan="{{categoryValue.length}}" class="item-grade" style="height: 40px"> <div style="position: absolute; width: 470px; top: 8px"> <span style="margin: 0 40px" ng-click="functionPreviousCategory(listOfGrades[0].items)"> &lt </span> <span>{{categoryKey}}</span> <span style="margin: 0 40px" ng-click="functionNextCategory(listOfGrades[0].items)"> &gt </span> </div> </td> </tr> <tr class="item-grade-list number-of-category" ng-repeat="(categoryKey, categoryValue) in listOfGrades[0].items" ng-show="$index===categoryIndex"> <td ng-repeat="grade in categoryValue" class="item-grade">{{$index+1}}</td> <!----> </tr> </table> </div> <div class="table-fixed-header-section3 table-fixed-header-section3 hideScroll" style="width: 92px"> Bonus </div> <div class="table-fixed-header-section3 hideScroll"> Total </div> </div> <div class="table-fixed-body" style="display: flex"> <div class="table-fixed-body-section1 container hideScroll" style="height: {{fixedHeight}}"> <div class="grades-table-student-data" ng-repeat="member in listOfGrades"> <div style="overflow: visible" class="grades-table-student-img-container"><img ng-src="{{member.user.photo}}" style="border-radius: 50%; height: 100%; width: 100%"></div> <div>{{member.user.first_name}}</div> <div>{{member.user.last_name}}</div> </div> </div> <div class="table-fixed-body-section2 centerscroll tableGradeScroll {{correctMainSectionWith}}" style="height: {{fixedHeight}}"> <table style="width:{{calcmainSectionWidth+ \'px\'}}" class="central-body-section"> <tr ng-repeat="member in listOfGrades"> <td ng-repeat="grade in member.items[itemKey]" ng-mouseover="mouseOverItem()" ng-mouseleave="mouseLeaveItem()" ng-class="{\'gradable-item-background\':grade.class} " ng-dblclick="CreateNewGrade($index+member.user.id, member.user.id, grade)" id="{{$index+member.user.id}}">{{grade.mark || \'-\'}}</td> <!----> </tr> </table> </div> <div class="table-fixed-body-section3 topscroll hideScroll" style="height: {{fixedHeight}}"> <div class="grades-table-student-data" ng-repeat="member in listOfGrades"> <div style>{{member.bonus_mark || \'-\'}}</div> </div> </div> <div class="table-fixed-body-section3 topscroll" id="hideScroll" style="height: {{fixedHeight}}"> <div class="grades-table-student-data" ng-repeat="member in listOfGrades"> <div style>{{calculateTotalMark(member)}}</div> </div> </div> </div> <div class="class-menu-item"> </div> <div class="class-menu-item-add" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button></custom-button> </div> </div> <div class="class-menu-item-exist" style="overflow: hidden" ng-show="userData.role===\'teacher\' && (listOfGradableItems.length===0 || listOfStudents.length===0) "> <div class="no-created-gradable-items-main-container"> <div class="no-created-gradable-items"> <!--<img class = \'no-created-gradable-items-img\' src="images//assignment/no-assignments.png">--> <div class="no-created-gradable-items-text" ng-if="listOfGradableItems.length===0 && listOfStudents.length===0">There are no created gradable items</div> <div class="no-created-gradable-items-text" ng-if="listOfStudents.length===0">There are no students</div> </div> </div> </div> <div class="class-menu-item-exist" style="overflow: auto" ng-show="userData.role!==\'teacher\'"> <h3 class="graded-items-title">GRADED ITEMS</h3> <div class="current-grade-item" ng-repeat="(key, value) in currentUserListOfGrades.items"> <div class="grade-item-type"> <div class="grade-item-type-title {{userData.background}}">{{key}}</div> <div class="grade-item-type-mark {{userData.color}}">{{currentUserListOfGrades[\'total\'+key]}}</div> </div> <div class="grade-item-type-data" ng-repeat="item in value"> <div class="grade-item-type-data-title">{{item.name }}</div> <div class="grade-item-type-data-mark">{{item.mark || \'-\'}}</div> </div> </div> <div class="current-grade-total {{userData.color}} {{userData.border}}"> <div class="current-grade-total-title {{userData.border}}">TOTAL</div> <div class="current-grade-total-grade">{{currentUserListOfGrades.total}}</div> </div> </div> </div> </div> </div> </div>'),
a.put("components/class/dashboard/parents/addNewParentModal/addNewParentModal.html",'<form name="CreateParentModal" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Add new parent</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="sub-header"> <h3>PARENT</h3> </div> <div class="personal-information-container"> <div class="top-block"> <div class="img-upload-container"> <div class="upload-form"> <button id="btn-add-photo-parent-one" type="image" name="fileParent" accept="image/*" ng-model="parentImage" ngf-change="uploaded($files, 1)" ngf-select ngf-max-size="5MB" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-resize="{width: 200, height: 200}" required> <img class="add-photo clip-circle" ng-hide="parentImage" src="images/auth/add-photo_3x.png"> <img class="thumb profile-file clip-circle" ng-show="CreateParentModal.file.$valid" ngf-thumbnail="parentImage"> </button> <div class="errors"> <p ng-show="CreateParentModal.fileParent.$error.maxSize " class="help-block">File exceeds allowed size </p> <p ng-show="createParentClicked && CreateParentModal.fileParent.$error.required " class="help-block">Parent photo is required </p> <p ng-show="CreateParentModal.fileParent.$error.minWidth " class="help-block">File invalid min width </p> <p ng-show="CreateParentModal.fileParent.$error.minHeight " class="help-block">File invalid min height </p> </div> </div> </div> <div class="name-container"> <div class="first-middle-name"> <div style="display: flex"> <div class="first-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newParent.first_name" name="parent_first_name" ng-minlength="2" placeholder="First Name*" required> <div class="errors"> <p ng-show="createParentClicked && CreateParentModal.parent_first_name.$error.required || CreateParentModal.parent_first_name.$dirty && CreateParentModal.parent_first_name.$error.required" class="help-block">First name is required.</p> <p ng-show="CreateParentModal.parent_first_name.$error.minlength" class="help-block">First name is to short</p> </div> </div> <div class="middle-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newParent.middle_name" name="parent_middle_name" ng-minlength="2" placeholder="Middle Name"> <div class="errors"> <p ng-show="CreateParentModal.parent_middle_name.$error.minlength" class="help-block">Middle name is to short</p> </div> </div> </div> </div> <div class="last-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newParent.last_name" name="parent_last_name" ng-minlength="2" placeholder="Last Name*" required> <div class="errors"> <p ng-show="createParentClicked && CreateParentModal.parent_last_name.$error.required || CreateParentModal.parent_last_name.$dirty && CreateParentModal.parent_last_name.$error.required" class="help-block">Last name is required.</p> <p ng-show="CreateParentModal.parent_last_name.$error.minlength" class="help-block">Last name is to short</p> </div> </div> </div> <div class="phone-email-container"> <div class="phone form-padding"> <input class="greyFont new-student-form-input" ng-model="newParent.phone" name="parent_phone" placeholder="Phone" type="tel"> </div> <div class="email form-padding"> <input type="text" name="parent_email" class="greyFont new-student-form-input" placeholder="Email*" ng-model="newParent.email" ng-maxlength="40" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" required> <div class="errors"> <div ng-messages="CreateParentModal.parent_email.$error"> <div ng-message="pattern" class="help-block">Please enter a valid email address.</div> </div> <p class="help-block" ng-show="CreateParentModal.parent_email.$dirty && CreateParentModal.parent_email.$error.maxlength">E-mail is too long.</p> <p class="help-block" ng-show="createParentClicked  && CreateParentModal.parent_email.$error.required">Parent E-mail is required.</p> </div> </div> </div> </div> <div class="bottom-block"> <div class="gender-container greyFont"> <div class="gender gender-student male" ng-click="setGender(1)"> <span ng-class="{\'picked-gender\' : newParent.gender === 1}">Male</span> <img ng-show="newParent.gender === 1" src="../images/students/underline.svg"> </div> <div class="gender gender-student female" ng-click="setGender(2)"> <span ng-class="{\'picked-gender\' : newParent.gender === 2}">Female</span> <img ng-show="newParent.gender === 2" src="../images/students/underline.svg"> </div> <div class="gender gender-student other" ng-click="setGender(3)"> <span ng-class="{\'picked-gender\' : newParent.gender === 3}">Other</span> <img ng-show="newParent.gender === 3" src="../images/students/underline.svg"> </div> </div> <div class="student-id-container"> <div class="student-id"> <span class="text"> By adding parent email, he will automaticaly invited to join this class in ClassDig. </span> </div> </div> </div> </div> <!-- FOOTER--> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-click="createParentClicked = true; ok()">ADD PARENT </button> </div> </form>'),a.put("components/class/dashboard/parents/inviteParent/inviteParent.html",'<div class="joinClass"> <form name="CreateClassModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}" ng-show="!codeWasSend"> <h3 class="modal-title" id="modal-title">Invite {{currentUser.first_name}} {{currentUser.last_name}} parent</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="colorcover" ng-show="!codeWasSend"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <input id="className" class="{{userData.color}} class-name" ng-model="inviteParentEmail" name="ClassName" ng-minlength="2" ng-maxlength="50" placeholder="Enter email" type="email" required> </div> <hr> <p ng-show="submitted && CreateClassModal.ClassName.$error.required" class="help-block">Email code is required.</p> <p ng-show="submitted && CreateClassModal.ClassName.$invalid" class="help-block">Enter valid email.</p> </div> </div> </div> <div class="modal-footer" ng-show="!codeWasSend"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}} invite-parent-button" type="submit" ng-click="submitted = true; ok()">Invite </button> <p ng-show="showErrorMessage" class="error-message">{{errorMessage}}</p> </div> <div ng-show="codeWasSend" class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <!--<h3 class="modal-title" id="modal-title">Enter class code</h3>--> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text">Your request has been sent.</div> </div> </form> </div>'),a.put("components/class/dashboard/parents/parents.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Parents</div> <div class="amount-of-students">{{students.length}} parents</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0"> <div class="search-field-holder {{\'c-\'+role}}"> <label> <img src="{{\'images/context_menu/search-\' + role + \'.svg\'}}"> <input type="text" ng-model="searchBy" style="border-color: {{currentUser.color}}" placeholder="Search parent"> </label> </div> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center-header"> <div class="modify-controls"> <div class="dropdown custom-select"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="nav-menu-text-profile">{{ sortBy }}</span> <i class="glyphicon glyphicon-triangle-bottom"></i> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in sort" class="custom-select-menu-option dropdown-menu-text" ng-click="changeSortBy(item)"> {{item}} </div> </div> </div> <div class="btn-group controll-shape-buttons"> <button type="button" class="btn controll-shape" ng-click="list = true; displayChanged(list)" ng-class="{\'{{userData.background}}\': list === true}"> <img ng-if="list === false" ng-src=" {{\'../images/students/icon-row-\' + role +\'.png\'}}"> <img ng-if="list === true" src="../images/students/icon-row-default.png"> </button> <button type="button" class="btn controll-shape" ng-click="list =false; displayChanged(list)" ng-class="{\'{{userData.background}}\': list === false}"> <img ng-if="list === false" src="../images/students/icon-table-default.png"> <img ng-if="list === true" ng-src=" {{\'../images/students/icon-table-\' +role +\'.png\'}}"> </button> </div> </div> </div> <div class="class-menu-item-block-center has-header"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist"> <div class="class-menu-item"> <!--<select-users></select-users>--> <pick-students></pick-students> </div> </div> <div class="class-menu-item-add" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button></custom-button> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-hide="hideCustomButton || role === \'parent\'"> <div class="class-menu-item-block-right" ng-show="inviteParent" style="position:relative"> <div class="class-menu-item-block-right-header poll-right-header parents-right-header" id="inviteParentHeader"> <div class="active-poll-tittle"> <span>{{studentsWithoutParents.length}} PARENTS NOT HERE.</span> <span>INVITE THEME</span> </div> </div> <div class="active-poll-voters-list" style="height: 57vh"> <div id="user-list" class="user-list"> <div class="user parent-right-list" ng-repeat="user in studentsWithoutParents"> <div> <div class="row margin padding"> <div class="padding col-lg-2 col-md-2 col-sm-2 col-xs-2"> <div class="last-mess-user-img" style="width: 42px; height: 42px" ng-class="{\'{{\'border-bg-\'+role}}\': selectedUsers[user.id]}" ng-style="{\'background-image\':\'url({{user.image}})\'}"></div> </div> <div class="padding col-lg-10 col-md-10 col-sm-10 col-xs-10"> <p class="name">{{user.first_name + \' \' + user.last_name}} <span ng-show="selectedUsers[user.id]" style="float: right" class="glyphicon glyphicon-ok {{ \'c-\' + role}}"></span> </p> </div> </div> </div> <div> <button class="invite-parent-button" ng-click="openModalInviteClass(user)">invite</button> </div> </div> </div> </div> <div class="parent-request-button" ng-click="seeRequestToJoin()" ng-show="requestedParents.length>0"> <img src="../images/parents/icon-invite-parent.svg"> <span ng-show="requestedParents.length===1"> {{requestedParents.length}} NEW REQUEST</span> <span ng-show="requestedParents.length>1"> {{requestedParents.length}} NEW REQUESTS</span> </div> </div> <div ng-if="requestedParents.length" class="class-menu-item-block-right" ng-show="requestToJoinParent" style="position:relative"> <div class="class-menu-item-block-right-header c-{{role}}"> REQUEST TO JOIN </div> <div class="student-info"> <div class="student-in-requests-container" ng-repeat="parent in requestedParents"> <div class="student-in-requests"> <div class="container-flex"> <div class="student-img" ng-style="{\'background-image\':\'url({{parent.photo || parent.image}})\'}"></div> <div class="student-name"> <div> {{parent.first_name}} {{parent.last_name}} </div> </div> <div class="buttons"> <div> <button class="btn {{currentUser.background}} white-color" ng-click="aceptReject(parent, 1)">Accept</button> <button class="btn {{currentUser.color}} {{currentUser.border}}" ng-click="aceptReject(parent, 2)">Reject</button> </div> </div> <div style="clear: both"></div> </div> </div> </div> </div> <div class="parent-request-button" ng-click="seeParentsToInvite()" ng-show="studentsWithoutParents.length>0"> <img src="../images/parents/icon-invite-parent.svg"> INVITE {{studentsWithoutParents.length}} PARENTS </div> </div> </div> </div> </div>'),a.put("components/class/dashboard/polls/areUSureModal/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <span>Do you really want to {{$ctrl.items.actionTitle}}</span> <span ng-show="$ctrl.items.current.length === 1">{{$ctrl.items.current[0].name}} poll?</span> <span ng-show="$ctrl.items.current.length !== 1">selected polls?</span> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">{{$ctrl.items.actionTitle}}</button> </div> </div> </div>'),a.put("components/class/dashboard/polls/polls.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}" ng-controller="pollsController"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Polls</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0" ng-hide="hideCustomButton || role === \'parent\'"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center" style="position: relative"> <div class="polls-main-container" style="position: static; height: 74vh ; overflow: auto" id="pollList"> <!----> <!----> <!----> <div class="no-polls" ng-show="pollsNotExist"> <div class="no-polls-img"> <img src="images/pools.svg"> </div> <div class="no-polls-title"><span>You have no polls.</span></div> <div class="polls-hint" ng-hide="hideCustomButton || role === \'parent\'"> <div class="polls-hint-text"><span>Tap here to create your first poll</span></div> <img src="images/brush_arrow.png"> </div> </div> <div class="class-menu-item-add" ng-controller="pollsController as $ctrl" ng-hide="hideCustomButton || role === \'parent\'"> <custom-button ng-click="$ctrl.openModal()"></custom-button> </div> <!--<div class="custom-button-container" ng-controller="pollsController as $ctrl" ng-show="allowPollCreate()" >--> <!--<custom-button ng-click="$ctrl.openModal()"></custom-button>--> <!--</div>--> <div class="exist-polls" infinite-scroll="pollList.nextPage()" infinite-scroll-container="&quot;#pollList&quot;" infinite-scroll-disabled="pollList.busy" infinite-scroll-listen-for-event="list:filtered" infinite-scroll-distance="1" ng-show="pollsExist"> <div> <ul> <li ng-repeat="pollItem in pollList.items track by $index" class="poll-list" id="{{$index}}" ng-class="{\'active border-{{role}}\': ((selection.selectedItems.indexOf(pollItem.poll.id) != -1) &&pollItem.poll.user_id ===user.data.id )}" multi-select multi-select-item="pollItem.poll" multi-select-selection="selection" ng-click="selectionWasChanged($index, pollItem)"> <form> <div class="poll-header"> <div class="poll-name"> <h3>{{pollItem.poll.name}}</h3> <p>Created: {{ formatDataCreate(pollItem.poll.created_at)}}</p> <!--<div class = "poll-img" ng-show = "pollItem.poll.attachments[0]"><img ng-src = "{{pollItem.poll.attachments[0].link}}"></div>--> </div> <div class="poll-participant"> <h6> Participants: </h6> <arrayof-members members-array="pollItem.poll.participants"></arrayof-members> </div> </div> <div class="poll-image"><div class="poll-img" ng-show="pollItem.poll.attachments[0]"><img ng-src="{{pollItem.poll.attachments[0].link}}"></div></div> <div class="poll-choices"> <div ng-repeat="choice in pollItem.poll.questions" class="poll-answer-item {{pollItem.poll.id}}" ng-click="checkPollAnswer(choice.id, pollItem.poll.multi_select)" style="flex-direction:row"> <check-question style="width:70%" question-title="choice.title" poll-item="pollItem" tittle-id="$index+\'block\'" question-questions="choice.answers" question-multiselect="pollItem.poll.multi_select" common-class="pollItem.poll.id" user-answers="choice.userAnswers" time-end="getFinishTime(pollItem.poll.time_frame)"></check-question> <!--<div ng-show="showProgressBar(pollItem)" style="margin: 10px 0;">--> <!--<progress-bar progress-number=\'30\' current-text="trzzzsgrw"></progress-bar>--> <!--</div>--> <div style="margin-left: 10px;width:30%"><img style="width:100%" ng-src="{{choice.image.link}}"></div> </div> <whensee-results result-id="pollItem.poll.see_result_id"></whensee-results> <div ng-show="pollItem.poll.note" class="greyFont"> <span style="font-weight:bold">Note:</span> {{pollItem.poll.note}}</div> </div> <div class="poll-footer"> <button ng-show="VoteButton(pollItem.poll.questions, pollItem.poll.user_id) && getFinishTime(pollItem.poll.time_frame)!==0" ng-click="pushVoteToServer(pollItem.poll.id, pollItem, $index)" class="{{userData.background}} poll-vote-button" id="{{pollItem.poll.id}}">Vote</button> <div> <p ng-show="getFinishTime(pollItem.poll.time_frame)!==0">Closes in {{getFinishTime(pollItem.poll.time_frame)}}</p> <p ng-show="getFinishTime(pollItem.poll.time_frame)===0">Closed</p> </div> <div ng-show="pollItem.poll.anonim===1"> <h6 class="{{userData.color}}"> {{pollItem.poll.voted}} votes</h6> </div> <div ng-show="pollItem.poll.anonim===0" style="display: flex"> <p style="margin-right: 10px">Voters:</p> <arrayof-members members-array="pollItem.poll.voted"></arrayof-members> </div> </div> </form> </li> <div style="clear: both"></div> </ul> </div> <!----> <!----> <!----> </div> <div id="poll-loader" class="loader more-menu-loader" style=""></div> </div> </div> </div> <div class="class-menu-item-block-right-container"> <div class="class-menu-item-block-right"> <div class="class-menu-item-block-right-header poll-right-header"> <div class="active-poll-tittle {{userData.color}}"> {{activePoll.poll.name}} </div> <div class="active-poll-voters">{{activePoll.voters}}</div> </div> <div class="active-poll-voters-list"> <select-users ng-show="activePoll.poll.name"></select-users> </div> <div class="student-info"></div> </div> </div> </div> </div> <!--\r\n<div class="classes-add-class" ng-controller="ModalDemoController as $ctrl" class="modal-demo">\r\n        <custom-button ng-click="$ctrl.openModal()"></custom-button>\r\n</div>-->'),a.put("components/class/dashboard/polls/pollsModal/CreatePollsDirectives/arrayOfQuestions.html",'<!--<div class="question" style = "width:100%">--><!--<label for="poll-question">Write your question</label>--> <div style="display: flex"> <form name="PollQuestionArray" style="width: 100%" novalidate> <input id="poll-question" ng-model="questionsArray.question" class="greyFont" type="text" name="PollQuestion" ng-minlength="2" ng-maxlength="250" placeholder="Write your question" style="font-size: 16px" required> <p ng-show="PollQuestionArray.PollQuestion.$dirty && PollQuestionArray.PollQuestion.$error.minlength" class="help-block red-help-block">Question is too short.</p> <p ng-show="PollQuestionArray.PollQuestion.$dirty && PollQuestionArray.PollQuestion.$error.maxlength" class="help-block red-help-block">Question is too long.</p> <!--<p ng-show="CreateClassModal.ClassName.$dirty && CreateClassModal.ClassName.$error.required" class="help-block">Class name is required.</p>--> <p ng-show="formSubmitted && PollQuestionArray.PollQuestion.$error.required" class="help-block red-help-block">Poll question is required.</p> <div class="poll-answers"> <div class="answer" ng-repeat="answer in questionsArray.answers" style="flex-direction: column"> <div style="display: flex"> <label for="{{$index+1}}" class="answer-number {{color}} {{border}}">{{$index+1}}</label> <input id="{{$index+1}}" ng-model="questionsArray.answers[$index].answer" ng-click="questionsArray.answers[$index].flag=0; " class="answer-text greyFont" type="text" placeholder="Add choice #{{$index+1}}" name="{{&quot;name&quot;+$index}}" ng-minlength="2" ng-maxlength="250" required> <label ng-show="$index>1" for="{{$index+1}}" class="delete-choice" ng-click="deleteChoice($index)">X</label> </div> <p ng-show="PollQuestionArray.{{\'name\'+$index}}.$dirty && PollQuestionArray.{{\'name\'+$index}}.$error.minlength" class="help-block red-help-block">Answer is too short.</p> <p ng-show="PollQuestionArray.{{\'name\'+$index}}.$dirty && PollQuestionArray.{{\'name\'+$index}}.$error.maxlength" class="help-block red-help-block">Answeris too long.</p> <!--<p ng-show="CreateClassModal.ClassName.$dirty && CreateClassModal.ClassName.$error.required" class="help-block">Class name is required.</p>--> <p ng-show="formSubmitted && PollQuestionArray.{{\'name\'+$index}}.$error.required" class="help-block red-help-block">Poll answer is required.</p> </div> <div class="add-option add-new-ans" id="{{questionId}}"> <button type="submit" class="add-answer {{background}}" ng-click="submitted = true; addNewAnswerInputField()" style="margin-left:18px">+</button> Add another option </div> </div> </form> <div class="add-img-to-question colorcover"> <!-- ===== Add Cover Image ===== --> <div class="addImg"> <h4> Add image</h4> <div class="uploadImg {{color}}"> <div class="{{border}} from-disk cursorPointer" name="pictureUpload" ngf-select ng-model="picFile" ngf-min-widht="240" ngf-min-height="160" ngf-max-size="5MB" ngf-resize="{width: 240, height: 160, centerCrop: true}" ngf-accept="\'image/*\'" valid-file> <img class="upload-pic" ng-src="{{iconCamera}}" style="margin:9px"> <p> {{data.src }}Upload picture</p></div> <div ng-show="picFile " class="UploadedPicture" ngf-select ng-model="picFile" ngf-accept="\'image/*\'"> <img class="thumb" ngf-thumbnail="picFile"></div> </div> <div ng-show="picFile.progress >=0 && picFile.progress<100" style="position: absolute;width: 82px"> <progress-bar progress-number="progressNumber"></progress-bar> </div> <div class="upload-file-error"> <p style="color:red" class="help-block" ng-show="PollQuestionArray.pictureUpload.$error.maxSize">Incorrect picture size</p> <p style="color:red" class="help-block" ng-show="PollQuestionArray.pictureUpload.$error.minHeight">Picture height is not sufficient</p> <p style="color:red" class="help-block" ng-show="PollQuestionArray.pictureUpload.$error.minWidth">Picture width is not sufficient</p> </div> </div> </div> </div> <!--</div>-->'),a.put("components/class/dashboard/polls/pollsModal/CreatePollsDirectives/checkQuestionBlock/checkQuestionBlock.html",'<div>{{questionTitle}}</div> <div ng-repeat="answer in questionQuestions" class="poll-answer-item {{commonClass}}" ng-click="checkPollAnswer(answer.id, answer)"> <div style="display:flex"> <div class="checker {{border}} {{tittleId}}" id="{{answer.id}}"> <div class="sign-check"><div class="qwestion-index {{color}}" ng-show="checkOwner()">{{$index+1}}</div></div> </div> <div class="poll-answers">{{answer.answer}}</div> </div> <div ng-show="answer.votes!==null && progressNumberGenerator(answer.votes)>0" style="margin: 10px 0"> <progress-bar progress-number="progressNumberGenerator(answer.votes)" current-text="answer.votes + \' voted \' "></progress-bar> </div> </div>'),a.put("components/class/dashboard/polls/pollsModal/CreatePollsDirectives/seeVoterResults/seeVoterResults.html",'<div><h4>When can voter see results?</h4></div> <div class="details-img-container"> <div class="see-voter-results" ng-click="initPictures(&quot;1&quot;)"> <div class="img-container"> <img id="img-1"> </div> <p id="img-1-text">Right after voting</p> </div> <div class="see-voter-results" ng-click="initPictures(&quot;2&quot;)"> <div class="img-container"> <img id="img-2"> </div> <p id="img-2-text">When time runs out</p> </div> <div class="see-voter-results" ng-click="initPictures(&quot;3&quot;)"> <div class="img-container"> <img id="img-3"> </div> <p id="img-3-text">Never </p> </div> </div>'),a.put("components/class/dashboard/polls/pollsModal/CreatePollsDirectives/whenSeeVoterResults/whenSeeVoterResults.html",'<div class="when-see-result"> <div class="see-result-container" ng-show="resultId===1"> <div class="see-result-img"> <img ng-src="{{iconFlash}}"> </div> <p>Results can be seen right after voting.</p> </div> <div class="see-result-container" ng-show="resultId===2"> <div class="see-result-img"> <img ng-src="{{iconClock}}"> </div> <p> Results can be seen when time runs out.</p> </div> <div class="see-result-container" ng-show="resultId===3"> <div class="see-result-img"> <img ng-src="{{iconExit}}"> </div> <p>Results can never be seen.</p> </div> </div>'),a.put("components/class/dashboard/polls/pollsModal/pollsModal.html",'<form name="CreatePollModal" ng-submit="submitCreatePollModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title" ng-show="createPollModal">{{$ctrl.modalConstant.header}}</h3> <h3 class="modal-title" ng-show="addVoters">Select voters</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="$ctrl.cancel()" ng-show="createPollModal">+</button> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancelVoteParticipants()" ng-show="addVoters">+</button> </div> <div ng-show="createPollModal"> <div class="sub-header"> <h3>Question</h3> </div> <div class="poll-modal-create-question"> <div class="question" style="padding-top: 0; width:100%"> <input id="poll-question" ng-model="newPoll.poll.name" class="greyFont" type="text" placeholder="Poll title" style="font-size: 22px" name="PollTittle" ng-minlength="2" ng-maxlength="250" required> <p ng-show="CreatePollModal.PollTittle.$dirty && CreatePollModal.PollTittle.$error.minlength" class="help-block red-help-block">Poll tittle is too short.</p> <p ng-show="CreatePollModal.PollTittle.$dirty && CreatePollModal.PollTittle.$error.maxlength" class="help-block red-help-block">Poll tittle is too long.</p> <!--<p ng-show="CreatePpllModal.PollTittle.$dirty && CreatePpllModal.PollTittle.$error.required" class="help-block">Class name is required.</p>--> <p ng-show="submitted && CreatePollModal.PollTittle.$error.required" class="help-block red-help-block">Poll tittle is required.</p> <div ng-repeat="(id,question) in newPoll.blocks track by id"> <div class="poll-question-block"> <array-questions questions-array="question" form-submitted="formSubmitted" question-id="id+&quot;qwe&quot;" style="width:100%"></array-questions> </div> </div> <div class="add-option newQuestion {{userData.color}} add-new-qwe" style="display: flex"> <button class="add-question {{background}}" ng-click="addNewQuestion()" style="font-size:37px; font-weight: 100; padding: 0"><img ng-src="{{userData.iconPlus}}"></button> <span style="padding-top: 10px; padding-left: 10px">Add another question</span> </div> </div> </div> <div class="sub-header"> <h3>Details</h3> </div> <div class="poll-modal-create-question poll-modal-details"> <div class="question"> <!-- ===== Date ===== --> <div class="poll-answears"> <h4 class="greyFont">Voting timeframe</h4> <div class="poll-answears details"> <div class="answear details-section anonymouslyVoteCtrl" style="border-bottom: 1px solid #d9d9d9"> <h4>Date</h4> <input ng-model="timeFrame" class="{{userData.color}} datetimepickerDate" style="text-align:right; border: none; outline: none"> </div> </div> </div> <!-- ===== Time ===== --> <div class="poll-answears"> <div class="poll-answears details"> <div class="answear details-section anonymouslyVoteCtrl" style="border-bottom: 1px solid #d9d9d9"> <h4>Time</h4> <input ng-model="timeFrameTime" class="{{userData.color}} datetimepickerTime" style="text-align:right; border: none; outline: none"> </div> </div> </div> <!-- ===== Anonymoustly vote ===== --> <div class="poll-answears details"> <div class="answear details-section anonymouslyVoteCtrl"> <h4>Anonymously vote</h4> <custom-switcher switch-value="newPoll.anonim" switch-id="anonim"></custom-switcher> </div> </div> <hr> <!-- ===== Multi select ===== --> <div class="poll-answears"> <div class="answear details-section"> <h4>Allow multi-select</h4> <custom-switcher switch-value="newPoll.poll.multi_select" switch-id="multiSelect"></custom-switcher> </div> </div> </div> <!-- ===== See result Id ===== --> <div class="add-img-to-question details-img-section"> <see-results result-id="newPoll.poll.see_result_id"></see-results> </div> </div> <div class="sub-header"> <h3>Voters</h3> </div> <div class="poll-modal-create-question poll-modal-details"> <div class="question"> <div class="poll-answears"> <div class="answear details-section votersCtrl"> <h4>Voters</h4> <span class="{{userData.color}}" ng-click="showParticipantsList()" ng-show="userData.role ===\'student\'" style="padding-top: 9px">Only Students</span> <span class="{{userData.color}}" ng-click="showParticipantsList()" ng-show="userData.role ===\'teacher\'" style="padding-top: 9px">Students</span> <!--<div><custom-selector class ={{userData.color}} options="votersOptions" ></custom-selector></div>--> </div> </div> <hr> </div> </div> <div class="sub-header"> <h3>Note</h3> </div> <div class="poll-modal-create-question poll-modal-note"> <div class="question note"> <input id="" class="answear-text greyFont" type="text" placeholder="Write your note" ng-model="newPoll.poll.note"> </div> </div> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="$ctrl.cancel()">Cancel </button> <button class="btn-createClass add-poll {{userData.background}}" type="submit" ng-click="submitted=true; $ctrl.ok() ">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </div> <div ng-show="addVoters"> <div class="sub-header"> <h3>Choose role</h3> </div> <choose-user-role></choose-user-role> <select-users> </select-users> </div> <div class="modal-footer" ng-show="addVoters"> <!--<div class="modal-footer">--> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancelVoteParticipants()">Cancel </button> <button class="btn-createClass add-poll {{userData.background}}" ng-click="addVoteParticipants()">Add voters </button> <!--</div>--> </div> </form>'),a.put("components/class/dashboard/reports/reports.html",'<!-- Header --> <div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Reports</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="reports-options {{userInfo.color}}"> <div id="Marks" class="option" ng-click="changeReportsOption(\'Marks\')">Marks</div> <div id="Attendance" class="option" ng-click="changeReportsOption(\'Attendance\')">Attendance</div> <div id="Behavior" class="option" ng-click="changeReportsOption(\'Behavior\')">Behavior</div> </div> <div class="shadow"> <div style="display: flex; background-color: white; padding:0px 20px; box-shadow: inset 0 4px 4px 0 rgba(0, 0, 0, 0.24), 0 0 4px 0 rgba(0, 0, 0, 0.12)" ng-show="role == \'parent\'"> <div ng-repeat="childrenName in arrayOfChildrenId  track by $index" id="{{childrenName}}" class="children" ng-click="changeChildren(childrenName)" style="font-size: 14px;\r\n           font-weight: 500;\r\n           font-style: normal;\r\n           font-stretch: normal;\r\n           letter-spacing: 0.5px;\r\n           text-align: center;\r\n           padding: 15px 10px;\r\n           color: #cf515d">{{childrenName}}</div> </div> </div> <div class="class-menu-item-block-center-container" ng-class="{\'fixed-height-when-parent\': role === \'parent\'}"> <!-- PARENT || STUDENT MARKS--> <!--TODO DONE--> <div class="class-menu-item-block-center" style="height: 70vh" ng-if="role !== \'teacher\' && currentOption === \'Marks\'"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist" style="overflow-y: hidden"> <div class="class-menu-item student-parent-marks"> <nvd3 options="configDiagramMarks" data="dataForDiagramMarks"></nvd3> <div class="student-parent-marks-legend"> <div class="mark-table" ng-repeat="table in chunkedData  track by $index"> <div class="mark-item" ng-repeat="value in table  track by $index"> <span class="mark-rectangle" style="background-color: {{value.color}}"></span> <span>{{value.id}}</span> </div> </div> </div> </div> </div> </div> <!-- PARENT || STUDENT ATTENDANCE--> <!--TODO DONE--> <div class="class-menu-item-block-center" style="height: 70vh" ng-if="role !== \'teacher\' && currentOption === \'Attendance\'"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist" style="overflow-y: hidden"> <div class="class-menu-item"> <div class="student-parent-behavior"> <div class="behavior-doughnut-legend"> <div class="student-behiviour-item"> <span class="behavior-rectangle" style="background-color: #1EA66D"></span> <span>Present</span> </div> <div class="student-behiviour-item"> <span class="behavior-rectangle" style="background-color: #F93640"></span> <span>Absent</span> </div> <div class="student-behiviour-item"> <span class="behavior-rectangle" style="background-color: #FFC600"></span> <span>Late</span> </div> </div> <div class="list-container"> <div class="behavior-doughnut-container" ng-repeat="element in attendanceDataByStudent track by $index"> <div>{{element.class}}</div> <div class="attendance-pie"> <div class="first-layer"></div> <div class="second-layer"></div> <div class="third-layer"></div> <div class="fourth-layer"></div> <canvas id="pieAttendance" class="chart chart-pie" chart-data="element.general" chart-hover="none" chart-legend="false" chart-labels="configChartAttendance.attendanceLabels" chart-options="configChartAttendance.options" chart-colors="configChartAttendance.attendanceBackgroundColor"> </canvas> </div> <div class="behavior-doughnut-title"> <span style="color: #1EA66D">{{element.present}}</span> <span style="color: #F93640">{{element.absent}}</span> <span style="color: #FFC600">{{element.late}}</span> </div> </div> </div> </div> </div> </div> </div> <!-- PARENT || STUDENT BEHAVIOR--> <!--TODO DONE--> <div class="class-menu-item-block-center" style="height: 70vh" ng-if="role !== \'teacher\' && currentOption === \'Behavior\'"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist" style="overflow-y: hidden"> <div class="class-menu-item"> <div class="student-parent-behavior"> <div class="behavior-doughnut-legend"> <div class="student-behiviour-item"> <span class="behavior-rectangle" style="background-color: #1ea66d"></span> <span>Positive</span> </div> <div class="student-behiviour-item"> <span class="behavior-rectangle" style="background-color: #f93640"></span> <span>Need to work</span> </div> </div> <div class="list-container"> <div class="behavior-doughnut-container" ng-repeat="element in behaviorDataByStudent track by $index"> <div>{{element.class}}</div> <div class="behavior-doughnut"> <div class="first-layer"> <div class="behavior-doughnut-title"> <span class="positive">{{element.positive}}</span> <span class="negative">{{element.negative}}</span> </div> </div> <canvas id="doughnutBehavior" class="chart chart-doughnut" chart-data="element.general" chart-labels="configDoughnutBehavior.labels" chart-colors="configDoughnutBehavior.colors" chart-options="configDoughnutBehavior.options"> </canvas> </div> </div> </div> </div> </div> </div> </div> <!-- TEACHER ATTENDANCE--> <!--TODO DONE--> <div class="class-menu-item-block-center" style="height: 70vh" ng-if="role == \'teacher\' && currentOption === \'Attendance\'  && !loading"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist"> <div class="class-menu-item"> <div ng-if="!attendanceList.length && attendanceParsed" class="no-data"> No reports about attendance. </div> <div class="student-in-requests-container" ng-repeat="student in attendanceList"> <div class="student-in-requests"> <div class="container-flex"> <div class="student-img" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}"></div> <div class="student-name"> <div> {{student.first_name}} {{student.last_name}} </div> </div> <div class="diagram"> <div class="legend"> <div class="student-attendance-item"> <div class="attendance-color attendance-present">{{student.present}}</div> <div class="attendance-text"> Present</div> </div> <div class="student-attendance-item"> <div class="attendance-color attendance-late">{{student.late}}</div> <div class="attendance-text"> Late</div> </div> <div class="student-attendance-item"> <div class="attendance-color attendance-absent">{{student.absent}}</div> <div class="attendance-text"> Absent</div> </div> </div> <div class="attendance-pie"> <div class="first-layer"></div> <div class="second-layer"></div> <div class="third-layer"></div> <div class="fourth-layer"></div> <canvas id="studentAttendancePie" class="chart chart-pie" chart-data="student.attendanceChartInfo" chart-hover="none" chart-legend="false" chart-labels="configChartAttendance.attendanceLabels" chart-options="configChartAttendance.options" chart-colors="configChartAttendance.attendanceBackgroundColor"> </canvas> </div> </div> <div style="clear: both"></div> </div> </div> </div> </div> </div> </div> <!-- TEACHER BEHAVIOR--> <!--TODO DONE--> <!-- top block--> <div class="class-menu-item-block-center class-menu-item-block-center-top" ng-if="role === \'teacher\' && currentOption === \'Behavior\'  && !loading"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist" style="overflow-y: hidden"> <div class="hider" ng-hide="configDiagram.chart.height"> <div class="loader"></div> </div> <div class="class-menu-item class-menu-item-for-behavior"> <div class="diagrams-behavior"> <div class="diagram-behavior"> <div class="diagram-title positive">POSITIVE</div> <nvd3 options="configDiagram" data="dataForDiagramPositive" class="diagram-positive"></nvd3> <div class="diagram-bottom-bar"> <div style="max-width: calc(100% / {{dataForDiagramPositive[0].values.length}}); min-width: calc(100% / {{dataForDiagramPositive[0].values.length}})" ng-repeat="value in dataForDiagramPositive[0].values track by $index" class="label-for-diagram" lebale-dir>{{value.label}}</div> </div> </div> <div class="diagram-behavior"> <div class="diagram-title negative">NEEDS WORK</div> <nvd3 options="configDiagram" data="dataForDiagramNegative" class="diagram-negative"></nvd3> <div class="diagram-bottom-bar"> <div style="max-width: calc(100% / {{dataForDiagramNegative[0].values.length}}); min-width: calc(100% / {{dataForDiagramNegative[0].values.length}})" ng-repeat="value in dataForDiagramNegative[0].values track by $index" class="label-for-diagram" lebales-dir>{{value.label}}</div> </div> </div> </div> </div> </div> </div> <!--bottom block--> <div class="class-menu-item-block-center class-menu-item-block-center-bottom" ng-if="role === \'teacher\' && currentOption === \'Behavior\'  && !loading"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist"> <div class="class-menu-item"> <div ng-if="!behaviorList.length && behaviorParsed" class="no-data"> No reports about behavior. </div> <div class="student-in-requests-container" ng-repeat="student in behaviorList"> <div class="student-in-requests"> <div class="container-flex"> <div class="student-img" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}"></div> <div class="student-name"> <div> {{student.first_name}} {{student.last_name}} </div> </div> <div class="student-positive-negative-reports-in-list"> <div class="student-positive-behiviour"> <div class="behaviour-pie"> <div class="first-layer"></div> <canvas id="positivePiePersonal" class="chart chart-pie" chart-data="student.behavior[\'1\'].positive" chart-labels="configChartBehavior.positiveLabels" chart-options="configChartBehavior.options" chart-colors="configChartBehavior.positiveBackgroundColor"> </canvas> </div> <div class="student-behiviour-items"> <div class="student-behiviour-item" ng-repeat="value in configChartBehavior.positiveLabels"> <span class="behavior-rectangle" style="background-color: {{configChartBehavior.positiveBackgroundColor[$index]}}"></span> <span>{{student.behavior[\'1\'].positive[$index]}}</span> <span>{{value}}</span> </div> </div> </div> <div class="student-negative-behiviour"> <div class="behaviour-pie"> <div class="first-layer"></div> <canvas id="negativePiePersonal" class="chart chart-pie" chart-data="student.behavior[\'2\'].negative" chart-labels="configChartBehavior.negativeLabels" chart-options="configChartBehavior.options" chart-colors="configChartBehavior.negativeBackgroundColor"> </canvas> </div> <div class="student-behiviour-items"> <div class="student-behiviour-item" ng-repeat="value in configChartBehavior.negativeLabels"> <span class="behavior-rectangle" style="background-color: {{configChartBehavior.negativeBackgroundColor[$index]}}"></span> <span>{{student.behavior[\'2\'].negative[$index]}}</span> <span>{{value}}</span> </div> </div> </div> </div> <div style="clear: both"></div> </div> </div> </div> </div> </div> </div> <!-- TEACHER MARKS--> <!--TODO DONE--> <!-- top block--> <div class="class-menu-item-block-center class-menu-item-block-center-top" ng-if="role === \'teacher\' && currentOption === \'Marks\' && !loading"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist" style="overflow-y: hidden"> <div class="class-menu-item reports-marks-top-block"> <div class="header c-{{role}}"> CLASS AVERAGE MARK </div> <div class=""> <div class="progress"> <div class="progress-bar {{userInfo.background}}" role="progressbar" aria-valuenow="99" aria-valuemin="0" aria-valuemax="100" style="width: {{averageMark + \'%\'}}"> {{averageMark}} </div> </div> </div> </div> </div> </div> <!--bottom block--> <div class="class-menu-item-block-center class-menu-item-block-center-bottom" ng-if="role === \'teacher\' && currentOption === \'Marks\' && !loading"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist"> <div class="class-menu-item"> <div ng-if="!marksList.length && marksParsed" class="no-data"> No reports about marks. </div> <div class="student-in-requests-container" ng-repeat="student in marksList"> <div class="student-in-requests"> <div class="container-flex"> <div class="student-img" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}"></div> <div class="student-name"> <div> {{student.first_name}} {{student.last_name}} </div> </div> <div class="mark-container"> <div class="actual-mark c-{{role}}"> <span ng-if="sub_category === \'All\'">{{student[category] || "-"}}</span> <span ng-if="sub_category !== \'All\'">{{student.items[category][sub_category] || "-"}}</span> </div> </div> <div style="clear: both"></div> </div> </div> </div> </div> </div> </div> <div class="class-menu-item-block-center" ng-show="loading"> <div class="class-menu-item-exist"> <div class="loader"></div> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-if="role === \'teacher\' && currentOption === \'Marks\'  && !loading"> <div class="class-menu-item-block-right reports-filters-bar"> <div class="class-menu-item-block-right-header c-{{role}}"> FILTERS </div> <div class="filters"> <div class="category"> <div class="title"> <span>Category</span> </div> <div class="picker"> <div class="dropdown custom-select c-{{role}}"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-menu-down"></i> <span class="nav-menu-text-profile">{{ sortBy }}</span> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in sort  track by $index" class="custom-select-menu-option dropdown-menu-text" ng-click="changeSortBy(item)"> {{item}} </div> </div> </div> </div> </div> <div class="category"> <div class="title"> <span>More specific</span> </div> <div class="picker"> <div class="dropdown custom-select c-{{role}}"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-menu-down"></i> <span class="nav-menu-text-profile">{{ sortBySpecific }}</span> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in sortSubCategorys[sortBy]  track by $index" class="custom-select-menu-option dropdown-menu-text" ng-click="changeSortBySpecific(item)"> {{item}} </div> </div> </div> </div> </div> <div class="category"> <div class="title"> <span>Sorting</span> </div> <div class="picker"> <div class="dropdown custom-select c-{{role}}"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-menu-down"></i> <span class="nav-menu-text-profile">{{ orderByValue }}</span> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in orderByValues  track by $index" class="custom-select-menu-option dropdown-menu-text" ng-click="changeOrderBy(item)"> {{item}} </div> </div> </div> </div> </div> <div class="rz-slider-container"> <rzslider rz-slider-model="marksRangeSlider.minValue" rz-slider-high="marksRangeSlider.maxValue" rz-slider-options="marksRangeSlider.options"></rzslider> </div> </div> <div class="filter-buttons"> <button class="btn btn-default c-{{role}} reset-button" ng-click="resetFilters()">RESET FILTERS</button> <button class="btn btn-default result-button {{userInfo.background}}" ng-click="applyFilters()">SEE THE RESULT</button> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-if="role === \'teacher\' && currentOption === \'Attendance\'  && !loading"> <div class="class-menu-item-block-right reports-filters-bar"> <div class="class-menu-item-block-right-header c-{{role}}"> FILTERS </div> <div class="filters"> <div class="category"> <div class="title"> <span>Attendance</span> </div> <div class="picker"> <div class="dropdown custom-select c-{{role}}"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-menu-down"></i> <span class="nav-menu-text-profile">{{ attendanceFilterValue }}</span> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in configChartAttendance.attendanceLabels  track by $index" class="custom-select-menu-option dropdown-menu-text" ng-click="changeOrderByAttendance(item)"> {{item}} </div> </div> </div> </div> </div> <div class="rz-slider-container"> <rzslider rz-slider-model="attendanceRangeSlider.minValue" rz-slider-high="attendanceRangeSlider.maxValue" rz-slider-options="attendanceRangeSlider.options"></rzslider> </div> </div> <div class="filter-buttons"> <button class="btn btn-default c-{{role}} reset-button" ng-click="resetFiltersAttendance()">RESET FILTERS</button> <button class="btn btn-default result-button {{userInfo.background}}" ng-click="applyFiltersAttendance()">SEE THE RESULT</button> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-if="role === \'teacher\' && currentOption === \'Behavior\'  && !loading"> <div class="class-menu-item-block-right reports-filters-bar"> <div class="class-menu-item-block-right-header c-{{role}}"> FILTERS </div> <!--<div class="filters">--> <div class="filters"> <div class="category"> <div class="title"> <span>Behavior</span> </div> <div class="picker"> <div class="dropdown custom-select c-{{role}}"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-menu-down"></i> <span class="nav-menu-text-profile">{{ behaviorFilterValue }}</span> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in configDoughnutBehavior.labels  track by $index" class="custom-select-menu-option dropdown-menu-text" ng-click="changeSortByBehavior(item)"> {{item}} </div> </div> </div> </div> </div> <div class="category"> <div class="title"> <span>More specific</span> </div> <div class="picker"> <div class="dropdown custom-select c-{{role}}"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-menu-down"></i> <span class="nav-menu-text-profile">{{ behaviorFilterSpecificValue }}</span> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in behaviorSpecificValues  track by $index" class="custom-select-menu-option dropdown-menu-text" ng-click="changeSortBySpecificBehavior(item)"> {{item}} </div> </div> </div> </div> </div> <div class="rz-slider-container"> <rzslider rz-slider-model="behaviorRangeSlider.minValue" rz-slider-high="behaviorRangeSlider.maxValue" rz-slider-options="behaviorRangeSlider.options"></rzslider> </div> </div> <!--</div>--> <div class="filter-buttons"> <button class="btn btn-default c-{{role}} reset-button" ng-click="resetFilterBehavior()">RESET FILTERS</button> <button class="btn btn-default result-button {{userInfo.background}}" ng-click="applyFiltersBehavior()">SEE THE RESULT</button> </div> </div> </div> </div> </div>'),
a.put("components/class/dashboard/students/addExistingStudentModal/addExistingStudentModal.html",'<form name="CreateClassModal" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Add existing student</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="$ctrl.cancel()">+</button> </div> <div class="sub-header select-users" ng-show="showMembersHeader"> <h3 class="select-users-modal-subtitle">SELECT CLASS</h3> </div> <div class="class-picker"> <div class="title"> <span>Class</span> </div> <div class="picker"> <div class="dropdown custom-select c-{{role}}"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-menu-down"></i> <span class="nav-menu-text-profile">{{ $ctrl.sortBy }}</span> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in $ctrl.sort  track by $index" class="custom-select-menu-option dropdown-menu-text" ng-click="$ctrl.changeSortBy(item)"> {{item.name}} </div> </div> </div> </div> </div> <!--<div class="sub-header select-users">--> <!--<h3 class="select-users-modal-subtitle">SELECT STUDENT</h3>--> <!--<div class="select-users-select-all">--> <!--<div class="custom-toggle">--> <!--<input ng-click="$ctrl.selectAll()" type="checkbox" ng-model="$ctrl.allSelected" id="select-all" />--> <!--<label for="select-all"><span class="{{\'c-\' + role}}">Select All</span></label>--> <!--</div>--> <!--</div>--> <!--</div>--> <select-users></select-users> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="$ctrl.cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-disabled="CreateClassModal.$invalid" ng-click="$ctrl.ok()">ADD STUDENT </button> </div> </form>'),a.put("components/class/dashboard/students/addNewStudentModal/addNewStudentModal.html",'<form name="CreateStudentModal" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" ng-if="!editing">Add new student</h3> <h3 class="modal-title" ng-if="editing">Edit student</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="sub-header"> <h3>PERSONAL INFORMATION</h3> </div> <div class="personal-information-container"> <div class="top-block"> <div class="img-upload-container"> <div class="upload-form"> <button id="btn-add-photo-student" type="image" name="fileStudent" accept="image/*" ng-model="studentImage" ngf-change="uploaded($files, 0)" ngf-select ngf-max-size="5MB" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-resize="{width: 200, height: 200}" required> <img class="add-photo clip-circle" ng-hide="studentImage" src="images/auth/add-photo_3x.png"> <img class="thumb profile-file clip-circle" ng-show="CreateStudentModal.file.$valid" ngf-thumbnail="studentImage"> </button> <div class="errors"> <p ng-show="CreateStudentModal.fileStudent.$error.maxSize " class="help-block">File exceeds allowed size </p> <p ng-show="createStudentClicked && CreateStudentModal.fileStudent.$error.required" class="help-block">Student photo is required</p> <p ng-show="CreateStudentModal.fileStudent.$error.minWidth " class="help-block">File invalid min width </p> <p ng-show="CreateStudentModal.fileStudent.$error.minHeight " class="help-block">File invalid min height </p> </div> </div> </div> <div class="name-container"> <div class="first-middle-name"> <div style="display: flex"> <div class="first-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.first_name" name="newStudent_first_name" ng-minlength="2" placeholder="First Name*" required> <div class="errors"> <p ng-show="createStudentClicked && CreateStudentModal.newStudent_first_name.$error.required || CreateStudentModal.newStudent_first_name.$dirty && CreateStudentModal.newStudent_first_name.$error.required" class="help-block">First name is required.</p> <p ng-show="CreateStudentModal.newStudent_first_name.$error.minlength" class="help-block">First name is to short</p> </div> </div> <div class="middle-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.middle_name" name="newStudent_middle_name" ng-minlength="2" placeholder="Middle Name"> <div class="errors"> <p ng-show="CreateStudentModal.newStudent_middle_name.$error.minlength" class="help-block">Middle name is to short</p> </div> </div> </div> </div> <div class="last-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.last_name" name="newStudent_last_name" ng-minlength="2" placeholder="Last Name*" required> <div class="errors"> <p ng-show="createStudentClicked && CreateStudentModal.newStudent_last_name.$error.required || CreateStudentModal.newStudent_last_name.$dirty && CreateStudentModal.newStudent_last_name.$error.required" class="help-block">Last name is required.</p> <p ng-show="CreateStudentModal.newStudent_last_name.$error.minlength" class="help-block">Last name is to short</p> </div> </div> </div> <div class="phone-email-container"> <div class="phone form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.phone" name="newStudent_phone" placeholder="Phone" type="tel"> </div> <div class="email form-padding"> <input type="text" name="newStudent_email" class="greyFont new-student-form-input" placeholder="Email*" ng-model="newStudent.email" ng-maxlength="40" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" required> <div class="errors"> <div ng-messages="CreateStudentModal.newStudent_email.$error"> <div ng-message="pattern" class="help-block">Please enter a valid email address.</div> </div> <p class="help-block" ng-show="CreateStudentModal.newStudent_email.$dirty && CreateStudentModal.newStudent_email.$error.maxlength">E-mail is too long.</p> <p class="help-block" ng-show="createStudentClicked && CreateStudentModal.newStudent_email.$error.required || CreateStudentModal.newStudent_email.$dirty && CreateStudentModal.newStudent_email.$error.required">Student E-mail is required.</p> </div> </div> </div> </div> <div class="bottom-block"> <div class="gender-container greyFont"> <div class="gender gender-student male" ng-click="setGender(1, 0)"> <span ng-class="{\'picked-gender\' : newStudent.gender === 1}">Male</span> <img ng-show="newStudent.gender === 1" src="../images/students/underline.svg"> </div> <div class="gender gender-student female" ng-click="setGender(2, 0)"> <span ng-class="{\'picked-gender\' : newStudent.gender === 2}">Female</span> <img ng-show="newStudent.gender === 2" src="../images/students/underline.svg"> </div> <div class="gender gender-student other" ng-click="setGender(3, 0)"> <span ng-class="{\'picked-gender\' : newStudent.gender === 3}">Other</span> <img ng-show="newStudent.gender === 3" src="../images/students/underline.svg"> </div> </div> <div class="student-id-container"> <div class="student-id form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.id" name="newStudent_id" ng-minlength="2" placeholder="Student ID"> <div class="errors"> <p ng-show="CreateStudentModal.newStudent_id.$error.minlength" class="help-block">Student ID is to short</p> </div> </div> </div> </div> </div> <div class="sub-header"> <h3>PARENT</h3> </div> <div class="personal-information-container"> <div class="top-block"> <div class="img-upload-container"> <div class="upload-form"> <button id="btn-add-photo-parent-one" type="image" name="fileParent1" accept="image/*" ng-model="parentOneImage" ngf-change="uploaded($files, 1)" ngf-select ngf-max-size="5MB" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-resize="{width: 200, height: 200}" required> <img class="add-photo clip-circle" ng-hide="parentOneImage" src="images/auth/add-photo_3x.png"> <img class="thumb profile-file clip-circle" ng-show="CreateStudentModal.file.$valid" ngf-thumbnail="parentOneImage"> </button> <div class="errors"> <p ng-show="CreateStudentModal.fileParent1.$error.maxSize " class="help-block">File exceeds allowed size </p> <p ng-show="createStudentClicked && CreateStudentModal.fileParent1.$error.required " class="help-block">Parent photo is required </p> <p ng-show="CreateStudentModal.fileParent1.$error.minWidth " class="help-block">File invalid min width </p> <p ng-show="CreateStudentModal.fileParent1.$error.minHeight " class="help-block">File invalid min height </p> </div> </div> </div> <div class="name-container"> <div class="first-middle-name"> <div style="display: flex"> <div class="first-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.parents[0].first_name" name="newStudent_parent1_first_name" ng-minlength="2" placeholder="First Name*" required> <div class="errors"> <p ng-show="createStudentClicked && CreateStudentModal.newStudent_parent1_first_name.$error.required || CreateStudentModal.newStudent_parent1_first_name.$dirty && CreateStudentModal.newStudent_parent1_first_name.$error.required" class="help-block">First name is required.</p> <p ng-show="CreateStudentModal.newStudent_parent1_first_name.$error.minlength" class="help-block">First name is to short</p> </div> </div> <div class="middle-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.parents[0].middle_name" name="newStudent_parent1_middle_name" ng-minlength="2" placeholder="Middle Name"> <div class="errors"> <p ng-show="CreateStudentModal.newStudent_parent1_middle_name.$error.minlength" class="help-block">Middle name is to short</p> </div> </div> </div> </div> <div class="last-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.parents[0].last_name" name="newStudent_parent1_last_name" ng-minlength="2" placeholder="Last Name*" required> <div class="errors"> <p ng-show="createStudentClicked && CreateStudentModal.newStudent_parent1_last_name.$error.required || CreateStudentModal.newStudent_parent1_last_name.$dirty && CreateStudentModal.newStudent_parent1_last_name.$error.required" class="help-block">Last name is required.</p> <p ng-show="CreateStudentModal.newStudent_parent1_last_name.$error.minlength" class="help-block">Last name is to short</p> </div> </div> </div> <div class="phone-email-container"> <div class="phone form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.parents[0].phone" name="newStudent_parent1_phone" placeholder="Phone" type="tel"> </div> <div class="email form-padding"> <input type="text" name="newStudent_parent1_email" class="greyFont new-student-form-input" placeholder="Email*" ng-model="newStudent.parents[0].email" ng-maxlength="40" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" required> <div class="errors"> <div ng-messages="CreateStudentModal.newStudent_parent1_email.$error"> <div ng-message="pattern" class="help-block">Please enter a valid email address.</div> </div> <p class="help-block" ng-show="CreateStudentModal.newStudent_parent1_email.$dirty && CreateStudentModal.newStudent_parent1_email.$error.maxlength">E-mail is too long.</p> <p class="help-block" ng-show="createStudentClicked  && CreateStudentModal.newStudent_parent1_email.$error.required">Parent E-mail is required.</p> <p class="help-block" ng-show="createStudentClicked  && newStudent.parents[0].email === newStudent.email || createStudentClicked && newStudent.parents[0].email === newStudent.parents[1].email && showContinue">Parent E-mail should be unique.</p> </div> </div> </div> </div> <div class="bottom-block"> <div class="gender-container greyFont"> <div class="gender gender-student male" ng-click="setGender(1, 1)"> <span ng-class="{\'picked-gender\' : newStudent.parents[0].gender === 1}">Male</span> <img ng-show="newStudent.parents[0].gender === 1" src="../images/students/underline.svg"> </div> <div class="gender gender-student female" ng-click="setGender(2, 1)"> <span ng-class="{\'picked-gender\' : newStudent.parents[0].gender === 2}">Female</span> <img ng-show="newStudent.parents[0].gender === 2" src="../images/students/underline.svg"> </div> <div class="gender gender-student other" ng-click="setGender(3, 1)"> <span ng-class="{\'picked-gender\' : newStudent.parents[0].gender === 3}">Other</span> <img ng-show="newStudent.parents[0].gender === 3" src="../images/students/underline.svg"> </div> </div> <div class="student-id-container"> <div class="student-id"> <span class="text"> By adding parent email, he will automaticaly invited to join this class in ClassDig. </span> </div> </div> </div> </div> <div class="sub-header select-users"> <h3></h3> </div> <div ng-show="!showContinue" class="colorcover ClossAddDataTime"> <div class="color"> <div class="{{userData.color}}" id="CloseTime" style="display: flex"> <img ng-src="{{userData.iconAddButton}}" ng-click="showContinue = true; newStudent.parents[1].gender = 2"> <p>Add another parent</p> </div> </div> </div> <div class="personal-information-container" ng-if="showContinue"> <div class="top-block"> <div class="img-upload-container"> <div class="upload-form"> <button id="btn-add-photo-parent-two" type="image" name="fileParent2" accept="image/*" ng-model="parentTwoImage" ngf-change="uploaded($files, 2)" ngf-select ngf-max-size="5MB" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-resize="{width: 200, height: 200}" required> <img class="add-photo clip-circle" ng-hide="parentTwoImage" src="images/auth/add-photo_3x.png"> <img class="thumb profile-file clip-circle" ng-show="CreateStudentModal.file.$valid" ngf-thumbnail="parentTwoImage"> </button> <div class="errors"> <p ng-show="CreateStudentModal.fileParent2.$error.maxSize " class="help-block">File exceeds allowed size </p> <p ng-show="createStudentClicked && CreateStudentModal.fileParent2.$error.required " class="help-block">Parent photo is required </p> <p ng-show="CreateStudentModal.fileParent2.$error.minWidth " class="help-block">File invalid min width </p> <p ng-show="CreateStudentModal.fileParent2.$error.minHeight " class="help-block">File invalid min height </p> </div> </div> </div> <div class="name-container"> <div class="first-middle-name"> <div style="display: flex"> <div class="first-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.parents[1].first_name" name="newStudent_parent2_first_name" ng-minlength="2" placeholder="First Name*" required> <div class="errors"> <p ng-show="createStudentClicked && CreateStudentModal.newStudent_parent2_first_name.$error.required || CreateStudentModal.newStudent_parent2_first_name.$dirty && CreateStudentModal.newStudent_parent2_first_name.$error.required" class="help-block">First name is required.</p> <p ng-show="CreateStudentModal.newStudent_parent2_first_name.$error.minlength" class="help-block">First name is to short</p> </div> </div> <div class="middle-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.parents[1].middle_name" name="newStudent_parent2_middle_name" ng-minlength="2" placeholder="Middle Name"> <div class="errors"> <p ng-show="CreateStudentModal.newStudent_parent2_middle_name.$error.minlength" class="help-block">Middle name is to short</p> </div> </div> </div> </div> <div class="last-name form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.parents[1].last_name" name="newStudent_parent2_last_name" ng-minlength="2" placeholder="Last Name*" required> <div class="errors"> <p ng-show="createStudentClicked && CreateStudentModal.newStudent_parent2_last_name.$error.required || CreateStudentModal.newStudent_parent2_last_name.$dirty && CreateStudentModal.newStudent_parent2_last_name.$error.required" class="help-block">Last name is required.</p> <p ng-show="CreateStudentModal.newStudent_parent2_last_name.$error.minlength" class="help-block">Last name is to short</p> </div> </div> </div> <div class="phone-email-container"> <div class="phone form-padding"> <input class="greyFont new-student-form-input" ng-model="newStudent.parents[1].phone" name="newStudent_parent2_phone" placeholder="Phone" type="tel"> </div> <div class="email form-padding"> <input type="text" name="newStudent_parent2_email" class="greyFont new-student-form-input" placeholder="Email*" ng-model="newStudent.parents[1].email" ng-maxlength="40" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" required> <div class="errors"> <div ng-messages="CreateStudentModal.newStudent_parent2_email.$error"> <div ng-message="pattern" class="help-block">Please enter a valid email address.</div> </div> <p class="help-block" ng-show="CreateStudentModal.newStudent_parent2_email.$dirty && CreateStudentModal.newStudent_parent2_email.$error.maxlength">E-mail is too long.</p> <p class="help-block" ng-show="createStudentClicked && CreateStudentModal.newStudent_parent2_email.$error.required">Parent E-mail is required.</p> <p class="help-block" ng-show="createStudentClicked && showContinue && newStudent.parents[0].email === newStudent.parents[1].email || newStudent.parents[1].email === newStudent.email && createStudentClicked && showContinue">Parent E-mail should be unique.</p> </div> </div> </div> </div> <div class="bottom-block"> <div class="gender-container greyFont"> <div class="gender gender-student male" ng-click="setGender(1, 2)"> <span ng-class="{\'picked-gender\' : newStudent.parents[1].gender === 1}">Male</span> <img ng-show="newStudent.parents[1].gender === 1" src="../images/students/underline.svg"> </div> <div class="gender gender-student female" ng-click="setGender(2, 2)"> <span ng-class="{\'picked-gender\' : newStudent.parents[1].gender === 2}">Female</span> <img ng-show="newStudent.parents[1].gender === 2" src="../images/students/underline.svg"> </div> <div class="gender gender-student other" ng-click="setGender(3, 2)"> <span ng-class="{\'picked-gender\' : newStudent.parents[1].gender === 3}">Other</span> <img ng-show="newStudent.parents[1].gender === 3" src="../images/students/underline.svg"> </div> </div> <div class="student-id-container"> <div class="student-id"> <span class="text"> By adding parent email, he will automaticaly invited to join this class in ClassDig. </span> </div> </div> </div> </div> <!-- TAG --> <div class="sub-header"> <h3>TAG</h3> </div> <div class="tag-container"> <div class="tag-title greyFont">Tag will appear in the student’s profile to remind you about a need or concern.</div> <div class="tags"> <div class="tag aid"> <div class="icon-name"> <div> <span class="icon"> <img src="../images/students/aid.png"> </span> <span class="name greyFont">Need aid</span> </div> </div> <div class="on-off"> <div class="onoffswitch"> <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="aidonoffswitch" checked> <label class="onoffswitch-label" for="aidonoffswitch" ng-click="onOffTag(\'need_aid\')"> <span class="onoffswitch-inner {{userData.background}}"></span> <span class="onoffswitch-switch"></span> </label> </div> </div> </div> <div class="tag concern"> <div class="icon-name"> <div> <span class="icon"> <img src="../images/students/concern.png"> </span> <span class="name greyFont">Concern</span> </div> </div> <div class="on-off"> <div class="onoffswitch"> <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="concernonoffswitch" checked> <label class="onoffswitch-label" for="concernonoffswitch" ng-click="onOffTag(\'concern\')"> <span class="onoffswitch-inner {{userData.background}}"></span> <span class="onoffswitch-switch"></span> </label> </div> </div> </div> </div> </div> <!-- NOTE --> <div class="sub-header"> <h3>NOTE</h3> </div> <div class="poll-modal-create-question poll-modal-note"> <div class="question note"> <input id="" class="answear-text greyFont" type="text" placeholder="Write your note" ng-model="newStudent.note"> </div> </div> <!-- FOOTER--> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-click="createStudentClicked = true; ok()">{{editing ? \'EDIT STUDENT\' : \'ADD STUDENT\'}} </button> </div> </form>'),a.put("components/class/dashboard/students/addStudentsFromPhotoModal/addStudentsFromPhotoModal.html",'<form name="CreateClassModal" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Add students from photo</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="$ctrl.cancel()">+</button> </div> <div class="upload-photo"> <div ng-show="loading"> <div class="loader"></div> </div> <div class="addImg"> <div class="uploadImg {{userData.color}}"> <div class="{{userData.border}} from-disk cursorPointer" ng-show="!picFile " name="pictureUpload" ngf-select ng-model="picFile" ngf-change="uploaded($files)" ngf-min-widht="240" ngf-min-height="160" ngf-max-size="5MB" ngf-accept="\'image/*\'" valid-file> <img class="upload-pic" ng-src="{{userData.iconPlus}}" style="margin:9px"> <p> {{ data.src }}Upload picture</p> </div> <div ng-show="picFile" class="UploadedPicture" id="UploadedPictureContainer" ng-model="picFile" ngf-accept="\'image/*\'"> <img ng-show="!loading" id="uploadedPicture" class="thumb" ngf-thumbnail="picFile"> <canvas id="canvas-over-img"></canvas> </div> </div> <div class="upload-file-error"> <p style="color:red" class="help-block" ng-show="CreateClassModal.pictureUpload.$error.maxSize">\'Maximum picture size is 5 Mb</p> <p style="color:red" class="help-block" ng-show="CreateClassModal.pictureUpload.$error.minHeight">Minimum picture size is 240 x 160 pixels</p> <p style="color:red" class="help-block" ng-show="CreateClassModal.pictureUpload.$error.minWidth">Minimum picture size is 240 x 160 pixels</p> </div> </div> </div> <div class="sub-header select-users fixed-position-sub-header" ng-show="picFile"> <div ng-show="!faces.length"> <div class="loader small-loader"></div> </div> <h3 class="select-users-modal-subtitle" ng-show="faces.length">SELECT STUDENTS TO ADD</h3> </div> <div class="attendance-list-users-list-mode"> <div class="student student-to-add" ng-repeat="face in faces"> <div class="face-container"> <div class="image" ng-style="{\'background-image\':\'url({{face.photo}})\'}"></div> </div> <div class="modal-footer button-set"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="deleteStudent(face)">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" ng-click="addNewStudent(face)">ADD STUDENT </button> </div> </div> </div> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="$ctrl.cancel()">Cancel </button> </div> </form>'),a.put("components/class/dashboard/students/choseClass/choseClass.html",'<div class="select-people"> <div class="modal-header {{\'bg-\' + role }} classdig-people-header"> <h3 class="modal-title classdig-modal-title">Select class to move students in</h3> <button ng-click="$ctrl.close()" type="button" class="close classdig-close-button" data-dismiss="modal">&times;</button> </div> <div class="modal-body padding" style="min-height: 150px"> <div ng-if="!$ctrl.hasClass && !$ctrl.noClasses"> <div id="add-people-loader" class="loader"></div> </div> <div ng-if="$ctrl.hasClass" class="modal-section"> <div class="modal-section-header"> <p>SELECT CLASS</p> <div style="margin-left: 15px" class="modal-section-title"> <div style="display: flex; margin-left: 4px;\r\n    width: 324px;border-bottom: 1px solid #d9d9d9" class="select-class-container"> <div style="flex: 1"> Class </div> <div style="width: 200px; position: relative" class="{{\'c-\' + role}}"> <custom-selector class="{{role + \'-color\'}}" options="$ctrl.options" selected-option="$ctrl.selectedOption.opt"></custom-selector> </div> </div> </div> </div> </div> </div> <div ng-if="$ctrl.hasClass" class="modal-footer classdig-modal-footer"> <button class="btn classdig-cancel-button {{\'c-\' + role }}" type="button" ng-click="$ctrl.cancel() ">CANCEL </button> <button class="btn {{\'bg-\' + role }} classdig-ok-button" type="button" ng-click="$ctrl.ok()">MOVE</button> </div> </div>'),a.put("components/class/dashboard/students/shareStudentsModal/shareStudents.html",'<div class="joinClass"> <form name="email" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Please, enter teacher\'s email</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="colorcover"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop" style="flex-direction: column"> <input type="text" name="mail" class="greyFont new-student-form-input" placeholder="Email" ng-model="mail" ng-maxlength="40" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" required> <div class="errors"> <div ng-messages="email.mail.$error"> <div ng-message="pattern" class="help-block">Please enter a valid email address.</div> </div> <p class="help-block" ng-show="email.mail.$dirty && email.mail.$error.maxlength">E-mail is too long.</p> <p class="help-block" ng-show="submitted && email.mail.$error.required || email.mail.$dirty && email.mail.$error.required">E-mail is required.</p> </div> </div> <hr> </div> </div> </div> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" type="submit" ng-click="submitted = true; shareStudents()">SHARE </button> <p ng-show="showErrorMessage" class="error-message">{{errorMessage}}</p> </div> </form> </div>'),a.put("components/class/dashboard/students/students.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/class/menuClass/menuClass.html\'"></div> <div ng-model="role" class="class-menu {{role}}" ng-init="init()"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Students</div> <div class="amount-of-students">{{students.length}} students</div> </div> <div class="class-menu-item-main-subheader"></div> <div class="col-md-7 col-sm-7 col-xs-6 class-menu-item-context-menu" ng-show="selection.length !== 0" ng-hide="hideCustomButton || role === \'parent\'"> <div class="search-field-holder {{\'c-\'+role}}"> <label> <img src="{{\'images/context_menu/search-\' + role + \'.svg\'}}"> <input type="text" ng-model="searchBy" style="border-color: {{currentUser.color}}" placeholder="{{role === \'teacher\' ? \'Search student\' : \'Search classmate\'}}"> </label> </div> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center-header"> <div class="modify-controls"> <div class="dropdown custom-select"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="nav-menu-text-profile">{{ sortBy }}</span> <i class="glyphicon glyphicon-triangle-bottom"></i> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in sort" class="custom-select-menu-option dropdown-menu-text" ng-click="changeSortBy(item)"> {{item}} </div> </div> </div> <div class="btn-group controll-shape-buttons"> <button type="button" class="btn controll-shape" ng-click="list = true; displayChanged(list)" ng-class="{\'{{currentUser.background}}\': list === true}"> <img ng-if="list === false" src="{{\'../images/students/icon-row-\' + role +\'.png\'}}"> <img ng-if="list === true" src="../images/students/icon-row-default.png"> </button> <button type="button" class="btn controll-shape" ng-click="list =false; displayChanged(list)" ng-class="{\'{{currentUser.background}}\': list === false}"> <img ng-if="list === false" src="../images/students/icon-table-default.png"> <img ng-if="list === true" src="{{\'../images/students/icon-table-\' + role +\'.png\'}}"> </button> </div> </div> </div> <div class="class-menu-item-block-center has-header"> <div class="class-menu-item-notexist"></div> <div class="class-menu-item-exist"> <div class="class-menu-item"> <pick-students></pick-students> </div> </div> <div class="class-menu-item-add" ng-hide="hideCustomButton || role === \'parent\' || pickedStudents.length"> <custom-button class="fixed-appearance"></custom-button> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-hide="pickedStudents.length > 1"> <div class="class-menu-item-block-right" ng-show="pickedStudents.length === 1" style="overflow-y: auto !important; overflow-x: hidden"> <user-info selected-user="studentInformation" show-additional-info="true" on-students-page="true"></user-info> </div> <div class="class-menu-item-block-right" ng-show="role === \'teacher\' && pickedStudents.length !== 1 && requestedStudents.length"> <div class="class-menu-item-block-right-header c-{{role}}"> REQUEST TO JOIN </div> <div class="student-info"> <div class="student-in-requests-container" ng-repeat="student in requestedStudents"> <div class="student-in-requests"> <div class="container-flex"> <div class="student-img" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}"></div> <div class="student-name"> <div> {{student.first_name}} {{student.last_name}} </div> </div> <div class="buttons"> <div> <button class="btn {{currentUser.background}} white-color" ng-click="aceptReject(student, 1)">Accept</button> <button class="btn {{currentUser.color}} {{currentUser.border}}" ng-click="aceptReject(student, 2)">Reject</button> </div> </div> <div style="clear: both"></div> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("components/class/menuClass/menuClass.html",'<div class="left-menu" ng-controller="MenuClassController"> <div class=""> <!-- Information Block--> <div class="subject-class"> <img src="{{mydata.image}}"> <div class="subject-class-name">{{mydata.name}}</div> <div class="subject-class-desc">{{mydata.short_name}}</div> </div> <!-- End. Information Block--> <!-- Menu Classes--> <ul class="subject-menu-link" ng-model="ClassMenuItem" ng-repeat="menuLink in menuLinks"> <a class="subject-menu class" class="{{\'c-\'+role}}" ng-href="{{menuLink.href}}"> <li ng-class="{active: activeItem === menuLink.Id}"> <div> <image class="subject-menu-icon" ng-src="{{menuLink.icon}}{{menuLink.role}}{{menuLink.exte}}"> <span class="subject-menu-title" ng-class="activeItem === menuLink.Id ? \'c-\'+role : noActive"> {{menuLink.title}} </span> </div> </li> </a> </ul> <!-- End. Menu Classes--> </div> </div>'),a.put("components/classes/areUSureModal/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <div ng-if="$ctrl.items.fromClasses"> <span>Do you really want to {{$ctrl.items.actionTitle}}</span> <span ng-show="$ctrl.items.current.length === 1">{{$ctrl.items.current[0].name}} class?</span> <span ng-show="$ctrl.items.current.length !== 1">selected classes?</span> </div> <div ng-if="$ctrl.items.action === \'deleteGroup\'"> <span>Do you really want to {{$ctrl.items.actionTitle}} group {{$ctrl.items.current[0].name}}?</span> </div> <div ng-if="$ctrl.items.fromStudents"> <span ng-if="$ctrl.items.students.length === 1">Do you really want to {{$ctrl.items.actionTitle}} {{$ctrl.items.students[0].first_name}} {{$ctrl.items.students[0].last_name}} from this class?</span> <span ng-if="$ctrl.items.students.length !== 1">Do you really want to {{$ctrl.items.actionTitle}} selected students from this class?</span> </div> <div ng-if="$ctrl.items.action === \'rejectStudents\'"> <span ng-if="$ctrl.items.students.length === 1">Do you really want to {{$ctrl.items.actionTitle}} {{$ctrl.items.students[0].first_name}} {{$ctrl.items.students[0].last_name}} ?</span> <span ng-if="$ctrl.items.students.length !== 1">Do you really want to {{$ctrl.items.actionTitle}} shared students ?</span> </div> <div ng-if="$ctrl.items.action === \'deleteMessage\'"> <span ng-if="$ctrl.items.students.length === 1">Do you really want to {{$ctrl.items.actionTitle}} selected message ?</span> <span ng-if="$ctrl.items.students.length !== 1">Do you really want to {{$ctrl.items.actionTitle}} selected messages ?</span> </div> <div ng-if="$ctrl.items.action === \'deleteBehavior\'"> <span ng-if="$ctrl.items.students.length !== 1">Do you really want to {{$ctrl.items.actionTitle}} {{$ctrl.items.behavior.description}} behavior type?</span> </div> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">{{$ctrl.items.actionTitle}}</button> </div> </div> </div>'),
a.put("components/classes/classExport/classExport.html",'<form name="CreateGradableItem" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Choose export options</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <div class="export-items-list"> <div class="export-item" ng-repeat="item in exportItems" ng-click="hideError()" multi-select multi-select-item="item" multi-select-selection="selection"> <img ng-src="{{item.img +user.data.role+item.ext}}" ng-show="!(selection.selectedItems.indexOf(item.id) != -1)"> <img ng-src="{{item.imgActive+user.data.role+item.ext}}" ng-show="selection.selectedItems.indexOf(item.id) != -1"> </div> </div> <div class="modal-footer" style="position:relative"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()">Cancel </button> <div class="grade-server-error help-block" ng-show="typeError" id="server-error-create-item">Please choose options</div> <button class="btn-createClass {{userData.background}}" style="cursor:pointer" type="submit" ng-click="submitted=true; ok(CreateExamModal.$invalid)">EXPORT TO EMAIL </button> </div> </form>'),a.put("components/classes/classExport/enterEmail/enterEmail.html",'<div class="joinClass"> <form name="CreateClassModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}" ng-show="!codeWasSend"> <h3 class="modal-title" id="modal-title">Export class</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="colorcover" ng-if="!codeWasSend"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <input id="className" class="{{userData.color}} class-name" ng-model="exportClass.email" name="ClassName" ng-minlength="2" ng-maxlength="50" placeholder="Enter email" type="email" required> </div> <hr> <p ng-show="submitted && CreateClassModal.ClassName.$error.required" class="help-block">Email is required.</p> <p ng-show="!(submitted && CreateClassModal.ClassName.$error.required) && CreateClassModal.ClassName.$dirty && CreateClassModal.ClassName.$invalid" class="help-block">Enter valid email.</p> </div> </div> </div> <div class="modal-footer" ng-if="!codeWasSend"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}} invite-parent-button" type="submit" ng-click="submitted = true; ok()">Send </button> <p ng-show="showErrorMessage" class="error-message">{{errorMessage}}</p> </div> <div ng-if="codeWasSend" class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <!--<h3 class="modal-title" id="modal-title">Enter class code</h3>--> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text" ng-show="codeWasSend">Class export has been sent.</div> </div> </form> </div>'),a.put("components/classes/confirmationModal/confirmationModal.html",'<div class="joinClass"> <form name="CreateClassModal" ng-submit="submitCreateClassModal()" novalidate> <div class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text">{{message}}</div> </div> </form> </div>'),a.put("components/feed/addCommentModal/addCommentModal.html",'<div class="joinClass"> <form name="CreateClassModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}" ng-show="!codeWasSend"> <h3 class="modal-title" id="modal-title">Add comment</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="colorcover" ng-show="!codeWasSend"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <input id="className" class="{{userData.color}} class-name" ng-model="comment" name="ClassName" ng-minlength="2" ng-maxlength="200" placeholder="Comment" required> </div> <hr> <p ng-show="submitted && CreateClassModal.ClassName.$error.required" class="help-block fixed-error-massage">Comment is required.</p> <p ng-show="CreateClassModal.ClassName.$dirty && CreateClassModal.ClassName.$error.maxlength" class="help-block fixed-error-massage">Comment is too long.</p> </div> </div> </div> <div class="modal-footer" ng-show="!codeWasSend"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" type="submit" ng-click="submitted = true; sendComment()">Ok </button> <p ng-show="showErrorMessage" class="error-message">{{errorMessage}}</p> </div> <div ng-show="codeWasSend" class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <!--<h3 class="modal-title" id="modal-title">Enter class code</h3>--> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text">Your request has been sent.</div> </div> </form> </div>'),a.put("components/feed/areUSureModal/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <span>Do you really want to delete feed ?</span> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">delete</button> </div> </div> </div>'),a.put("components/feed/areUSureModalComment/areUSureModal.html",'<div class="are-u-sure-modal"> <div class="modal-question"> <span>Do you really want to delete comment ? </span> </div> <div class="modal-footer"> <div class="btn-group modal-buttons"> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.cancel()">cancel</button> <button type="button" class="btn {{\'c-\'+role}}" ng-click="$ctrl.approve()">delete</button> </div> </div> </div>'),a.put("components/feed/menuFeed/menuFeed.html",'<div class="left-menu" ng-controller="MenuFeedController"> <div class="" style="margin-top: 1vh"> <!-- Class Story--> <ul class="subject-menu-link"> <a class="subject-menu class" class="{{}}"> <li ng-class="{active: activeItem === ClassStory.Id}" ng-click="functionShowListOfClassses()"> <div> <image class="subject-menu-icon iconFeedMenu" ng-src="{{ClassStory.icon}}{{ClassStory.role}}{{ClassStory.exte}}"> <span class="subject-menu-title" style="font-weight: bold" ng-class="activeItem === ClassStory.Id ? \'c-\'+role : noActive"> {{ClassStory.title}} </span> <image class="subject-menu-icon iconFeedMenu iconArrowFeedMenu" ng-src="{{ClassStory.arrow}}"> </div> </li> </a> </ul> <!-- Class Story--> <!-- Class List--> <div infinite-scroll="classesList.nextPage()" infinite-scroll-disabled="classesList.busy" infinite-scroll-distance="0" class="listOfClasses" ng-show="showListOfClasses"> <ul class="subject-menu-link" ng-model="ClassMenuItem" ng-repeat="menuLink in classesList.items"> <a class="subject-menu class" ng-href="{{menuLink.href}}"> <li ng-click="displayClassFeedFunction(menuLink)"> <div> <span class="subject-menu-title feedData" id="{{menuLink.id}}"> {{catClassName(menuLink.name)}} </span> </div> </li> </a> </ul> </div> <!-- Class List--> <!-- Community  Story--> <ul class="subject-menu-link" style="margin-top: 1vh"> <a class="subject-menu class"> <li ng-class="{active: activeItem === CommunityStory.Id}" ng-click="functionShowListOfCommunity()"> <div> <image class="subject-menu-icon iconFeedMenu" ng-src="{{CommunityStory.icon}}{{CommunityStory.role}}{{CommunityStory.exte}}"> <span class="subject-menu-title" style="font-weight: bold" ng-class="activeItem === CommunityStory.Id ? \'c-\'+role : noActive"> {{CommunityStory.title}} </span> <image class="subject-menu-icon iconFeedMenu iconArrowFeedMenu" ng-src="{{CommunityStory.arrow}}"> </div> </li> </a> </ul> <!-- Community  Story--> <!-- Community  List--> <div ng-show="showListOfComunity" class="listOfCommunity"> <ul class="subject-menu-link" ng-model="ClassMenuItem" ng-repeat="menuLink in communityList"> <a class="subject-menu class"> <li ng-click="displayCommunityFeedFunction(menuLink)"> <div> <span class="subject-menu-title feedData" id="{{menuLink.id}}"> {{menuLink.title}} </span> </div> </li> </a> </ul> </div> <!-- Community  List--> </div> </div>'),a.put("components/findPeople/findPeopleModal/findPeopleModal.html",'<form name="DetailedSearch" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Detailed search</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="personal-information-container"> <!----> <div class="color"> <div class="choose-semester"> <!-- ===== Username ===== --> <div class="dig-prop"> <input id="shortName" class="greyFont" ng-model="search.username" name="Username" ng-minlength="3" ng-maxlength="32" placeholder="Username"> </div> <hr> <p ng-show="DetailedSearch.Username.$dirty && DetailedSearch.Username.$error.minlength" class="help-block fixed-error-massage">Username name is too short.</p> <p ng-show="DetailedSearch.Username.$dirty && DetailedSearch.Username.$error.maxlength" class="help-block fixed-error-massage">Username name is too long.</p> <!-- ===== Country ===== --> <div class="dig-prop"> <input class="greyFont" ng-model="search.country" name="Country" ng-minlength="3" ng-maxlength="32" placeholder="Country"> </div> <hr> <p ng-show="DetailedSearch.Country.$dirty && DetailedSearch.Country.$error.minlength" class="help-block fixed-error-massage">Country name is too short.</p> <p ng-show="DetailedSearch.Country.$dirty && DetailedSearch.Country.$error.maxlength" class="help-block fixed-error-massage">Country name is too long.</p> <!-- ===== City ===== --> <div class="dig-prop"> <input class="greyFont" ng-model="search.city" name="City" ng-minlength="3" ng-maxlength="32" placeholder="City"> </div> <hr> <p ng-show="DetailedSearch.City.$dirty && DetailedSearch.City.$error.minlength" class="help-block fixed-error-massage">City name is too short.</p> <p ng-show="DetailedSearch.City.$dirty && DetailedSearch.City.$error.maxlength" class="help-block fixed-error-massage">City name is too long.</p> <!-- ===== School ===== --> <div class="dig-prop"> <input class="greyFont" ng-model="search.school" name="School" ng-minlength="2" ng-maxlength="32" placeholder="School"> </div> <hr> <p ng-show="DetailedSearch.School.$dirty && DetailedSearch.School.$error.minlength" class="help-block fixed-error-massage">School name is too short.</p> <p ng-show="DetailedSearch.School.$dirty && DetailedSearch.School.$error.maxlength" class="help-block fixed-error-massage">School name is too long.</p> </div> </div> <!----> <div class="help-block search-validation" ng-show="SearchNotValid">Please, enter at least one field</div> </div> <!-- FOOTER--> <div class="modal-footer" style="padding: 7px"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-click="createStudentClicked = true; ok()">SEARCH </button> </div> </form>'),a.put("components/groups/confirmationModalGroups/confirmationModalGroups.html",'<div class="joinClass"> <form name="CreateClassModal" novalidate> <div class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div ng-if="items === \'reject\'" class="text">User was successfully removed. </div> <div ng-if="items === \'accept\'" class="text">User was successfully accepted. </div> <div ng-if="items === \'invite1\'" class="text">User was successfully invited. </div> <div ng-if="items === \'invite2\'" class="text">Users were successfully invited. </div> </div> </form> </div>'),a.put("components/groups/createGroup/createGroup.html",'<form name="CreateGroupModal" class="groups-form" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Create group</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="colorcover"> <div class="color"> <div class="choose-semester"> <div class="dig-prop"> <input id="groupName" class="class-name greyFont" ng-model="newGroup.name" name="groupName" ng-minlength="2" ng-maxlength="32" placeholder="Group name" required> </div> <hr> <p ng-show="CreateGroupModal.groupName.$dirty && CreateGroupModal.groupName.$error.minlength" class="help-block fixed-error-massage">Group name is too short.</p> <p ng-show="CreateGroupModal.groupName.$dirty && CreateGroupModal.groupName.$error.maxlength" class="help-block fixed-error-massage">Group name is too long.</p> <p ng-show="submited && CreateGroupModal.groupName.$error.required" class="help-block fixed-error-massage">Group name is required.</p> <div class="dig-prop" style="justify-content: initial"> <label class="dig-label" for="classLocation">Group code:</label> <input id="classLocation" class="locationInput c-{{role}}" ng-model="newGroup.code" name="groupCode" readonly> </div> <hr> </div> </div> <div class="color"> <div class="addImg"> <h4> <img src="images/modal/icon-camera_3x.jpg" style="margin-right:10px;width: 16px;\r\n    height: 12px;margin-bottom: 1px"> Add image </h4> <div class="uploadImg {{userData.color}}"> <div class="{{userData.border}} from-disk cursorPointer" name="pictureUpload" ngf-select ng-model="picFile" ngf-min-widht="240" ngf-min-height="160" ngf-max-size="5MB" ngf-resize="{width: 240, height: 160, centerCrop: true}" ngf-accept="\'image/*\'" valid-file required> <img class="upload-pic" ng-src="{{userData.iconPlus}}" style="margin:9px"> <p> {{ data.src }}Upload picture</p> </div> <div ng-show="picFile " class="UploadedPicture" ngf-select ng-model="picFile" ngf-accept="\'image/*\'"> <img class="thumb" ngf-thumbnail="picFile"></div> </div> <div ng-show="picFile.progress >=0 && picFile.progress<100" style="position: absolute;width: 82px"> <progress-bar progress-number="progressNumber"></progress-bar> </div> <div class="upload-file-error"> <p style="color:red" class="help-block" ng-show="CreateGroupModal.pictureUpload.$error.maxSize">\'Maximum picture size is 5 Mb</p> <p style="color:red" class="help-block" ng-show="CreateGroupModal.pictureUpload.$error.minHeight">Minimum picture size is 240 x 160 pixels</p> <p style="color:red" class="help-block" ng-show="CreateGroupModal.pictureUpload.$error.minWidth">Minimum picture size is 240 x 160 pixels</p> <p style="color:red" class="help-block" ng-show="submited && CreateGroupModal.pictureUpload.$error.required">Group image is required</p> </div> </div> </div> </div> <!-- FOOTER--> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-click="submited = true; ok()"> <span ng-if="!editing">CREATE GROUP</span> <span ng-if="editing">EDIT GROUP</span> </button> </div> </form>'),a.put("components/groups/group/dashboard/discussions/discussions.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/groups/group/menu/menu.html\'"></div> <div ng-model="role" class="class-menu {{role}} groups-discussions" ng-init="init()"> <div class="class-item-header groups-discussions-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <!--<div>--> <div class="{{\'c-\'+role}}">Discussions</div> <div class="classes-count">{{dicussionsCount}} discussions</div> <!--</div>--> </div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div class="mess-block"> <div class="container"> <div class="row"> <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 padding"> <div class="dialog-list"> <div class="dialog-wrapper" id="dialog-list"> <div infinite-scroll-container="\'#dialog-list\'" infinite-scroll="groupDiscussions.nextPageGroups()" infinite-scroll-disabled="groupDiscussions.busy" infinite-scroll-distance="0"> <div ng-click="changeRoom(last)" ng-class="{\'mess-active {{\'border-bg-\' + role }}\': active == last.chat_room}" ng-repeat="last in groupDiscussions.items" class="dialog-last-mess"> <div ng-class="{\'active-mess\': active == last.chat_room}" class="mess-container"> <div> <div ng-show="last.unread_count > 0" class="{{\'unread bg-\' + role }}"> <span>{{last.unread_count}}</span> </div> <img class="{{\'border-bg-\'+ role}}" ng-src="{{last.sender.image}}" alt=""> <div class="content-block"> <div class="sender-name"> {{last.name}} <span class="mess-date">{{last.date_time.date | datechat}}</span> </div> <div class="mes-content"> {{last.last_message}} </div> </div> </div> </div> </div> <div id="dialog-loader" class="loader" style="display: none"></div> </div> </div> <div style="position: relative"> <custom-button style="position: absolute; bottom: 20px; right: 20px"></custom-button> </div> </div> </div> <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 padding pl-15"> <div class="chat-container"> <div ng-if="active!==-1" class="chat-header" ng-hide="startRequest" style="min-height: 35px"> <div class="h {{\'c-\' + role }}"> <p> {{chatTitle}} </p> </div> <div> </div> </div> <div id="chat" class="chat" onscroll="scrollEventHendler()"> <div ng-show="active!==-1" id="container-chat"> <div id="chat-loader" class="loader" style="display: none"></div> <div class="message-container" ng-repeat="(id, message) in currentRoom.chat.items track by id" my-repeat-directive> <div ng-class="{\'rtl\': message.sender.id === user.id}" class="message" ng-click=" message.sender.id === user.id && selectMessage(message)"> <div ng-class="{\'selected-message\': selectedMessages.indexOf(message) != -1}"> <div class="img-with-date"> <img ng-src="{{message.sender.image}}" alt=""> <span class="date">{{message.date_time.date | datemessage}}</span> </div> <div ng-class="{\'message-me {{\'bg-\' + role }}\': message.sender.id === user.id}" class="message-content"> <div class="holder-flex"> <p ng-bind-html="message.contentR"> <!--{{message.contentR}}--> </p> <img ng-if="message.attachments.length" class="chat-img" src="{{message.attachments[0].link}}"> </div> </div> </div> </div> </div> </div> </div> <div ng-show="active!==-1" class="type-message"> <div class="type-message-container height"> <div class="row height margin"> <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 height padding"> <div class="photo-container height"> <div class="photo {{ role }}" ng-show="!picFile" name="pictureUpload" ngf-select ng-model="picFile" ngf-min-widht="240" ngf-min-height="160" ngf-max-size="5MB" ngf-resize="{width: 240, height: 160, centerCrop: true}" ngf-accept="\'image/*\'" valid-file> </div> <div ng-show="picFile" class="UploadedPicture" ngf-select ng-model="picFile" ngf-accept="\'image/*\'"> <img class="thumb" ngf-thumbnail="picFile"> </div> </div> </div> <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 height padding"> <div class="message-input-container height width"> <div class="scroll-hider"></div> <textarea autofocus maxlength="200" id="type-message" ng-keyup="resizeArea($event)" class="message-input width" name="Message" cols="40" rows="1" ng-model="content" placeholder="Type your message…"></textarea> </div> </div> <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 height relative padding"> <div ng-if="!loadingImg" ng-click="sendMessage()" class="send {{\'c-\' + role }}"> Send </div> <div ng-if="loadingImg" class="loading--message-image"> Loading image... </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("components/groups/group/dashboard/discussions/newDiscussionModal/newDiscussionModal.html",'<div class="joinClass"> <form name="CreateClassModal" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">New discussion</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="colorcover" ng-show="!codeWasSend && !notEnoughusers"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <input id="className" class="{{userData.color}} class-name" ng-model="newDiscussion.name" name="ClassName" ng-minlength="2" placeholder="Discussion title" required> </div> <hr> <p ng-show="submitted && CreateClassModal.ClassName.$error.required" class="help-block">Discussion name is required.</p> <p ng-show="CreateClassModal.ClassName.$error.minlength" class="help-block">Discussion name is to short.</p> </div> </div> </div> <div ng-if="notEnoughusers" style="text-align: center;\r\n    margin: 30px;\r\n    font-size: 17px"> <span>There is not enough users in the group to create a discussion.</span> </div> <div class="modal-footer" ng-show="!codeWasSend"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" type="submit" ng-click="submitted = true; createDiscussion()" ng-if="!notEnoughusers">CREATE </button> <p ng-show="showErrorMessage" class="error-message">{{errorMessage}}</p> </div> </form> </div>'),a.put("components/groups/group/dashboard/invite/invite.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/groups/group/menu/menu.html\'"></div> <div ng-model="role" class="class-menu {{role}} invite-members"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Invite member</div> </div> <div class="class-menu-item-context-menu col-md-7 col-sm-7 col-xs-6" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center"> <div class="class-menu-item-exist" style="overflow: hidden"> <form name="CreateClassModal" ng-submit="" novalidate> <div class="sub-header select-users" ng-show="showMembersHeader"> <h3 class="select-users-modal-subtitle">SELECT CLASS</h3> </div> <div ng-if="!classForRequest" style="height: 100px"> <div class="loader"></div> </div> <div class="class-picker" ng-show="classForRequest"> <div class="title"> <span>Class</span> </div> <div class="picker"> <div class="dropdown custom-select c-{{role}}"> <div class="custom-select-title dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="glyphicon glyphicon-menu-down"></i> <span class="nav-menu-text-profile">{{ sortBy }}</span> </div> <div class="dropdown-menu custom-select-menu"> <div ng-repeat="item in sort  track by $index" class="custom-select-menu-option dropdown-menu-text" ng-click="changeSortBy(item)"> {{item.name}} </div> </div> </div> </div> </div> <!--<choose-user-role></choose-user-role>--> <div class="choose-user-role" ng-show="classForRequest"> <div class="user-role outline"> <div ng-click="selectRole(r.url)" ng-repeat="r in roles" class="{{r.id}} outline" ng-class="{\'active {{\'role-\' + role}} {{\'c-\' + role}}\': selectedRole == r.url}"> {{r.description}} </div> </div> </div> <select-users></select-users> <div class="invite-members-footer"> <div class="modal-footer" style="padding: 9px"> <a class="btn-cansel {{userData.color}}" type="button" ng-href="#/groups">Cancel </a> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-click="ok()">INVITE </button> </div> </div> </form> </div> </div> </div> </div> </div>'),a.put("components/groups/group/dashboard/members/members.html",'<div id="header" ng-include="\'components/header/header.html\'"></div> <div id="menuClass" ng-include="\'components/groups/group/menu/menu.html\'"></div> <div ng-model="role" class="class-menu {{role}} members-from-groups"> <div class="class-item-header"> <div class="class-menu-item-main-header col-md-5 col-sm-5 col-xs-6"> <div class="{{\'c-\'+role}}">Members</div> </div> <div class="class-menu-item-context-menu col-md-7col-sm-7 col-xs-6" ng-show="selection.length !== 0"> <context-menu></context-menu> </div> </div> <div class="class-menu-item-container"> <div class="class-menu-item-block-center-container"> <div class="class-menu-item-block-center"> <div class="class-menu-item-exist" style="overflow: hidden"> <div ng-class="\'attendance-list-users-list-mode\'"> <div class="student" ng-repeat="student in students" ng-class="{\'user-wants-to-join \': student.status === 0}"> <div class="image" ng-click="pickStudent(student);" ng-style="{\'background-image\':\'url({{student.photo || student.image}})\'}" ng-class="{\'{{userData.color}} {{role}}-userListBorder\': selectedStudent.indexOf(student) != -1}"> <div class="name" ng-click="pickStudent(student);"> {{student.first_name}} {{student.last_name}} </div> </div> <div class="buttons" ng-if="admin"> <div ng-if="student.status === 0"> <button class="btn {{userData.background}} white-color" ng-click="accept(student)">Accept</button> <button class="btn {{userData.color}} {{userData.border}}" ng-click="rejectRemove(student)">Reject</button> </div> <div ng-if="student.status === 1 && user.pickedGroup.user_id !== student.id"> <button class="btn {{userData.background}} white-color" ng-click="rejectRemove(student)">Remove</button> </div> </div> <div class="buttons" ng-if="!admin"> <div ng-if="student.status === 1 && user.data.id === student.id"> <button class="btn {{userData.background}} white-color" ng-click="rejectRemove(student, true)">Leave group</button> </div> </div> <div style="clear: both"></div> </div> </div> </div> </div> </div> <div class="class-menu-item-block-right-container" ng-show="selectedStudent.length"> <div class="class-menu-item-block-right"> <div class="student-info" style="height: 100%"> <user-info selected-user="selectedStudent[0]" show-additional-info="true"></user-info> </div> </div> </div> </div> </div>'),a.put("components/groups/group/menu/menu.html",'<div class="left-menu" ng-controller="MenuGroupController"> <div class=""> <!-- Information Block--> <div class="subject-class"> <img src="{{mydata.image}}"> <div class="subject-class-name">{{mydata.name}}</div> <!--<div class="subject-class-desc">{{mydata.short_name}}</div>--> </div> <!-- End. Information Block--> <!-- Menu Classes--> <ul class="subject-menu-link" ng-model="ClassMenuItem" ng-repeat="menuLink in menuLinks"> <a class="subject-menu class" class="{{\'c-\'+role}}" ng-href="{{menuLink.href}}"> <li ng-class="{active: activeItem === menuLink.Id}"> <div> <image class="subject-menu-icon" ng-src="{{menuLink.icon}}{{menuLink.role}}{{menuLink.exte}}"> <span class="subject-menu-title" ng-class="activeItem === menuLink.Id ? \'c-\'+role : noActive"> {{menuLink.title}} </span> </div> </li> </a> </ul> <!-- End. Menu Classes--> </div> </div>'),a.put("components/groups/joinGroup/joinGroup.html",'<div class="joinClass"> <form name="joinGroup" novalidate> <div class="modal-header {{userData.background}}" ng-show="!codeWasSend"> <h3 class="modal-title" id="modal-title">Enter group code</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="colorcover" ng-show="!codeWasSend"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <input id="groupCode" class="{{userData.color}} class-name" ng-model="code" name="groupCode" ng-minlength="2" ng-maxlength="10" placeholder="Group code" required> </div> <hr> <p ng-show="submitted && joinGroup.groupCode.$error.required" class="help-block">Group code is required.</p> </div> </div> </div> <div class="modal-footer" ng-show="!codeWasSend"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <p ng-show="showErrorMessage" class="error-message" style="margin: 0">Could not find <br> the Group in our database</p> <button class="btn-createClass {{userData.background}}" type="submit" ng-click="submitted = true; join()">Join </button> </div> <div ng-show="codeWasSend" class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text">Your request has been sent.</div> </div> </form> </div>'),a.put("components/premium/EnterCodeModal/EnterCode.html",'<div class="joinClass"> <form name="CreateClassModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}" ng-show="!codeWasSend"> <h3 class="modal-title" id="modal-title">Enter Code</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="colorcover" ng-show="!codeWasSend"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <input id="className" class="{{userData.color}} class-name" ng-model="premiumCode" name="ClassName" ng-minlength="2" ng-maxlength="50" placeholder="Enter code" required> </div> <hr> <p ng-show="submitted && CreateClassModal.ClassName.$error.required" class="help-block">Code is required.</p> </div> </div> </div> <div class="modal-footer" ng-show="!codeWasSend"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}} invite-parent-button" type="submit" ng-click="submitted = true; ok(CreateClassModal.ClassName.$error.required)">Go </button> <p ng-show="showErrorMessage" class="error-message">{{errorMessage}}</p> </div> <div ng-show="codeWasSend" class="dialog-on-code-send"> <div class="modal-header {{userData.background}}"> <!--<h3 class="modal-title" id="modal-title">Enter class code</h3>--> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="text">Your request has been sent.</div> </div> </form> </div>'),a.put("components/premium/paymentModal/paymentModal.html",'<form name="PaymentForm" ng-submit="submitCreateClassModal()" novalidate id="payment-form" ng-show="!showPaymentCode"> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Payment options</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()" style="">+</button> </div> <div class="buy-discount" ng-show="paymentData.cummon"> <div class="buy-discount-block"> <label> <div class="buy-discount-label">Enter amount of teacher</div> <input class="buy-discount-input" type="number" size="20" min="1" max="30" ng-show="paymentData.discount===30" ng-model="amountOfTeacher"> <input class="buy-discount-input" type="number" size="20" min="31" max="40" ng-show="paymentData.discount===40" ng-model="amountOfTeacher"> <input class="buy-discount-input" type="number" size="20" min="41" ng-show="paymentData.discount===50" ng-model="amountOfTeacher"> </label> </div> <div class="buy-discount-block amount-after"> <label> <div class="buy-discount-label">Amount after {{paymentData.discount}}% discount</div> <div class="buy-discount-input" type="text" size="20">{{afterDiscount}}</div> </label> </div> </div> <div> <div class="card-data-title">CREDIT CARD DETAILS</div> <div class="card-data"> <div class="payment-form"> <div class="form-row"> <label class="card-number"> <div class="card-input-label">Card Number</div> <div class="credit-card-img-container"><img src="images/icon-credit-card.png"> </div> <input type="text" size="20" data-stripe="number" class="card-input" placeholder="Card Number" style="padding-right: 110px" name="CardNumber"> </label> </div> <div class="form-row" style="margin-top: 20px"> <label class="card-expiry"> <div class="card-input-label">Expiry date</div> <input type="text" size="10" data-stripe="exp" class="card-input" placeholder="MM/YY" name="CardExp"> </label> <label class="card-cvc"> <div class="card-input-label">CVC</div> <input type="text" size="4" data-stripe="cvc" class="card-input" placeholder="CVC" name="CardCVC"> </label> </div> </div> </div> </div> <div ng-show="!paymentData.cummon" style="height:100px"> </div> <div ng-show="paymentData.cummon"> <div class="card-data-title">SCHOOL SUBSCRIBER</div> <div class="school-name-container"> <div class="form-row"> <label class="card-number"> <div class="card-input-label">Write your school name</div> <input type="text" size="20" class="card-input" placeholder="Your school name" ng-model="schoolName"> </label> </div> </div> <div class="school-addition-information">*Promotion code will be assosiated with the school name. Make sure all teachers will use the same school name </div> </div> <div class="modal-footer payment-form-footer"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()">Cancel </button> <div class="grade-server-error help-block" style="left:auto;right: 130px"><span class="payment-errors"></span></div> <button class="btn-createClass cursorPointer {{userData.background}}" style="padding: 0 25px" type="submit" ng-click="submitted=true; ok(PaymentForm.$invalid)">PAY $$$ </button> </div> <div id="user-loader" class="loader" style="position: absolute; top: 50%; right: 50%; margin: 0; display: none"></div> </form> <form ng-submit="submitCreateClassModal()" novalidate id="congratulation-form" ng-show="showPaymentCode"> <div class="modal-header {{userData.background}}"> <h3 class="modal-title">Congratulation</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="payment-background"> <div class="payment-congratulation"> <div class="class-code-title">Congratulation!</div> <div class="class-code-container"> <div class="class-code-label">Here is your code:</div> <div class="class-code-input">{{premiumCode}}</div> </div> <div class="class-code-addition-information">The code must be entered by teachers <br> within 30 days after the purchasing the code.</div> </div> </div> <div class="modal-footer payment-form-footer"> <button class="btn-cansel {{userData.color}} cursorPointer" type="button" ng-click="cancel()" ng-show="false">Cancel </button> <div class="grade-server-error help-block" style="left:auto;right: 95px"><span class="payment-errors"></span></div> <button class="btn-createClass cursorPointer {{userData.background}}" style="padding: 0 25px" ng-click="cancel()">CLOSE </button> </div> </form>'),
a.put("components/profile/editProfileModal/editProfileModal.html",'<form name="CreateStudentModal" ng-submit="" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">Edit Profile</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <div class="sub-header"> <h3>PERSONAL INFORMATION</h3> </div> <div class="personal-information-container"> <div class="top-block"> <div class="img-upload-container"> <div class="upload-form"> <button id="btn-add-photo-student" type="image" name="fileStudent" accept="image/*" ng-model="studentImage" ngf-change="uploaded($files)" ngf-select ngf-max-size="5MB" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-resize="{width: 200, height: 200}" required> <img class="add-photo clip-circle" ng-hide="studentImage" src="images/auth/add-photo_3x.png"> <img class="thumb profile-file clip-circle" ng-show="CreateStudentModal.file.$valid" ngf-thumbnail="studentImage"> </button> <div class="errors"> <p ng-show="CreateStudentModal.fileStudent.$error.maxSize " class="help-block">File exceeds allowed size </p> <p ng-show="createStudentClicked && CreateStudentModal.fileStudent.$error.required" class="help-block">Student photo is required</p> <p ng-show="CreateStudentModal.fileStudent.$error.minWidth " class="help-block">File invalid min width </p> <p ng-show="CreateStudentModal.fileStudent.$error.minHeight " class="help-block">File invalid min height </p> </div> </div> </div> <div class="name-container"> <div class="first-middle-name"> <div style="display: flex"> <div class="first-name form-padding"> <input class="greyFont new-student-form-input" ng-model="user.first_name" name="newStudent_first_name" ng-minlength="2" placeholder="First Name*" required> <div class="errors"> <p ng-show="createStudentClicked && CreateStudentModal.newStudent_first_name.$error.required || CreateStudentModal.newStudent_first_name.$dirty && CreateStudentModal.newStudent_first_name.$error.required" class="help-block">First name is required.</p> <p ng-show="CreateStudentModal.newStudent_first_name.$error.minlength" class="help-block">First name is to short</p> </div> </div> <div class="middle-name form-padding"> <input class="greyFont new-student-form-input" ng-model="user.middle_name" name="newStudent_middle_name" ng-minlength="2" placeholder="Middle Name"> <div class="errors"> <p ng-show="CreateStudentModal.newStudent_middle_name.$error.minlength" class="help-block">Middle name is to short</p> </div> </div> </div> </div> <div class="last-name form-padding"> <input class="greyFont new-student-form-input" ng-model="user.last_name" name="newStudent_last_name" ng-minlength="2" placeholder="Last Name*" required> <div class="errors"> <p ng-show="createStudentClicked && CreateStudentModal.newStudent_last_name.$error.required || CreateStudentModal.newStudent_last_name.$dirty && CreateStudentModal.newStudent_last_name.$error.required" class="help-block">Last name is required.</p> <p ng-show="CreateStudentModal.newStudent_last_name.$error.minlength" class="help-block">Last name is to short</p> </div> </div> </div> <div class="phone-email-container"> <div class="phone form-padding"> <input class="greyFont new-student-form-input" ng-model="user.phone" name="newStudent_phone" placeholder="Phone" type="tel"> </div> <div class="email form-padding"> <input type="text" name="newStudent_email" class="greyFont new-student-form-input" placeholder="Email*" ng-model="user.email" ng-maxlength="40" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/" style="background: white" disabled> <div class="errors"> <div ng-messages="CreateStudentModal.newStudent_email.$error"> <div ng-message="pattern" class="help-block">Please enter a valid email address.</div> </div> <p class="help-block" ng-show="CreateStudentModal.newStudent_email.$dirty && CreateStudentModal.newStudent_email.$error.maxlength">E-mail is too long.</p> <p class="help-block" ng-show="createStudentClicked && CreateStudentModal.newStudent_email.$error.required || CreateStudentModal.newStudent_email.$dirty && CreateStudentModal.newStudent_email.$error.required">Student E-mail is required.</p> </div> </div> </div> </div> <div class="bottom-block"> <div class="gender-container greyFont"> <div class="gender gender-student male" ng-class="{\'{{\'role-\' + role}}\' : user.gender === 1}" ng-click="setGender(1)"> <span ng-class="{\'c-{{role}}\' : user.gender === 1}">Male</span> </div> <div class="gender gender-student female" ng-class="{\'{{\'role-\' + role}}\' : user.gender === 2}" ng-click="setGender(2)"> <span ng-class="{\'c-{{role}}\' : user.gender === 2}">Female</span> </div> <div class="gender gender-student other" ng-class="{\'{{\'role-\' + role}}\' : user.gender === 3}" ng-click="setGender(3)"> <span ng-class="{\'c-{{role}}\' : user.gender === 3}">Other</span> </div> </div> <div class="student-id-container"> <div class="student-id form-padding"> <input class="greyFont new-student-form-input" ng-model="user.student_id" name="newStudent_id" ng-minlength="2" placeholder="Student ID"> <div class="errors"> <p ng-show="CreateStudentModal.newStudent_id.$error.minlength" class="help-block">Student ID is to short</p> </div> </div> </div> </div> <div class="bottom-block"> <div class="gender-container greyFont"> </div> <div class="student-id-container"> <div class="student-id form-padding"> <input class="greyFont new-student-form-input" ng-model="user.school_name" name="schoolName" ng-minlength="2" placeholder="School name"> <div class="errors"> <p ng-show="CreateStudentModal.schoolName.$error.minlength" class="help-block">School name is to short</p> </div> </div> </div> </div> <div class="bottom-block"> <div class="gender-container greyFont"> </div> <div class="student-id-container"> <div class="student-id form-padding"> <input class="greyFont new-student-form-input" ng-model="user.city" name="city" ng-minlength="2" placeholder="City"> <div class="errors"> <p ng-show="CreateStudentModal.city.$error.minlength" class="help-block">City is to short</p> </div> </div> </div> </div> <div class="bottom-block"> <div class="gender-container greyFont"> </div> <div class="student-id-container"> <div class="student-id form-padding"> <input class="greyFont new-student-form-input" ng-model="user.country" name="country" ng-minlength="2" placeholder="Country"> <div class="errors"> <p ng-show="CreateStudentModal.country.$error.minlength" class="help-block">Country is to short</p> </div> </div> </div> </div> </div> <!-- NOTE --> <div class="sub-header"> <h3>NOTE</h3> </div> <div class="poll-modal-create-question poll-modal-note"> <div class="question note"> <input id="" class="answear-text greyFont" type="text" placeholder="Write your note here" ng-model="user.note"> </div> </div> <!-- FOOTER--> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <button class="btn-createClass {{userData.background}}" style="width: auto" type="submit" ng-click="createStudentClicked = true; ok()">SAVE </button> </div> </form>'),a.put("scripts/directives/CreateClassModalWindow/CreateClassModal.html",'<form name="CreateClassModal" ng-submit="submitCreateClassModal()" novalidate> <div class="modal-header {{userData.background}}"> <h3 class="modal-title" id="modal-title">{{$ctrl.modalConstant.header}}</h3> <button class="modal-btn-close {{userData.background}}" type="button" ng-click="cancel()">+</button> </div> <!-- =============== Class Details =======================--> <div class="sub-header"> <h3>Class details &amp; Code</h3> </div> <div class="colorcover"> <div class="color"> <div class="choose-semester"> <!-- ===== Name Class ===== --> <div class="dig-prop"> <!--<label class="dig-label class-name" for = "className">Class name</label>--> <input id="className" class="class-name greyFont" ng-model="currentClass.name" name="ClassName" ng-minlength="2" ng-maxlength="32" placeholder="Class name" required> </div> <hr> <p ng-show="CreateClassModal.ClassName.$dirty && CreateClassModal.ClassName.$error.minlength" class="help-block fixed-error-massage">Class name is too short.</p> <p ng-show="CreateClassModal.ClassName.$dirty && CreateClassModal.ClassName.$error.maxlength" class="help-block fixed-error-massage">Class name is too long.</p> <!--<p ng-show="CreateClassModal.ClassName.$dirty && CreateClassModal.ClassName.$error.required" class="help-block">Class name is required.</p>--> <p ng-show="submitted && CreateClassModal.ClassName.$error.required" class="help-block fixed-error-massage">Class name is required.</p> <!--<p ng-show="CreateClassModal.ClassName.$invalid && !CreateClassModal.ClassName.$pristine" class="help-block">--> <!--Class name is required.</p>--> <!-- ===== Short Name ===== --> <div class="dig-prop"> <!--<label class="dig-label" for="shortName">Short name</label>--> <input id="shortName" class="greyFont" ng-model="currentClass.short_name" name="ClassName_short" ng-minlength="2" ng-maxlength="5" placeholder="Short name" required> </div> <hr> <p ng-show="CreateClassModal.ClassName_short.$dirty && CreateClassModal.ClassName_short.$error.minlength" class="help-block fixed-error-massage">Class short name is too short.</p> <p ng-show="CreateClassModal.ClassName_short.$dirty && CreateClassModal.ClassName_short.$error.maxlength" class="help-block fixed-error-massage">Class short name is too long.</p> <!--<p ng-show="CreateClassModal.ClassName_short.$dirty && CreateClassModal.ClassName_short.$error.required" class="help-block">Class short name is--> <!--required.</p>--> <p ng-show="submitted && CreateClassModal.ClassName_short.$error.required" class="help-block fixed-error-massage">Class short name is required.</p> <!--<p ng-show="CreateClassModal.ClassName_short.$invalid && !CreateClassModal.ClassName_short.$pristine"--> <!--class="help-block">Class short name is required.</p>--> <!-- ===== Location ===== --> <div class="dig-prop" style="justify-content: initial"> <img src="images/modal/location-grey.svg"> <!--<label class="dig-label" for="classLocation"><img src="images/modal/location-grey.svg" style="">Location</label>--> <input id="classLocation" class="locationInput greyFont" ng-model="currentClass.location" name="Class_location" ng-minlength="2" ng-maxlength="50" placeholder="Location"> </div> <hr> <p ng-show="CreateClassModal.Class_location.$dirty && CreateClassModal.Class_location.$error.minlength" class="help-block">Class location is too short.</p> <p ng-show="CreateClassModal.Class_location.$dirty && CreateClassModal.Class_location.$error.maxlength" class="help-block">Class location is too long.</p> <!--<p ng-show="CreateClassModal.Class_location.$dirty && CreateClassModal.Class_location.$error.required" class="help-block">Class location is required.</p>--> <!--<p ng-show="submitted && CreateClassModal.Class_location.$error.required" class="help-block">Class location is required.</p>--> </div> </div> <!-- ===== Class code ===== --> <div class="color" ng-show="userData.role ===\'teacher\'"> <h4 id="class-code-header">When enabled, students or parents have to enter the class code to join the class.</h4> <div class="choose-semester"> <div class="semester-prop"> <h4>Access with code</h4> <div class="onoffswitch"> <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked> <label class="onoffswitch-label" for="myonoffswitch" ng-click="functionHideCode()"> <span class="onoffswitch-inner {{userData.background}}"></span> <span class="onoffswitch-switch"></span> </label> </div> </div> <div class="semester-prop"> <h4>Class code</h4> <input ng-show="clickcount" class="{{userData.color}}" ng-model="currentClass.code" id="ClassCode" readonly> </div> <hr> </div> </div> </div> <!-- =============== Color &amp; Cover =======================--> <div class="sub-header"> <h3>Color &amp; Cover</h3> </div> <div class="colorcover"> <!-- ===== Class Color ===== --> <!--TODO show color on update--> <div class="color"> <h4>Class color</h4> <color-picker selected-color="currentClass.color" function-select-color="functionSelectColor"></color-picker> </div> <!-- ===== Add Cover Image ===== --> <div class="addImg"> <h4 ng-click="uploadPic(picFile)"> <img src="images/modal/icon-camera_3x.jpg" style="margin-right:10px;width: 16px;\r\n    height: 12px;margin-bottom: 1px"> Add Cover image</h4> <div class="uploadImg {{userData.color}}"> <div class="{{userData.border}} from-disk cursorPointer" name="pictureUpload" ngf-select ng-model="picFile" ngf-min-widht="240" ngf-min-height="160" ngf-max-size="5MB" ngf-resize="{width: 240, height: 160, centerCrop: true}" ngf-accept="\'image/*\'" valid-file> <img class="upload-pic" ng-src="{{userData.iconPlus}}" style="margin:9px"> <p> {{ data.src }}Upload picture</p></div> <!--<div class={{userData.border}}>--> <!--<img class="library-img" ng-src={{userData.iconCamera}} >--> <!--<p>Choose from library</p></div>--> <div ng-show="picFile " class="UploadedPicture" ngf-select ng-model="picFile" ngf-accept="\'image/*\'"> <img class="thumb" ngf-thumbnail="picFile"></div> </div> <div ng-show="picFile.progress >=0 && picFile.progress<100" style="position: absolute;width: 82px"> <progress-bar progress-number="progressNumber"></progress-bar> </div> <div class="upload-file-error"> <p style="color:red" class="help-block" ng-show="CreateClassModal.pictureUpload.$error.maxSize">\'Maximum picture size is 5 Mb</p> <p style="color:red" class="help-block" ng-show="CreateClassModal.pictureUpload.$error.minHeight">Minimum picture size is 240 x 160 pixels</p> <p style="color:red" class="help-block" ng-show="CreateClassModal.pictureUpload.$error.minWidth">Minimum picture size is 240 x 160 pixels</p> </div> <!--<div class="progress" ng-show="picFile.progress >=0 && picFile.progress<100" style = "position: absolute;width: 82px; margin-left: 34px;" ><div  class ="{{userData.background}}"  style="color:white; width:{{picFile.progress +\'%\'}};margin:0">{{picFile.progress+\'%\'}}</div></div>--> <!----> </div> </div> <!-- =============== Continue  =======================--> <div ng-hide="showContinue == 1"> <div class="sub-header ClossAddDataTime"> <h3></h3> </div> <div class="colorcover ClossAddDataTime"> <div class="color"> <div class="{{userData.color}}" id="CloseTime" style="display: flex"> <img ng-src="{{userData.iconAddButton}}" ng-click="showContinue=1"> <p>Add date &amp; time</p> </div> </div> </div> </div> <div ng-show="showContinue == 1" id="AddDateTime"> <!-- =============== Date =======================--> <div class="sub-header"> <h3>Date</h3> </div> <div class="colorcover"> <div class="color"> <h4 class="auto-archived">Class will be automatically archived 5 days after the end of the class date</h4> <div class="choose-semester"> <div class="dig-prop"> <label class="dig-label">Semester name</label> <custom-selector class="{{role + \'-color\'}}" options="semesterNames" selected-option="currentClass.semester.name"> </custom-selector> </div> <hr> <p ng-show="CreateClassModal.semester.$invalid && CreateClassModal.semester.$dirty || CreateClassModal.semester.$invalid && CreateClassModal.semester.$submitted" class="help-block">Your semester is required</p> <!-- TODO show date from scope on update--> <!-- ===== From ===== --> <div class="dig-prop"> <label class="dig-label">From</label> <!-- TODO must be format --> <input ng-model="dateForUpdate.from" class="{{userData.color}} datetimepickerMonthFrom text-right cursorPointer"> </div> <hr> <!-- ===== To ===== --> <div class="dig-prop"> <label class="dig-label">To</label> <input ng-model="dateForUpdate.to" class="{{userData.color}} datetimepickerMonthTo text-right cursorPointer"> </div> <hr> </div> </div> <!--<button ng-click=\'UploadAllFiles()\'>Upload</button>--> <!-- ===== Upload file ===== --> <div class="addImg" id="addImg"> <h4><img src="images/modal/icon-clip-gray.png" style="width: 10px; margin-right:10px; margin-bottom: 4px">Upload syllabus</h4> <div class="uploadImg {{userData.color}}"> <div style="margin: 0; !important" class="{{userData.border}} cursorPointer" name="uploadFile" ngf-select ng-model="UploadFile" ngf-max-size="25MB"> <img ng-src="{{userData.iconPlus}}" style="margin:9px"> <p id="uploadFile">Upload file</p> </div> <div class="UploadFiles"> <ul id="ListOfUploadFiles"> <li id="{{item.id}}" ng-repeat="item in ArrayOfUploadFiles "> <button ng-click="DeleteFileFromSyllabus($event)">x</button> {{item.name}} </li> <li class="progress" ng-show="UploadFile.progress >= 0 && UploadFile.progress<100" style="margin-top:{{UploadFileHeight+\'px\'}}; position:absolute; width:180px"> <progress-bar progress-number="progressNumber" style="margin:0; padding:0"></progress-bar> </li> <!--<li class="progress" ng-show="UploadFile.progress >= 0 && UploadFile.progress<100" style = "margin-top:{{UploadFileHeight+\'px\'}}; position:absolute; width:180px" ><div  class ="{{userData.background}}"  style="color:white; width:{{UploadFile.progress +\'%\'}};  margin:0">{{UploadFile.progress+\'%\'}}</div></li>--> <!----> </ul> </div> </div> <div class="upload-file-error"> <p style="color:red" class="help-block" ng-show="CreateClassModal.uploadFile.$error.maxSize">Incorrect file size</p> </div> </div> </div> <!-- =============== Time =======================--> <!-- TODO show time from scope on update--> <div class="sub-header"> <h3>Time</h3> </div> <div class="colorcover"> <create-class-time time="currentClass.time"></create-class-time> <p>{{createClassTime}}</p> </div> <!-- =============== Reminder =======================--> <div class="sub-header"> <h3>Reminder</h3> </div> <div class="colorcover reminder"> <div class="color"> <div class="choose-semester"> <div class="dig-prop"> <div class="dig-img"> <img src="images/modal/icon-bell_3x.png"> </div> <label class="dig-label">Set reminder</label> <custom-selector class="{{role + \'-color\'}}" options="options" selected-option="currentClass.reminder" bottom="1"> </custom-selector> </div> <hr> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn-cansel {{userData.color}}" type="button" ng-click="cancel()">Cancel </button> <p ng-show="invalidTimeMessage" class="error-message">Lesson duration should be higher than 30 min.</p> <p ng-show="showErrorMessage" class="error-message">Something went wrong</p> <button class="btn-createClass {{userData.background}}" type="submit" ng-click="submitted = true; ok()">{{$ctrl.modalConstant.buttonSubmit}} </button> </div> </form>'),a.put("scripts/directives/arrayOfColors/ArrayOfColorsTemplate.html",'<div class="color-picker-section"> <ul class="color-picker-ul"> <li ng-repeat="x in array_of_colors"> <div class="color-picker" id="{{x.id}}" style="background-color: {{x.color}}" ng-click="functionSelectColor(x.color)" check-attr="{{x.check}}"> <div ng-if="x.color === selectedColor" id="check"><div id="check-border"><div id="check-sign"></div></div></div> </div> </li> </ul> </div> <!--<div id="color-default">--> <!--<img src="../../../images/modal/icon-checked-color_3x.png"--> <!--style="position: absolute;--> <!--margin-top: -79px;--> <!--margin-left: 288px;">--> <!--<img src="../../../images/modal/icon-check-mark_3x.png"--> <!--style="position: absolute;--> <!--margin-top: -73px;--> <!--margin-left: 293px;">--> <!--</div>-->'),a.put("scripts/directives/arrayOfMembers/arrayOfMembers.html",'<div style="display: flex;justify-content: center"> <div ng-if="$index<3" ng-repeat="member in membersArray" class="vote-member"> <img ng-src="{{member.image || member.user.image}}"> </div> <div ng-show="(membersArray.length-3)>0" class="vote-member number-participants {{background}}">+{{membersArray.length -3}}</div> </div>'),a.put("scripts/directives/chooseUserRole/chooseUserRole.html",'<div class="choose-user-role"><div class="user-role outline"> <div ng-click="selectRole(r.url)" ng-repeat="r in roles" class="{{r.id}} outline" ng-class="{\'active {{\'role-\' + role}} {{\'c-\' + role}}\': selectedRole == r.url}"> {{r.description}} </div> </div> </div>'),a.put("scripts/directives/contextMenu/contextMenuTemplate.html",'<div class="context-menu" ng-show="contextMenu.items"> <div class="context-menu-item" ng-repeat="item in contextMenu.items" ng-show="item.active && !item.distinguished" ng-click="item.state && item.click(item.context)" ng-class="{\'context-menu-active\' : item.state == true}" ng-init="itemsrc = item.img" ng-mouseover="itemsrc = item.imgHover" ng-mouseout="itemsrc = item.img"> <a class="context-menu-button"> <img ng-if="item.state == false" class="context-menu-button-image" ng-src="{{item.imgDisabled}}"> <img ng-if="item.state == true" class="context-menu-button-image" ng-src="{{itemsrc}}"> <p class="context-menu-button-title" ng-class="item.state && \'{{userData.background}} {{currentUser.background}}\'" ng-style="item.state && {\'opacity\' : \'1\'}"> {{item.text}}</p> </a> </div> <div class="context-menu-item" ng-repeat="item in contextMenu.items" ng-show="item.active && item.distinguished" ng-click="item.state && item.click(item.context)" ng-class="{\'context-menu-active\' : item.state == true}" ng-init="itemsrc = item.img" ng-mouseover="itemsrc = item.imgHover" ng-mouseout="itemsrc = item.img"> <a class="context-menu-button"> <img ng-if="item.state == false" class="context-menu-button-image" ng-src="{{item.imgDisabled}}"> <img ng-if="item.state == true" class="context-menu-button-image" ng-src="{{itemsrc}}"> <p class="context-menu-button-title context-menu-button-title" ng-show="item.itemPicked == 1 || item.itemPicked == 2"> {{item.text}}</p> </a> </div> </div>'),a.put("scripts/directives/createClass/createClassTime.html",'<div> <div id="scedule"> <div class="repeat"> <p>Repeat</p> </div> <div> <ul class="listDays"> <li ng-repeat="day in createClassTimeData" id="{{day.day}}" ng-click="selectDay(day)" ng-class="{\'{{background}}\' : day.active}" selected-attr="{{day.active}}"> {{day.dayTitle}} </li> </ul> </div> <div id="arrayOfCheckedDays"> <ul class="ul-days"> <li ng-show="subday.active" class="ul-item" ng-repeat="(id, subday) in createClassTimeData"> <div class="checked-day" id="{{subday.day}}"> <p class="dayTitle">Every {{subday.fullDay}}</p> <div class="time-container"> <div class="dig-prop"> <label class="dig-label" for="{{\'from\' + subday.day}}">From</label> <input id="{{\'from\' + subday.day}}" type="text" class="time-input date datetimepicker {{\'c-\' + role}} cursorPointer" ng-model="subday.from"> </div> <!--<div uib-timepicker ng-model="mytime" ng-change="changed()" hour-step="1" minute-step="1" show-meridian="1"></div>--> <hr> </div> <div class="time-container"> <div class="dig-prop"> <label class="dig-label" for="{{\'to\' + subday.day}}">To</label> <input type="text" class="time-input date datetimepicker {{\'c-\' + role}} cursorPointer" id="{{\'to\' + subday.day}}" ng-model="subday.to"> </div> <hr> </div> </div> </li> </ul> </div> </div> </div>'),a.put("scripts/directives/customButton/floatingButtonTemplate.html",'<div id="datalist" ng-show="showlist"> <ul class="custom-button-ul"> <li ng-repeat="x in data.items" style="height: 42px !important"> <div> <p class="grey-bg"> {{x.text}}</p> <button class="button-inside" style="position: relative; overflow: hidden" ng-click="x.click(x.params || {}); CustomButtonClick()"> <img ng-src="{{x.img}}" class="basic-img"> <img class="img-hover" src="{{x.imgHover}}"> </button> </div> </li> </ul> </div> <!--<button class =\'custom_button\' ng-click = \'CustomButtonClick()\' ng-hide="dontDisplay" id = \'rotate_btn\'>--> <!--<div >+</div>--> <!--</button>--> <div ng-click="CustomButtonClick()" ng-hide="dontDisplay" class="rotate_btn" id="rotate_btn"><img src="images/floating-button.png"></div>'),a.put("scripts/directives/customSelector/customSelectorTemplate.html",'<div class="customSelector"> <div ng-show="showOptions" id="allOptionList{{$id}}" class="allOptionList"> <div class="selected-hover customOption" ng-repeat="option in options"> <span class="select-item" ng-click="functionPushValue(option.val, option.option)"> {{option.option}} </span> </div> </div> <div id="selectedArea"> <label ng-click="functionShowOptions()" id="customSelectorLabel">{{label}} <span id="selector-right-icon" class="glyphicon glyphicon-chevron-down"></span> </label> </div> </div>'),a.put("scripts/directives/customSwitcher/customSwitcher.html",'<div class="onoffswitch"> <input type="checkbox" name="multiSelect" class="onoffswitch-checkbox selected" id="{{switchId}}"> <label class="onoffswitch-label" for="{{switchId}}" ng-click="changeValue(switchId)"> <span class="onoffswitch-inner {{background}}"></span> <span class="onoffswitch-switch"></span> </label> </div>'),a.put("scripts/directives/distinguishedAdditionalInfo/distinguishedAditionalInfo.html",'<div class="distinguished-additional-info"> <div class="marks-cont" ng-if="marks"> <div class="title">Grades</div> <div class="class-menu-item student-parent-marks"> <nvd3 options="configDiagramMarks" data="dataForDiagramMarks"></nvd3> <div class="student-parent-marks-legend"> <div class="mark-table" ng-repeat="table in chunkedData  track by $index"> <div class="mark-item" ng-repeat="value in table  track by $index"> <span class="mark-rectangle" style="background-color: {{value.color}}"></span> <span>{{value.id}}</span> </div> </div> </div> </div> </div> <div class="marks-cont" ng-if="attendance"> <div class="title">Attendance</div> <div class="student-parent-behavior"> <div class="behavior-doughnut-legend"> <div class="student-behiviour-item"> <span class="behavior-rectangle" style="background-color: #1EA66D"></span> <span>Present</span> </div> <div class="student-behiviour-item"> <span class="behavior-rectangle" style="background-color: #F93640"></span> <span>Absent</span> </div> <div class="student-behiviour-item"> <span class="behavior-rectangle" style="background-color: #FFC600"></span> <span>Late</span> </div> </div> <div class="list-container"> <div class="behavior-doughnut-container" ng-repeat="element in attendanceDataByStudent track by $index"> <div>{{element.class}}</div> <div class="attendance-pie"> <div class="first-layer"></div> <div class="second-layer"></div> <div class="third-layer"></div> <div class="fourth-layer"></div> <canvas id="pieAttendance" class="chart chart-pie" chart-data="element.general" chart-hover="none" chart-legend="false" chart-labels="configChartAttendance.attendanceLabels" chart-options="configChartAttendance.options" chart-colors="configChartAttendance.attendanceBackgroundColor"> </canvas> </div> <div class="behavior-doughnut-title"> <span style="color: #1EA66D">{{element.present}}</span> <span style="color: #F93640">{{element.absent}}</span> <span style="color: #FFC600">{{element.late}}</span> </div> </div> </div> </div> <!--<div class="class-menu-item student-parent-marks">--> <!--<nvd3 options="configDiagramMarks" data="dataForDiagramMarks"></nvd3>--> <!--<div class="student-parent-marks-legend">--> <!--<div class="mark-table" ng-repeat="table in chunkedData  track by $index">--> <!--<div class="mark-item" ng-repeat="value in table  track by $index">--> <!--<span class="mark-rectangle" style="background-color: {{value.color}}"></span>--> <!--<span>{{value.id}}</span>--> <!--</div>--> <!--</div>--> <!--</div>--> <!--</div>--> </div> <!--<div class="class-menu-item-block-center">--> <!--<div class="class-menu-item-notexist"></div>--> <!--<div class="class-menu-item-exist" style="overflow-y: hidden">--> <!--</div>--> <!--</div>--> </div>'),a.put("scripts/directives/feedList/feedListTemplate.html",'<div ng-if="requesstInProgress"> <div class="loader"></div> </div> <ul class="feed-list" infinite-scroll="feeds.nextPage(feedUrl)" infinite-scroll-container="&quot;#feedList&quot;" infinite-scroll-disabled="feeds.busy" infinite-scroll-listen-for-event="list:filtered" infinite-scroll-distance="1"> <li ng-repeat="feed in feeds.items"> <div class="current-feed"> <!------------- Feed header ------------------> <div class="feed-header"> <div class="feed-header-info"> <div class="feed-header-img-container" style="background-image: url({{feed.owner.image}})"> </div> <div> <!-- <a data-id="{{feed.owner.id}}" href="#/findPeople" class="followItem-left" ng-click="showprofile(feed.owner)">--> <div class="feed-header-name">{{feed.owner.first_name}} {{feed.owner.last_name}} <span> @ {{feed.owner.first_name}}</span></div> <div class="feed-header-date">{{getFinishTime(feed.created_at.date )}} ago</div> <!-- </a>--> </div> </div> <div class="controll-button" ng-show="feed.owner.id===userId"> <button class="btn-default btn"><img src="images/events/controll-button.svg"></button> <div class="inside-menu dropdown-menu"> <!--<div class="menu-option" ng-click="editFeed()" >Edit</div>--> <div class="menu-option" ng-click="deleteFeed(feed)">Delete</div> </div> </div> </div> <!------------- End Feed header ------------------> <!------------- Feed content ------------------> <div class="feed-content"> <div class="feed-content-data" ng-if="feed.file"> <div class="feed-content-data-img" ng-if="feed.type_file===1"> <img ng-src="{{feed.file.link}}" width="100%" height="auto"> </div> <div class="feed-content-data-video" ng-if="feed.type_file===2"> <video width="100%" height="auto" controls> <source ng-src="{{feed.file.link}}"> Your browser does not support the video. </source></video> </div> <div class="feed-content-data-link" ng-if="feed.type_file===3"> <a class="{{userData.color}}" target="_self" href="{{feed.file.link}}" download="feed.file.filename"> <img ng-src="{{iconAddLink}}"> {{feed.file.filename}} </a> </div> </div> <div class="feed-content-link" ng-if="feed.link && !feed.youtube"> <a ng-href="{{showFeedLinkFunction(feed.link)}}" target="_blank" class="{{userData.color}}">{{feed.link}}</a> </div> <div class="feed-content-link" ng-if="feed.link && feed.youtube" style="display: flex; justify-content: center"> <youtube-video video-id="feed.link"></youtube-video> </div> <div class="feed-content-text">{{feed.content}}</div> </div> <!------------- End Feed content ------------------> <div class="feed-feedback"> <div class="feed-likes"> <img ng-if="!feed.is_liked" src="images/feed/icon-likes.svg" ng-click="addLikeFunction(feed)"> <img ng-if="feed.is_liked" src="images/feed/icon-liked.svg" ng-click="addLikeFunction(feed)"> {{feed.likes}} </div> <div class="feed-comment" ng-click="openModalAddComment(feed)"> <img ng-if="!feed.is_comment || feed.comments.data.length===0" src="images/feed/icon-comments.svg"> <img ng-if="feed.is_comment  && feed.comments.data.length>0 " src="images/feed/icon-commented.svg"> {{feed.comments.data.length}}</div> </div> <div class="feed-comments"> <div class="comment" ng-repeat="comment in feed.comments.data" ng-if="$index<2 || showComment"> <div class="comment-info"> <div class="comment-owner">{{comment.owner.first_name}} {{comment.owner.last_name}} </div> <div class="comment-content">{{comment.content}}</div> </div> <div class="del-comment-button" ng-click="deleteFeedComment(comment,feed.comments.data, feed.comments_count )" ng-show="comment.owner.id===userId">x</div> </div> <div class="showComments" ng-click="showCommentsFunction()" ng-if="!showComment && feed.comments.data.length>2">Show more comments</div> <div class="showComments" ng-click="hideCommentsFunction()" ng-if="showComment && feed.comments.data.length>2 ">Hide comments</div> </div> </div> </li> </ul>'),a.put("scripts/directives/listOfGradableItems/listOfGradableItems.html",'<div class="class-menu-item-block-right-header {{userData.color}}"> <h3 class="{{\'c-\' + role}}">GRADABLE ITEMS</h3> </div> <div class="gradable-items-not-exist" ng-show="false"> <div class="student-info"> <div class="no-gradable-items"> <img src="images/grades/grades.svg"> <p>You have no gradable items yet.</p> </div> </div> </div> <div class="gradable-items-not-exist" ng-show="true" style="height: 65vh;overflow: auto; padding: 10px 0"> <div ng-repeat="gradableItem in listOfGradableItems"> <div class="gradable-item"> <div class="gradable-item-information"> <div class="gradable-item-name">{{gradableItem.name}}</div> <div class="gradable-item-data"> <div class="gradable-item-category">{{gradableItem.category}}</div> <div class="gradable-item-max-grade">Max Grade {{gradableItem.max_grade}}</div> </div> </div> <div class="gradable-item-weight">{{gradableItem.weight}} % </div> <div> <div class="controll-button"> <button class="btn-default btn"><img src="images/events/controll-button.svg"></button> <div class="inside-menu dropdown-menu"> <div class="menu-option" ng-click="editGradableItem(gradableItem,$index)">Edit</div> <div class="menu-option" ng-click="deleteGradableItem(gradableItem,$index)">Delete</div> </div> </div> </div> </div> <hr> </div> </div>'),
a.put("scripts/directives/progressBarDirective/progressBarDirective.html",'<div class="progress" style="width: 100% ;margin:0;padding:0"> <div class="{{background}}" style="color:white; width:{{10+progressNumber +\'%\'}};text-align: center; margin: 0"> <span style="float: left; margin-left:5px">{{currentText}}</span> <span> {{progressNumber+\'%\'}}</span> </div> </div>'),a.put("scripts/directives/selectUsers/selectUsersTemplate.html",'<div class="modal-section"> <div class="sub-header select-users" ng-show="showMembersHeader"> <h3 class="select-users-modal-subtitle">SELECT {{memberRole}}</h3> <div class="select-users-select-all"> <div class="custom-toggle {{\'c-\' + role}}" ng-show="memberRole==\'students\'"> <input ng-click="selectAll(\'users\')" type="checkbox" ng-model="allSelected" id="select-all"> <label for="select-all"><span class="{{\'c-\' + role}}" style="padding-right: 30px;margin-right: -30px">Select All</span></label> </div> <div class="custom-toggle" ng-show="memberRole==\'parents\'"> <input ng-click="selectAll(\'parents\')" type="checkbox" ng-model="allSelectedParent" id="select-all-parent"> <label for="select-all-parent"><span class="{{\'c-\' + role}}" style="padding-right: 30px;margin-right: -30px">Select All</span></label> </div> </div> </div> <div id="user-list" class="user-list"> <div ng-click="selectUser(user)" class="user" ng-repeat="user in filteredItems = (users.items | filter: {type: userRole, class: classToSortBy})"> <div class="row margin padding"> <div class="padding col-lg-2 col-md-2 col-sm-2 col-xs-2"> <div class="user-img-right-block-general-info" style="width: 42px; height: 42px" ng-class="{\'{{\'border-bg-\'+role}}\': selectedUsers[user.id]}" ng-style="{\'background-image\':\'url({{user.image}})\'}"></div> </div> <div class="padding col-lg-10 col-md-10 col-sm-10 col-xs-10"> <p class="name">{{user.first_name + \' \' + user.last_name}} <span ng-show="selectedUsers[user.id]" style="float: right" class="glyphicon glyphicon-ok {{ \'c-\' + role}}"></span> </p> </div> </div> </div> <div ng-hide="filteredItems.length || users.busy" style="text-align: center">no results</div> <div id="user-loader" class="loader" style="display: none"></div> </div> </div>'),a.put("scripts/directives/settingsClassList/settingsClassList.html",'<div class="settings-class-list-container"> <div ng-repeat="class in classList" class="settings-class-list" ng-click="selectClass(class)"> <div class="settings-class-list-item"> <div class="class-image-container" style="background-image: url({{class.image}})"> </div> <div class="settings-class-name">{{class.name}}</div> </div> </div> </div>'),a.put("scripts/directives/userAdditionalInfo/userAdditionalInfoTemplate.html",'<div class="user-additional-info"> <div class="class-menu-item-block-right-body" ng-if="!requesstInProgress"> <div class="info-container" ng-if="userInformation.details.data.phone"> <div class="item-info-label">Phone</div> <div class="item-info">{{userInformation.details.data.phone}}</div> </div> <div class="info-container"> <div class="item-info-label">Email</div> <div class="item-info">{{userInformation.email}}</div> </div> <div class="info-container"> <div class="item-info-label">User name</div> <div class="item-info">{{userInformation.details.data.first_name}}</div> </div> <div class="info-container"> <div class="item-info-label">School</div> <div class="item-info">{{userInformation.details.data.school_name}}</div> </div> <div class="info-container"> <div class="item-info-label">City</div> <div class="item-info">{{userInformation.details.data.city}}</div> </div> <div class="info-container"> <div class="item-info-label">Country</div> <div class="item-info">{{userInformation.details.data.country}}</div> </div> </div> <div ng-if="userInformation.role===\'student\' && userInformation.parents.data.length>0" class="class-menu-item-block-right-body"> <h3 class="parent-title"> Parent</h3> <div ng-repeat="parent in userInformation.parents.data"> <div class="main-parent-block"> <div class="parents-ava" style="background-image: url({{parent.photo}})"></div> <div class="main-parent-block-name"> <div class="info-container"> <div class="item-info-label">First Name</div> <div class="item-info">{{parent.first_name}}</div> </div> <div class="info-container"> <div class="item-info-label">Last Name</div> <div class="item-info">{{parent.last_name}}</div> </div> </div> </div> <div class="info-container" ng-if="parent.phone"> <div class="item-info-label">Phone</div> <div class="item-info">{{parent.phone}}</div> </div> <div class="info-container"> <div class="item-info-label">Email</div> <div class="item-info">{{parent.email}}</div> </div> </div> </div> </div>'),a.put("scripts/directives/userInfo/userInfoTemplate.html",'<div ng-if="requesstInProgress"> <div class="loader"></div> </div> <div class="class-menu-item-block-right-header {{userData.profileBackground}}" ng-if="!requesstInProgress" style="display: block !important"> <div class="main-user-data"> <div class="main-user-data-item" style="min-height: 30px;\r\n    display: flex;\r\n    font-size: 15px;\r\n    justify-content: space-between;\r\n    padding: 0 5%;\r\n    align-items: center"> <div ng-if="userInformation.details.data.need_aid"><img src="images/students/aid.png"> Need aid</div> <div ng-if="userInformation.details.data.concern"><img src="images/students/concern.png" style="height: 14px;\r\n    margin-bottom: 2px"> Concern</div> </div> <div class="main-user-data-item user-data-ava"> <div ng-class="{\'second-border\':userInformation.role==\'student\'&& userInformation.parents.data.length>1}"> <div ng-class="{\'first-border\':userInformation.role==\'student\'&& userInformation.parents.data.length>0}"> <div class="user-ava-container" style="background-image: url({{userInformation.details.data.photo}})"> </div> <div ng-if="userInformation.role==\'student\'&& userInformation.parents.data.length>0" class="user-ava-container user-first-addition-ava" style="background-image: url({{userInformation.parents.data[0].photo}})"></div> </div> <div ng-if="userInformation.role==\'student\'&& userInformation.parents.data.length>1" class="user-ava-container user-second-addition-ava" style="background-image: url({{userInformation.parents.data[1].photo}})"></div> </div> </div> <div class="main-user-data-item user-data-info"> <div style="font-size: 26px !important">{{userInformation.details.data.first_name}} {{userInformation.details.data.last_name}}</div> <!--<div></div>--> <div ng-if="userInformation.details.data.school_name" class="user-data-info-location"><img src="images/location.png">{{userInformation.details.data.school_name}}</div> <div ng-if="userInformation.details.data.city" style="font-size: 11px" class="user-data-info-location">{{userInformation.details.data.city}}, {{userInformation.details.data.country}}</div> </div> </div> <div class="additional-user-data"> <div class="additional-user-data-item" id="add-user_info" ng-click="switchAddUserInfo()"> <div class="count">{{userStatistic.countActivity}}</div> <div class="description {{userData.color}}">Activity</div> </div> <div class="additional-user-data-item" id="followers" ng-click="switchUserFollowers()"> <div class="count">{{userStatistic.countSubscribers}}</div> <div class="description {{userData.color}}">Followers</div> </div> <div class="additional-user-data-item" id="user-follow" ng-click="switchUserFollow()"> <div class="count">{{userStatistic.countFollows}}</div> <div class="description {{userData.color}}">Follow</div> </div> </div> </div> <div class="container_user-additional-info" ng-show="showUserInfo"> <user-additional-info user-information="userInformation" ng-if="!requesstInProgress && showAdditionalInfo"></user-additional-info> <distinguished-additional-info user-information="userInformation" ng-if="!requesstInProgress && showDistinguishedAdditionalInfo"></distinguished-additional-info> </div> <div class="container_user-followers" ng-show="showUserFollowers"> <ul class="user-follow_list"> <li ng-repeat="user in followersList track by $index" class="followItem"> <a data-id="{{user.user_id}}" ng-href="#/findPeople" class="followItem-left" ng-click="show(user)"> <div class="user-img" style="background-image: url({{user.image}})"></div> <div class="">{{user.first_name}} {{user.last_name}} <span>@{{user.first_name}}</span></div> </a> <a href="#" class="followItem-right" ng-if="user.is_follower===false" ng-click="followUser(\'POST\',user, $index)">Follow</a> <div href="#" class="followItem-right following" ng-if="user.is_follower===true"> <span class="following-text">Following</span> <span class="unfollow-text" ng-click="unfollow(user, $index); user.is_follower===false ">Unfollow</span> </div> </li> </ul> </div> <div class="container_user-follow" ng-show="showUserFollow"> <ul class="user-follow_list"> <li ng-repeat="user in followList track by $index" class="followItem" data-id="{{user.user_id}}" class="find-people-item"> <a data-id="{{user.user_id}}" href="#/findPeople" class="followItem-left" ng-click="show(user)"> <div class="user-img" style="background-image: url({{user.image}})"></div> <div class="">{{user.first_name}} {{user.last_name}} <span>@{{user.first_name}}</span></div> </a> <a href="#" class="followItem-right following" ng-click="unfollow(user, $index)"> <span class="following-text">Following</span> <span class="unfollow-text">Unfollow</span> </a> </li> </ul> </div>')}]);